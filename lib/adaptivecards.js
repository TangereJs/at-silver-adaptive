(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["AdaptiveCards"] = factory();
	else
		root["AdaptiveCards"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/adaptivecards.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/adaptivecards.ts":
/*!******************************!*\
  !*** ./src/adaptivecards.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__exportStar(__webpack_require__(/*! ./serialization */ "./src/serialization.ts"), exports);
__exportStar(__webpack_require__(/*! ./registry */ "./src/registry.ts"), exports);
__exportStar(__webpack_require__(/*! ./card-object */ "./src/card-object.ts"), exports);
__exportStar(__webpack_require__(/*! ./card-elements */ "./src/card-elements.ts"), exports);
__exportStar(__webpack_require__(/*! ./enums */ "./src/enums.ts"), exports);
__exportStar(__webpack_require__(/*! ./host-config */ "./src/host-config.ts"), exports);
__exportStar(__webpack_require__(/*! ./shared */ "./src/shared.ts"), exports);
__exportStar(__webpack_require__(/*! ./utils */ "./src/utils.ts"), exports);
__exportStar(__webpack_require__(/*! ./strings */ "./src/strings.ts"), exports);


/***/ }),

/***/ "./src/card-elements.ts":
/*!******************************!*\
  !*** ./src/card-elements.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SerializationContext = exports.GlobalRegistry = exports.AdaptiveCard = exports.ContainerWithActions = exports.ColumnSet = exports.Column = exports.Container = exports.BackgroundImage = exports.StylableCardElementContainer = exports.ActionSet = exports.ShowCardAction = exports.HttpAction = exports.HttpHeader = exports.ToggleVisibilityAction = exports.OpenUrlAction = exports.SubmitAction = exports.Action = exports.TimeInput = exports.TimeProperty = exports.DateInput = exports.NumberInput = exports.ChoiceSetInput = exports.Choice = exports.ToggleInput = exports.TextInput = exports.Input = exports.Media = exports.MediaSource = exports.ImageSet = exports.CardElementContainer = exports.Image = exports.FactSet = exports.Fact = exports.RichTextBlock = exports.TextRun = exports.TextBlock = exports.BaseTextBlock = exports.ActionProperty = exports.CardElement = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var host_config_1 = __webpack_require__(/*! ./host-config */ "./src/host-config.ts");
var TextFormatters = __webpack_require__(/*! ./text-formatters */ "./src/text-formatters.ts");
var card_object_1 = __webpack_require__(/*! ./card-object */ "./src/card-object.ts");
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var registry_1 = __webpack_require__(/*! ./registry */ "./src/registry.ts");
var strings_1 = __webpack_require__(/*! ./strings */ "./src/strings.ts");
var CardElement = /** @class */ (function (_super) {
    __extends(CardElement, _super);
    function CardElement() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._truncatedDueToOverflow = false;
        return _this;
    }
    Object.defineProperty(CardElement.prototype, "lang", {
        get: function () {
            var lang = this.getValue(CardElement.langProperty);
            if (lang) {
                return lang;
            }
            else {
                if (this.parent) {
                    return this.parent.lang;
                }
                else {
                    return undefined;
                }
            }
        },
        set: function (value) {
            this.setValue(CardElement.langProperty, value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isVisible", {
        get: function () {
            return this.getValue(CardElement.isVisibleProperty);
        },
        set: function (value) {
            // If the element is going to be hidden, reset any changes that were due
            // to overflow truncation (this ensures that if the element is later
            // un-hidden it has the right content)
            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && !value) {
                this.undoOverflowTruncation();
            }
            if (this.isVisible !== value) {
                this.setValue(CardElement.isVisibleProperty, value);
                this.updateRenderedElementVisibility();
                if (this._renderedElement) {
                    raiseElementVisibilityChangedEvent(this);
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    CardElement.prototype.internalRenderSeparator = function () {
        var renderedSeparator = Utils.renderSeparation(this.hostConfig, {
            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),
            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,
            lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined
        }, this.separatorOrientation);
        if (shared_1.GlobalSettings.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {
            // Adjust separator's margins if the option to always bleed separators is turned on
            var parentContainer = this.getParentContainer();
            if (parentContainer && parentContainer.getEffectivePadding()) {
                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());
                renderedSeparator.style.marginLeft = "-" + parentPhysicalPadding.left + "px";
                renderedSeparator.style.marginRight = "-" + parentPhysicalPadding.right + "px";
            }
        }
        return renderedSeparator;
    };
    CardElement.prototype.updateRenderedElementVisibility = function () {
        var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : "none";
        if (this._renderedElement) {
            if (displayMode) {
                this._renderedElement.style.display = displayMode;
            }
            else {
                this._renderedElement.style.removeProperty("display");
            }
        }
        if (this._separatorElement) {
            if (this.parent && this.parent.isFirstElement(this)) {
                this._separatorElement.style.display = "none";
            }
            else {
                if (displayMode) {
                    this._separatorElement.style.display = displayMode;
                }
                else {
                    this._separatorElement.style.removeProperty("display");
                }
            }
        }
    };
    CardElement.prototype.hideElementDueToOverflow = function () {
        if (this._renderedElement && this.isVisible) {
            this._renderedElement.style.visibility = "hidden";
            this.isVisible = false;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    CardElement.prototype.showElementHiddenDueToOverflow = function () {
        if (this._renderedElement && !this.isVisible) {
            this._renderedElement.style.removeProperty("visibility");
            this.isVisible = true;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.handleOverflow = function (maxHeight) {
        if (this.isVisible || this.isHiddenDueToOverflow()) {
            var handled = this.truncateOverflow(maxHeight);
            // Even if we were unable to truncate the element to fit this time,
            // it still could have been previously truncated
            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;
            if (!handled) {
                this.hideElementDueToOverflow();
            }
            else if (handled && !this.isVisible) {
                this.showElementHiddenDueToOverflow();
            }
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.resetOverflow = function () {
        var sizeChanged = false;
        if (this._truncatedDueToOverflow) {
            this.undoOverflowTruncation();
            this._truncatedDueToOverflow = false;
            sizeChanged = true;
        }
        if (this.isHiddenDueToOverflow()) {
            this.showElementHiddenDueToOverflow();
        }
        return sizeChanged;
    };
    CardElement.prototype.createPlaceholderElement = function () {
        var styleDefinition = this.getEffectiveStyleDefinition();
        var foregroundCssColor = Utils.stringToCssColor(styleDefinition.foregroundColors.default.subtle);
        var element = document.createElement("div");
        element.style.border = "1px dashed " + foregroundCssColor;
        element.style.padding = "4px";
        element.style.minHeight = "32px";
        element.style.fontSize = "10px";
        element.style.color = foregroundCssColor;
        element.innerText = "Empty " + this.getJsonTypeName();
        return element;
    };
    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {
        if (this.height === "auto") {
            renderedElement.style.flex = "0 0 auto";
        }
        else {
            renderedElement.style.flex = "1 1 auto";
        }
    };
    CardElement.prototype.isDisplayed = function () {
        return this._renderedElement !== undefined && this.isVisible && this._renderedElement.offsetHeight > 0;
    };
    CardElement.prototype.overrideInternalRender = function () {
        return this.internalRender();
    };
    CardElement.prototype.applyPadding = function () {
        if (this.separatorElement) {
            if (shared_1.GlobalSettings.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {
                var padding = new shared_1.PaddingDefinition();
                this.getImmediateSurroundingPadding(padding);
                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
                this.separatorElement.style.marginLeft = "-" + physicalPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + physicalPadding.right + "px";
            }
            else {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    /*
     * Called when this element overflows the bottom of the card.
     * maxHeight will be the amount of space still available on the card (0 if
     * the element is fully off the card).
     */
    CardElement.prototype.truncateOverflow = function (maxHeight) {
        // Child implementations should return true if the element handled
        // the truncation request such that its content fits within maxHeight,
        // false if the element should fall back to being hidden
        return false;
    };
    /*
     * This should reverse any changes performed in truncateOverflow().
     */
    CardElement.prototype.undoOverflowTruncation = function () { };
    CardElement.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition();
    };
    CardElement.prototype.getHasBackground = function () {
        return false;
    };
    CardElement.prototype.getPadding = function () {
        return this._padding;
    };
    CardElement.prototype.setPadding = function (value) {
        this._padding = value;
    };
    CardElement.prototype.shouldSerialize = function (context) {
        return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;
    };
    Object.defineProperty(CardElement.prototype, "useDefaultSizing", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "allowCustomPadding", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Horizontal;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "defaultStyle", {
        get: function () {
            return Enums.ContainerStyle.Default;
        },
        enumerable: false,
        configurable: true
    });
    CardElement.prototype.parse = function (source, context) {
        _super.prototype.parse.call(this, source, context ? context : new SerializationContext());
    };
    CardElement.prototype.toJSON = function (context) {
        return _super.prototype.toJSON.call(this, context ? context : new SerializationContext());
    };
    CardElement.prototype.asString = function () {
        return "";
    };
    CardElement.prototype.isBleeding = function () {
        return false;
    };
    CardElement.prototype.getEffectiveStyle = function () {
        if (this.parent) {
            return this.parent.getEffectiveStyle();
        }
        return this.defaultStyle;
    };
    CardElement.prototype.getEffectiveStyleDefinition = function () {
        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());
    };
    CardElement.prototype.getForbiddenActionTypes = function () {
        return [];
    };
    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {
        if (processTop === void 0) { processTop = true; }
        if (processRight === void 0) { processRight = true; }
        if (processBottom === void 0) { processBottom = true; }
        if (processLeft === void 0) { processLeft = true; }
        if (this.parent) {
            var doProcessTop = processTop && this.parent.isTopElement(this);
            var doProcessRight = processRight && this.parent.isRightMostElement(this);
            var doProcessBottom = processBottom && this.parent.isBottomElement(this);
            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);
            var effectivePadding = this.parent.getEffectivePadding();
            if (effectivePadding) {
                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {
                    result.top = effectivePadding.top;
                    doProcessTop = false;
                }
                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {
                    result.right = effectivePadding.right;
                    doProcessRight = false;
                }
                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {
                    result.bottom = effectivePadding.bottom;
                    doProcessBottom = false;
                }
                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {
                    result.left = effectivePadding.left;
                    doProcessLeft = false;
                }
            }
            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {
                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);
            }
        }
    };
    CardElement.prototype.getActionCount = function () {
        return 0;
    };
    CardElement.prototype.getActionAt = function (index) {
        throw new Error(strings_1.Strings.errors.indexOutOfRange(index));
    };
    CardElement.prototype.remove = function () {
        if (this.parent && this.parent instanceof CardElementContainer) {
            return this.parent.removeItem(this);
        }
        return false;
    };
    CardElement.prototype.render = function () {
        this._renderedElement = this.overrideInternalRender();
        this._separatorElement = this.internalRenderSeparator();
        if (this._renderedElement) {
            if (this.customCssSelector) {
                this._renderedElement.classList.add(this.customCssSelector);
            }
            this._renderedElement.style.boxSizing = "border-box";
            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display ? this._renderedElement.style.display : undefined;
            this.adjustRenderedElementSize(this._renderedElement);
            this.updateLayout(false);
        }
        else if (this.isDesignMode()) {
            this._renderedElement = this.createPlaceholderElement();
        }
        return this._renderedElement;
    };
    CardElement.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        this.updateRenderedElementVisibility();
        this.applyPadding();
    };
    CardElement.prototype.indexOf = function (cardElement) {
        return -1;
    };
    CardElement.prototype.isDesignMode = function () {
        var rootElement = this.getRootElement();
        return rootElement instanceof AdaptiveCard && rootElement.designMode;
    };
    CardElement.prototype.isFirstElement = function (element) {
        return true;
    };
    CardElement.prototype.isLastElement = function (element) {
        return true;
    };
    CardElement.prototype.isAtTheVeryLeft = function () {
        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;
    };
    CardElement.prototype.isAtTheVeryRight = function () {
        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;
    };
    CardElement.prototype.isAtTheVeryTop = function () {
        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;
    };
    CardElement.prototype.isAtTheVeryBottom = function () {
        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;
    };
    CardElement.prototype.isBleedingAtTop = function () {
        return false;
    };
    CardElement.prototype.isBleedingAtBottom = function () {
        return false;
    };
    CardElement.prototype.isLeftMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isRightMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isTopElement = function (element) {
        return this.isFirstElement(element);
    };
    CardElement.prototype.isBottomElement = function (element) {
        return this.isLastElement(element);
    };
    CardElement.prototype.isHiddenDueToOverflow = function () {
        return this._renderedElement !== undefined && this._renderedElement.style.visibility == 'hidden';
    };
    CardElement.prototype.getRootElement = function () {
        return this.getRootObject();
    };
    CardElement.prototype.getParentContainer = function () {
        var currentElement = this.parent;
        while (currentElement) {
            if (currentElement instanceof Container) {
                return currentElement;
            }
            currentElement = currentElement.parent;
        }
        return undefined;
    };
    CardElement.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        return [];
    };
    CardElement.prototype.getResourceInformation = function () {
        return [];
    };
    CardElement.prototype.getElementById = function (id) {
        return this.id === id ? this : undefined;
    };
    CardElement.prototype.getActionById = function (id) {
        return undefined;
    };
    CardElement.prototype.getEffectivePadding = function () {
        var padding = this.getPadding();
        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();
    };
    Object.defineProperty(CardElement.prototype, "hostConfig", {
        get: function () {
            if (this._hostConfig) {
                return this._hostConfig;
            }
            else {
                if (this.parent) {
                    return this.parent.hostConfig;
                }
                else {
                    return host_config_1.defaultHostConfig;
                }
            }
        },
        set: function (value) {
            this._hostConfig = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "index", {
        get: function () {
            if (this.parent) {
                return this.parent.indexOf(this);
            }
            else {
                return 0;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInteractive", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isStandalone", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInline", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.separatorElement) {
                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());
            }
            else {
                return false;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorElement", {
        get: function () {
            return this._separatorElement;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    CardElement.langProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "lang", true, /^[a-z]{2,3}$/ig);
    CardElement.isVisibleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "isVisible", true);
    CardElement.separatorProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "separator", false);
    CardElement.heightProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_1, "height", [
        { value: "auto" },
        { value: "stretch" }
    ], "auto");
    CardElement.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "horizontalAlignment", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);
    CardElement.spacingProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "spacing", Enums.Spacing, Enums.Spacing.Default);
    __decorate([
        serialization_1.property(CardElement.horizontalAlignmentProperty)
    ], CardElement.prototype, "horizontalAlignment", void 0);
    __decorate([
        serialization_1.property(CardElement.spacingProperty)
    ], CardElement.prototype, "spacing", void 0);
    __decorate([
        serialization_1.property(CardElement.separatorProperty)
    ], CardElement.prototype, "separator", void 0);
    __decorate([
        serialization_1.property(CardElement.heightProperty)
    ], CardElement.prototype, "height", void 0);
    __decorate([
        serialization_1.property(CardElement.langProperty)
    ], CardElement.prototype, "lang", null);
    __decorate([
        serialization_1.property(CardElement.isVisibleProperty)
    ], CardElement.prototype, "isVisible", null);
    return CardElement;
}(card_object_1.CardObject));
exports.CardElement = CardElement;
var ActionProperty = /** @class */ (function (_super) {
    __extends(ActionProperty, _super);
    function ActionProperty(targetVersion, name, forbiddenActionTypes) {
        if (forbiddenActionTypes === void 0) { forbiddenActionTypes = []; }
        var _this = _super.call(this, targetVersion, name, undefined) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.forbiddenActionTypes = forbiddenActionTypes;
        return _this;
    }
    ActionProperty.prototype.parse = function (sender, source, context) {
        var parent = sender;
        return context.parseAction(parent, source[this.name], this.forbiddenActionTypes, parent.isDesignMode());
    };
    ActionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined);
    };
    return ActionProperty;
}(serialization_1.PropertyDefinition));
exports.ActionProperty = ActionProperty;
var BaseTextBlock = /** @class */ (function (_super) {
    __extends(BaseTextBlock, _super);
    function BaseTextBlock(text) {
        var _this = _super.call(this) || this;
        _this.size = Enums.TextSize.Default;
        _this.weight = Enums.TextWeight.Default;
        _this.color = Enums.TextColor.Default;
        _this.isSubtle = false;
        _this.ariaHidden = false;
        if (text) {
            _this.text = text;
        }
        return _this;
    }
    BaseTextBlock.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        // selectAction is declared on BaseTextBlock but is only exposed on TextRun,
        // so the property is removed from the BaseTextBlock schema.
        schema.remove(BaseTextBlock.selectActionProperty);
    };
    Object.defineProperty(BaseTextBlock.prototype, "text", {
        get: function () {
            return this.getValue(BaseTextBlock.textProperty);
        },
        set: function (value) {
            this.setText(value);
        },
        enumerable: false,
        configurable: true
    });
    //#endregion
    BaseTextBlock.prototype.getFontSize = function (fontType) {
        switch (this.size) {
            case Enums.TextSize.Small:
                return fontType.fontSizes.small;
            case Enums.TextSize.Medium:
                return fontType.fontSizes.medium;
            case Enums.TextSize.Large:
                return fontType.fontSizes.large;
            case Enums.TextSize.ExtraLarge:
                return fontType.fontSizes.extraLarge;
            default:
                return fontType.fontSizes.default;
        }
    };
    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {
        switch (color) {
            case Enums.TextColor.Accent:
                return colorSet.accent;
            case Enums.TextColor.Dark:
                return colorSet.dark;
            case Enums.TextColor.Light:
                return colorSet.light;
            case Enums.TextColor.Good:
                return colorSet.good;
            case Enums.TextColor.Warning:
                return colorSet.warning;
            case Enums.TextColor.Attention:
                return colorSet.attention;
            default:
                return colorSet.default;
        }
    };
    BaseTextBlock.prototype.setText = function (value) {
        this.setValue(BaseTextBlock.textProperty, value);
    };
    BaseTextBlock.prototype.init = function (textDefinition) {
        this.size = textDefinition.size;
        this.weight = textDefinition.weight;
        this.color = textDefinition.color;
        this.isSubtle = textDefinition.isSubtle;
    };
    BaseTextBlock.prototype.asString = function () {
        return this.text;
    };
    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {
        var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);
        if (fontType.fontFamily) {
            targetElement.style.fontFamily = fontType.fontFamily;
        }
        var fontSize;
        switch (this.size) {
            case Enums.TextSize.Small:
                fontSize = fontType.fontSizes.small;
                break;
            case Enums.TextSize.Medium:
                fontSize = fontType.fontSizes.medium;
                break;
            case Enums.TextSize.Large:
                fontSize = fontType.fontSizes.large;
                break;
            case Enums.TextSize.ExtraLarge:
                fontSize = fontType.fontSizes.extraLarge;
                break;
            default:
                fontSize = fontType.fontSizes.default;
                break;
        }
        targetElement.style.fontSize = fontSize + "px";
        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);
        var fontWeight;
        switch (this.weight) {
            case Enums.TextWeight.Lighter:
                fontWeight = fontType.fontWeights.lighter;
                break;
            case Enums.TextWeight.Bolder:
                fontWeight = fontType.fontWeights.bolder;
                break;
            default:
                fontWeight = fontType.fontWeights.default;
                break;
        }
        targetElement.style.fontWeight = fontWeight.toString();
        if (this.ariaHidden) {
            targetElement.setAttribute("aria-hidden", "true");
        }
    };
    Object.defineProperty(BaseTextBlock.prototype, "effectiveColor", {
        get: function () {
            return this.color ? this.color : Enums.TextColor.Default;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    BaseTextBlock.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "text", true);
    BaseTextBlock.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "size", Enums.TextSize, Enums.TextSize.Default);
    BaseTextBlock.weightProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "weight", Enums.TextWeight, Enums.TextWeight.Default);
    BaseTextBlock.colorProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "color", Enums.TextColor, Enums.TextColor.Default);
    BaseTextBlock.isSubtleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isSubtle", false);
    BaseTextBlock.fontTypeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "fontType", Enums.FontType);
    BaseTextBlock.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(BaseTextBlock.sizeProperty)
    ], BaseTextBlock.prototype, "size", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.weightProperty)
    ], BaseTextBlock.prototype, "weight", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.colorProperty)
    ], BaseTextBlock.prototype, "color", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.fontTypeProperty)
    ], BaseTextBlock.prototype, "fontType", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.isSubtleProperty)
    ], BaseTextBlock.prototype, "isSubtle", void 0);
    __decorate([
        serialization_1.property(BaseTextBlock.textProperty)
    ], BaseTextBlock.prototype, "text", null);
    __decorate([
        serialization_1.property(BaseTextBlock.selectActionProperty)
    ], BaseTextBlock.prototype, "selectAction", void 0);
    return BaseTextBlock;
}(CardElement));
exports.BaseTextBlock = BaseTextBlock;
var TextBlock = /** @class */ (function (_super) {
    __extends(TextBlock, _super);
    function TextBlock() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.wrap = false;
        _this._treatAsPlainText = true;
        _this.useMarkdown = true;
        return _this;
    }
    TextBlock.prototype.restoreOriginalContent = function () {
        if (this.renderedElement !== undefined) {
            if (this.maxLines && this.maxLines > 0) {
                this.renderedElement.style.maxHeight = this._computedLineHeight * this.maxLines + "px";
            }
            this.renderedElement.innerHTML = this._originalInnerHtml;
        }
    };
    TextBlock.prototype.truncateIfSupported = function (maxHeight) {
        if (this.renderedElement !== undefined) {
            // For now, only truncate TextBlocks that contain just a single
            // paragraph -- since the maxLines calculation doesn't take into
            // account Markdown lists
            var children = this.renderedElement.children;
            var isTextOnly = !children.length;
            var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';
            if (truncationSupported) {
                var element = isTextOnly ? this.renderedElement : children[0];
                Utils.truncate(element, maxHeight, this._computedLineHeight);
                return true;
            }
        }
        return false;
    };
    TextBlock.prototype.setText = function (value) {
        _super.prototype.setText.call(this, value);
        this._processedText = undefined;
    };
    TextBlock.prototype.internalRender = function () {
        var _this = this;
        this._processedText = undefined;
        if (this.text) {
            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);
            var hostConfig = this.hostConfig;
            var element = void 0;
            if (this.forElementId) {
                var labelElement = document.createElement("label");
                labelElement.htmlFor = this.forElementId;
                element = labelElement;
            }
            else {
                element = document.createElement("div");
            }
            element.classList.add(hostConfig.makeCssClassName("ac-textBlock"));
            element.style.overflow = "hidden";
            this.applyStylesTo(element);
            if (this.selectAction) {
                element.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.selectAction) {
                        _this.selectAction.execute();
                    }
                };
                if (hostConfig.supportsInteractivity) {
                    element.tabIndex = 0;
                    element.setAttribute("role", this.selectAction.getAriaRole());
                    if (this.selectAction.title) {
                        element.setAttribute("aria-label", this.selectAction.title);
                    }
                    element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
                }
            }
            if (!this._processedText) {
                this._treatAsPlainText = true;
                var formattedText = TextFormatters.formatText(this.lang, preProcessedText);
                if (this.useMarkdown && formattedText) {
                    if (shared_1.GlobalSettings.allowMarkForTextHighlighting) {
                        formattedText = formattedText.replace(/<mark>/g, "===").replace(/<\/mark>/g, "/==/");
                    }
                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);
                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {
                        this._processedText = markdownProcessingResult.outputHtml;
                        this._treatAsPlainText = false;
                        // Only process <mark> tag if markdown processing was applied because
                        // markdown processing is also responsible for sanitizing the input string
                        if (shared_1.GlobalSettings.allowMarkForTextHighlighting && this._processedText) {
                            var markStyle = "";
                            var effectiveStyle = this.getEffectiveStyleDefinition();
                            if (effectiveStyle.highlightBackgroundColor) {
                                markStyle += "background-color: " + effectiveStyle.highlightBackgroundColor + ";";
                            }
                            if (effectiveStyle.highlightForegroundColor) {
                                markStyle += "color: " + effectiveStyle.highlightForegroundColor + ";";
                            }
                            if (markStyle) {
                                markStyle = 'style="' + markStyle + '"';
                            }
                            this._processedText = this._processedText.replace(/===/g, "<mark " + markStyle + ">").replace(/\/==\//g, "</mark>");
                        }
                    }
                    else {
                        this._processedText = formattedText;
                        this._treatAsPlainText = true;
                    }
                }
                else {
                    this._processedText = formattedText;
                    this._treatAsPlainText = true;
                }
            }
            if (!this._processedText) {
                this._processedText = "";
            }
            if (this._treatAsPlainText) {
                element.innerText = this._processedText;
            }
            else {
                element.innerHTML = this._processedText;
            }
            if (element.firstElementChild instanceof HTMLElement) {
                var firstElementChild = element.firstElementChild;
                firstElementChild.style.marginTop = "0px";
                firstElementChild.style.width = "100%";
                if (!this.wrap) {
                    firstElementChild.style.overflow = "hidden";
                    firstElementChild.style.textOverflow = "ellipsis";
                }
            }
            if (element.lastElementChild instanceof HTMLElement) {
                element.lastElementChild.style.marginBottom = "0px";
            }
            var anchors = element.getElementsByTagName("a");
            for (var i = 0; i < anchors.length; i++) {
                var anchor = anchors[i];
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    if (raiseAnchorClickedEvent(_this, e.target)) {
                        e.preventDefault();
                        e.cancelBubble = true;
                    }
                };
            }
            if (this.wrap) {
                element.style.wordWrap = "break-word";
                if (this.maxLines && this.maxLines > 0) {
                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + "px";
                    element.style.overflow = "hidden";
                }
            }
            else {
                element.style.whiteSpace = "nowrap";
                element.style.textOverflow = "ellipsis";
            }
            if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation || shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
                this._originalInnerHtml = element.innerHTML;
            }
            return element;
        }
        else {
            return undefined;
        }
    };
    TextBlock.prototype.truncateOverflow = function (maxHeight) {
        if (maxHeight >= this._computedLineHeight) {
            return this.truncateIfSupported(maxHeight);
        }
        return false;
    };
    TextBlock.prototype.undoOverflowTruncation = function () {
        this.restoreOriginalContent();
        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {
            var maxHeight = this._computedLineHeight * this.maxLines;
            this.truncateIfSupported(maxHeight);
        }
    };
    TextBlock.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        var parentContainer = this.getParentContainer();
        var isRtl = parentContainer ? parentContainer.isRtl() : false;
        switch (this.horizontalAlignment) {
            case Enums.HorizontalAlignment.Center:
                targetElement.style.textAlign = "center";
                break;
            case Enums.HorizontalAlignment.Right:
                targetElement.style.textAlign = isRtl ? "left" : "right";
                break;
            default:
                targetElement.style.textAlign = isRtl ? "right" : "left";
                break;
        }
        var lineHeights = this.hostConfig.lineHeights;
        if (lineHeights) {
            switch (this.size) {
                case Enums.TextSize.Small:
                    this._computedLineHeight = lineHeights.small;
                    break;
                case Enums.TextSize.Medium:
                    this._computedLineHeight = lineHeights.medium;
                    break;
                case Enums.TextSize.Large:
                    this._computedLineHeight = lineHeights.large;
                    break;
                case Enums.TextSize.ExtraLarge:
                    this._computedLineHeight = lineHeights.extraLarge;
                    break;
                default:
                    this._computedLineHeight = lineHeights.default;
                    break;
            }
        }
        else {
            // Looks like 1.33 is the magic number to compute line-height
            // from font size.
            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;
        }
        targetElement.style.lineHeight = this._computedLineHeight + "px";
    };
    TextBlock.prototype.getJsonTypeName = function () {
        return "TextBlock";
    };
    TextBlock.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = false; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {
            // Reset the element's innerHTML in case the available room for
            // content has increased
            this.restoreOriginalContent();
            this.truncateIfSupported(this._computedLineHeight * this.maxLines);
        }
    };
    TextBlock.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "wrap", false);
    TextBlock.maxLinesProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "maxLines");
    __decorate([
        serialization_1.property(TextBlock.wrapProperty)
    ], TextBlock.prototype, "wrap", void 0);
    __decorate([
        serialization_1.property(TextBlock.maxLinesProperty)
    ], TextBlock.prototype, "maxLines", void 0);
    return TextBlock;
}(BaseTextBlock));
exports.TextBlock = TextBlock;
var TextRun = /** @class */ (function (_super) {
    __extends(TextRun, _super);
    function TextRun() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.italic = false;
        _this.strikethrough = false;
        _this.highlight = false;
        _this.underline = false;
        return _this;
    }
    TextRun.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.add(BaseTextBlock.selectActionProperty);
    };
    //#endregion
    TextRun.prototype.internalRender = function () {
        var _this = this;
        if (this.text) {
            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);
            var hostConfig = this.hostConfig;
            var formattedText = TextFormatters.formatText(this.lang, preProcessedText);
            if (!formattedText) {
                formattedText = "";
            }
            var element = document.createElement("span");
            element.classList.add(hostConfig.makeCssClassName("ac-textRun"));
            this.applyStylesTo(element);
            if (this.selectAction && hostConfig.supportsInteractivity) {
                var anchor = document.createElement("a");
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                var href = this.selectAction.getHref();
                anchor.href = href ? href : "";
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.selectAction) {
                        _this.selectAction.execute();
                    }
                };
                anchor.innerText = formattedText;
                element.appendChild(anchor);
            }
            else {
                element.innerText = formattedText;
            }
            return element;
        }
        else {
            return undefined;
        }
    };
    TextRun.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        if (this.italic) {
            targetElement.style.fontStyle = "italic";
        }
        if (this.strikethrough) {
            targetElement.style.textDecoration = "line-through";
        }
        if (this.highlight) {
            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);
        }
        if (this.underline) {
            targetElement.style.textDecoration = "underline";
        }
    };
    TextRun.prototype.getJsonTypeName = function () {
        return "TextRun";
    };
    Object.defineProperty(TextRun.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextRun.prototype, "isInline", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    TextRun.italicProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "italic", false);
    TextRun.strikethroughProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "strikethrough", false);
    TextRun.highlightProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "highlight", false);
    TextRun.underlineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, "underline", false);
    __decorate([
        serialization_1.property(TextRun.italicProperty)
    ], TextRun.prototype, "italic", void 0);
    __decorate([
        serialization_1.property(TextRun.strikethroughProperty)
    ], TextRun.prototype, "strikethrough", void 0);
    __decorate([
        serialization_1.property(TextRun.highlightProperty)
    ], TextRun.prototype, "highlight", void 0);
    __decorate([
        serialization_1.property(TextRun.underlineProperty)
    ], TextRun.prototype, "underline", void 0);
    return TextRun;
}(BaseTextBlock));
exports.TextRun = TextRun;
var RichTextBlock = /** @class */ (function (_super) {
    __extends(RichTextBlock, _super);
    function RichTextBlock() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._inlines = [];
        return _this;
    }
    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {
        if (forceAdd === void 0) { forceAdd = false; }
        if (!inline.isInline) {
            throw new Error(strings_1.Strings.errors.elementCannotBeUsedAsInline());
        }
        var doAdd = inline.parent === undefined || forceAdd;
        if (!doAdd && inline.parent != this) {
            throw new Error(strings_1.Strings.errors.inlineAlreadyParented());
        }
        else {
            inline.setParent(this);
            this._inlines.push(inline);
        }
    };
    RichTextBlock.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._inlines = [];
        if (Array.isArray(source["inlines"])) {
            for (var _i = 0, _a = source["inlines"]; _i < _a.length; _i++) {
                var jsonInline = _a[_i];
                var inline = void 0;
                if (typeof jsonInline === "string") {
                    var textRun = new TextRun();
                    textRun.text = jsonInline;
                    inline = textRun;
                }
                else {
                    // No fallback for inlines in 1.2
                    inline = context.parseElement(this, jsonInline, false);
                }
                if (inline) {
                    this.internalAddInline(inline, true);
                }
            }
        }
    };
    RichTextBlock.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        if (this._inlines.length > 0) {
            var jsonInlines = [];
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                jsonInlines.push(inline.toJSON(context));
            }
            context.serializeValue(target, "inlines", jsonInlines);
        }
    };
    RichTextBlock.prototype.internalRender = function () {
        if (this._inlines.length > 0) {
            var element = void 0;
            if (this.forElementId) {
                var labelElement = document.createElement("label");
                labelElement.htmlFor = this.forElementId;
                element = labelElement;
            }
            else {
                element = document.createElement("div");
            }
            element.className = this.hostConfig.makeCssClassName("ac-richTextBlock");
            var parentContainer = this.getParentContainer();
            var isRtl = parentContainer ? parentContainer.isRtl() : false;
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.textAlign = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.textAlign = isRtl ? "left" : "right";
                    break;
                default:
                    element.style.textAlign = isRtl ? "right" : "left";
                    break;
            }
            var renderedInlines = 0;
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                var renderedInline = inline.render();
                if (renderedInline) {
                    element.appendChild(renderedInline);
                    renderedInlines++;
                }
            }
            if (renderedInlines > 0) {
                return element;
            }
        }
        return undefined;
    };
    RichTextBlock.prototype.asString = function () {
        var result = "";
        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
            var inline = _a[_i];
            result += inline.asString();
        }
        return result;
    };
    RichTextBlock.prototype.getJsonTypeName = function () {
        return "RichTextBlock";
    };
    RichTextBlock.prototype.getInlineCount = function () {
        return this._inlines.length;
    };
    RichTextBlock.prototype.getInlineAt = function (index) {
        if (index >= 0 && index < this._inlines.length) {
            return this._inlines[index];
        }
        else {
            throw new Error(strings_1.Strings.errors.indexOutOfRange(index));
        }
    };
    RichTextBlock.prototype.addInline = function (inline) {
        if (typeof inline === "string") {
            this.internalAddInline(new TextRun(inline));
        }
        else {
            this.internalAddInline(inline);
        }
    };
    RichTextBlock.prototype.removeInline = function (inline) {
        var index = this._inlines.indexOf(inline);
        if (index >= 0) {
            this._inlines[index].setParent(undefined);
            this._inlines.splice(index, 1);
            return true;
        }
        return false;
    };
    return RichTextBlock;
}(CardElement));
exports.RichTextBlock = RichTextBlock;
var Fact = /** @class */ (function (_super) {
    __extends(Fact, _super);
    function Fact(name, value) {
        var _this = _super.call(this) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    //#endregion
    Fact.prototype.getSchemaKey = function () {
        return "Fact";
    };
    //#region Schema
    Fact.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Fact.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(Fact.titleProperty)
    ], Fact.prototype, "name", void 0);
    __decorate([
        serialization_1.property(Fact.valueProperty)
    ], Fact.prototype, "value", void 0);
    return Fact;
}(serialization_1.SerializableObject));
exports.Fact = Fact;
var FactSet = /** @class */ (function (_super) {
    __extends(FactSet, _super);
    function FactSet() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(FactSet.prototype, "useDefaultSizing", {
        //#endregion
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    FactSet.prototype.internalRender = function () {
        var element = undefined;
        var hostConfig = this.hostConfig;
        if (this.facts.length > 0) {
            element = document.createElement("table");
            element.style.borderWidth = "0px";
            element.style.borderSpacing = "0px";
            element.style.borderStyle = "none";
            element.style.borderCollapse = "collapse";
            element.style.display = "block";
            element.style.overflow = "hidden";
            element.classList.add(hostConfig.makeCssClassName("ac-factset"));
            element.setAttribute("role", "presentation");
            for (var i = 0; i < this.facts.length; i++) {
                var trElement = document.createElement("tr");
                if (i > 0) {
                    trElement.style.marginTop = hostConfig.factSet.spacing + "px";
                }
                // Title column
                var tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-title"));
                if (hostConfig.factSet.title.maxWidth) {
                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + "px";
                }
                tdElement.style.verticalAlign = "top";
                var textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = (!this.facts[i].name && this.isDesignMode()) ? "Title" : this.facts[i].name;
                textBlock.size = hostConfig.factSet.title.size;
                textBlock.color = hostConfig.factSet.title.color;
                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;
                textBlock.weight = hostConfig.factSet.title.weight;
                textBlock.wrap = hostConfig.factSet.title.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                // Spacer column
                tdElement = document.createElement("td");
                tdElement.style.width = "10px";
                Utils.appendChild(trElement, tdElement);
                // Value column
                tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.style.verticalAlign = "top";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-value"));
                textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = this.facts[i].value;
                textBlock.size = hostConfig.factSet.value.size;
                textBlock.color = hostConfig.factSet.value.color;
                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;
                textBlock.weight = hostConfig.factSet.value.weight;
                textBlock.wrap = hostConfig.factSet.value.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                Utils.appendChild(element, trElement);
            }
        }
        return element;
    };
    FactSet.prototype.getJsonTypeName = function () {
        return "FactSet";
    };
    //#region Schema
    FactSet.factsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "facts", Fact);
    __decorate([
        serialization_1.property(FactSet.factsProperty)
    ], FactSet.prototype, "facts", void 0);
    return FactSet;
}(CardElement));
exports.FactSet = FactSet;
var ImageDimensionProperty = /** @class */ (function (_super) {
    __extends(ImageDimensionProperty, _super);
    function ImageDimensionProperty(targetVersion, name, internalName) {
        var _this = _super.call(this, targetVersion, name) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.internalName = internalName;
        return _this;
    }
    ImageDimensionProperty.prototype.getInternalName = function () {
        return this.internalName;
    };
    ImageDimensionProperty.prototype.parse = function (sender, source, context) {
        var result = undefined;
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.defaultValue;
        }
        var isValid = false;
        if (typeof sourceValue === "string") {
            try {
                var size = shared_1.SizeAndUnit.parse(sourceValue, true);
                if (size.unit == Enums.SizeUnit.Pixel) {
                    result = size.physicalSize;
                    isValid = true;
                }
            }
            catch (_a) {
                // Do nothing. A parse error is emitted below
            }
        }
        if (!isValid) {
            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));
        }
        return result;
    };
    ImageDimensionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, typeof value === "number" && !isNaN(value) ? value + "px" : undefined);
    };
    return ImageDimensionProperty;
}(serialization_1.PropertyDefinition));
var Image = /** @class */ (function (_super) {
    __extends(Image, _super);
    function Image() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.size = Enums.Size.Auto;
        _this.style = Enums.ImageStyle.Default;
        return _this;
    }
    Image.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.remove(CardElement.heightProperty);
    };
    //#endregion
    Image.prototype.applySize = function (element) {
        if (this.pixelWidth || this.pixelHeight) {
            if (this.pixelWidth) {
                element.style.width = this.pixelWidth + "px";
            }
            if (this.pixelHeight) {
                element.style.height = this.pixelHeight + "px";
            }
        }
        else {
            if (this.maxHeight) {
                // If the image is constrained in height, we set its height property and
                // auto and stretch are ignored (default to medium). THis is necessary for
                // ImageSet which uses a maximum image height as opposed to the cards width
                // as a constraining dimension
                switch (this.size) {
                    case Enums.Size.Small:
                        element.style.height = this.hostConfig.imageSizes.small + "px";
                        break;
                    case Enums.Size.Large:
                        element.style.height = this.hostConfig.imageSizes.large + "px";
                        break;
                    default:
                        element.style.height = this.hostConfig.imageSizes.medium + "px";
                        break;
                }
                element.style.maxHeight = this.maxHeight + "px";
            }
            else {
                switch (this.size) {
                    case Enums.Size.Stretch:
                        element.style.width = "100%";
                        break;
                    case Enums.Size.Auto:
                        element.style.maxWidth = "100%";
                        break;
                    case Enums.Size.Small:
                        element.style.width = this.hostConfig.imageSizes.small + "px";
                        break;
                    case Enums.Size.Large:
                        element.style.width = this.hostConfig.imageSizes.large + "px";
                        break;
                    case Enums.Size.Medium:
                        element.style.width = this.hostConfig.imageSizes.medium + "px";
                        break;
                }
                element.style.maxHeight = "100%";
            }
        }
    };
    Object.defineProperty(Image.prototype, "useDefaultSizing", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Image.prototype.internalRender = function () {
        var _this = this;
        var element = undefined;
        if (this.url) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.alignItems = "flex-start";
            element.onkeypress = function (e) {
                if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            element.onclick = function (e) {
                if (_this.selectAction) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            // Cache hostConfig to avoid walking the parent hierarchy multiple times
            var hostConfig = this.hostConfig;
            var imageElement = document.createElement("img");
            imageElement.onload = function (e) {
                raiseImageLoadedEvent(_this);
            };
            imageElement.onerror = function (e) {
                if (_this.renderedElement) {
                    var card = _this.getRootElement();
                    _this.renderedElement.innerHTML = "";
                    if (card && card.designMode) {
                        var errorElement = document.createElement("div");
                        errorElement.style.display = "flex";
                        errorElement.style.alignItems = "center";
                        errorElement.style.justifyContent = "center";
                        errorElement.style.backgroundColor = "#EEEEEE";
                        errorElement.style.color = "black";
                        errorElement.innerText = ":-(";
                        errorElement.style.padding = "10px";
                        _this.applySize(errorElement);
                        _this.renderedElement.appendChild(errorElement);
                    }
                }
                raiseImageLoadedEvent(_this);
            };
            imageElement.style.minWidth = "0";
            imageElement.classList.add(hostConfig.makeCssClassName("ac-image"));
            if (this.selectAction !== undefined && hostConfig.supportsInteractivity) {
                imageElement.tabIndex = 0;
                imageElement.setAttribute("role", this.selectAction.getAriaRole());
                if (this.selectAction.title) {
                    imageElement.setAttribute("aria-label", this.selectAction.title);
                }
                imageElement.classList.add(hostConfig.makeCssClassName("ac-selectable"));
            }
            this.applySize(imageElement);
            if (this.style === Enums.ImageStyle.Person) {
                imageElement.style.borderRadius = "50%";
                imageElement.style.backgroundPosition = "50% 50%";
                imageElement.style.backgroundRepeat = "no-repeat";
            }
            imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);
            imageElement.src = this.preProcessPropertyValue(Image.urlProperty);
            var altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);
            if (altTextProperty) {
                imageElement.alt = altTextProperty;
            }
            element.appendChild(imageElement);
        }
        return element;
    };
    Image.prototype.getJsonTypeName = function () {
        return "Image";
    };
    Image.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.selectAction) {
            result = this.selectAction.getActionById(id);
        }
        return result;
    };
    Image.prototype.getResourceInformation = function () {
        return this.url ? [{ url: this.url, mimeType: "image" }] : [];
    };
    Image.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    Image.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "altText");
    Image.backgroundColorProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "backgroundColor");
    Image.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "style", Enums.ImageStyle, Enums.ImageStyle.Default);
    Image.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "size", Enums.Size, Enums.Size.Auto);
    Image.pixelWidthProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, "width", "pixelWidth");
    Image.pixelHeightProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, "height", "pixelHeight");
    Image.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(Image.urlProperty)
    ], Image.prototype, "url", void 0);
    __decorate([
        serialization_1.property(Image.altTextProperty)
    ], Image.prototype, "altText", void 0);
    __decorate([
        serialization_1.property(Image.backgroundColorProperty)
    ], Image.prototype, "backgroundColor", void 0);
    __decorate([
        serialization_1.property(Image.sizeProperty)
    ], Image.prototype, "size", void 0);
    __decorate([
        serialization_1.property(Image.styleProperty)
    ], Image.prototype, "style", void 0);
    __decorate([
        serialization_1.property(Image.pixelWidthProperty)
    ], Image.prototype, "pixelWidth", void 0);
    __decorate([
        serialization_1.property(Image.pixelHeightProperty)
    ], Image.prototype, "pixelHeight", void 0);
    __decorate([
        serialization_1.property(Image.selectActionProperty)
    ], Image.prototype, "selectAction", void 0);
    return Image;
}(CardElement));
exports.Image = Image;
var CardElementContainer = /** @class */ (function (_super) {
    __extends(CardElementContainer, _super);
    function CardElementContainer() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.allowVerticalOverflow = false;
        return _this;
    }
    CardElementContainer.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        if (!this.isSelectable) {
            schema.remove(CardElementContainer.selectActionProperty);
        }
    };
    //#endregion
    CardElementContainer.prototype.isElementAllowed = function (element) {
        return this.hostConfig.supportsInteractivity || !element.isInteractive;
    };
    CardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new shared_1.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        this.renderedElement.style.marginRight = "0";
        this.renderedElement.style.marginLeft = "0";
    };
    Object.defineProperty(CardElementContainer.prototype, "isSelectable", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    CardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        for (var i = 0; i < this.getItemCount(); i++) {
            var item = this.getItemAt(i);
            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {
                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());
            }
            if (!this.isElementAllowed(item)) {
                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(item.getJsonTypeName()));
            }
            item.internalValidateProperties(context);
        }
        if (this._selectAction) {
            this._selectAction.internalValidateProperties(context);
        }
    };
    CardElementContainer.prototype.render = function () {
        var _this = this;
        var element = _super.prototype.render.call(this);
        if (element) {
            var hostConfig = this.hostConfig;
            if (this.allowVerticalOverflow) {
                element.style.overflowX = "hidden";
                element.style.overflowY = "auto";
            }
            if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {
                element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
                element.tabIndex = 0;
                element.setAttribute("role", this._selectAction.getAriaRole());
                if (this._selectAction.title) {
                    element.setAttribute("aria-label", this._selectAction.title);
                }
                element.onclick = function (e) {
                    if (_this._selectAction !== undefined) {
                        e.preventDefault();
                        e.cancelBubble = true;
                        _this._selectAction.execute();
                    }
                };
                element.onkeypress = function (e) {
                    if (_this._selectAction !== undefined && (e.keyCode == 13 || e.keyCode == 32)) {
                        // Enter or space pressed
                        e.preventDefault();
                        e.cancelBubble = true;
                        _this._selectAction.execute();
                    }
                };
            }
        }
        return element;
    };
    CardElementContainer.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (processChildren) {
            for (var i = 0; i < this.getItemCount(); i++) {
                this.getItemAt(i).updateLayout();
            }
        }
    };
    CardElementContainer.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getAllInputs(processActions));
        }
        return result;
    };
    CardElementContainer.prototype.getResourceInformation = function () {
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getResourceInformation());
        }
        return result;
    };
    CardElementContainer.prototype.getElementById = function (id) {
        var result = _super.prototype.getElementById.call(this, id);
        if (!result) {
            for (var i = 0; i < this.getItemCount(); i++) {
                result = this.getItemAt(i).getElementById(id);
                if (result) {
                    break;
                }
            }
        }
        return result;
    };
    CardElementContainer.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "selectAction", ["Action.ShowCard"]);
    __decorate([
        serialization_1.property(CardElementContainer.selectActionProperty)
    ], CardElementContainer.prototype, "_selectAction", void 0);
    return CardElementContainer;
}(CardElement));
exports.CardElementContainer = CardElementContainer;
var ImageSet = /** @class */ (function (_super) {
    __extends(ImageSet, _super);
    function ImageSet() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._images = [];
        _this.imageSize = Enums.ImageSize.Medium;
        return _this;
    }
    //#endregion
    ImageSet.prototype.internalRender = function () {
        var element = undefined;
        if (this._images.length > 0) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.flexWrap = "wrap";
            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {
                var image = _a[_i];
                switch (this.imageSize) {
                    case Enums.ImageSize.Small:
                        image.size = Enums.Size.Small;
                        break;
                    case Enums.ImageSize.Large:
                        image.size = Enums.Size.Large;
                        break;
                    default:
                        image.size = Enums.Size.Medium;
                        break;
                }
                image.maxHeight = this.hostConfig.imageSet.maxImageHeight;
                var renderedImage = image.render();
                if (renderedImage) {
                    renderedImage.style.display = "inline-flex";
                    renderedImage.style.margin = "0px";
                    renderedImage.style.marginRight = "10px";
                    Utils.appendChild(element, renderedImage);
                }
            }
        }
        return element;
    };
    ImageSet.prototype.getItemCount = function () {
        return this._images.length;
    };
    ImageSet.prototype.getItemAt = function (index) {
        return this._images[index];
    };
    ImageSet.prototype.getFirstVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[0] : undefined;
    };
    ImageSet.prototype.getLastVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : undefined;
    };
    ImageSet.prototype.removeItem = function (item) {
        if (item instanceof Image) {
            var itemIndex = this._images.indexOf(item);
            if (itemIndex >= 0) {
                this._images.splice(itemIndex, 1);
                item.setParent(undefined);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ImageSet.prototype.getJsonTypeName = function () {
        return "ImageSet";
    };
    ImageSet.prototype.addImage = function (image) {
        if (!image.parent) {
            this._images.push(image);
            image.setParent(this);
        }
        else {
            throw new Error("This image already belongs to another ImageSet");
        }
    };
    ImageSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;
    };
    ImageSet.imagesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "images", Image, function (sender, item) { item.setParent(sender); });
    ImageSet.imageSizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "imageSize", Enums.ImageSize, Enums.ImageSize.Medium);
    __decorate([
        serialization_1.property(ImageSet.imagesProperty)
    ], ImageSet.prototype, "_images", void 0);
    __decorate([
        serialization_1.property(ImageSet.imageSizeProperty)
    ], ImageSet.prototype, "imageSize", void 0);
    return ImageSet;
}(CardElementContainer));
exports.ImageSet = ImageSet;
var MediaSource = /** @class */ (function (_super) {
    __extends(MediaSource, _super);
    function MediaSource(url, mimeType) {
        var _this = _super.call(this) || this;
        _this.url = url;
        _this.mimeType = mimeType;
        return _this;
    }
    //#endregion
    MediaSource.prototype.getSchemaKey = function () {
        return "MediaSource";
    };
    MediaSource.prototype.isValid = function () {
        return this.mimeType && this.url ? true : false;
    };
    MediaSource.prototype.render = function () {
        var result = undefined;
        if (this.isValid()) {
            result = document.createElement("source");
            result.src = this.url;
            result.type = this.mimeType;
        }
        return result;
    };
    //#region Schema
    MediaSource.mimeTypeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "mimeType");
    MediaSource.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "url");
    __decorate([
        serialization_1.property(MediaSource.mimeTypeProperty)
    ], MediaSource.prototype, "mimeType", void 0);
    __decorate([
        serialization_1.property(MediaSource.urlProperty)
    ], MediaSource.prototype, "url", void 0);
    return MediaSource;
}(serialization_1.SerializableObject));
exports.MediaSource = MediaSource;
var Media = /** @class */ (function (_super) {
    __extends(Media, _super);
    function Media() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.sources = [];
        return _this;
    }
    Media.prototype.getPosterUrl = function () {
        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;
    };
    Media.prototype.processSources = function () {
        this._selectedSources = [];
        this._selectedMediaType = undefined;
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];
            if (mimeComponents.length == 2) {
                if (!this._selectedMediaType) {
                    var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);
                    if (index >= 0) {
                        this._selectedMediaType = Media.supportedMediaTypes[index];
                    }
                }
                if (mimeComponents[0] == this._selectedMediaType) {
                    this._selectedSources.push(source);
                }
            }
        }
    };
    Media.prototype.renderPoster = function () {
        var _this = this;
        var playButtonArrowWidth = 12;
        var playButtonArrowHeight = 15;
        var posterRootElement = document.createElement("div");
        posterRootElement.className = this.hostConfig.makeCssClassName("ac-media-poster");
        posterRootElement.setAttribute("role", "contentinfo");
        posterRootElement.setAttribute("aria-label", this.altText ? this.altText : "Media content");
        posterRootElement.style.position = "relative";
        posterRootElement.style.display = "flex";
        var posterUrl = this.getPosterUrl();
        if (posterUrl) {
            var posterImageElement_1 = document.createElement("img");
            posterImageElement_1.style.width = "100%";
            posterImageElement_1.style.height = "100%";
            posterImageElement_1.onerror = function (e) {
                if (posterImageElement_1.parentNode) {
                    posterImageElement_1.parentNode.removeChild(posterImageElement_1);
                }
                posterRootElement.classList.add("empty");
                posterRootElement.style.minHeight = "150px";
            };
            posterImageElement_1.src = posterUrl;
            posterRootElement.appendChild(posterImageElement_1);
        }
        else {
            posterRootElement.classList.add("empty");
            posterRootElement.style.minHeight = "150px";
        }
        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {
            var playButtonOuterElement = document.createElement("div");
            playButtonOuterElement.tabIndex = 0;
            playButtonOuterElement.setAttribute("role", "button");
            playButtonOuterElement.setAttribute("aria-label", "Play media");
            playButtonOuterElement.className = this.hostConfig.makeCssClassName("ac-media-playButton");
            playButtonOuterElement.style.display = "flex";
            playButtonOuterElement.style.alignItems = "center";
            playButtonOuterElement.style.justifyContent = "center";
            playButtonOuterElement.onclick = function (e) {
                if (_this.hostConfig.media.allowInlinePlayback) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    if (_this.renderedElement) {
                        var mediaPlayerElement = _this.renderMediaPlayer();
                        _this.renderedElement.innerHTML = "";
                        _this.renderedElement.appendChild(mediaPlayerElement);
                        mediaPlayerElement.play();
                    }
                }
                else {
                    if (Media.onPlay) {
                        e.preventDefault();
                        e.cancelBubble = true;
                        Media.onPlay(_this);
                    }
                }
            };
            var playButtonInnerElement = document.createElement("div");
            playButtonInnerElement.className = this.hostConfig.makeCssClassName("ac-media-playButton-arrow");
            playButtonInnerElement.style.width = playButtonArrowWidth + "px";
            playButtonInnerElement.style.height = playButtonArrowHeight + "px";
            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + "px";
            playButtonInnerElement.style.borderRightWidth = "0";
            playButtonInnerElement.style.borderStyle = "solid";
            playButtonInnerElement.style.borderTopColor = "transparent";
            playButtonInnerElement.style.borderRightColor = "transparent";
            playButtonInnerElement.style.borderBottomColor = "transparent";
            playButtonInnerElement.style.transform = "translate(" + (playButtonArrowWidth / 10) + "px,0px)";
            playButtonOuterElement.appendChild(playButtonInnerElement);
            var playButtonContainer = document.createElement("div");
            playButtonContainer.style.position = "absolute";
            playButtonContainer.style.left = "0";
            playButtonContainer.style.top = "0";
            playButtonContainer.style.width = "100%";
            playButtonContainer.style.height = "100%";
            playButtonContainer.style.display = "flex";
            playButtonContainer.style.justifyContent = "center";
            playButtonContainer.style.alignItems = "center";
            playButtonContainer.appendChild(playButtonOuterElement);
            posterRootElement.appendChild(playButtonContainer);
        }
        return posterRootElement;
    };
    Media.prototype.renderMediaPlayer = function () {
        var mediaElement;
        if (this._selectedMediaType == "video") {
            var videoPlayer = document.createElement("video");
            var posterUrl = this.getPosterUrl();
            if (posterUrl) {
                videoPlayer.poster = posterUrl;
            }
            mediaElement = videoPlayer;
        }
        else {
            mediaElement = document.createElement("audio");
        }
        mediaElement.setAttribute("webkit-playsinline", "");
        mediaElement.setAttribute("playsinline", "");
        mediaElement.autoplay = true;
        mediaElement.controls = true;
        if (Utils.isMobileOS()) {
            mediaElement.muted = true;
        }
        mediaElement.preload = "none";
        mediaElement.style.width = "100%";
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var renderedSource = source.render();
            Utils.appendChild(mediaElement, renderedSource);
        }
        return mediaElement;
    };
    Media.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-media");
        this.processSources();
        element.appendChild(this.renderPoster());
        return element;
    };
    Media.prototype.getJsonTypeName = function () {
        return "Media";
    };
    Media.prototype.getResourceInformation = function () {
        var result = [];
        var posterUrl = this.getPosterUrl();
        if (posterUrl) {
            result.push({ url: posterUrl, mimeType: "image" });
        }
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var mediaSource = _a[_i];
            if (mediaSource.isValid()) {
                result.push({
                    url: mediaSource.url,
                    mimeType: mediaSource.mimeType
                });
            }
        }
        return result;
    };
    Object.defineProperty(Media.prototype, "selectedMediaType", {
        get: function () {
            return this._selectedMediaType;
        },
        enumerable: false,
        configurable: true
    });
    Media.sourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_1, "sources", MediaSource);
    Media.posterProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "poster");
    Media.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "altText");
    //#endregion
    Media.supportedMediaTypes = ["audio", "video"];
    __decorate([
        serialization_1.property(Media.sourcesProperty)
    ], Media.prototype, "sources", void 0);
    __decorate([
        serialization_1.property(Media.posterProperty)
    ], Media.prototype, "poster", void 0);
    __decorate([
        serialization_1.property(Media.altTextProperty)
    ], Media.prototype, "altText", void 0);
    return Media;
}(CardElement));
exports.Media = Media;
var Input = /** @class */ (function (_super) {
    __extends(Input, _super);
    function Input() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Input.prototype.getAllLabelIds = function () {
        var labelIds = [];
        if (this._renderedLabelElement) {
            labelIds.push(this._renderedLabelElement.id);
        }
        if (this._renderedErrorMessageElement) {
            labelIds.push(this._renderedErrorMessageElement.id);
        }
        return labelIds;
    };
    Input.prototype.updateInputControlAriaLabelledBy = function () {
        if (this._renderedInputControlElement) {
            var labelIds = this.getAllLabelIds();
            if (this._renderedLabelElement) {
                labelIds.push(this._renderedLabelElement.id);
            }
            if (this._renderedErrorMessageElement) {
                labelIds.push(this._renderedErrorMessageElement.id);
            }
            if (labelIds.length > 0) {
                this._renderedInputControlElement.setAttribute("aria-labelledby", labelIds.join(" "));
            }
            else {
                this._renderedInputControlElement.removeAttribute("aria-labelledby");
            }
        }
    };
    Object.defineProperty(Input.prototype, "isNullable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "renderedInputControlElement", {
        get: function () {
            return this._renderedInputControlElement;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "inputControlContainerElement", {
        get: function () {
            return this._inputControlContainerElement;
        },
        enumerable: false,
        configurable: true
    });
    Input.prototype.overrideInternalRender = function () {
        var hostConfig = this.hostConfig;
        this._outerContainerElement = document.createElement("div");
        this._outerContainerElement.style.display = "flex";
        this._outerContainerElement.style.flexDirection = "column";
        var renderedInputControlId = Utils.generateUniqueId();
        if (this.label) {
            var labelRichTextBlock = new RichTextBlock();
            labelRichTextBlock.setParent(this);
            labelRichTextBlock.forElementId = renderedInputControlId;
            var labelInline = new TextRun(this.label);
            labelRichTextBlock.addInline(labelInline);
            if (this.isRequired) {
                labelInline.init(hostConfig.inputs.label.requiredInputs);
                var isRequiredCueInline = new TextRun(hostConfig.inputs.label.requiredInputs.suffix);
                isRequiredCueInline.color = hostConfig.inputs.label.requiredInputs.suffixColor;
                isRequiredCueInline.ariaHidden = true;
                labelRichTextBlock.addInline(isRequiredCueInline);
            }
            else {
                labelInline.init(hostConfig.inputs.label.optionalInputs);
            }
            this._renderedLabelElement = labelRichTextBlock.render();
            if (this._renderedLabelElement) {
                this._renderedLabelElement.id = Utils.generateUniqueId();
                this._renderedLabelElement.style.marginBottom = hostConfig.getEffectiveSpacing(hostConfig.inputs.label.inputSpacing) + "px";
                this._outerContainerElement.appendChild(this._renderedLabelElement);
            }
        }
        this._inputControlContainerElement = document.createElement("div");
        this._inputControlContainerElement.className = hostConfig.makeCssClassName("ac-input-container");
        this._inputControlContainerElement.style.display = "flex";
        this._renderedInputControlElement = this.internalRender();
        if (this._renderedInputControlElement) {
            this._renderedInputControlElement.id = renderedInputControlId;
            this._renderedInputControlElement.style.minWidth = "0px";
            if (this.isNullable && this.isRequired) {
                this._renderedInputControlElement.setAttribute("aria-required", "true");
                this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName("ac-input-required"));
            }
            this._inputControlContainerElement.appendChild(this._renderedInputControlElement);
            this._outerContainerElement.appendChild(this._inputControlContainerElement);
            this.updateInputControlAriaLabelledBy();
            return this._outerContainerElement;
        }
        return undefined;
    };
    Input.prototype.valueChanged = function () {
        if (this.isValid()) {
            this.resetValidationFailureCue();
        }
        if (this.onValueChanged) {
            this.onValueChanged(this);
        }
        raiseInputValueChangedEvent(this);
    };
    Input.prototype.resetValidationFailureCue = function () {
        if (this.renderedInputControlElement) {
            this.renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
            this.updateInputControlAriaLabelledBy();
            if (this._renderedErrorMessageElement) {
                this._outerContainerElement.removeChild(this._renderedErrorMessageElement);
                this._renderedErrorMessageElement = undefined;
            }
        }
    };
    Input.prototype.showValidationErrorMessage = function () {
        if (this.renderedElement && this.errorMessage && shared_1.GlobalSettings.displayInputValidationErrors) {
            var errorMessageTextBlock = new TextBlock();
            errorMessageTextBlock.setParent(this);
            errorMessageTextBlock.text = this.errorMessage;
            errorMessageTextBlock.wrap = true;
            errorMessageTextBlock.init(this.hostConfig.inputs.errorMessage);
            this._renderedErrorMessageElement = errorMessageTextBlock.render();
            if (this._renderedErrorMessageElement) {
                this._renderedErrorMessageElement.id = Utils.generateUniqueId();
                this._outerContainerElement.appendChild(this._renderedErrorMessageElement);
                this.updateInputControlAriaLabelledBy();
            }
        }
    };
    Input.prototype.focus = function () {
        if (this._renderedInputControlElement) {
            this._renderedInputControlElement.focus();
        }
    };
    Input.prototype.isValid = function () {
        return true;
    };
    Input.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.id) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.inputsMustHaveUniqueId());
        }
        if (this.isRequired) {
            if (!this.label) {
                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveLabel, "Required inputs should have a label");
            }
            if (!this.errorMessage) {
                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveErrorMessage, "Required inputs should have an error message");
            }
        }
    };
    Input.prototype.validateValue = function () {
        this.resetValidationFailureCue();
        var result = this.isRequired ? this.isSet() && this.isValid() : this.isValid();
        if (!result && this.renderedInputControlElement) {
            this.renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
            this.showValidationErrorMessage();
        }
        return result;
    };
    Input.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        return [this];
    };
    Object.defineProperty(Input.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    Input.labelProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, "label", true);
    Input.isRequiredProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, "isRequired", false);
    Input.errorMessageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, "errorMessage", true);
    __decorate([
        serialization_1.property(Input.labelProperty)
    ], Input.prototype, "label", void 0);
    __decorate([
        serialization_1.property(Input.isRequiredProperty)
    ], Input.prototype, "isRequired", void 0);
    __decorate([
        serialization_1.property(Input.errorMessageProperty)
    ], Input.prototype, "errorMessage", void 0);
    return Input;
}(CardElement));
exports.Input = Input;
var TextInput = /** @class */ (function (_super) {
    __extends(TextInput, _super);
    function TextInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isMultiline = false;
        _this.style = Enums.InputTextStyle.Text;
        return _this;
    }
    //#endregion
    TextInput.prototype.setupInput = function (input) {
        var _this = this;
        input.style.flex = "1 1 auto";
        input.tabIndex = 0;
        if (this.placeholder) {
            input.placeholder = this.placeholder;
            input.setAttribute("aria-label", this.placeholder);
        }
        if (this.defaultValue) {
            input.value = this.defaultValue;
        }
        if (this.maxLength && this.maxLength > 0) {
            input.maxLength = this.maxLength;
        }
        input.oninput = function () { _this.valueChanged(); };
        input.onkeypress = function (e) {
            // Ctrl+Enter pressed
            if (e.keyCode == 10 && _this.inlineAction) {
                _this.inlineAction.execute();
            }
        };
    };
    TextInput.prototype.internalRender = function () {
        var result;
        if (this.isMultiline) {
            result = document.createElement("textarea");
            result.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput", "ac-multiline");
        }
        else {
            result = document.createElement("input");
            result.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput");
            result.type = Enums.InputTextStyle[this.style].toLowerCase();
        }
        this.setupInput(result);
        return result;
    };
    TextInput.prototype.overrideInternalRender = function () {
        var _this = this;
        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);
        if (this.inlineAction) {
            var button_1 = document.createElement("button");
            button_1.className = this.hostConfig.makeCssClassName("ac-inlineActionButton");
            button_1.onclick = function (e) {
                e.preventDefault();
                e.cancelBubble = true;
                if (_this.inlineAction) {
                    _this.inlineAction.execute();
                }
            };
            if (this.inlineAction.iconUrl) {
                button_1.classList.add("iconOnly");
                var icon_1 = document.createElement("img");
                icon_1.style.height = "100%";
                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed
                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant
                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button
                // after the image has loaded and been gicven its final size. The below trick also fixes that.
                icon_1.style.display = "none";
                icon_1.onload = function () {
                    icon_1.style.removeProperty("display");
                };
                icon_1.onerror = function () {
                    button_1.removeChild(icon_1);
                    button_1.classList.remove("iconOnly");
                    button_1.classList.add("textOnly");
                    if (_this.inlineAction) {
                        button_1.textContent = _this.inlineAction.title ? _this.inlineAction.title : "Title";
                    }
                    else {
                        button_1.textContent = "Title";
                    }
                };
                icon_1.src = this.inlineAction.iconUrl;
                button_1.appendChild(icon_1);
                if (this.inlineAction.title) {
                    button_1.title = this.inlineAction.title;
                }
            }
            else {
                button_1.classList.add("textOnly");
                button_1.textContent = this.inlineAction.title ? this.inlineAction.title : "Title";
            }
            button_1.style.marginLeft = "8px";
            this.inputControlContainerElement.appendChild(button_1);
        }
        return renderedInputControl;
    };
    TextInput.prototype.getJsonTypeName = function () {
        return "Input.Text";
    };
    TextInput.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.inlineAction) {
            result = this.inlineAction.getActionById(id);
        }
        return result;
    };
    TextInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    TextInput.prototype.isValid = function () {
        if (!this.value) {
            return true;
        }
        if (this.regex) {
            return new RegExp(this.regex, "g").test(this.value);
        }
        return true;
    };
    Object.defineProperty(TextInput.prototype, "value", {
        get: function () {
            if (this.renderedInputControlElement) {
                if (this.isMultiline) {
                    return this.renderedInputControlElement.value;
                }
                else {
                    return this.renderedInputControlElement.value;
                }
            }
            else {
                return undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    TextInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    TextInput.maxLengthProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "maxLength");
    TextInput.isMultilineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isMultiline", false);
    TextInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    TextInput.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, "style", Enums.InputTextStyle, Enums.InputTextStyle.Text);
    TextInput.inlineActionProperty = new ActionProperty(serialization_1.Versions.v1_0, "inlineAction", ["Action.ShowCard"]);
    TextInput.regexProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, "regex", true);
    __decorate([
        serialization_1.property(TextInput.valueProperty)
    ], TextInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(TextInput.maxLengthProperty)
    ], TextInput.prototype, "maxLength", void 0);
    __decorate([
        serialization_1.property(TextInput.isMultilineProperty)
    ], TextInput.prototype, "isMultiline", void 0);
    __decorate([
        serialization_1.property(TextInput.placeholderProperty)
    ], TextInput.prototype, "placeholder", void 0);
    __decorate([
        serialization_1.property(TextInput.styleProperty)
    ], TextInput.prototype, "style", void 0);
    __decorate([
        serialization_1.property(TextInput.inlineActionProperty)
    ], TextInput.prototype, "inlineAction", void 0);
    __decorate([
        serialization_1.property(TextInput.regexProperty)
    ], TextInput.prototype, "regex", void 0);
    return TextInput;
}(Input));
exports.TextInput = TextInput;
var ToggleInput = /** @class */ (function (_super) {
    __extends(ToggleInput, _super);
    function ToggleInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.valueOn = "true";
        _this.valueOff = "false";
        _this.wrap = false;
        return _this;
    }
    ToggleInput.prototype.updateInputControlAriaLabelledBy = function () {
        if (this._checkboxInputElement) {
            var joinedLabelIds = this.getAllLabelIds().join(" ");
            if (this._checkboxInputLabelElement && this._checkboxInputLabelElement.id) {
                joinedLabelIds += " " + this._checkboxInputLabelElement.id;
            }
            if (joinedLabelIds) {
                this._checkboxInputElement.setAttribute("aria-labelledby", joinedLabelIds);
            }
            else {
                this._checkboxInputElement.removeAttribute("aria-labelledby");
            }
        }
    };
    ToggleInput.prototype.internalRender = function () {
        var _this = this;
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-input", "ac-toggleInput");
        element.style.width = "100%";
        element.style.display = "flex";
        element.style.alignItems = "center";
        this._checkboxInputElement = document.createElement("input");
        this._checkboxInputElement.id = Utils.generateUniqueId();
        this._checkboxInputElement.type = "checkbox";
        this._checkboxInputElement.style.display = "inline-block";
        this._checkboxInputElement.style.verticalAlign = "middle";
        this._checkboxInputElement.style.margin = "0";
        this._checkboxInputElement.style.flex = "0 0 auto";
        if (this.title) {
            this._checkboxInputElement.setAttribute("aria-label", this.title);
        }
        if (this.isRequired) {
            this._checkboxInputElement.setAttribute("aria-required", "true");
        }
        this._checkboxInputElement.tabIndex = 0;
        if (this.defaultValue == this.valueOn) {
            this._checkboxInputElement.checked = true;
        }
        this._checkboxInputElement.onchange = function () { _this.valueChanged(); };
        Utils.appendChild(element, this._checkboxInputElement);
        if (this.title || this.isDesignMode()) {
            var label = new TextBlock();
            label.setParent(this);
            label.forElementId = this._checkboxInputElement.id;
            label.hostConfig = this.hostConfig;
            label.text = !this.title ? this.getJsonTypeName() : this.title;
            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;
            label.wrap = this.wrap;
            this._checkboxInputLabelElement = label.render();
            if (this._checkboxInputLabelElement) {
                this._checkboxInputLabelElement.id = Utils.generateUniqueId();
                this._checkboxInputLabelElement.style.display = "inline-block";
                this._checkboxInputLabelElement.style.flex = "1 1 auto";
                this._checkboxInputLabelElement.style.marginLeft = "6px";
                this._checkboxInputLabelElement.style.verticalAlign = "middle";
                var spacerElement = document.createElement("div");
                spacerElement.style.width = "6px";
                Utils.appendChild(element, spacerElement);
                Utils.appendChild(element, this._checkboxInputLabelElement);
            }
        }
        return element;
    };
    Object.defineProperty(ToggleInput.prototype, "isNullable", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    ToggleInput.prototype.getJsonTypeName = function () {
        return "Input.Toggle";
    };
    ToggleInput.prototype.focus = function () {
        if (this._checkboxInputElement) {
            this._checkboxInputElement.focus();
        }
    };
    ToggleInput.prototype.isSet = function () {
        if (this.isRequired) {
            return this.value === this.valueOn;
        }
        return this.value ? true : false;
    };
    Object.defineProperty(ToggleInput.prototype, "value", {
        get: function () {
            if (this._checkboxInputElement) {
                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;
            }
            else {
                return undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    ToggleInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    ToggleInput.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    ToggleInput.valueOnProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "valueOn", true, undefined, "true", function (sender) { return "true"; });
    ToggleInput.valueOffProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "valueOff", true, undefined, "false", function (sender) { return "false"; });
    ToggleInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "wrap", false);
    __decorate([
        serialization_1.property(ToggleInput.valueProperty)
    ], ToggleInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(ToggleInput.titleProperty)
    ], ToggleInput.prototype, "title", void 0);
    __decorate([
        serialization_1.property(ToggleInput.valueOnProperty)
    ], ToggleInput.prototype, "valueOn", void 0);
    __decorate([
        serialization_1.property(ToggleInput.valueOffProperty)
    ], ToggleInput.prototype, "valueOff", void 0);
    __decorate([
        serialization_1.property(ToggleInput.wrapProperty)
    ], ToggleInput.prototype, "wrap", void 0);
    return ToggleInput;
}(Input));
exports.ToggleInput = ToggleInput;
var Choice = /** @class */ (function (_super) {
    __extends(Choice, _super);
    function Choice(title, value) {
        var _this = _super.call(this) || this;
        _this.title = title;
        _this.value = value;
        return _this;
    }
    //#endregion
    Choice.prototype.getSchemaKey = function () {
        return "Choice";
    };
    //#region Schema
    Choice.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Choice.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(Choice.titleProperty)
    ], Choice.prototype, "title", void 0);
    __decorate([
        serialization_1.property(Choice.valueProperty)
    ], Choice.prototype, "value", void 0);
    return Choice;
}(serialization_1.SerializableObject));
exports.Choice = Choice;
var ChoiceSetInput = /** @class */ (function (_super) {
    __extends(ChoiceSetInput, _super);
    function ChoiceSetInput() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isMultiSelect = false;
        _this.wrap = false;
        _this.choices = [];
        return _this;
    }
    Object.defineProperty(ChoiceSetInput.prototype, "isCompact", {
        get: function () {
            return this.style !== "expanded";
        },
        set: function (value) {
            this.style = value ? undefined : "expanded";
        },
        enumerable: false,
        configurable: true
    });
    ChoiceSetInput.getUniqueCategoryName = function () {
        var uniqueCategoryName = "__ac-category" + ChoiceSetInput.uniqueCategoryCounter;
        ChoiceSetInput.uniqueCategoryCounter++;
        return uniqueCategoryName;
    };
    ChoiceSetInput.prototype.renderCompoundInput = function (cssClassName, type, defaultValues) {
        var _this = this;
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-input", cssClassName);
        element.style.width = "100%";
        this._toggleInputs = [];
        this._labels = [];
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            var input = document.createElement("input");
            input.id = Utils.generateUniqueId();
            input.type = type;
            input.style.margin = "0";
            input.style.display = "inline-block";
            input.style.verticalAlign = "middle";
            input.style.flex = "0 0 auto";
            input.name = this.id ? this.id : this._uniqueCategoryName;
            if (this.isRequired) {
                input.setAttribute("aria-required", "true");
            }
            if (choice.value) {
                input.value = choice.value;
            }
            if (choice.title) {
                input.setAttribute("aria-label", choice.title);
            }
            if (defaultValues && choice.value) {
                if (defaultValues.indexOf(choice.value) >= 0) {
                    input.checked = true;
                }
            }
            input.onchange = function () { _this.valueChanged(); };
            this._toggleInputs.push(input);
            var compoundInput = document.createElement("div");
            compoundInput.style.display = "flex";
            compoundInput.style.alignItems = "center";
            Utils.appendChild(compoundInput, input);
            var label = new TextBlock();
            label.setParent(this);
            label.forElementId = input.id;
            label.hostConfig = this.hostConfig;
            label.text = choice.title ? choice.title : "Choice " + this._toggleInputs.length;
            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;
            label.wrap = this.wrap;
            var labelElement = label.render();
            this._labels.push(labelElement);
            if (labelElement) {
                labelElement.id = Utils.generateUniqueId();
                labelElement.style.display = "inline-block";
                labelElement.style.flex = "1 1 auto";
                labelElement.style.marginLeft = "6px";
                labelElement.style.verticalAlign = "middle";
                var spacerElement = document.createElement("div");
                spacerElement.style.width = "6px";
                Utils.appendChild(compoundInput, spacerElement);
                Utils.appendChild(compoundInput, labelElement);
            }
            Utils.appendChild(element, compoundInput);
        }
        return element;
    };
    ChoiceSetInput.prototype.updateInputControlAriaLabelledBy = function () {
        if (this.isMultiSelect || this.style === "expanded") {
            var labelIds = this.getAllLabelIds();
            for (var i = 0; i < this._toggleInputs.length; i++) {
                var joinedLabelIds = labelIds.join(" ");
                var label = this._labels[i];
                if (label && label.id) {
                    joinedLabelIds += " " + label.id;
                }
                if (joinedLabelIds) {
                    this._toggleInputs[i].setAttribute("aria-labelledby", joinedLabelIds);
                }
                else {
                    this._toggleInputs[i].removeAttribute("aria-labelledby");
                }
            }
        }
        else {
            _super.prototype.updateInputControlAriaLabelledBy.call(this);
        }
    };
    // Make sure `aria-current` is applied to the currently-selected item
    ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {
        var options = this._selectElement.options;
        if (options) {
            for (var i = 0; i < options.length; i++) {
                if (options[i].selected) {
                    options[i].setAttribute("aria-current", "true");
                }
                else {
                    options[i].removeAttribute("aria-current");
                }
            }
        }
    };
    ChoiceSetInput.prototype.internalRender = function () {
        var _this = this;
        this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();
        if (this.isMultiSelect) {
            // Render as a list of toggle inputs
            return this.renderCompoundInput("ac-choiceSetInput-multiSelect", "checkbox", this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : undefined);
        }
        else {
            if (this.style === "expanded") {
                // Render as a series of radio buttons
                return this.renderCompoundInput("ac-choiceSetInput-expanded", "radio", this.defaultValue ? [this.defaultValue] : undefined);
            }
            else {
                // Render as a combo box
                this._selectElement = document.createElement("select");
                this._selectElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-multichoiceInput", "ac-choiceSetInput-compact");
                this._selectElement.style.width = "100%";
                var option = document.createElement("option");
                option.selected = true;
                option.disabled = true;
                option.hidden = true;
                option.value = "";
                if (this.placeholder) {
                    option.text = this.placeholder;
                }
                Utils.appendChild(this._selectElement, option);
                for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
                    var choice = _a[_i];
                    var option_1 = document.createElement("option");
                    option_1.value = choice.value;
                    option_1.text = choice.title;
                    option_1.setAttribute("aria-label", choice.title);
                    if (choice.value == this.defaultValue) {
                        option_1.selected = true;
                    }
                    Utils.appendChild(this._selectElement, option_1);
                }
                this._selectElement.onchange = function () {
                    _this.internalApplyAriaCurrent();
                    _this.valueChanged();
                };
                this.internalApplyAriaCurrent();
                return this._selectElement;
            }
        }
    };
    ChoiceSetInput.prototype.getJsonTypeName = function () {
        return "Input.ChoiceSet";
    };
    ChoiceSetInput.prototype.focus = function () {
        if (this.isMultiSelect || this.style === "expanded") {
            if (this._toggleInputs.length > 0) {
                this._toggleInputs[0].focus();
            }
        }
        else {
            _super.prototype.focus.call(this);
        }
    };
    ChoiceSetInput.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this.choices.length == 0) {
            context.addFailure(this, Enums.ValidationEvent.CollectionCantBeEmpty, strings_1.Strings.errors.choiceSetMustHaveAtLeastOneChoice());
        }
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            if (!choice.title || !choice.value) {
                context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.choiceSetChoicesMustHaveTitleAndValue());
            }
        }
    };
    ChoiceSetInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    Object.defineProperty(ChoiceSetInput.prototype, "value", {
        get: function () {
            if (!this.isMultiSelect) {
                if (this.isCompact) {
                    if (this._selectElement) {
                        return this._selectElement.selectedIndex > 0 ? this._selectElement.value : undefined;
                    }
                    return undefined;
                }
                else {
                    if (!this._toggleInputs || this._toggleInputs.length == 0) {
                        return undefined;
                    }
                    for (var _i = 0, _a = this._toggleInputs; _i < _a.length; _i++) {
                        var toggleInput = _a[_i];
                        if (toggleInput.checked) {
                            return toggleInput.value;
                        }
                    }
                    return undefined;
                }
            }
            else {
                if (!this._toggleInputs || this._toggleInputs.length == 0) {
                    return undefined;
                }
                var result = "";
                for (var _b = 0, _c = this._toggleInputs; _b < _c.length; _b++) {
                    var toggleInput = _c[_b];
                    if (toggleInput.checked) {
                        if (result != "") {
                            result += this.hostConfig.choiceSetInputValueSeparator;
                        }
                        result += toggleInput.value;
                    }
                }
                return result ? result : undefined;
            }
        },
        enumerable: false,
        configurable: true
    });
    ChoiceSetInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    ChoiceSetInput.choicesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "choices", Choice);
    ChoiceSetInput.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, "style", [
        { value: "compact" },
        { value: "expanded" }
    ], "compact");
    ChoiceSetInput.isMultiSelectProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "isMultiSelect", false);
    ChoiceSetInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    ChoiceSetInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "wrap", false);
    //#endregion
    ChoiceSetInput.uniqueCategoryCounter = 0;
    __decorate([
        serialization_1.property(ChoiceSetInput.valueProperty)
    ], ChoiceSetInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.styleProperty)
    ], ChoiceSetInput.prototype, "style", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.isMultiSelectProperty)
    ], ChoiceSetInput.prototype, "isMultiSelect", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.placeholderProperty)
    ], ChoiceSetInput.prototype, "placeholder", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.wrapProperty)
    ], ChoiceSetInput.prototype, "wrap", void 0);
    __decorate([
        serialization_1.property(ChoiceSetInput.choicesProperty)
    ], ChoiceSetInput.prototype, "choices", void 0);
    return ChoiceSetInput;
}(Input));
exports.ChoiceSetInput = ChoiceSetInput;
var NumberInput = /** @class */ (function (_super) {
    __extends(NumberInput, _super);
    function NumberInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumberInput.prototype.internalRender = function () {
        var _this = this;
        this._numberInputElement = document.createElement("input");
        this._numberInputElement.setAttribute("type", "number");
        if (this.min) {
            this._numberInputElement.setAttribute("min", this.min.toString());
        }
        if (this.max) {
            this._numberInputElement.setAttribute("max", this.max.toString());
        }
        this._numberInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-numberInput");
        this._numberInputElement.style.width = "100%";
        this._numberInputElement.tabIndex = 0;
        if (this.defaultValue !== undefined) {
            this._numberInputElement.valueAsNumber = this.defaultValue;
        }
        if (this.placeholder) {
            this._numberInputElement.placeholder = this.placeholder;
            this._numberInputElement.setAttribute("aria-label", this.placeholder);
        }
        this._numberInputElement.oninput = function () { _this.valueChanged(); };
        return this._numberInputElement;
    };
    NumberInput.prototype.getJsonTypeName = function () {
        return "Input.Number";
    };
    NumberInput.prototype.isSet = function () {
        return this.value !== undefined && !isNaN(this.value);
    };
    NumberInput.prototype.isValid = function () {
        if (!this.value) {
            return !this.isRequired;
        }
        var result = true;
        if (this.min !== undefined) {
            result = result && (this.value >= this.min);
        }
        if (this.max !== undefined) {
            result = result && (this.value <= this.max);
        }
        return result;
    };
    Object.defineProperty(NumberInput.prototype, "value", {
        get: function () {
            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    NumberInput.valueProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "value");
    NumberInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    NumberInput.minProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "min");
    NumberInput.maxProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(NumberInput.valueProperty)
    ], NumberInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(NumberInput.minProperty)
    ], NumberInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(NumberInput.maxProperty)
    ], NumberInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(NumberInput.placeholderProperty)
    ], NumberInput.prototype, "placeholder", void 0);
    return NumberInput;
}(Input));
exports.NumberInput = NumberInput;
var DateInput = /** @class */ (function (_super) {
    __extends(DateInput, _super);
    function DateInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateInput.prototype.internalRender = function () {
        var _this = this;
        this._dateInputElement = document.createElement("input");
        this._dateInputElement.setAttribute("type", "date");
        if (this.min) {
            this._dateInputElement.setAttribute("min", this.min);
        }
        if (this.max) {
            this._dateInputElement.setAttribute("max", this.max);
        }
        if (this.placeholder) {
            this._dateInputElement.placeholder = this.placeholder;
            this._dateInputElement.setAttribute("aria-label", this.placeholder);
        }
        this._dateInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-dateInput");
        this._dateInputElement.style.width = "100%";
        this._dateInputElement.oninput = function () { _this.valueChanged(); };
        if (this.defaultValue) {
            this._dateInputElement.value = this.defaultValue;
        }
        return this._dateInputElement;
    };
    DateInput.prototype.getJsonTypeName = function () {
        return "Input.Date";
    };
    DateInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    DateInput.prototype.isValid = function () {
        if (!this.value) {
            return !this.isRequired;
        }
        var valueAsDate = new Date(this.value);
        var result = true;
        if (this.min) {
            var minDate = new Date(this.min);
            result = result && (valueAsDate >= minDate);
        }
        if (this.max) {
            var maxDate = new Date(this.max);
            result = result && (valueAsDate <= maxDate);
        }
        return result;
    };
    Object.defineProperty(DateInput.prototype, "value", {
        get: function () {
            return this._dateInputElement ? this._dateInputElement.value : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    DateInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "value");
    DateInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    DateInput.minProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "min");
    DateInput.maxProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(DateInput.valueProperty)
    ], DateInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(DateInput.minProperty)
    ], DateInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(DateInput.maxProperty)
    ], DateInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(DateInput.placeholderProperty)
    ], DateInput.prototype, "placeholder", void 0);
    return DateInput;
}(Input));
exports.DateInput = DateInput;
var TimeProperty = /** @class */ (function (_super) {
    __extends(TimeProperty, _super);
    function TimeProperty(targetVersion, name) {
        var _this = _super.call(this, targetVersion, name, function (sender, property, source, context) {
            var value = source[property.name];
            if (typeof value === "string" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {
                return value;
            }
            return undefined;
        }, function (sender, property, target, value, context) {
            context.serializeValue(target, property.name, value);
        }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        return _this;
    }
    return TimeProperty;
}(serialization_1.CustomProperty));
exports.TimeProperty = TimeProperty;
var TimeInput = /** @class */ (function (_super) {
    __extends(TimeInput, _super);
    function TimeInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeInput.convertTimeStringToDate = function (timeString) {
        return new Date("1973-09-04T" + timeString + ":00Z");
    };
    TimeInput.prototype.internalRender = function () {
        var _this = this;
        this._timeInputElement = document.createElement("input");
        this._timeInputElement.setAttribute("type", "time");
        this._timeInputElement.setAttribute("min", this.min);
        this._timeInputElement.setAttribute("max", this.max);
        this._timeInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-timeInput");
        this._timeInputElement.style.width = "100%";
        this._timeInputElement.oninput = function () { _this.valueChanged(); };
        if (this.placeholder) {
            this._timeInputElement.placeholder = this.placeholder;
            this._timeInputElement.setAttribute("aria-label", this.placeholder);
        }
        if (this.defaultValue) {
            this._timeInputElement.value = this.defaultValue;
        }
        return this._timeInputElement;
    };
    TimeInput.prototype.getJsonTypeName = function () {
        return "Input.Time";
    };
    TimeInput.prototype.isSet = function () {
        return this.value ? true : false;
    };
    TimeInput.prototype.isValid = function () {
        if (!this.value) {
            return !this.isRequired;
        }
        var valueAsDate = TimeInput.convertTimeStringToDate(this.value);
        var result = true;
        if (this.min) {
            var minDate = TimeInput.convertTimeStringToDate(this.min);
            result = result && (valueAsDate >= minDate);
        }
        if (this.max) {
            var maxDate = TimeInput.convertTimeStringToDate(this.max);
            result = result && (valueAsDate <= maxDate);
        }
        return result;
    };
    Object.defineProperty(TimeInput.prototype, "value", {
        get: function () {
            return this._timeInputElement ? this._timeInputElement.value : undefined;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    TimeInput.valueProperty = new TimeProperty(serialization_1.Versions.v1_0, "value");
    TimeInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "placeholder");
    TimeInput.minProperty = new TimeProperty(serialization_1.Versions.v1_0, "min");
    TimeInput.maxProperty = new TimeProperty(serialization_1.Versions.v1_0, "max");
    __decorate([
        serialization_1.property(TimeInput.valueProperty)
    ], TimeInput.prototype, "defaultValue", void 0);
    __decorate([
        serialization_1.property(TimeInput.minProperty)
    ], TimeInput.prototype, "min", void 0);
    __decorate([
        serialization_1.property(TimeInput.maxProperty)
    ], TimeInput.prototype, "max", void 0);
    __decorate([
        serialization_1.property(TimeInput.placeholderProperty)
    ], TimeInput.prototype, "placeholder", void 0);
    return TimeInput;
}(Input));
exports.TimeInput = TimeInput;
var ActionButton = /** @class */ (function () {
    function ActionButton(action, parentContainerStyle) {
        this._state = 0 /* Normal */;
        this.action = action;
        this._parentContainerStyle = parentContainerStyle;
    }
    ActionButton.prototype.updateCssStyle = function () {
        var _a, _b;
        if (this.action.parent && this.action.renderedElement) {
            var hostConfig = this.action.parent.hostConfig;
            this.action.renderedElement.className = hostConfig.makeCssClassName("ac-pushButton");
            if (this._parentContainerStyle) {
                this.action.renderedElement.classList.add("style-" + this._parentContainerStyle);
            }
            this.action.updateActionButtonCssStyle(this.action.renderedElement, this._state);
            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("expanded"));
            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("subdued"));
            switch (this._state) {
                case 1 /* Expanded */:
                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName("expanded"));
                    break;
                case 2 /* Subdued */:
                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName("subdued"));
                    break;
            }
            if (this.action.style) {
                if (this.action.style === Enums.ActionStyle.Positive) {
                    (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames("primary", "style-positive"));
                }
                else {
                    (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames("style-" + this.action.style.toLowerCase()));
                }
            }
        }
    };
    ActionButton.prototype.render = function () {
        var _this = this;
        this.action.render();
        if (this.action.renderedElement) {
            this.action.renderedElement.onclick = function (e) {
                e.preventDefault();
                e.cancelBubble = true;
                _this.click();
            };
            this.updateCssStyle();
        }
    };
    ActionButton.prototype.click = function () {
        if (this.onClick !== undefined) {
            this.onClick(this);
        }
    };
    Object.defineProperty(ActionButton.prototype, "state", {
        get: function () {
            return this._state;
        },
        set: function (value) {
            this._state = value;
            this.updateCssStyle();
        },
        enumerable: false,
        configurable: true
    });
    return ActionButton;
}());
var Action = /** @class */ (function (_super) {
    __extends(Action, _super);
    function Action() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.style = Enums.ActionStyle.Default;
        return _this;
    }
    Action.prototype.addCssClasses = function (element) {
        // Do nothing in base implementation
    };
    Action.prototype.internalGetReferencedInputs = function () {
        return {};
    };
    Action.prototype.internalPrepareForExecution = function (inputs) {
        // Do nothing in base implementation
    };
    Action.prototype.internalValidateInputs = function (referencedInputs) {
        var result = [];
        if (!this.ignoreInputValidation && referencedInputs) {
            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {
                var key = _a[_i];
                var input = referencedInputs[key];
                if (!input.validateValue()) {
                    result.push(input);
                }
            }
        }
        return result;
    };
    Action.prototype.shouldSerialize = function (context) {
        return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;
    };
    Action.prototype.getHref = function () {
        return "";
    };
    Action.prototype.getAriaRole = function () {
        return "button";
    };
    Action.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {
        if (buttonState === void 0) { buttonState = 0 /* Normal */; }
        // Do nothing in base implementation
    };
    Action.prototype.parse = function (source, context) {
        return _super.prototype.parse.call(this, source, context ? context : new SerializationContext());
    };
    Action.prototype.toJSON = function (context) {
        return _super.prototype.toJSON.call(this, context ? context : new SerializationContext());
    };
    Action.prototype.render = function (baseCssClass) {
        if (baseCssClass === void 0) { baseCssClass = "ac-pushButton"; }
        // Cache hostConfig for perf
        var hostConfig = this.hostConfig;
        var buttonElement = document.createElement("button");
        this.addCssClasses(buttonElement);
        if (this.title) {
            buttonElement.setAttribute("aria-label", this.title);
        }
        buttonElement.type = "button";
        buttonElement.style.display = "flex";
        buttonElement.style.alignItems = "center";
        buttonElement.style.justifyContent = "center";
        buttonElement.setAttribute("role", this.getAriaRole());
        var titleElement = document.createElement("div");
        titleElement.style.overflow = "hidden";
        titleElement.style.textOverflow = "ellipsis";
        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {
            titleElement.style.whiteSpace = "nowrap";
        }
        if (this.title) {
            titleElement.innerText = this.title;
        }
        if (!this.iconUrl) {
            buttonElement.classList.add("noIcon");
            buttonElement.appendChild(titleElement);
        }
        else {
            var iconElement = document.createElement("img");
            iconElement.src = this.iconUrl;
            iconElement.style.width = hostConfig.actions.iconSize + "px";
            iconElement.style.height = hostConfig.actions.iconSize + "px";
            iconElement.style.flex = "0 0 auto";
            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {
                buttonElement.classList.add("iconAbove");
                buttonElement.style.flexDirection = "column";
                if (this.title) {
                    iconElement.style.marginBottom = "6px";
                }
            }
            else {
                buttonElement.classList.add("iconLeft");
                iconElement.style.maxHeight = "100%";
                if (this.title) {
                    iconElement.style.marginRight = "6px";
                }
            }
            buttonElement.appendChild(iconElement);
            buttonElement.appendChild(titleElement);
        }
        this._renderedElement = buttonElement;
    };
    Action.prototype.execute = function () {
        if (this.onExecute) {
            this.onExecute(this);
        }
        raiseExecuteActionEvent(this);
    };
    Action.prototype.prepareForExecution = function () {
        var referencedInputs = this.getReferencedInputs();
        var invalidInputs = this.internalValidateInputs(referencedInputs);
        if (invalidInputs.length > 0) {
            invalidInputs[0].focus();
            return false;
        }
        this.internalPrepareForExecution(referencedInputs);
        return true;
    };
    ;
    Action.prototype.remove = function () {
        if (this._actionCollection) {
            return this._actionCollection.removeAction(this);
        }
        return false;
    };
    Action.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        return [];
    };
    Action.prototype.getResourceInformation = function () {
        return this.iconUrl ? [{ url: this.iconUrl, mimeType: "image" }] : [];
    };
    Action.prototype.getActionById = function (id) {
        return this.id === id ? this : undefined;
    };
    Action.prototype.getReferencedInputs = function () {
        return this.internalGetReferencedInputs();
    };
    /**
     * Validates the inputs associated with this action.
     *
     * @returns A list of inputs that failed validation, or an empty array if no input failed validation.
     */
    Action.prototype.validateInputs = function () {
        return this.internalValidateInputs(this.getReferencedInputs());
    };
    Object.defineProperty(Action.prototype, "isPrimary", {
        get: function () {
            return this.style == Enums.ActionStyle.Positive;
        },
        set: function (value) {
            if (value) {
                this.style = Enums.ActionStyle.Positive;
            }
            else {
                if (this.style == Enums.ActionStyle.Positive) {
                    this.style = Enums.ActionStyle.Default;
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "ignoreInputValidation", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "hostConfig", {
        get: function () {
            return this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    Action.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "title");
    Action.iconUrlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, "iconUrl");
    Action.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_2, "style", [
        { value: Enums.ActionStyle.Default },
        { value: Enums.ActionStyle.Positive },
        { value: Enums.ActionStyle.Destructive }
    ], Enums.ActionStyle.Default);
    // TODO: Revise this when finalizing input validation
    Action.ignoreInputValidationProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, "ignoreInputValidation", false);
    __decorate([
        serialization_1.property(Action.titleProperty)
    ], Action.prototype, "title", void 0);
    __decorate([
        serialization_1.property(Action.iconUrlProperty)
    ], Action.prototype, "iconUrl", void 0);
    __decorate([
        serialization_1.property(Action.styleProperty)
    ], Action.prototype, "style", void 0);
    return Action;
}(card_object_1.CardObject));
exports.Action = Action;
var SubmitAction = /** @class */ (function (_super) {
    __extends(SubmitAction, _super);
    function SubmitAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._ignoreInputValidation = false;
        _this._isPrepared = false;
        return _this;
    }
    SubmitAction.prototype.internalGetReferencedInputs = function () {
        var result = {};
        var current = this.parent;
        var inputs = [];
        while (current) {
            inputs = inputs.concat(current.getAllInputs(false));
            current = current.parent;
        }
        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {
            var input = inputs_1[_i];
            if (input.id) {
                result[input.id] = input;
            }
        }
        return result;
    };
    SubmitAction.prototype.internalPrepareForExecution = function (inputs) {
        if (this._originalData) {
            this._processedData = JSON.parse(JSON.stringify(this._originalData));
        }
        else {
            this._processedData = {};
        }
        if (this._processedData && inputs) {
            for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
                var key = _a[_i];
                var input = inputs[key];
                if (input.id) {
                    this._processedData[input.id] = input.value;
                }
            }
        }
        this._isPrepared = true;
    };
    SubmitAction.prototype.getJsonTypeName = function () {
        return SubmitAction.JsonTypeName;
    };
    Object.defineProperty(SubmitAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SubmitAction.prototype, "data", {
        get: function () {
            return this._isPrepared ? this._processedData : this._originalData;
        },
        set: function (value) {
            this._originalData = value;
            this._isPrepared = false;
        },
        enumerable: false,
        configurable: true
    });
    SubmitAction.dataProperty = new serialization_1.PropertyDefinition(serialization_1.Versions.v1_0, "data");
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    SubmitAction.JsonTypeName = "Action.Submit";
    __decorate([
        serialization_1.property(SubmitAction.dataProperty)
    ], SubmitAction.prototype, "_originalData", void 0);
    __decorate([
        serialization_1.property(Action.ignoreInputValidationProperty)
    ], SubmitAction.prototype, "_ignoreInputValidation", void 0);
    return SubmitAction;
}(Action));
exports.SubmitAction = SubmitAction;
var OpenUrlAction = /** @class */ (function (_super) {
    __extends(OpenUrlAction, _super);
    function OpenUrlAction() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OpenUrlAction.prototype.getJsonTypeName = function () {
        return OpenUrlAction.JsonTypeName;
    };
    OpenUrlAction.prototype.getAriaRole = function () {
        return "link";
    };
    OpenUrlAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.url) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet("url"));
        }
    };
    OpenUrlAction.prototype.getHref = function () {
        return this.url;
    };
    //#region Schema
    OpenUrlAction.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    OpenUrlAction.JsonTypeName = "Action.OpenUrl";
    __decorate([
        serialization_1.property(OpenUrlAction.urlProperty)
    ], OpenUrlAction.prototype, "url", void 0);
    return OpenUrlAction;
}(Action));
exports.OpenUrlAction = OpenUrlAction;
var ToggleVisibilityAction = /** @class */ (function (_super) {
    __extends(ToggleVisibilityAction, _super);
    function ToggleVisibilityAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.targetElements = {};
        return _this;
    }
    ToggleVisibilityAction.prototype.getJsonTypeName = function () {
        return ToggleVisibilityAction.JsonTypeName;
    };
    ToggleVisibilityAction.prototype.execute = function () {
        if (this.parent) {
            for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {
                var elementId = _a[_i];
                var targetElement = this.parent.getRootElement().getElementById(elementId);
                if (targetElement) {
                    if (typeof this.targetElements[elementId] === "boolean") {
                        targetElement.isVisible = this.targetElements[elementId];
                    }
                    else {
                        targetElement.isVisible = !targetElement.isVisible;
                    }
                }
            }
        }
    };
    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {
        if (isVisible === void 0) { isVisible = undefined; }
        this.targetElements[elementId] = isVisible;
    };
    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {
        delete this.targetElements[elementId];
    };
    ToggleVisibilityAction.targetElementsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_2, "targetElements", function (sender, property, source, context) {
        var result = {};
        if (Array.isArray(source[property.name])) {
            for (var _i = 0, _a = source[property.name]; _i < _a.length; _i++) {
                var item = _a[_i];
                if (typeof item === "string") {
                    result[item] = undefined;
                }
                else if (typeof item === "object") {
                    var elementId = item["elementId"];
                    if (typeof elementId === "string") {
                        result[elementId] = Utils.parseBool(item["isVisible"]);
                    }
                }
            }
        }
        return result;
    }, function (sender, property, target, value, context) {
        var targetElements = [];
        for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {
            var id = _a[_i];
            if (typeof value[id] === "boolean") {
                targetElements.push({
                    elementId: id,
                    isVisible: value[id]
                });
            }
            else {
                targetElements.push(id);
            }
        }
        context.serializeArray(target, property.name, targetElements);
    }, {}, function (sender) { return {}; });
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ToggleVisibilityAction.JsonTypeName = "Action.ToggleVisibility";
    __decorate([
        serialization_1.property(ToggleVisibilityAction.targetElementsProperty)
    ], ToggleVisibilityAction.prototype, "targetElements", void 0);
    return ToggleVisibilityAction;
}(Action));
exports.ToggleVisibilityAction = ToggleVisibilityAction;
var StringWithSubstitutionProperty = /** @class */ (function (_super) {
    __extends(StringWithSubstitutionProperty, _super);
    function StringWithSubstitutionProperty(targetVersion, name) {
        var _this = _super.call(this, targetVersion, name, undefined, function () { return new shared_1.StringWithSubstitutions(); }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        return _this;
    }
    StringWithSubstitutionProperty.prototype.parse = function (sender, source, context) {
        var result = new shared_1.StringWithSubstitutions();
        result.set(Utils.parseString(source[this.name]));
        return result;
    };
    StringWithSubstitutionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value.getOriginal());
    };
    return StringWithSubstitutionProperty;
}(serialization_1.PropertyDefinition));
var HttpHeader = /** @class */ (function (_super) {
    __extends(HttpHeader, _super);
    //#endregion
    function HttpHeader(name, value) {
        if (name === void 0) { name = ""; }
        if (value === void 0) { value = ""; }
        var _this = _super.call(this) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    HttpHeader.prototype.getSchemaKey = function () {
        return "HttpHeader";
    };
    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        this._value.getReferencedInputs(inputs, referencedInputs);
    };
    HttpHeader.prototype.prepareForExecution = function (inputs) {
        this._value.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);
    };
    Object.defineProperty(HttpHeader.prototype, "value", {
        get: function () {
            return this._value.get();
        },
        set: function (newValue) {
            this._value.set(newValue);
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    HttpHeader.nameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "name");
    HttpHeader.valueProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "value");
    __decorate([
        serialization_1.property(HttpHeader.nameProperty)
    ], HttpHeader.prototype, "name", void 0);
    __decorate([
        serialization_1.property(HttpHeader.valueProperty)
    ], HttpHeader.prototype, "_value", void 0);
    return HttpHeader;
}(serialization_1.SerializableObject));
exports.HttpHeader = HttpHeader;
var HttpAction = /** @class */ (function (_super) {
    __extends(HttpAction, _super);
    function HttpAction() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._ignoreInputValidation = false;
        return _this;
    }
    HttpAction.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.add(Action.ignoreInputValidationProperty);
    };
    HttpAction.prototype.internalGetReferencedInputs = function () {
        var allInputs = this.parent ? this.parent.getRootElement().getAllInputs() : [];
        var result = {};
        this._url.getReferencedInputs(allInputs, result);
        for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
            var header = _a[_i];
            header.getReferencedInputs(allInputs, result);
        }
        this._body.getReferencedInputs(allInputs, result);
        return result;
    };
    HttpAction.prototype.internalPrepareForExecution = function (inputs) {
        if (inputs) {
            this._url.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);
            var contentType = shared_1.ContentTypes.applicationJson;
            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
                var header = _a[_i];
                header.prepareForExecution(inputs);
                if (header.name && header.name.toLowerCase() == "content-type") {
                    contentType = header.value;
                }
            }
            this._body.substituteInputValues(inputs, contentType);
        }
    };
    ;
    HttpAction.prototype.getJsonTypeName = function () {
        return HttpAction.JsonTypeName;
    };
    HttpAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (!this.url) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet("url"));
        }
        if (this.headers.length > 0) {
            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
                var header = _a[_i];
                if (!header.name) {
                    context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.actionHttpHeadersMustHaveNameAndValue());
                }
            }
        }
    };
    Object.defineProperty(HttpAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "url", {
        get: function () {
            return this._url.get();
        },
        set: function (value) {
            this._url.set(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "body", {
        get: function () {
            return this._body.get();
        },
        set: function (value) {
            this._body.set(value);
        },
        enumerable: false,
        configurable: true
    });
    HttpAction.urlProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "url");
    HttpAction.bodyProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, "body");
    HttpAction.methodProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "method");
    HttpAction.headersProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, "headers", HttpHeader);
    //#endregion
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    HttpAction.JsonTypeName = "Action.Http";
    __decorate([
        serialization_1.property(HttpAction.urlProperty)
    ], HttpAction.prototype, "_url", void 0);
    __decorate([
        serialization_1.property(HttpAction.bodyProperty)
    ], HttpAction.prototype, "_body", void 0);
    __decorate([
        serialization_1.property(HttpAction.methodProperty)
    ], HttpAction.prototype, "method", void 0);
    __decorate([
        serialization_1.property(HttpAction.headersProperty)
    ], HttpAction.prototype, "headers", void 0);
    __decorate([
        serialization_1.property(Action.ignoreInputValidationProperty)
    ], HttpAction.prototype, "_ignoreInputValidation", void 0);
    return HttpAction;
}(Action));
exports.HttpAction = HttpAction;
var ShowCardAction = /** @class */ (function (_super) {
    __extends(ShowCardAction, _super);
    function ShowCardAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.card = new InlineAdaptiveCard();
        return _this;
    }
    ShowCardAction.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        var jsonCard = source["card"];
        if (jsonCard) {
            this.card.parse(jsonCard, context);
        }
        else {
            context.logParseEvent(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.showCardMustHaveCard());
        }
    };
    ShowCardAction.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        if (this.card) {
            context.serializeValue(target, "card", this.card.toJSON(context));
        }
    };
    ShowCardAction.prototype.addCssClasses = function (element) {
        _super.prototype.addCssClasses.call(this, element);
        if (this.parent) {
            element.classList.add(this.parent.hostConfig.makeCssClassName("expandable"));
        }
    };
    ShowCardAction.prototype.getJsonTypeName = function () {
        return ShowCardAction.JsonTypeName;
    };
    ShowCardAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this.card.internalValidateProperties(context);
    };
    ShowCardAction.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {
        if (buttonState === void 0) { buttonState = 0 /* Normal */; }
        _super.prototype.updateActionButtonCssStyle.call(this, actionButtonElement);
        if (this.parent) {
            actionButtonElement.classList.add(this.parent.hostConfig.makeCssClassName("expandable"));
            actionButtonElement.setAttribute("aria-expanded", (buttonState === 1 /* Expanded */).toString());
        }
    };
    ShowCardAction.prototype.setParent = function (value) {
        _super.prototype.setParent.call(this, value);
        this.card.setParent(value);
    };
    ShowCardAction.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        return this.card.getAllInputs(processActions);
    };
    ShowCardAction.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());
    };
    ShowCardAction.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            result = this.card.getActionById(id);
        }
        return result;
    };
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ShowCardAction.JsonTypeName = "Action.ShowCard";
    return ShowCardAction;
}(Action));
exports.ShowCardAction = ShowCardAction;
var ActionCollection = /** @class */ (function () {
    function ActionCollection(owner) {
        this._renderedActionCount = 0;
        this.items = [];
        this.buttons = [];
        this._owner = owner;
    }
    ActionCollection.prototype.isActionAllowed = function (action) {
        var forbiddenTypes = this._owner.getForbiddenActionTypes();
        if (forbiddenTypes) {
            for (var _i = 0, forbiddenTypes_1 = forbiddenTypes; _i < forbiddenTypes_1.length; _i++) {
                var forbiddenType = forbiddenTypes_1[_i];
                if (action.constructor === forbiddenType) {
                    return false;
                }
            }
        }
        return true;
    };
    ActionCollection.prototype.refreshContainer = function () {
        this._actionCardContainer.innerHTML = "";
        if (!this._actionCard) {
            this._actionCardContainer.style.marginTop = "0px";
            return;
        }
        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + "px" : "0px";
        var padding = this._owner.getEffectivePadding();
        this._owner.getImmediateSurroundingPadding(padding);
        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);
        if (this._actionCard) {
            this._actionCard.style.paddingLeft = physicalPadding.left + "px";
            this._actionCard.style.paddingRight = physicalPadding.right + "px";
            this._actionCard.style.marginLeft = "-" + physicalPadding.left + "px";
            this._actionCard.style.marginRight = "-" + physicalPadding.right + "px";
            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {
                this._actionCard.style.paddingBottom = physicalPadding.bottom + "px";
                this._actionCard.style.marginBottom = "-" + physicalPadding.bottom + "px";
            }
            Utils.appendChild(this._actionCardContainer, this._actionCard);
        }
    };
    ActionCollection.prototype.layoutChanged = function () {
        this._owner.getRootElement().updateLayout();
    };
    ActionCollection.prototype.hideActionCard = function () {
        var previouslyExpandedAction = this._expandedAction;
        this._expandedAction = undefined;
        this._actionCard = undefined;
        this.refreshContainer();
        if (previouslyExpandedAction) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);
        }
    };
    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {
        if (suppressStyle === void 0) { suppressStyle = false; }
        if (raiseEvent === void 0) { raiseEvent = true; }
        action.card.suppressStyle = suppressStyle;
        // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise
        var renderedCard = action.card.renderedElement && !this._owner.isDesignMode() ? action.card.renderedElement : action.card.render();
        this._actionCard = renderedCard;
        this._expandedAction = action;
        this.refreshContainer();
        if (raiseEvent) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(action, true);
        }
    };
    ActionCollection.prototype.collapseExpandedAction = function () {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            button.state = 0 /* Normal */;
        }
        this.hideActionCard();
    };
    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            if (button.action !== action) {
                button.state = 2 /* Subdued */;
            }
            else {
                button.state = 1 /* Expanded */;
            }
        }
        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);
    };
    ActionCollection.prototype.actionClicked = function (actionButton) {
        if (!(actionButton.action instanceof ShowCardAction)) {
            for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
                var button = _a[_i];
                button.state = 0 /* Normal */;
            }
            this.hideActionCard();
            actionButton.action.execute();
        }
        else {
            if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {
                actionButton.action.execute();
            }
            else if (actionButton.action === this._expandedAction) {
                this.collapseExpandedAction();
            }
            else {
                this.expandShowCardAction(actionButton.action, true);
            }
        }
    };
    ActionCollection.prototype.getParentContainer = function () {
        if (this._owner instanceof Container) {
            return this._owner;
        }
        else {
            return this._owner.getParentContainer();
        }
    };
    ActionCollection.prototype.findActionButton = function (action) {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var actionButton = _a[_i];
            if (actionButton.action == action) {
                return actionButton;
            }
        }
        return undefined;
    };
    ActionCollection.prototype.parse = function (source, context) {
        this.clear();
        if (Array.isArray(source)) {
            for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {
                var jsonAction = source_1[_i];
                var action = context.parseAction(this._owner, jsonAction, [], !this._owner.isDesignMode());
                if (action) {
                    this.addAction(action);
                }
            }
        }
    };
    ActionCollection.prototype.toJSON = function (target, propertyName, context) {
        context.serializeArray(target, propertyName, this.items);
    };
    ActionCollection.prototype.getActionById = function (id) {
        var result = undefined;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            result = item.getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    ActionCollection.prototype.validateProperties = function (context) {
        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {
            context.addFailure(this._owner, Enums.ValidationEvent.TooManyActions, strings_1.Strings.errors.tooManyActions(this._owner.hostConfig.actions.maxActions));
        }
        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {
            context.addFailure(this._owner, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());
        }
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (!this.isActionAllowed(item)) {
                context.addFailure(this._owner, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(item.getJsonTypeName()));
            }
            item.internalValidateProperties(context);
        }
    };
    ActionCollection.prototype.render = function (orientation, isDesignMode) {
        var _this = this;
        // Cache hostConfig for better perf
        var hostConfig = this._owner.hostConfig;
        if (!hostConfig.supportsInteractivity) {
            return undefined;
        }
        var element = document.createElement("div");
        var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;
        this._actionCardContainer = document.createElement("div");
        this._renderedActionCount = 0;
        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && this.isActionAllowed(this.items[0])) {
            this.showActionCard(this.items[0], true);
            this._renderedActionCount = 1;
        }
        else {
            var buttonStrip = document.createElement("div");
            buttonStrip.className = hostConfig.makeCssClassName("ac-actionSet");
            buttonStrip.style.display = "flex";
            buttonStrip.setAttribute("role", "group");
            if (orientation == Enums.Orientation.Horizontal) {
                buttonStrip.style.flexDirection = "row";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
            }
            else {
                buttonStrip.style.flexDirection = "column";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        case Enums.ActionAlignment.Stretch:
                            buttonStrip.style.alignItems = "stretch";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
            }
            var parentContainer = this.getParentContainer();
            if (parentContainer) {
                var parentContainerStyle = parentContainer.getEffectiveStyle();
                var allowedActions = this.items.filter(this.isActionAllowed.bind(this));
                for (var i = 0; i < allowedActions.length; i++) {
                    var actionButton = this.findActionButton(allowedActions[i]);
                    if (!actionButton) {
                        actionButton = new ActionButton(allowedActions[i], parentContainerStyle);
                        actionButton.onClick = function (ab) { _this.actionClicked(ab); };
                        this.buttons.push(actionButton);
                    }
                    actionButton.render();
                    if (actionButton.action.renderedElement) {
                        actionButton.action.renderedElement.setAttribute("aria-posinset", (i + 1).toString());
                        actionButton.action.renderedElement.setAttribute("aria-setsize", allowedActions.length.toString());
                        actionButton.action.renderedElement.setAttribute("role", "listitem");
                        if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {
                            actionButton.action.renderedElement.style.flex = "0 1 100%";
                        }
                        else {
                            actionButton.action.renderedElement.style.flex = "0 1 auto";
                        }
                        buttonStrip.appendChild(actionButton.action.renderedElement);
                        this._renderedActionCount++;
                        if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {
                            break;
                        }
                        else if (hostConfig.actions.buttonSpacing > 0) {
                            var spacer = document.createElement("div");
                            if (orientation === Enums.Orientation.Horizontal) {
                                spacer.style.flex = "0 0 auto";
                                spacer.style.width = hostConfig.actions.buttonSpacing + "px";
                            }
                            else {
                                spacer.style.height = hostConfig.actions.buttonSpacing + "px";
                            }
                            Utils.appendChild(buttonStrip, spacer);
                        }
                    }
                }
            }
            var buttonStripContainer = document.createElement("div");
            buttonStripContainer.style.overflow = "hidden";
            buttonStripContainer.appendChild(buttonStrip);
            Utils.appendChild(element, buttonStripContainer);
        }
        Utils.appendChild(element, this._actionCardContainer);
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var button = _a[_i];
            if (button.state == 1 /* Expanded */) {
                this.expandShowCardAction(button.action, false);
                break;
            }
        }
        return this._renderedActionCount > 0 ? element : undefined;
    };
    ActionCollection.prototype.addAction = function (action) {
        if (!action) {
            throw new Error("The action parameter cannot be null.");
        }
        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {
            this.items.push(action);
            if (!action.parent) {
                action.setParent(this._owner);
            }
            action["_actionCollection"] = this;
        }
        else {
            throw new Error(strings_1.Strings.errors.actionAlreadyParented());
        }
    };
    ActionCollection.prototype.removeAction = function (action) {
        if (this.expandedAction && this._expandedAction == action) {
            this.collapseExpandedAction();
        }
        var actionIndex = this.items.indexOf(action);
        if (actionIndex >= 0) {
            this.items.splice(actionIndex, 1);
            action.setParent(undefined);
            action["_actionCollection"] = undefined;
            for (var i = 0; i < this.buttons.length; i++) {
                if (this.buttons[i].action == action) {
                    this.buttons.splice(i, 1);
                    break;
                }
            }
            return true;
        }
        return false;
    };
    ActionCollection.prototype.clear = function () {
        this.items = [];
        this.buttons = [];
        this._expandedAction = undefined;
        this._renderedActionCount = 0;
    };
    ActionCollection.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        var result = [];
        if (processActions) {
            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                var action = _a[_i];
                result = result.concat(action.getAllInputs());
            }
        }
        return result;
    };
    ActionCollection.prototype.getResourceInformation = function () {
        var result = [];
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var action = _a[_i];
            result = result.concat(action.getResourceInformation());
        }
        return result;
    };
    Object.defineProperty(ActionCollection.prototype, "renderedActionCount", {
        get: function () {
            return this._renderedActionCount;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ActionCollection.prototype, "expandedAction", {
        get: function () {
            return this._expandedAction;
        },
        enumerable: false,
        configurable: true
    });
    return ActionCollection;
}());
var ActionSet = /** @class */ (function (_super) {
    __extends(ActionSet, _super);
    function ActionSet() {
        var _this = _super.call(this) || this;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ActionSet.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._actionCollection.parse(source["actions"], context);
    };
    ActionSet.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        this._actionCollection.toJSON(target, "actions", context);
    };
    ActionSet.prototype.internalRender = function () {
        return this._actionCollection.render(this.orientation !== undefined ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());
    };
    ActionSet.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction !== undefined;
            }
        }
    };
    ActionSet.prototype.getJsonTypeName = function () {
        return "ActionSet";
    };
    ActionSet.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ActionSet.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            return _super.prototype.getActionAt.call(this, index);
        }
    };
    ActionSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this._actionCollection.validateProperties(context);
    };
    ActionSet.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ActionSet.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        return processActions ? this._actionCollection.getAllInputs() : [];
    };
    ActionSet.prototype.getResourceInformation = function () {
        return this._actionCollection.getResourceInformation();
    };
    Object.defineProperty(ActionSet.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    ActionSet.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, "orientation", Enums.Orientation);
    __decorate([
        serialization_1.property(ActionSet.orientationProperty)
    ], ActionSet.prototype, "orientation", void 0);
    return ActionSet;
}(CardElement));
exports.ActionSet = ActionSet;
var StylableCardElementContainer = /** @class */ (function (_super) {
    __extends(StylableCardElementContainer, _super);
    function StylableCardElementContainer() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._bleed = false;
        return _this;
    }
    Object.defineProperty(StylableCardElementContainer.prototype, "style", {
        get: function () {
            if (this.allowCustomStyle) {
                var style = this.getValue(StylableCardElementContainer.styleProperty);
                if (style && this.hostConfig.containerStyles.getStyleByName(style)) {
                    return style;
                }
            }
            return undefined;
        },
        set: function (value) {
            this.setValue(StylableCardElementContainer.styleProperty, value);
        },
        enumerable: false,
        configurable: true
    });
    //#endregion
    StylableCardElementContainer.prototype.adjustRenderedElementSize = function (renderedElement) {
        _super.prototype.adjustRenderedElementSize.call(this, renderedElement);
        if (this.minPixelHeight) {
            renderedElement.style.minHeight = this.minPixelHeight + "px";
        }
    };
    StylableCardElementContainer.prototype.applyBackground = function () {
        if (this.renderedElement) {
            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));
            if (styleDefinition.backgroundColor) {
                this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);
            }
        }
    };
    StylableCardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new shared_1.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        if (this.isBleeding()) {
            // Bleed into the first parent that does have padding
            var padding = new shared_1.PaddingDefinition();
            this.getImmediateSurroundingPadding(padding);
            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
            this.renderedElement.style.marginRight = "-" + surroundingPadding.right + "px";
            this.renderedElement.style.marginLeft = "-" + surroundingPadding.left + "px";
            if (!this.isDesignMode()) {
                this.renderedElement.style.marginTop = "-" + surroundingPadding.top + "px";
                this.renderedElement.style.marginBottom = "-" + surroundingPadding.bottom + "px";
            }
            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {
                this.separatorElement.style.marginLeft = "-" + surroundingPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + surroundingPadding.right + "px";
            }
        }
        else {
            this.renderedElement.style.marginRight = "0";
            this.renderedElement.style.marginLeft = "0";
            this.renderedElement.style.marginTop = "0";
            this.renderedElement.style.marginBottom = "0";
            if (this.separatorElement) {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    StylableCardElementContainer.prototype.getHasBackground = function () {
        var currentElement = this.parent;
        while (currentElement) {
            var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;
            if (currentElement instanceof StylableCardElementContainer) {
                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {
                    return true;
                }
            }
            currentElement = currentElement.parent;
        }
        return false;
    };
    StylableCardElementContainer.prototype.getDefaultPadding = function () {
        return this.getHasBackground() ?
            new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);
    };
    StylableCardElementContainer.prototype.getHasExpandedAction = function () {
        return false;
    };
    StylableCardElementContainer.prototype.getBleed = function () {
        return this._bleed;
    };
    StylableCardElementContainer.prototype.setBleed = function (value) {
        this._bleed = value;
    };
    Object.defineProperty(StylableCardElementContainer.prototype, "renderedActionCount", {
        get: function () {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "hasExplicitStyle", {
        get: function () {
            return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "allowCustomStyle", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    StylableCardElementContainer.prototype.isBleeding = function () {
        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();
    };
    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        var explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);
        if (explicitStyle !== undefined) {
            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);
            if (!styleDefinition) {
                context.addFailure(this, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(explicitStyle, "style"));
            }
        }
    };
    StylableCardElementContainer.prototype.render = function () {
        var renderedElement = _super.prototype.render.call(this);
        if (renderedElement && this.getHasBackground()) {
            this.applyBackground();
        }
        return renderedElement;
    };
    StylableCardElementContainer.prototype.getEffectiveStyle = function () {
        var effectiveStyle = this.style;
        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);
    };
    StylableCardElementContainer.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, "style", [
        { value: Enums.ContainerStyle.Default },
        { value: Enums.ContainerStyle.Emphasis },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Accent },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Good },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Attention },
        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Warning }
    ]);
    StylableCardElementContainer.bleedProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, "bleed", false);
    StylableCardElementContainer.minHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_2, "minHeight");
    __decorate([
        serialization_1.property(StylableCardElementContainer.styleProperty)
    ], StylableCardElementContainer.prototype, "style", null);
    __decorate([
        serialization_1.property(StylableCardElementContainer.bleedProperty)
    ], StylableCardElementContainer.prototype, "_bleed", void 0);
    __decorate([
        serialization_1.property(StylableCardElementContainer.minHeightProperty)
    ], StylableCardElementContainer.prototype, "minPixelHeight", void 0);
    return StylableCardElementContainer;
}(CardElementContainer));
exports.StylableCardElementContainer = StylableCardElementContainer;
var BackgroundImage = /** @class */ (function (_super) {
    __extends(BackgroundImage, _super);
    function BackgroundImage() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    //#endregion
    BackgroundImage.prototype.getSchemaKey = function () {
        return "BackgroundImage";
    };
    BackgroundImage.prototype.internalParse = function (source, context) {
        if (typeof source === "string") {
            this.resetDefaultValues();
            this.url = source;
        }
        else {
            return _super.prototype.internalParse.call(this, source, context);
        }
    };
    BackgroundImage.prototype.apply = function (element) {
        if (this.url && element.renderedElement) {
            element.renderedElement.style.backgroundImage = "url('" + element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) + "')";
            switch (this.fillMode) {
                case Enums.FillMode.Repeat:
                    element.renderedElement.style.backgroundRepeat = "repeat";
                    break;
                case Enums.FillMode.RepeatHorizontally:
                    element.renderedElement.style.backgroundRepeat = "repeat-x";
                    break;
                case Enums.FillMode.RepeatVertically:
                    element.renderedElement.style.backgroundRepeat = "repeat-y";
                    break;
                case Enums.FillMode.Cover:
                default:
                    element.renderedElement.style.backgroundRepeat = "no-repeat";
                    element.renderedElement.style.backgroundSize = "cover";
                    break;
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.renderedElement.style.backgroundPositionX = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.renderedElement.style.backgroundPositionX = "right";
                    break;
            }
            switch (this.verticalAlignment) {
                case Enums.VerticalAlignment.Center:
                    element.renderedElement.style.backgroundPositionY = "center";
                    break;
                case Enums.VerticalAlignment.Bottom:
                    element.renderedElement.style.backgroundPositionY = "bottom";
                    break;
            }
        }
    };
    BackgroundImage.prototype.isValid = function () {
        return this.url ? true : false;
    };
    //#region Schema
    BackgroundImage.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "url");
    BackgroundImage.fillModeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "fillMode", Enums.FillMode, Enums.FillMode.Cover);
    BackgroundImage.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "horizontalAlignment", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);
    BackgroundImage.verticalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, "verticalAlignment", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);
    __decorate([
        serialization_1.property(BackgroundImage.urlProperty)
    ], BackgroundImage.prototype, "url", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.fillModeProperty)
    ], BackgroundImage.prototype, "fillMode", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.horizontalAlignmentProperty)
    ], BackgroundImage.prototype, "horizontalAlignment", void 0);
    __decorate([
        serialization_1.property(BackgroundImage.verticalAlignmentProperty)
    ], BackgroundImage.prototype, "verticalAlignment", void 0);
    return BackgroundImage;
}(serialization_1.SerializableObject));
exports.BackgroundImage = BackgroundImage;
var Container = /** @class */ (function (_super) {
    __extends(Container, _super);
    function Container() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.verticalContentAlignment = Enums.VerticalAlignment.Top;
        //#endregion
        _this._items = [];
        _this._renderedItems = [];
        return _this;
    }
    Object.defineProperty(Container.prototype, "backgroundImage", {
        get: function () {
            return this.getValue(Container.backgroundImageProperty);
        },
        enumerable: false,
        configurable: true
    });
    Container.prototype.insertItemAt = function (item, index, forceInsert) {
        if (!item.parent || forceInsert) {
            if (item.isStandalone) {
                if (index < 0 || index >= this._items.length) {
                    this._items.push(item);
                }
                else {
                    this._items.splice(index, 0, item);
                }
                item.setParent(this);
            }
            else {
                throw new Error(strings_1.Strings.errors.elementTypeNotStandalone(item.getJsonTypeName()));
            }
        }
        else {
            throw new Error(strings_1.Strings.errors.elementAlreadyParented());
        }
    };
    Container.prototype.supportsExcplitiHeight = function () {
        return true;
    };
    Container.prototype.getItemsCollectionPropertyName = function () {
        return "items";
    };
    Container.prototype.applyBackground = function () {
        if (this.backgroundImage.isValid() && this.renderedElement) {
            this.backgroundImage.apply(this);
        }
        _super.prototype.applyBackground.call(this);
    };
    Container.prototype.internalRender = function () {
        this._renderedItems = [];
        // Cache hostConfig to avoid walking the parent hierarchy several times
        var hostConfig = this.hostConfig;
        var element = document.createElement("div");
        if (this.rtl !== undefined && this.rtl) {
            element.dir = "rtl";
        }
        element.classList.add(hostConfig.makeCssClassName("ac-container"));
        element.style.display = "flex";
        element.style.flexDirection = "column";
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
            // Forces the container to be at least as tall as its content.
            //
            // Fixes a quirk in Chrome where, for nested flex elements, the
            // inner element's height would never exceed the outer element's
            // height. This caused overflow truncation to break -- containers
            // would always be measured as not overflowing, since their heights
            // were constrained by their parents as opposed to truly reflecting
            // the height of their content.
            //
            // See the "Browser Rendering Notes" section of this answer:
            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size
            element.style.minHeight = '-webkit-min-content';
        }
        switch (this.verticalContentAlignment) {
            case Enums.VerticalAlignment.Center:
                element.style.justifyContent = "center";
                break;
            case Enums.VerticalAlignment.Bottom:
                element.style.justifyContent = "flex-end";
                break;
            default:
                element.style.justifyContent = "flex-start";
                break;
        }
        if (this._items.length > 0) {
            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                var item = _a[_i];
                var renderedItem = this.isElementAllowed(item) ? item.render() : undefined;
                if (renderedItem) {
                    if (this._renderedItems.length > 0 && item.separatorElement) {
                        item.separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, item.separatorElement);
                    }
                    Utils.appendChild(element, renderedItem);
                    this._renderedItems.push(item);
                }
            }
        }
        else {
            if (this.isDesignMode()) {
                var placeholderElement = this.createPlaceholderElement();
                placeholderElement.style.width = "100%";
                placeholderElement.style.height = "100%";
                element.appendChild(placeholderElement);
            }
        }
        return element;
    };
    Container.prototype.truncateOverflow = function (maxHeight) {
        if (this.renderedElement) {
            // Add 1 to account for rounding differences between browsers
            var boundary_1 = this.renderedElement.offsetTop + maxHeight + 1;
            var handleElement_1 = function (cardElement) {
                var elt = cardElement.renderedElement;
                if (elt) {
                    switch (Utils.getFitStatus(elt, boundary_1)) {
                        case Enums.ContainerFitStatus.FullyInContainer:
                            var sizeChanged = cardElement['resetOverflow']();
                            // If the element's size changed after resetting content,
                            // we have to check if it still fits fully in the card
                            if (sizeChanged) {
                                handleElement_1(cardElement);
                            }
                            break;
                        case Enums.ContainerFitStatus.Overflowing:
                            var maxHeight_1 = boundary_1 - elt.offsetTop;
                            cardElement['handleOverflow'](maxHeight_1);
                            break;
                        case Enums.ContainerFitStatus.FullyOutOfContainer:
                            cardElement['handleOverflow'](0);
                            break;
                    }
                }
            };
            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                var item = _a[_i];
                handleElement_1(item);
            }
            return true;
        }
        return false;
    };
    Container.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            item['resetOverflow']();
        }
    };
    Container.prototype.getHasBackground = function () {
        return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);
    };
    Container.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this.clear();
        this.setShouldFallback(false);
        var jsonItems = source[this.getItemsCollectionPropertyName()];
        if (Array.isArray(jsonItems)) {
            for (var _i = 0, jsonItems_1 = jsonItems; _i < jsonItems_1.length; _i++) {
                var item = jsonItems_1[_i];
                var element = context.parseElement(this, item, !this.isDesignMode());
                if (element) {
                    this.insertItemAt(element, -1, true);
                }
            }
        }
    };
    Container.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        context.serializeArray(target, this.getItemsCollectionPropertyName(), this._items);
    };
    Object.defineProperty(Container.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Container.prototype.getItemCount = function () {
        return this._items.length;
    };
    Container.prototype.getItemAt = function (index) {
        return this._items[index];
    };
    Container.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {
                var item = _a[_i];
                if (item.isVisible) {
                    return item;
                }
            }
            ;
        }
        return undefined;
    };
    Container.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var i = this._renderedItems.length - 1; i >= 0; i--) {
                if (this._renderedItems[i].isVisible) {
                    return this._renderedItems[i];
                }
            }
        }
        return undefined;
    };
    Container.prototype.getJsonTypeName = function () {
        return "Container";
    };
    Container.prototype.isFirstElement = function (element) {
        var designMode = this.isDesignMode();
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (item.isVisible || designMode) {
                return item == element;
            }
        }
        return false;
    };
    Container.prototype.isLastElement = function (element) {
        var designMode = this.isDesignMode();
        for (var i = this._items.length - 1; i >= 0; i--) {
            if (this._items[i].isVisible || designMode) {
                return this._items[i] == element;
            }
        }
        return false;
    };
    Container.prototype.isRtl = function () {
        if (this.rtl !== undefined) {
            return this.rtl;
        }
        else {
            var parentContainer = this.getParentContainer();
            return parentContainer ? parentContainer.isRtl() : false;
        }
    };
    Container.prototype.isBleedingAtTop = function () {
        var firstRenderedItem = this.getFirstVisibleRenderedItem();
        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);
    };
    Container.prototype.isBleedingAtBottom = function () {
        var lastRenderedItem = this.getLastVisibleRenderedItem();
        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);
    };
    Container.prototype.indexOf = function (cardElement) {
        return this._items.indexOf(cardElement);
    };
    Container.prototype.addItem = function (item) {
        this.insertItemAt(item, -1, false);
    };
    Container.prototype.insertItemBefore = function (item, insertBefore) {
        this.insertItemAt(item, this._items.indexOf(insertBefore), false);
    };
    Container.prototype.insertItemAfter = function (item, insertAfter) {
        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);
    };
    Container.prototype.removeItem = function (item) {
        var itemIndex = this._items.indexOf(item);
        if (itemIndex >= 0) {
            this._items.splice(itemIndex, 1);
            item.setParent(undefined);
            this.updateLayout();
            return true;
        }
        return false;
    };
    Container.prototype.clear = function () {
        this._items = [];
        this._renderedItems = [];
    };
    Container.prototype.getResourceInformation = function () {
        var result = _super.prototype.getResourceInformation.call(this);
        if (this.backgroundImage.isValid()) {
            result.push({
                url: this.backgroundImage.url,
                mimeType: "image"
            });
        }
        return result;
    };
    Container.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            if (this.selectAction) {
                result = this.selectAction.getActionById(id);
            }
            if (!result) {
                for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                    var item = _a[_i];
                    result = item.getActionById(id);
                    if (result) {
                        break;
                    }
                }
            }
        }
        return result;
    };
    Object.defineProperty(Container.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: false,
        configurable: true
    });
    Container.backgroundImageProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_0, "backgroundImage", BackgroundImage);
    Container.verticalContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, "verticalContentAlignment", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);
    Container.rtlProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, "rtl");
    __decorate([
        serialization_1.property(Container.backgroundImageProperty)
    ], Container.prototype, "backgroundImage", null);
    __decorate([
        serialization_1.property(Container.verticalContentAlignmentProperty)
    ], Container.prototype, "verticalContentAlignment", void 0);
    __decorate([
        serialization_1.property(Container.rtlProperty)
    ], Container.prototype, "rtl", void 0);
    return Container;
}(StylableCardElementContainer));
exports.Container = Container;
var Column = /** @class */ (function (_super) {
    __extends(Column, _super);
    function Column(width) {
        if (width === void 0) { width = "stretch"; }
        var _this = _super.call(this) || this;
        _this.width = "stretch";
        //#endregion
        _this._computedWeight = 0;
        _this.width = width;
        return _this;
    }
    Column.prototype.adjustRenderedElementSize = function (renderedElement) {
        var minDesignTimeColumnHeight = 20;
        if (this.isDesignMode()) {
            renderedElement.style.minWidth = "20px";
            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + "px";
        }
        else {
            renderedElement.style.minWidth = "0";
            if (this.minPixelHeight) {
                renderedElement.style.minHeight = this.minPixelHeight + "px";
            }
        }
        if (this.width === "auto") {
            renderedElement.style.flex = "0 1 auto";
        }
        else if (this.width === "stretch") {
            renderedElement.style.flex = "1 1 50px";
        }
        else if (this.width instanceof shared_1.SizeAndUnit) {
            if (this.width.unit == Enums.SizeUnit.Pixel) {
                renderedElement.style.flex = "0 0 auto";
                renderedElement.style.width = this.width.physicalSize + "px";
            }
            else {
                renderedElement.style.flex = "1 1 " + (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) + "%";
            }
        }
    };
    Column.prototype.shouldSerialize = function (context) {
        return true;
    };
    Object.defineProperty(Column.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Vertical;
        },
        enumerable: false,
        configurable: true
    });
    Column.prototype.getJsonTypeName = function () {
        return "Column";
    };
    Object.defineProperty(Column.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.parent instanceof ColumnSet) {
                return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);
            }
            else {
                return false;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Column.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    //#region Schema
    Column.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "width", function (sender, property, source, context) {
        var result = property.defaultValue;
        var value = source[property.name];
        var invalidWidth = false;
        if (typeof value === "number" && !isNaN(value)) {
            result = new shared_1.SizeAndUnit(value, Enums.SizeUnit.Weight);
        }
        else if (value === "auto" || value === "stretch") {
            result = value;
        }
        else if (typeof value === "string") {
            try {
                result = shared_1.SizeAndUnit.parse(value);
                if (result.unit === Enums.SizeUnit.Pixel && property.targetVersion.compareTo(context.targetVersion) > 0) {
                    invalidWidth = true;
                }
            }
            catch (e) {
                invalidWidth = true;
            }
        }
        else {
            invalidWidth = true;
        }
        if (invalidWidth) {
            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidColumnWidth(value));
            result = "auto";
        }
        return result;
    }, function (sender, property, target, value, context) {
        if (value instanceof shared_1.SizeAndUnit) {
            if (value.unit === Enums.SizeUnit.Pixel) {
                context.serializeValue(target, "width", value.physicalSize + "px");
            }
            else {
                context.serializeNumber(target, "width", value.physicalSize);
            }
        }
        else {
            context.serializeValue(target, "width", value);
        }
    }, "stretch");
    __decorate([
        serialization_1.property(Column.widthProperty)
    ], Column.prototype, "width", void 0);
    return Column;
}(Container));
exports.Column = Column;
var ColumnSet = /** @class */ (function (_super) {
    __extends(ColumnSet, _super);
    function ColumnSet() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._columns = [];
        return _this;
    }
    ColumnSet.prototype.createColumnInstance = function (source, context) {
        return context.parseCardObject(this, source, [], // Forbidden types not supported for elements for now
        !this.isDesignMode(), function (typeName) {
            return !typeName || typeName === "Column" ? new Column() : undefined;
        }, function (typeName, errorType) {
            context.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));
        });
    };
    ColumnSet.prototype.internalRender = function () {
        this._renderedColumns = [];
        if (this._columns.length > 0) {
            // Cache hostConfig to avoid walking the parent hierarchy several times
            var hostConfig = this.hostConfig;
            var element = document.createElement("div");
            element.className = hostConfig.makeCssClassName("ac-columnSet");
            element.style.display = "flex";
            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {
                // See comment in Container.internalRender()
                element.style.minHeight = '-webkit-min-content';
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            var totalWeight = 0;
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.width instanceof shared_1.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {
                    totalWeight += column.width.physicalSize;
                }
            }
            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {
                var column = _c[_b];
                if (column.width instanceof shared_1.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {
                    var computedWeight = 100 / totalWeight * column.width.physicalSize;
                    // Best way to emulate "internal" access I know of
                    column["_computedWeight"] = computedWeight;
                }
                var renderedColumn = column.render();
                if (renderedColumn) {
                    if (this._renderedColumns.length > 0 && column.separatorElement) {
                        column.separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, column.separatorElement);
                    }
                    Utils.appendChild(element, renderedColumn);
                    this._renderedColumns.push(column);
                }
            }
            return this._renderedColumns.length > 0 ? element : undefined;
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.truncateOverflow = function (maxHeight) {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['handleOverflow'](maxHeight);
        }
        return true;
    };
    ColumnSet.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['resetOverflow']();
        }
    };
    Object.defineProperty(ColumnSet.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    ColumnSet.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._columns = [];
        this._renderedColumns = [];
        var jsonColumns = source["columns"];
        if (Array.isArray(jsonColumns)) {
            for (var _i = 0, jsonColumns_1 = jsonColumns; _i < jsonColumns_1.length; _i++) {
                var item = jsonColumns_1[_i];
                var column = this.createColumnInstance(item, context);
                if (column) {
                    this._columns.push(column);
                }
            }
        }
    };
    ColumnSet.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        context.serializeArray(target, "columns", this._columns);
    };
    ColumnSet.prototype.isFirstElement = function (element) {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            if (column.isVisible) {
                return column == element;
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtTop = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtTop()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtBottom = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtBottom()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.getItemCount = function () {
        return this._columns.length;
    };
    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[0];
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[this._renderedColumns.length - 1];
        }
        else {
            return undefined;
        }
    };
    ColumnSet.prototype.getColumnAt = function (index) {
        return this._columns[index];
    };
    ColumnSet.prototype.getItemAt = function (index) {
        return this.getColumnAt(index);
    };
    ColumnSet.prototype.getJsonTypeName = function () {
        return "ColumnSet";
    };
    ColumnSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        var weightedColumns = 0;
        var stretchedColumns = 0;
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            if (typeof column.width === "number") {
                weightedColumns++;
            }
            else if (column.width === "stretch") {
                stretchedColumns++;
            }
        }
        if (weightedColumns > 0 && stretchedColumns > 0) {
            context.addFailure(this, Enums.ValidationEvent.Hint, strings_1.Strings.hints.dontUseWeightedAndStrecthedColumnsInSameSet());
        }
    };
    ColumnSet.prototype.addColumn = function (column) {
        if (!column.parent) {
            this._columns.push(column);
            column.setParent(this);
        }
        else {
            throw new Error(strings_1.Strings.errors.columnAlreadyBelongsToAnotherSet());
        }
    };
    ColumnSet.prototype.removeItem = function (item) {
        if (item instanceof Column) {
            var itemIndex = this._columns.indexOf(item);
            if (itemIndex >= 0) {
                this._columns.splice(itemIndex, 1);
                item.setParent(undefined);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ColumnSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;
    };
    ColumnSet.prototype.isLeftMostElement = function (element) {
        return this._columns.indexOf(element) == 0;
    };
    ColumnSet.prototype.isRightMostElement = function (element) {
        return this._columns.indexOf(element) == this._columns.length - 1;
    };
    ColumnSet.prototype.isTopElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.isBottomElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.getActionById = function (id) {
        var result = undefined;
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            result = column.getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    Object.defineProperty(ColumnSet.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
        },
        enumerable: false,
        configurable: true
    });
    return ColumnSet;
}(StylableCardElementContainer));
exports.ColumnSet = ColumnSet;
function raiseImageLoadedEvent(image) {
    var card = image.getRootElement();
    var onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;
    if (onImageLoadedHandler) {
        onImageLoadedHandler(image);
    }
}
function raiseAnchorClickedEvent(element, anchor) {
    var card = element.getRootElement();
    var onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;
    return onAnchorClickedHandler !== undefined ? onAnchorClickedHandler(element, anchor) : false;
}
function raiseExecuteActionEvent(action) {
    var card = action.parent ? action.parent.getRootElement() : undefined;
    var onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;
    if (action.prepareForExecution() && onExecuteActionHandler) {
        onExecuteActionHandler(action);
    }
}
function raiseInlineCardExpandedEvent(action, isExpanded) {
    var card = action.parent ? action.parent.getRootElement() : undefined;
    var onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;
    if (onInlineCardExpandedHandler) {
        onInlineCardExpandedHandler(action, isExpanded);
    }
}
function raiseInputValueChangedEvent(input) {
    var card = input.getRootElement();
    var onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;
    if (onInputValueChangedHandler) {
        onInputValueChangedHandler(input);
    }
}
function raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {
    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }
    var rootElement = element.getRootElement();
    if (shouldUpdateLayout) {
        rootElement.updateLayout();
    }
    var card = rootElement;
    var onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;
    if (onElementVisibilityChangedHandler !== undefined) {
        onElementVisibilityChangedHandler(element);
    }
}
var ContainerWithActions = /** @class */ (function (_super) {
    __extends(ContainerWithActions, _super);
    function ContainerWithActions() {
        var _this = _super.call(this) || this;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ContainerWithActions.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        this._actionCollection.parse(source["actions"], context);
    };
    ContainerWithActions.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        this._actionCollection.toJSON(target, "actions", context);
    };
    ContainerWithActions.prototype.internalRender = function () {
        var element = _super.prototype.internalRender.call(this);
        if (element) {
            var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);
            if (renderedActions) {
                Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {
                    spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing)
                }, Enums.Orientation.Horizontal));
                Utils.appendChild(element, renderedActions);
            }
            if (this.renderIfEmpty) {
                return element;
            }
            else {
                return element.children.length > 0 ? element : undefined;
            }
        }
        else {
            return undefined;
        }
    };
    ContainerWithActions.prototype.getHasExpandedAction = function () {
        if (this.renderedActionCount == 0) {
            return false;
        }
        else if (this.renderedActionCount == 1) {
            return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
        }
        else {
            return this._actionCollection.expandedAction !== undefined;
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "renderedActionCount", {
        get: function () {
            return this._actionCollection.renderedActionCount;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ContainerWithActions.prototype, "renderIfEmpty", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    ContainerWithActions.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ContainerWithActions.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            return _super.prototype.getActionAt.call(this, index);
        }
    };
    ContainerWithActions.prototype.getActionById = function (id) {
        var result = this._actionCollection.getActionById(id);
        return result ? result : _super.prototype.getActionById.call(this, id);
    };
    ContainerWithActions.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this._actionCollection) {
            this._actionCollection.validateProperties(context);
        }
    };
    ContainerWithActions.prototype.isLastElement = function (element) {
        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;
    };
    ContainerWithActions.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ContainerWithActions.prototype.clear = function () {
        _super.prototype.clear.call(this);
        this._actionCollection.clear();
    };
    ContainerWithActions.prototype.getAllInputs = function (processActions) {
        if (processActions === void 0) { processActions = true; }
        var result = _super.prototype.getAllInputs.call(this, processActions);
        if (processActions) {
            result = result.concat(this._actionCollection.getAllInputs(processActions));
        }
        return result;
    };
    ContainerWithActions.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());
    };
    ContainerWithActions.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction !== undefined;
            }
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    return ContainerWithActions;
}(Container));
exports.ContainerWithActions = ContainerWithActions;
// @dynamic
var AdaptiveCard = /** @class */ (function (_super) {
    __extends(AdaptiveCard, _super);
    function AdaptiveCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.designMode = false;
        return _this;
    }
    Object.defineProperty(AdaptiveCard, "processMarkdown", {
        get: function () {
            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());
        },
        set: function (value) {
            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.applyMarkdown = function (text) {
        var result = {
            didProcess: false
        };
        if (AdaptiveCard.onProcessMarkdown) {
            AdaptiveCard.onProcessMarkdown(text, result);
        }
        else if (window.markdownit) {
            // Check for markdownit
            var markdownIt = window.markdownit;
            result.outputHtml = markdownIt().render(text);
            result.didProcess = true;
        }
        else {
            console.warn(strings_1.Strings.errors.markdownProcessingNotEnabled);
        }
        return result;
    };
    AdaptiveCard.prototype.isVersionSupported = function () {
        if (this.bypassVersionCheck) {
            return true;
        }
        else {
            var unsupportedVersion = !this.version ||
                !this.version.isValid ||
                (this.maxVersion.major < this.version.major) ||
                (this.maxVersion.major == this.version.major && this.maxVersion.minor < this.version.minor);
            return !unsupportedVersion;
        }
    };
    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {
        return "body";
    };
    AdaptiveCard.prototype.internalParse = function (source, context) {
        this._fallbackCard = undefined;
        var fallbackElement = context.parseElement(undefined, source["fallback"], !this.isDesignMode());
        if (fallbackElement) {
            this._fallbackCard = new AdaptiveCard();
            this._fallbackCard.addItem(fallbackElement);
        }
        _super.prototype.internalParse.call(this, source, context);
    };
    AdaptiveCard.prototype.internalToJSON = function (target, context) {
        this.setValue(AdaptiveCard.versionProperty, context.targetVersion);
        _super.prototype.internalToJSON.call(this, target, context);
    };
    AdaptiveCard.prototype.internalRender = function () {
        var renderedElement = _super.prototype.internalRender.call(this);
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {
            // Unlike containers, the root card element should be allowed to
            // be shorter than its content (otherwise the overflow truncation
            // logic would never get triggered)
            renderedElement.style.removeProperty("minHeight");
        }
        return renderedElement;
    };
    AdaptiveCard.prototype.getHasBackground = function () {
        return true;
    };
    AdaptiveCard.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    AdaptiveCard.prototype.shouldSerialize = function (context) {
        return true;
    };
    Object.defineProperty(AdaptiveCard.prototype, "renderIfEmpty", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "allowCustomStyle", {
        get: function () {
            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "hasBackground", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.prototype.getJsonTypeName = function () {
        return "AdaptiveCard";
    };
    AdaptiveCard.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this.getValue(CardElement.typeNameProperty) !== "AdaptiveCard") {
            context.addFailure(this, Enums.ValidationEvent.MissingCardType, strings_1.Strings.errors.invalidCardType());
        }
        if (!this.bypassVersionCheck && !this.version) {
            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet("version"));
        }
        else if (!this.isVersionSupported()) {
            context.addFailure(this, Enums.ValidationEvent.UnsupportedCardVersion, strings_1.Strings.errors.unsupportedCardVersion(this.version.toString(), this.maxVersion.toString()));
        }
    };
    AdaptiveCard.prototype.render = function (target) {
        var renderedCard;
        if (this.shouldFallback() && this._fallbackCard) {
            this._fallbackCard.hostConfig = this.hostConfig;
            renderedCard = this._fallbackCard.render();
        }
        else {
            renderedCard = _super.prototype.render.call(this);
            if (renderedCard) {
                renderedCard.classList.add(this.hostConfig.makeCssClassName("ac-adaptiveCard"));
                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.
                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For
                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a
                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex
                // by default.
                if (shared_1.GlobalSettings.setTabIndexAtCardRoot) {
                    renderedCard.tabIndex = 0;
                }
                if (this.speak) {
                    renderedCard.setAttribute("aria-label", this.speak);
                }
            }
        }
        if (target) {
            Utils.appendChild(target, renderedCard);
            this.updateLayout();
        }
        return renderedCard;
    };
    AdaptiveCard.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {
            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);
            this['handleOverflow'](this.renderedElement.offsetHeight - padding);
        }
    };
    AdaptiveCard.prototype.shouldFallback = function () {
        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();
    };
    Object.defineProperty(AdaptiveCard.prototype, "hasVisibleSeparator", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    AdaptiveCard.schemaUrl = "http://adaptivecards.io/schemas/adaptive-card.json";
    //#region Schema
    AdaptiveCard.$schemaProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "$schema", function (sender, property, source, context) {
        return AdaptiveCard.schemaUrl;
    }, function (sender, property, target, value, context) {
        context.serializeValue(target, property.name, AdaptiveCard.schemaUrl);
    });
    AdaptiveCard.versionProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, "version", function (sender, property, source, context) {
        var version = serialization_1.Version.parse(source[property.name], context);
        if (version === undefined) {
            version = serialization_1.Versions.latest;
            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidCardVersion(version.toString()));
        }
        return version;
    }, function (sender, property, target, value, context) {
        if (value !== undefined) {
            context.serializeValue(target, property.name, value.toString());
        }
    }, serialization_1.Versions.v1_0);
    AdaptiveCard.fallbackTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "fallbackText");
    AdaptiveCard.speakProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "speak");
    __decorate([
        serialization_1.property(AdaptiveCard.versionProperty)
    ], AdaptiveCard.prototype, "version", void 0);
    __decorate([
        serialization_1.property(AdaptiveCard.fallbackTextProperty)
    ], AdaptiveCard.prototype, "fallbackText", void 0);
    __decorate([
        serialization_1.property(AdaptiveCard.speakProperty)
    ], AdaptiveCard.prototype, "speak", void 0);
    return AdaptiveCard;
}(ContainerWithActions));
exports.AdaptiveCard = AdaptiveCard;
var InlineAdaptiveCard = /** @class */ (function (_super) {
    __extends(InlineAdaptiveCard, _super);
    function InlineAdaptiveCard() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.suppressStyle = false;
        return _this;
    }
    InlineAdaptiveCard.prototype.getSchemaKey = function () {
        return "InlineAdaptiveCard";
    };
    InlineAdaptiveCard.prototype.populateSchema = function (schema) {
        _super.prototype.populateSchema.call(this, schema);
        schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);
    };
    //#endregion
    InlineAdaptiveCard.prototype.getDefaultPadding = function () {
        return new shared_1.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    Object.defineProperty(InlineAdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InlineAdaptiveCard.prototype, "defaultStyle", {
        get: function () {
            if (this.suppressStyle) {
                return Enums.ContainerStyle.Default;
            }
            else {
                return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;
            }
        },
        enumerable: false,
        configurable: true
    });
    InlineAdaptiveCard.prototype.render = function (target) {
        var renderedCard = _super.prototype.render.call(this, target);
        if (renderedCard) {
            renderedCard.setAttribute("aria-live", "polite");
            renderedCard.removeAttribute("tabindex");
        }
        return renderedCard;
    };
    return InlineAdaptiveCard;
}(AdaptiveCard));
var GlobalRegistry = /** @class */ (function () {
    function GlobalRegistry() {
    }
    GlobalRegistry.populateWithDefaultElements = function (registry) {
        registry.clear();
        registry.register("Container", Container);
        registry.register("TextBlock", TextBlock);
        registry.register("RichTextBlock", RichTextBlock, serialization_1.Versions.v1_2);
        registry.register("TextRun", TextRun, serialization_1.Versions.v1_2);
        registry.register("Image", Image);
        registry.register("ImageSet", ImageSet);
        registry.register("Media", Media, serialization_1.Versions.v1_1);
        registry.register("FactSet", FactSet);
        registry.register("ColumnSet", ColumnSet);
        registry.register("ActionSet", ActionSet, serialization_1.Versions.v1_2);
        registry.register("Input.Text", TextInput);
        registry.register("Input.Date", DateInput);
        registry.register("Input.Time", TimeInput);
        registry.register("Input.Number", NumberInput);
        registry.register("Input.ChoiceSet", ChoiceSetInput);
        registry.register("Input.Toggle", ToggleInput);
    };
    GlobalRegistry.populateWithDefaultActions = function (registry) {
        registry.clear();
        registry.register(OpenUrlAction.JsonTypeName, OpenUrlAction);
        registry.register(SubmitAction.JsonTypeName, SubmitAction);
        registry.register(ShowCardAction.JsonTypeName, ShowCardAction);
        registry.register(ToggleVisibilityAction.JsonTypeName, ToggleVisibilityAction, serialization_1.Versions.v1_2);
    };
    GlobalRegistry.reset = function () {
        GlobalRegistry.populateWithDefaultElements(GlobalRegistry.elements);
        GlobalRegistry.populateWithDefaultActions(GlobalRegistry.actions);
    };
    GlobalRegistry.elements = new registry_1.CardObjectRegistry();
    GlobalRegistry.actions = new registry_1.CardObjectRegistry();
    return GlobalRegistry;
}());
exports.GlobalRegistry = GlobalRegistry;
GlobalRegistry.reset();
var SerializationContext = /** @class */ (function (_super) {
    __extends(SerializationContext, _super);
    function SerializationContext() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SerializationContext.prototype.internalParseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {
        var result = undefined;
        if (source && typeof source === "object") {
            var typeName = Utils.parseString(source["type"]);
            if (typeName) {
                if (forbiddenTypeNames.indexOf(typeName) >= 0) {
                    logParseEvent(typeName, 1 /* ForbiddenType */);
                }
                else {
                    var tryToFallback = false;
                    result = createInstanceCallback(typeName);
                    if (!result) {
                        tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback;
                        logParseEvent(typeName, 0 /* UnknownType */);
                    }
                    else {
                        result.setParent(parent);
                        result.parse(source, this);
                        tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback && result.shouldFallback();
                    }
                    if (tryToFallback) {
                        var fallback = source["fallback"];
                        if (!fallback && parent) {
                            parent.setShouldFallback(true);
                        }
                        if (typeof fallback === "string" && fallback.toLowerCase() === "drop") {
                            result = undefined;
                        }
                        else if (typeof fallback === "object") {
                            result = this.internalParseCardObject(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, logParseEvent);
                        }
                    }
                }
            }
        }
        return result;
    };
    SerializationContext.prototype.cardObjectParsed = function (o, source) {
        if (o instanceof Action && this.onParseAction) {
            this.onParseAction(o, source, this);
        }
        else if (o instanceof CardElement && this.onParseElement) {
            this.onParseElement(o, source, this);
        }
    };
    SerializationContext.prototype.parseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {
        var result = this.internalParseCardObject(parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent);
        if (result !== undefined) {
            this.cardObjectParsed(result, source);
        }
        return result;
    };
    SerializationContext.prototype.parseElement = function (parent, source, allowFallback) {
        var _this = this;
        return this.parseCardObject(parent, source, [], // Forbidden types not supported for elements for now
        allowFallback, function (typeName) {
            return _this.elementRegistry.createInstance(typeName, _this.targetVersion);
        }, function (typeName, errorType) {
            if (errorType === 0 /* UnknownType */) {
                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownElementType, strings_1.Strings.errors.unknownElementType(typeName));
            }
            else {
                _this.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));
            }
        });
    };
    SerializationContext.prototype.parseAction = function (parent, source, forbiddenActionTypes, allowFallback) {
        var _this = this;
        return this.parseCardObject(parent, source, forbiddenActionTypes, allowFallback, function (typeName) {
            return _this.actionRegistry.createInstance(typeName, _this.targetVersion);
        }, function (typeName, errorType) {
            if (errorType == 0 /* UnknownType */) {
                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownActionType, strings_1.Strings.errors.unknownActionType(typeName));
            }
            else {
                _this.logParseEvent(undefined, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(typeName));
            }
        });
    };
    Object.defineProperty(SerializationContext.prototype, "elementRegistry", {
        get: function () {
            return this._elementRegistry ? this._elementRegistry : GlobalRegistry.elements;
        },
        enumerable: false,
        configurable: true
    });
    // Not using a property setter here because the setter should accept "undefined"
    // whereas the getter should never return undefined.
    SerializationContext.prototype.setElementRegistry = function (value) {
        this._elementRegistry = value;
    };
    Object.defineProperty(SerializationContext.prototype, "actionRegistry", {
        get: function () {
            return this._actionRegistry ? this._actionRegistry : GlobalRegistry.actions;
        },
        enumerable: false,
        configurable: true
    });
    // Not using a property setter here because the setter should accept "undefined"
    // whereas the getter should never return undefined.
    SerializationContext.prototype.setActionRegistry = function (value) {
        this._actionRegistry = value;
    };
    return SerializationContext;
}(serialization_1.BaseSerializationContext));
exports.SerializationContext = SerializationContext;


/***/ }),

/***/ "./src/card-object.ts":
/*!****************************!*\
  !*** ./src/card-object.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CardObject = exports.ValidationResults = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var strings_1 = __webpack_require__(/*! ./strings */ "./src/strings.ts");
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var host_capabilities_1 = __webpack_require__(/*! ./host-capabilities */ "./src/host-capabilities.ts");
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var ValidationResults = /** @class */ (function () {
    function ValidationResults() {
        this.allIds = {};
        this.validationEvents = [];
    }
    ValidationResults.prototype.addFailure = function (cardObject, event, message) {
        this.validationEvents.push({
            phase: Enums.ValidationPhase.Validation,
            source: cardObject,
            event: event,
            message: message
        });
    };
    return ValidationResults;
}());
exports.ValidationResults = ValidationResults;
var CardObject = /** @class */ (function (_super) {
    __extends(CardObject, _super);
    function CardObject() {
        //#region Schema
        var _this = _super !== null && _super.apply(this, arguments) || this;
        //#endregion
        _this._shouldFallback = false;
        return _this;
    }
    CardObject.prototype.getSchemaKey = function () {
        return this.getJsonTypeName();
    };
    Object.defineProperty(CardObject.prototype, "requires", {
        get: function () {
            return this.getValue(CardObject.requiresProperty);
        },
        enumerable: false,
        configurable: true
    });
    CardObject.prototype.preProcessPropertyValue = function (property, propertyValue) {
        var value = propertyValue === undefined ? this.getValue(property) : propertyValue;
        if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {
            var currentObject = this;
            while (currentObject && !currentObject.onPreProcessPropertyValue) {
                currentObject = currentObject.parent;
            }
            if (currentObject && currentObject.onPreProcessPropertyValue) {
                return currentObject.onPreProcessPropertyValue(this, property, value);
            }
        }
        return value;
    };
    CardObject.prototype.setParent = function (value) {
        this._parent = value;
    };
    CardObject.prototype.setShouldFallback = function (value) {
        this._shouldFallback = value;
    };
    CardObject.prototype.shouldFallback = function () {
        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);
    };
    CardObject.prototype.getRootObject = function () {
        var rootObject = this;
        while (rootObject.parent) {
            rootObject = rootObject.parent;
        }
        return rootObject;
    };
    CardObject.prototype.internalValidateProperties = function (context) {
        if (this.id) {
            if (context.allIds.hasOwnProperty(this.id)) {
                if (context.allIds[this.id] == 1) {
                    context.addFailure(this, Enums.ValidationEvent.DuplicateId, strings_1.Strings.errors.duplicateId(this.id));
                }
                context.allIds[this.id] += 1;
            }
            else {
                context.allIds[this.id] = 1;
            }
        }
    };
    CardObject.prototype.validateProperties = function () {
        var result = new ValidationResults();
        this.internalValidateProperties(result);
        return result;
    };
    Object.defineProperty(CardObject.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardObject.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: false,
        configurable: true
    });
    CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "type", undefined, undefined, undefined, function (sender) {
        return sender.getJsonTypeName();
    });
    CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, "id");
    CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, "requires", host_capabilities_1.HostCapabilities, new host_capabilities_1.HostCapabilities());
    __decorate([
        serialization_1.property(CardObject.idProperty)
    ], CardObject.prototype, "id", void 0);
    __decorate([
        serialization_1.property(CardObject.requiresProperty)
    ], CardObject.prototype, "requires", null);
    return CardObject;
}(serialization_1.SerializableObject));
exports.CardObject = CardObject;


/***/ }),

/***/ "./src/enums.ts":
/*!**********************!*\
  !*** ./src/enums.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
exports.ContainerFitStatus = exports.ValidationEvent = exports.ValidationPhase = exports.ContainerStyle = exports.InputTextStyle = exports.ActionIconPlacement = exports.FillMode = exports.Orientation = exports.ShowCardActionMode = exports.ImageStyle = exports.ActionAlignment = exports.VerticalAlignment = exports.HorizontalAlignment = exports.TextColor = exports.Spacing = exports.FontType = exports.TextWeight = exports.TextSize = exports.SizeUnit = exports.ImageSize = exports.Size = exports.ActionStyle = void 0;
// Note the "weird" way these readonly fields are declared is to work around
// a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
// and adopt this syntax for all other static readonly fields.
var ActionStyle = /** @class */ (function () {
    function ActionStyle() {
    }
    ActionStyle.Default = "default";
    ActionStyle.Positive = "positive";
    ActionStyle.Destructive = "destructive";
    return ActionStyle;
}());
exports.ActionStyle = ActionStyle;
var Size;
(function (Size) {
    Size[Size["Auto"] = 0] = "Auto";
    Size[Size["Stretch"] = 1] = "Stretch";
    Size[Size["Small"] = 2] = "Small";
    Size[Size["Medium"] = 3] = "Medium";
    Size[Size["Large"] = 4] = "Large";
})(Size = exports.Size || (exports.Size = {}));
var ImageSize;
(function (ImageSize) {
    ImageSize[ImageSize["Small"] = 0] = "Small";
    ImageSize[ImageSize["Medium"] = 1] = "Medium";
    ImageSize[ImageSize["Large"] = 2] = "Large";
})(ImageSize = exports.ImageSize || (exports.ImageSize = {}));
var SizeUnit;
(function (SizeUnit) {
    SizeUnit[SizeUnit["Weight"] = 0] = "Weight";
    SizeUnit[SizeUnit["Pixel"] = 1] = "Pixel";
})(SizeUnit = exports.SizeUnit || (exports.SizeUnit = {}));
var TextSize;
(function (TextSize) {
    TextSize[TextSize["Small"] = 0] = "Small";
    TextSize[TextSize["Default"] = 1] = "Default";
    TextSize[TextSize["Medium"] = 2] = "Medium";
    TextSize[TextSize["Large"] = 3] = "Large";
    TextSize[TextSize["ExtraLarge"] = 4] = "ExtraLarge";
})(TextSize = exports.TextSize || (exports.TextSize = {}));
var TextWeight;
(function (TextWeight) {
    TextWeight[TextWeight["Lighter"] = 0] = "Lighter";
    TextWeight[TextWeight["Default"] = 1] = "Default";
    TextWeight[TextWeight["Bolder"] = 2] = "Bolder";
})(TextWeight = exports.TextWeight || (exports.TextWeight = {}));
var FontType;
(function (FontType) {
    FontType[FontType["Default"] = 0] = "Default";
    FontType[FontType["Monospace"] = 1] = "Monospace";
})(FontType = exports.FontType || (exports.FontType = {}));
var Spacing;
(function (Spacing) {
    Spacing[Spacing["None"] = 0] = "None";
    Spacing[Spacing["Small"] = 1] = "Small";
    Spacing[Spacing["Default"] = 2] = "Default";
    Spacing[Spacing["Medium"] = 3] = "Medium";
    Spacing[Spacing["Large"] = 4] = "Large";
    Spacing[Spacing["ExtraLarge"] = 5] = "ExtraLarge";
    Spacing[Spacing["Padding"] = 6] = "Padding";
})(Spacing = exports.Spacing || (exports.Spacing = {}));
var TextColor;
(function (TextColor) {
    TextColor[TextColor["Default"] = 0] = "Default";
    TextColor[TextColor["Dark"] = 1] = "Dark";
    TextColor[TextColor["Light"] = 2] = "Light";
    TextColor[TextColor["Accent"] = 3] = "Accent";
    TextColor[TextColor["Good"] = 4] = "Good";
    TextColor[TextColor["Warning"] = 5] = "Warning";
    TextColor[TextColor["Attention"] = 6] = "Attention";
})(TextColor = exports.TextColor || (exports.TextColor = {}));
var HorizontalAlignment;
(function (HorizontalAlignment) {
    HorizontalAlignment[HorizontalAlignment["Left"] = 0] = "Left";
    HorizontalAlignment[HorizontalAlignment["Center"] = 1] = "Center";
    HorizontalAlignment[HorizontalAlignment["Right"] = 2] = "Right";
})(HorizontalAlignment = exports.HorizontalAlignment || (exports.HorizontalAlignment = {}));
var VerticalAlignment;
(function (VerticalAlignment) {
    VerticalAlignment[VerticalAlignment["Top"] = 0] = "Top";
    VerticalAlignment[VerticalAlignment["Center"] = 1] = "Center";
    VerticalAlignment[VerticalAlignment["Bottom"] = 2] = "Bottom";
})(VerticalAlignment = exports.VerticalAlignment || (exports.VerticalAlignment = {}));
var ActionAlignment;
(function (ActionAlignment) {
    ActionAlignment[ActionAlignment["Left"] = 0] = "Left";
    ActionAlignment[ActionAlignment["Center"] = 1] = "Center";
    ActionAlignment[ActionAlignment["Right"] = 2] = "Right";
    ActionAlignment[ActionAlignment["Stretch"] = 3] = "Stretch";
})(ActionAlignment = exports.ActionAlignment || (exports.ActionAlignment = {}));
var ImageStyle;
(function (ImageStyle) {
    ImageStyle[ImageStyle["Default"] = 0] = "Default";
    ImageStyle[ImageStyle["Person"] = 1] = "Person";
})(ImageStyle = exports.ImageStyle || (exports.ImageStyle = {}));
var ShowCardActionMode;
(function (ShowCardActionMode) {
    ShowCardActionMode[ShowCardActionMode["Inline"] = 0] = "Inline";
    ShowCardActionMode[ShowCardActionMode["Popup"] = 1] = "Popup";
})(ShowCardActionMode = exports.ShowCardActionMode || (exports.ShowCardActionMode = {}));
var Orientation;
(function (Orientation) {
    Orientation[Orientation["Horizontal"] = 0] = "Horizontal";
    Orientation[Orientation["Vertical"] = 1] = "Vertical";
})(Orientation = exports.Orientation || (exports.Orientation = {}));
var FillMode;
(function (FillMode) {
    FillMode[FillMode["Cover"] = 0] = "Cover";
    FillMode[FillMode["RepeatHorizontally"] = 1] = "RepeatHorizontally";
    FillMode[FillMode["RepeatVertically"] = 2] = "RepeatVertically";
    FillMode[FillMode["Repeat"] = 3] = "Repeat";
})(FillMode = exports.FillMode || (exports.FillMode = {}));
var ActionIconPlacement;
(function (ActionIconPlacement) {
    ActionIconPlacement[ActionIconPlacement["LeftOfTitle"] = 0] = "LeftOfTitle";
    ActionIconPlacement[ActionIconPlacement["AboveTitle"] = 1] = "AboveTitle";
})(ActionIconPlacement = exports.ActionIconPlacement || (exports.ActionIconPlacement = {}));
var InputTextStyle;
(function (InputTextStyle) {
    InputTextStyle[InputTextStyle["Text"] = 0] = "Text";
    InputTextStyle[InputTextStyle["Tel"] = 1] = "Tel";
    InputTextStyle[InputTextStyle["Url"] = 2] = "Url";
    InputTextStyle[InputTextStyle["Email"] = 3] = "Email";
})(InputTextStyle = exports.InputTextStyle || (exports.InputTextStyle = {}));
/*
    This should really be a string enum, e.g.

        export enum ContainerStyle {
            Default = "default",
            Emphasis = "emphasis"
        }

    However, some hosts do not use a version of TypeScript
    recent enough to understand string enums. This is
    a compatible construct that does not require using
    a more recent version of TypeScript.

    Also note the "weird" way these readonly fields are declared is to work around
    a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    and adopt this syntax for all other static readonly fields.
*/
var ContainerStyle = /** @class */ (function () {
    function ContainerStyle() {
    }
    ContainerStyle.Default = "default";
    ContainerStyle.Emphasis = "emphasis";
    ContainerStyle.Accent = "accent";
    ContainerStyle.Good = "good";
    ContainerStyle.Attention = "attention";
    ContainerStyle.Warning = "warning";
    return ContainerStyle;
}());
exports.ContainerStyle = ContainerStyle;
var ValidationPhase;
(function (ValidationPhase) {
    ValidationPhase[ValidationPhase["Parse"] = 0] = "Parse";
    ValidationPhase[ValidationPhase["ToJSON"] = 1] = "ToJSON";
    ValidationPhase[ValidationPhase["Validation"] = 2] = "Validation";
})(ValidationPhase = exports.ValidationPhase || (exports.ValidationPhase = {}));
var ValidationEvent;
(function (ValidationEvent) {
    ValidationEvent[ValidationEvent["Hint"] = 0] = "Hint";
    ValidationEvent[ValidationEvent["ActionTypeNotAllowed"] = 1] = "ActionTypeNotAllowed";
    ValidationEvent[ValidationEvent["CollectionCantBeEmpty"] = 2] = "CollectionCantBeEmpty";
    ValidationEvent[ValidationEvent["Deprecated"] = 3] = "Deprecated";
    ValidationEvent[ValidationEvent["ElementTypeNotAllowed"] = 4] = "ElementTypeNotAllowed";
    ValidationEvent[ValidationEvent["InteractivityNotAllowed"] = 5] = "InteractivityNotAllowed";
    ValidationEvent[ValidationEvent["InvalidPropertyValue"] = 6] = "InvalidPropertyValue";
    ValidationEvent[ValidationEvent["MissingCardType"] = 7] = "MissingCardType";
    ValidationEvent[ValidationEvent["PropertyCantBeNull"] = 8] = "PropertyCantBeNull";
    ValidationEvent[ValidationEvent["TooManyActions"] = 9] = "TooManyActions";
    ValidationEvent[ValidationEvent["UnknownActionType"] = 10] = "UnknownActionType";
    ValidationEvent[ValidationEvent["UnknownElementType"] = 11] = "UnknownElementType";
    ValidationEvent[ValidationEvent["UnsupportedCardVersion"] = 12] = "UnsupportedCardVersion";
    ValidationEvent[ValidationEvent["DuplicateId"] = 13] = "DuplicateId";
    ValidationEvent[ValidationEvent["UnsupportedProperty"] = 14] = "UnsupportedProperty";
    ValidationEvent[ValidationEvent["RequiredInputsShouldHaveLabel"] = 15] = "RequiredInputsShouldHaveLabel";
    ValidationEvent[ValidationEvent["RequiredInputsShouldHaveErrorMessage"] = 16] = "RequiredInputsShouldHaveErrorMessage";
    ValidationEvent[ValidationEvent["Other"] = 17] = "Other";
})(ValidationEvent = exports.ValidationEvent || (exports.ValidationEvent = {}));
var ContainerFitStatus;
(function (ContainerFitStatus) {
    ContainerFitStatus[ContainerFitStatus["FullyInContainer"] = 0] = "FullyInContainer";
    ContainerFitStatus[ContainerFitStatus["Overflowing"] = 1] = "Overflowing";
    ContainerFitStatus[ContainerFitStatus["FullyOutOfContainer"] = 2] = "FullyOutOfContainer";
})(ContainerFitStatus = exports.ContainerFitStatus || (exports.ContainerFitStatus = {}));


/***/ }),

/***/ "./src/host-capabilities.ts":
/*!**********************************!*\
  !*** ./src/host-capabilities.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.HostCapabilities = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var HostCapabilities = /** @class */ (function (_super) {
    __extends(HostCapabilities, _super);
    function HostCapabilities() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._capabilities = {};
        return _this;
    }
    HostCapabilities.prototype.getSchemaKey = function () {
        return "HostCapabilities";
    };
    HostCapabilities.prototype.internalParse = function (source, context) {
        _super.prototype.internalParse.call(this, source, context);
        if (source) {
            for (var name_1 in source) {
                var jsonVersion = source[name_1];
                if (typeof jsonVersion === "string") {
                    if (jsonVersion == "*") {
                        this.addCapability(name_1, "*");
                    }
                    else {
                        var version = serialization_1.Version.parse(jsonVersion, context);
                        if (version && version.isValid) {
                            this.addCapability(name_1, version);
                        }
                    }
                }
            }
        }
    };
    HostCapabilities.prototype.internalToJSON = function (target, context) {
        _super.prototype.internalToJSON.call(this, target, context);
        for (var key in this._capabilities) {
            target[key] = this._capabilities[key];
        }
    };
    HostCapabilities.prototype.addCapability = function (name, version) {
        this._capabilities[name] = version;
    };
    HostCapabilities.prototype.removeCapability = function (name) {
        delete this._capabilities[name];
    };
    HostCapabilities.prototype.clear = function () {
        this._capabilities = {};
    };
    HostCapabilities.prototype.hasCapability = function (name, version) {
        if (this._capabilities.hasOwnProperty(name)) {
            if (version == "*" || this._capabilities[name] == "*") {
                return true;
            }
            return version.compareTo(this._capabilities[name]) <= 0;
        }
        return false;
    };
    HostCapabilities.prototype.areAllMet = function (hostCapabilities) {
        for (var capabilityName in this._capabilities) {
            if (!hostCapabilities.hasCapability(capabilityName, this._capabilities[capabilityName])) {
                return false;
            }
        }
        return true;
    };
    return HostCapabilities;
}(serialization_1.SerializableObject));
exports.HostCapabilities = HostCapabilities;


/***/ }),

/***/ "./src/host-config.ts":
/*!****************************!*\
  !*** ./src/host-config.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultHostConfig = exports.HostConfig = exports.FontTypeSet = exports.FontTypeDefinition = exports.ContainerStyleSet = exports.ContainerStyleDefinition = exports.ColorSetDefinition = exports.ActionsConfig = exports.ShowCardActionConfig = exports.FactSetConfig = exports.FactTitleDefinition = exports.FactTextDefinition = exports.InputConfig = exports.InputLabelConfig = exports.RequiredInputLabelTextDefinition = exports.BaseTextDefinition = exports.MediaConfig = exports.ImageSetConfig = exports.AdaptiveCardConfig = exports.TextColorDefinition = exports.ColorDefinition = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var host_capabilities_1 = __webpack_require__(/*! ./host-capabilities */ "./src/host-capabilities.ts");
function parseHostConfigEnum(targetEnum, value, defaultValue) {
    if (typeof value === "string") {
        var parsedValue = Utils.parseEnum(targetEnum, value, defaultValue);
        return parsedValue !== undefined ? parsedValue : defaultValue;
    }
    else if (typeof value === "number") {
        return value;
    }
    else {
        return defaultValue;
    }
}
var ColorDefinition = /** @class */ (function () {
    function ColorDefinition(defaultColor, subtleColor) {
        this.default = "#000000";
        this.subtle = "#666666";
        if (defaultColor) {
            this.default = defaultColor;
        }
        if (subtleColor) {
            this.subtle = subtleColor;
        }
    }
    ColorDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.default = obj["default"] || this.default;
            this.subtle = obj["subtle"] || this.subtle;
        }
    };
    return ColorDefinition;
}());
exports.ColorDefinition = ColorDefinition;
var TextColorDefinition = /** @class */ (function (_super) {
    __extends(TextColorDefinition, _super);
    function TextColorDefinition() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.highlightColors = new ColorDefinition("#22000000", "#11000000");
        return _this;
    }
    TextColorDefinition.prototype.parse = function (obj) {
        _super.prototype.parse.call(this, obj);
        if (obj) {
            this.highlightColors.parse(obj["highlightColors"]);
        }
    };
    return TextColorDefinition;
}(ColorDefinition));
exports.TextColorDefinition = TextColorDefinition;
var AdaptiveCardConfig = /** @class */ (function () {
    function AdaptiveCardConfig(obj) {
        this.allowCustomStyle = false;
        if (obj) {
            this.allowCustomStyle = obj["allowCustomStyle"] || this.allowCustomStyle;
        }
    }
    return AdaptiveCardConfig;
}());
exports.AdaptiveCardConfig = AdaptiveCardConfig;
var ImageSetConfig = /** @class */ (function () {
    function ImageSetConfig(obj) {
        this.imageSize = Enums.Size.Medium;
        this.maxImageHeight = 100;
        if (obj) {
            this.imageSize = obj["imageSize"] != null ? obj["imageSize"] : this.imageSize;
            this.maxImageHeight = Utils.parseNumber(obj["maxImageHeight"], 100);
        }
    }
    ImageSetConfig.prototype.toJSON = function () {
        return {
            imageSize: Enums.Size[this.imageSize],
            maxImageHeight: this.maxImageHeight
        };
    };
    return ImageSetConfig;
}());
exports.ImageSetConfig = ImageSetConfig;
var MediaConfig = /** @class */ (function () {
    function MediaConfig(obj) {
        this.allowInlinePlayback = true;
        if (obj) {
            this.defaultPoster = obj["defaultPoster"];
            this.allowInlinePlayback = obj["allowInlinePlayback"] || this.allowInlinePlayback;
        }
    }
    MediaConfig.prototype.toJSON = function () {
        return {
            defaultPoster: this.defaultPoster,
            allowInlinePlayback: this.allowInlinePlayback
        };
    };
    return MediaConfig;
}());
exports.MediaConfig = MediaConfig;
var BaseTextDefinition = /** @class */ (function () {
    function BaseTextDefinition(obj) {
        this.size = Enums.TextSize.Default;
        this.color = Enums.TextColor.Default;
        this.isSubtle = false;
        this.weight = Enums.TextWeight.Default;
        if (obj) {
            this.size = parseHostConfigEnum(Enums.TextSize, obj["size"], this.size);
            this.color = parseHostConfigEnum(Enums.TextColor, obj["color"], this.color);
            this.isSubtle = obj["isSubtle"] || this.isSubtle;
            this.weight = parseHostConfigEnum(Enums.TextWeight, obj["weight"], this.getDefaultWeight());
        }
    }
    ;
    BaseTextDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Default;
    };
    BaseTextDefinition.prototype.toJSON = function () {
        return {
            size: Enums.TextSize[this.size],
            color: Enums.TextColor[this.color],
            isSubtle: this.isSubtle,
            weight: Enums.TextWeight[this.weight]
        };
    };
    return BaseTextDefinition;
}());
exports.BaseTextDefinition = BaseTextDefinition;
var RequiredInputLabelTextDefinition = /** @class */ (function (_super) {
    __extends(RequiredInputLabelTextDefinition, _super);
    function RequiredInputLabelTextDefinition(obj) {
        var _this = _super.call(this, obj) || this;
        _this.suffix = " *";
        _this.suffixColor = Enums.TextColor.Attention;
        if (obj) {
            _this.suffix = obj["suffix"] || _this.suffix;
            _this.suffixColor = parseHostConfigEnum(Enums.TextColor, obj["suffixColor"], _this.suffixColor);
        }
        return _this;
    }
    RequiredInputLabelTextDefinition.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        result["suffix"] = this.suffix;
        result["suffixColor"] = Enums.TextColor[this.suffixColor];
        return result;
    };
    return RequiredInputLabelTextDefinition;
}(BaseTextDefinition));
exports.RequiredInputLabelTextDefinition = RequiredInputLabelTextDefinition;
var InputLabelConfig = /** @class */ (function () {
    function InputLabelConfig(obj) {
        this.inputSpacing = Enums.Spacing.Small;
        this.requiredInputs = new RequiredInputLabelTextDefinition();
        this.optionalInputs = new BaseTextDefinition();
        if (obj) {
            this.inputSpacing = parseHostConfigEnum(Enums.Spacing, obj["inputSpacing"], this.inputSpacing);
            this.requiredInputs = new RequiredInputLabelTextDefinition(obj["requiredInputs"]);
            this.optionalInputs = new BaseTextDefinition(obj["optionalInputs"]);
        }
    }
    return InputLabelConfig;
}());
exports.InputLabelConfig = InputLabelConfig;
var InputConfig = /** @class */ (function () {
    function InputConfig(obj) {
        this.label = new InputLabelConfig();
        this.errorMessage = new BaseTextDefinition({ color: Enums.TextColor.Attention });
        if (obj) {
            this.label = new InputLabelConfig(obj["label"]);
            this.errorMessage = new BaseTextDefinition(obj["errorMessage"]);
        }
    }
    return InputConfig;
}());
exports.InputConfig = InputConfig;
var FactTextDefinition = /** @class */ (function (_super) {
    __extends(FactTextDefinition, _super);
    function FactTextDefinition(obj) {
        var _this = _super.call(this, obj) || this;
        _this.wrap = true;
        if (obj) {
            _this.wrap = obj["wrap"] != null ? obj["wrap"] : _this.wrap;
        }
        return _this;
    }
    FactTextDefinition.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        result["wrap"] = this.wrap;
        return result;
    };
    return FactTextDefinition;
}(BaseTextDefinition));
exports.FactTextDefinition = FactTextDefinition;
var FactTitleDefinition = /** @class */ (function (_super) {
    __extends(FactTitleDefinition, _super);
    function FactTitleDefinition(obj) {
        var _this = _super.call(this, obj) || this;
        _this.maxWidth = 150;
        _this.weight = Enums.TextWeight.Bolder;
        if (obj) {
            _this.maxWidth = obj["maxWidth"] != null ? obj["maxWidth"] : _this.maxWidth;
            _this.weight = parseHostConfigEnum(Enums.TextWeight, obj["weight"], Enums.TextWeight.Bolder);
        }
        return _this;
    }
    FactTitleDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Bolder;
    };
    return FactTitleDefinition;
}(FactTextDefinition));
exports.FactTitleDefinition = FactTitleDefinition;
var FactSetConfig = /** @class */ (function () {
    function FactSetConfig(obj) {
        this.title = new FactTitleDefinition();
        this.value = new FactTextDefinition();
        this.spacing = 10;
        if (obj) {
            this.title = new FactTitleDefinition(obj["title"]);
            this.value = new FactTextDefinition(obj["value"]);
            this.spacing = obj.spacing && obj.spacing != null ? obj.spacing && obj.spacing : this.spacing;
        }
    }
    return FactSetConfig;
}());
exports.FactSetConfig = FactSetConfig;
var ShowCardActionConfig = /** @class */ (function () {
    function ShowCardActionConfig(obj) {
        this.actionMode = Enums.ShowCardActionMode.Inline;
        this.inlineTopMargin = 16;
        this.style = Enums.ContainerStyle.Emphasis;
        if (obj) {
            this.actionMode = parseHostConfigEnum(Enums.ShowCardActionMode, obj["actionMode"], Enums.ShowCardActionMode.Inline);
            this.inlineTopMargin = obj["inlineTopMargin"] != null ? obj["inlineTopMargin"] : this.inlineTopMargin;
            this.style = obj["style"] && typeof obj["style"] === "string" ? obj["style"] : Enums.ContainerStyle.Emphasis;
        }
    }
    ShowCardActionConfig.prototype.toJSON = function () {
        return {
            actionMode: Enums.ShowCardActionMode[this.actionMode],
            inlineTopMargin: this.inlineTopMargin,
            style: this.style
        };
    };
    return ShowCardActionConfig;
}());
exports.ShowCardActionConfig = ShowCardActionConfig;
var ActionsConfig = /** @class */ (function () {
    function ActionsConfig(obj) {
        this.maxActions = 5;
        this.spacing = Enums.Spacing.Default;
        this.buttonSpacing = 20;
        this.showCard = new ShowCardActionConfig();
        this.preExpandSingleShowCardAction = false;
        this.actionsOrientation = Enums.Orientation.Horizontal;
        this.actionAlignment = Enums.ActionAlignment.Left;
        this.iconPlacement = Enums.ActionIconPlacement.LeftOfTitle;
        this.allowTitleToWrap = false;
        this.iconSize = 16;
        if (obj) {
            this.maxActions = obj["maxActions"] != null ? obj["maxActions"] : this.maxActions;
            this.spacing = parseHostConfigEnum(Enums.Spacing, obj.spacing && obj.spacing, Enums.Spacing.Default);
            this.buttonSpacing = obj["buttonSpacing"] != null ? obj["buttonSpacing"] : this.buttonSpacing;
            this.showCard = new ShowCardActionConfig(obj["showCard"]);
            this.preExpandSingleShowCardAction = Utils.parseBool(obj["preExpandSingleShowCardAction"], false);
            this.actionsOrientation = parseHostConfigEnum(Enums.Orientation, obj["actionsOrientation"], Enums.Orientation.Horizontal);
            this.actionAlignment = parseHostConfigEnum(Enums.ActionAlignment, obj["actionAlignment"], Enums.ActionAlignment.Left);
            this.iconPlacement = parseHostConfigEnum(Enums.ActionIconPlacement, obj["iconPlacement"], Enums.ActionIconPlacement.LeftOfTitle);
            this.allowTitleToWrap = obj["allowTitleToWrap"] != null ? obj["allowTitleToWrap"] : this.allowTitleToWrap;
            try {
                var sizeAndUnit = Shared.SizeAndUnit.parse(obj["iconSize"]);
                if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {
                    this.iconSize = sizeAndUnit.physicalSize;
                }
            }
            catch (e) {
                // Swallow this, keep default icon size
            }
        }
    }
    ActionsConfig.prototype.toJSON = function () {
        return {
            maxActions: this.maxActions,
            spacing: Enums.Spacing[this.spacing],
            buttonSpacing: this.buttonSpacing,
            showCard: this.showCard,
            preExpandSingleShowCardAction: this.preExpandSingleShowCardAction,
            actionsOrientation: Enums.Orientation[this.actionsOrientation],
            actionAlignment: Enums.ActionAlignment[this.actionAlignment]
        };
    };
    return ActionsConfig;
}());
exports.ActionsConfig = ActionsConfig;
var ColorSetDefinition = /** @class */ (function () {
    function ColorSetDefinition(obj) {
        this.default = new TextColorDefinition();
        this.dark = new TextColorDefinition();
        this.light = new TextColorDefinition();
        this.accent = new TextColorDefinition();
        this.good = new TextColorDefinition();
        this.warning = new TextColorDefinition();
        this.attention = new TextColorDefinition();
        this.parse(obj);
    }
    ColorSetDefinition.prototype.parseSingleColor = function (obj, propertyName) {
        if (obj) {
            this[propertyName].parse(obj[propertyName]);
        }
    };
    ColorSetDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.parseSingleColor(obj, "default");
            this.parseSingleColor(obj, "dark");
            this.parseSingleColor(obj, "light");
            this.parseSingleColor(obj, "accent");
            this.parseSingleColor(obj, "good");
            this.parseSingleColor(obj, "warning");
            this.parseSingleColor(obj, "attention");
        }
    };
    return ColorSetDefinition;
}());
exports.ColorSetDefinition = ColorSetDefinition;
var ContainerStyleDefinition = /** @class */ (function () {
    function ContainerStyleDefinition(obj) {
        this.foregroundColors = new ColorSetDefinition({
            "default": { default: "#333333", subtle: "#EE333333" },
            "dark": { default: "#000000", subtle: "#66000000" },
            "light": { default: "#FFFFFF", subtle: "#33000000" },
            "accent": { default: "#2E89FC", subtle: "#882E89FC" },
            "good": { default: "#028A02", subtle: "#DD027502" },
            "warning": { default: "#E69500", subtle: "#DDE69500" },
            "attention": { default: "#CC3300", subtle: "#DDCC3300" }
        });
        this.parse(obj);
    }
    ContainerStyleDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.backgroundColor = obj["backgroundColor"];
            this.foregroundColors.parse(obj["foregroundColors"]);
            this.highlightBackgroundColor = obj["highlightBackgroundColor"];
            this.highlightForegroundColor = obj["highlightForegroundColor"];
        }
    };
    Object.defineProperty(ContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    return ContainerStyleDefinition;
}());
exports.ContainerStyleDefinition = ContainerStyleDefinition;
var BuiltInContainerStyleDefinition = /** @class */ (function (_super) {
    __extends(BuiltInContainerStyleDefinition, _super);
    function BuiltInContainerStyleDefinition() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BuiltInContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return BuiltInContainerStyleDefinition;
}(ContainerStyleDefinition));
var ContainerStyleSet = /** @class */ (function () {
    function ContainerStyleSet(obj) {
        this._allStyles = {};
        this._allStyles[Enums.ContainerStyle.Default] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Emphasis] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Accent] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Good] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Attention] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Warning] = new BuiltInContainerStyleDefinition();
        if (obj) {
            this._allStyles[Enums.ContainerStyle.Default].parse(obj[Enums.ContainerStyle.Default]);
            this._allStyles[Enums.ContainerStyle.Emphasis].parse(obj[Enums.ContainerStyle.Emphasis]);
            this._allStyles[Enums.ContainerStyle.Accent].parse(obj[Enums.ContainerStyle.Accent]);
            this._allStyles[Enums.ContainerStyle.Good].parse(obj[Enums.ContainerStyle.Good]);
            this._allStyles[Enums.ContainerStyle.Attention].parse(obj[Enums.ContainerStyle.Attention]);
            this._allStyles[Enums.ContainerStyle.Warning].parse(obj[Enums.ContainerStyle.Warning]);
            var customStyleArray = obj["customStyles"];
            if (customStyleArray && Array.isArray(customStyleArray)) {
                for (var _i = 0, customStyleArray_1 = customStyleArray; _i < customStyleArray_1.length; _i++) {
                    var customStyle = customStyleArray_1[_i];
                    if (customStyle) {
                        var styleName = customStyle["name"];
                        if (styleName && typeof styleName === "string") {
                            if (this._allStyles.hasOwnProperty(styleName)) {
                                this._allStyles[styleName].parse(customStyle["style"]);
                            }
                            else {
                                this._allStyles[styleName] = new ContainerStyleDefinition(customStyle["style"]);
                            }
                        }
                    }
                }
            }
        }
    }
    ContainerStyleSet.prototype.toJSON = function () {
        var _this = this;
        var customStyleArray = [];
        Object.keys(this._allStyles).forEach(function (key) {
            if (!_this._allStyles[key].isBuiltIn) {
                customStyleArray.push({
                    name: key,
                    style: _this._allStyles[key]
                });
            }
        });
        var result = {
            default: this.default,
            emphasis: this.emphasis
        };
        if (customStyleArray.length > 0) {
            result.customStyles = customStyleArray;
        }
        return result;
    };
    ContainerStyleSet.prototype.getStyleByName = function (name, defaultValue) {
        if (name && this._allStyles.hasOwnProperty(name)) {
            return this._allStyles[name];
        }
        else {
            return defaultValue ? defaultValue : this._allStyles[Enums.ContainerStyle.Default];
        }
    };
    Object.defineProperty(ContainerStyleSet.prototype, "default", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Default];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ContainerStyleSet.prototype, "emphasis", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Emphasis];
        },
        enumerable: false,
        configurable: true
    });
    return ContainerStyleSet;
}());
exports.ContainerStyleSet = ContainerStyleSet;
var FontTypeDefinition = /** @class */ (function () {
    function FontTypeDefinition(fontFamily) {
        this.fontFamily = "Segoe UI,Segoe,Segoe WP,Helvetica Neue,Helvetica,sans-serif";
        this.fontSizes = {
            small: 12,
            default: 14,
            medium: 17,
            large: 21,
            extraLarge: 26
        };
        this.fontWeights = {
            lighter: 200,
            default: 400,
            bolder: 600
        };
        if (fontFamily) {
            this.fontFamily = fontFamily;
        }
    }
    FontTypeDefinition.prototype.parse = function (obj) {
        this.fontFamily = obj["fontFamily"] || this.fontFamily;
        this.fontSizes = {
            small: obj.fontSizes && obj.fontSizes["small"] || this.fontSizes.small,
            default: obj.fontSizes && obj.fontSizes["default"] || this.fontSizes.default,
            medium: obj.fontSizes && obj.fontSizes["medium"] || this.fontSizes.medium,
            large: obj.fontSizes && obj.fontSizes["large"] || this.fontSizes.large,
            extraLarge: obj.fontSizes && obj.fontSizes["extraLarge"] || this.fontSizes.extraLarge
        };
        this.fontWeights = {
            lighter: obj.fontWeights && obj.fontWeights["lighter"] || this.fontWeights.lighter,
            default: obj.fontWeights && obj.fontWeights["default"] || this.fontWeights.default,
            bolder: obj.fontWeights && obj.fontWeights["bolder"] || this.fontWeights.bolder
        };
    };
    FontTypeDefinition.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
    return FontTypeDefinition;
}());
exports.FontTypeDefinition = FontTypeDefinition;
var FontTypeSet = /** @class */ (function () {
    function FontTypeSet(obj) {
        this.default = new FontTypeDefinition();
        this.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
        if (obj) {
            this.default.parse(obj["default"]);
            this.monospace.parse(obj["monospace"]);
        }
    }
    FontTypeSet.prototype.getStyleDefinition = function (style) {
        switch (style) {
            case Enums.FontType.Monospace:
                return this.monospace;
            case Enums.FontType.Default:
            default:
                return this.default;
        }
    };
    return FontTypeSet;
}());
exports.FontTypeSet = FontTypeSet;
var HostConfig = /** @class */ (function () {
    function HostConfig(obj) {
        this.hostCapabilities = new host_capabilities_1.HostCapabilities();
        this.choiceSetInputValueSeparator = ",";
        this.supportsInteractivity = true;
        this.spacing = {
            small: 3,
            default: 8,
            medium: 20,
            large: 30,
            extraLarge: 40,
            padding: 15
        };
        this.separator = {
            lineThickness: 1,
            lineColor: "#EEEEEE"
        };
        this.imageSizes = {
            small: 40,
            medium: 80,
            large: 160
        };
        this.containerStyles = new ContainerStyleSet();
        this.inputs = new InputConfig();
        this.actions = new ActionsConfig();
        this.adaptiveCard = new AdaptiveCardConfig();
        this.imageSet = new ImageSetConfig();
        this.media = new MediaConfig();
        this.factSet = new FactSetConfig();
        this.alwaysAllowBleed = false;
        if (obj) {
            if (typeof obj === "string" || obj instanceof String) {
                obj = JSON.parse(obj);
            }
            this.choiceSetInputValueSeparator = (obj && typeof obj["choiceSetInputValueSeparator"] === "string") ? obj["choiceSetInputValueSeparator"] : this.choiceSetInputValueSeparator;
            this.supportsInteractivity = (obj && typeof obj["supportsInteractivity"] === "boolean") ? obj["supportsInteractivity"] : this.supportsInteractivity;
            this._legacyFontType = new FontTypeDefinition();
            this._legacyFontType.parse(obj);
            if (obj.fontTypes) {
                this.fontTypes = new FontTypeSet(obj.fontTypes);
            }
            if (obj.lineHeights) {
                this.lineHeights = {
                    small: obj.lineHeights["small"],
                    default: obj.lineHeights["default"],
                    medium: obj.lineHeights["medium"],
                    large: obj.lineHeights["large"],
                    extraLarge: obj.lineHeights["extraLarge"]
                };
            }
            ;
            this.imageSizes = {
                small: obj.imageSizes && obj.imageSizes["small"] || this.imageSizes.small,
                medium: obj.imageSizes && obj.imageSizes["medium"] || this.imageSizes.medium,
                large: obj.imageSizes && obj.imageSizes["large"] || this.imageSizes.large,
            };
            this.containerStyles = new ContainerStyleSet(obj["containerStyles"]);
            this.spacing = {
                small: obj.spacing && obj.spacing["small"] || this.spacing.small,
                default: obj.spacing && obj.spacing["default"] || this.spacing.default,
                medium: obj.spacing && obj.spacing["medium"] || this.spacing.medium,
                large: obj.spacing && obj.spacing["large"] || this.spacing.large,
                extraLarge: obj.spacing && obj.spacing["extraLarge"] || this.spacing.extraLarge,
                padding: obj.spacing && obj.spacing["padding"] || this.spacing.padding
            };
            this.separator = {
                lineThickness: obj.separator && obj.separator["lineThickness"] || this.separator.lineThickness,
                lineColor: obj.separator && obj.separator["lineColor"] || this.separator.lineColor
            };
            this.inputs = new InputConfig(obj.inputs || this.inputs);
            this.actions = new ActionsConfig(obj.actions || this.actions);
            this.adaptiveCard = new AdaptiveCardConfig(obj.adaptiveCard || this.adaptiveCard);
            this.imageSet = new ImageSetConfig(obj["imageSet"]);
            this.factSet = new FactSetConfig(obj["factSet"]);
        }
    }
    HostConfig.prototype.getFontTypeDefinition = function (style) {
        if (this.fontTypes) {
            return this.fontTypes.getStyleDefinition(style);
        }
        else {
            return style == Enums.FontType.Monospace ? FontTypeDefinition.monospace : this._legacyFontType;
        }
    };
    HostConfig.prototype.getEffectiveSpacing = function (spacing) {
        switch (spacing) {
            case Enums.Spacing.Small:
                return this.spacing.small;
            case Enums.Spacing.Default:
                return this.spacing.default;
            case Enums.Spacing.Medium:
                return this.spacing.medium;
            case Enums.Spacing.Large:
                return this.spacing.large;
            case Enums.Spacing.ExtraLarge:
                return this.spacing.extraLarge;
            case Enums.Spacing.Padding:
                return this.spacing.padding;
            default:
                return 0;
        }
    };
    HostConfig.prototype.paddingDefinitionToSpacingDefinition = function (paddingDefinition) {
        return new Shared.SpacingDefinition(this.getEffectiveSpacing(paddingDefinition.top), this.getEffectiveSpacing(paddingDefinition.right), this.getEffectiveSpacing(paddingDefinition.bottom), this.getEffectiveSpacing(paddingDefinition.left));
    };
    HostConfig.prototype.makeCssClassNames = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = [];
        for (var _a = 0, classNames_1 = classNames; _a < classNames_1.length; _a++) {
            var className = classNames_1[_a];
            result.push((this.cssClassNamePrefix ? this.cssClassNamePrefix + "-" : "") + className);
        }
        return result;
    };
    HostConfig.prototype.makeCssClassName = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = this.makeCssClassNames.apply(this, classNames).join(" ");
        return result ? result : "";
    };
    Object.defineProperty(HostConfig.prototype, "fontFamily", {
        get: function () {
            return this._legacyFontType.fontFamily;
        },
        set: function (value) {
            this._legacyFontType.fontFamily = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontSizes", {
        get: function () {
            return this._legacyFontType.fontSizes;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontWeights", {
        get: function () {
            return this._legacyFontType.fontWeights;
        },
        enumerable: false,
        configurable: true
    });
    return HostConfig;
}());
exports.HostConfig = HostConfig;
exports.defaultHostConfig = new HostConfig({
    supportsInteractivity: true,
    spacing: {
        small: 10,
        default: 20,
        medium: 30,
        large: 40,
        extraLarge: 50,
        padding: 20
    },
    separator: {
        lineThickness: 1,
        lineColor: "#EEEEEE"
    },
    fontTypes: {
        default: {
            fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        },
        monospace: {
            fontFamily: "'Courier New', Courier, monospace",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        }
    },
    imageSizes: {
        small: 40,
        medium: 80,
        large: 160
    },
    containerStyles: {
        default: {
            backgroundColor: "#FFFFFF",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        emphasis: {
            backgroundColor: "#08000000",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        accent: {
            backgroundColor: "#C7DEF9",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        good: {
            backgroundColor: "#CCFFCC",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        attention: {
            backgroundColor: "#FFC5B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        warning: {
            backgroundColor: "#FFE2B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#028A02",
                    subtle: "#DD027502"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        }
    },
    inputs: {
        label: {
            requiredInputs: {
                color: Enums.TextColor.Accent,
                size: Enums.TextSize.ExtraLarge,
                weight: Enums.TextWeight.Bolder,
                isSubtle: true,
                suffix: " (required)",
                suffixColor: Enums.TextColor.Good
            },
            optionalInputs: {
                color: Enums.TextColor.Warning,
                size: Enums.TextSize.Medium,
                weight: Enums.TextWeight.Lighter,
                isSubtle: false
            }
        },
        errorMessage: {
            color: Enums.TextColor.Accent,
            size: Enums.TextSize.Small,
            weight: Enums.TextWeight.Bolder
        }
    },
    actions: {
        maxActions: 5,
        spacing: Enums.Spacing.Default,
        buttonSpacing: 10,
        showCard: {
            actionMode: Enums.ShowCardActionMode.Inline,
            inlineTopMargin: 16
        },
        actionsOrientation: Enums.Orientation.Horizontal,
        actionAlignment: Enums.ActionAlignment.Left
    },
    adaptiveCard: {
        allowCustomStyle: false
    },
    imageSet: {
        imageSize: Enums.Size.Medium,
        maxImageHeight: 100
    },
    factSet: {
        title: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Bolder,
            wrap: true,
            maxWidth: 150,
        },
        value: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Default,
            wrap: true,
        },
        spacing: 10
    }
});


/***/ }),

/***/ "./src/registry.ts":
/*!*************************!*\
  !*** ./src/registry.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CardObjectRegistry = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var serialization_1 = __webpack_require__(/*! ./serialization */ "./src/serialization.ts");
var CardObjectRegistry = /** @class */ (function () {
    function CardObjectRegistry() {
        this._items = {};
    }
    CardObjectRegistry.prototype.findByName = function (typeName) {
        return this._items.hasOwnProperty(typeName) ? this._items[typeName] : undefined;
    };
    CardObjectRegistry.prototype.clear = function () {
        this._items = {};
    };
    CardObjectRegistry.prototype.register = function (typeName, objectType, schemaVersion) {
        if (schemaVersion === void 0) { schemaVersion = serialization_1.Versions.v1_0; }
        var registrationInfo = this.findByName(typeName);
        if (registrationInfo !== undefined) {
            registrationInfo.objectType = objectType;
        }
        else {
            registrationInfo = {
                typeName: typeName,
                objectType: objectType,
                schemaVersion: schemaVersion
            };
        }
        this._items[typeName] = registrationInfo;
    };
    CardObjectRegistry.prototype.unregister = function (typeName) {
        delete this._items[typeName];
    };
    CardObjectRegistry.prototype.createInstance = function (typeName, targetVersion) {
        var registrationInfo = this.findByName(typeName);
        return (registrationInfo && registrationInfo.schemaVersion.compareTo(targetVersion) <= 0) ? new registrationInfo.objectType() : undefined;
    };
    CardObjectRegistry.prototype.getItemCount = function () {
        return Object.keys(this._items).length;
    };
    CardObjectRegistry.prototype.getItemAt = function (index) {
        return Object.values(this._items)[index];
    };
    return CardObjectRegistry;
}());
exports.CardObjectRegistry = CardObjectRegistry;


/***/ }),

/***/ "./src/serialization.ts":
/*!******************************!*\
  !*** ./src/serialization.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SerializableObject = exports.property = exports.SerializableObjectSchema = exports.CustomProperty = exports.SerializableObjectCollectionProperty = exports.SerializableObjectProperty = exports.EnumProperty = exports.ValueSetProperty = exports.PixelSizeProperty = exports.NumProperty = exports.BoolProperty = exports.StringProperty = exports.PropertyDefinition = exports.BaseSerializationContext = exports.isVersionLessOrEqual = exports.Versions = exports.Version = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var Utils = __webpack_require__(/*! ./utils */ "./src/utils.ts");
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var strings_1 = __webpack_require__(/*! ./strings */ "./src/strings.ts");
var Version = /** @class */ (function () {
    function Version(major, minor, label) {
        if (major === void 0) { major = 1; }
        if (minor === void 0) { minor = 1; }
        this._isValid = true;
        this._major = major;
        this._minor = minor;
        this._label = label;
    }
    Version.parse = function (versionString, context) {
        if (!versionString) {
            return undefined;
        }
        var result = new Version();
        result._versionString = versionString;
        var regEx = /(\d+).(\d+)/gi;
        var matches = regEx.exec(versionString);
        if (matches != null && matches.length == 3) {
            result._major = parseInt(matches[1]);
            result._minor = parseInt(matches[2]);
        }
        else {
            result._isValid = false;
        }
        if (!result._isValid) {
            context.logParseEvent(undefined, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidVersionString(result._versionString));
        }
        return result;
    };
    Version.prototype.toString = function () {
        return !this._isValid ? this._versionString : this._major + "." + this._minor;
    };
    Version.prototype.toJSON = function () {
        return this.toString();
    };
    Version.prototype.compareTo = function (otherVersion) {
        if (!this.isValid || !otherVersion.isValid) {
            throw new Error("Cannot compare invalid version.");
        }
        if (this.major > otherVersion.major) {
            return 1;
        }
        else if (this.major < otherVersion.major) {
            return -1;
        }
        else if (this.minor > otherVersion.minor) {
            return 1;
        }
        else if (this.minor < otherVersion.minor) {
            return -1;
        }
        return 0;
    };
    Object.defineProperty(Version.prototype, "label", {
        get: function () {
            return this._label ? this._label : this.toString();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "major", {
        get: function () {
            return this._major;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "minor", {
        get: function () {
            return this._minor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "isValid", {
        get: function () {
            return this._isValid;
        },
        enumerable: false,
        configurable: true
    });
    return Version;
}());
exports.Version = Version;
var Versions = /** @class */ (function () {
    function Versions() {
    }
    Versions.v1_0 = new Version(1, 0);
    Versions.v1_1 = new Version(1, 1);
    Versions.v1_2 = new Version(1, 2);
    Versions.v1_3 = new Version(1, 3);
    Versions.latest = Versions.v1_3;
    return Versions;
}());
exports.Versions = Versions;
function isVersionLessOrEqual(version, targetVersion) {
    if (version instanceof Version) {
        if (targetVersion instanceof Version) {
            return targetVersion.compareTo(version) >= 0;
        }
        else {
            // Target version is *
            return true;
        }
    }
    else {
        // Version is *
        return true;
    }
}
exports.isVersionLessOrEqual = isVersionLessOrEqual;
var BaseSerializationContext = /** @class */ (function () {
    function BaseSerializationContext(targetVersion) {
        if (targetVersion === void 0) { targetVersion = Versions.latest; }
        this.targetVersion = targetVersion;
        this._validationEvents = [];
    }
    BaseSerializationContext.prototype.serializeValue = function (target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {
            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {
                delete target[propertyName];
            }
        }
        else {
            target[propertyName] = propertyValue;
        }
    };
    BaseSerializationContext.prototype.serializeNumber = function (target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {
            delete target[propertyName];
        }
        else {
            target[propertyName] = propertyValue;
        }
    };
    BaseSerializationContext.prototype.serializeEnum = function (enumType, target, propertyName, propertyValue, defaultValue) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        var targetValue = target[propertyName];
        var canDeleteTarget = targetValue == undefined ? true : enumType[targetValue] !== undefined;
        if (propertyValue == defaultValue) {
            if (canDeleteTarget) {
                delete target[propertyName];
            }
        }
        else {
            if (propertyValue == undefined) {
                if (canDeleteTarget) {
                    delete target[propertyName];
                }
            }
            else {
                target[propertyName] = enumType[propertyValue];
            }
        }
    };
    BaseSerializationContext.prototype.serializeArray = function (target, propertyName, propertyValue) {
        var items = [];
        if (propertyValue) {
            for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {
                var item = propertyValue_1[_i];
                var serializedItem = undefined;
                if (item instanceof SerializableObject) {
                    serializedItem = item.toJSON(this);
                }
                else if (item.toJSON) {
                    serializedItem = item.toJSON();
                }
                else {
                    serializedItem = item;
                }
                if (serializedItem !== undefined) {
                    items.push(serializedItem);
                }
            }
        }
        if (items.length == 0) {
            if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {
                delete target[propertyName];
            }
        }
        else {
            this.serializeValue(target, propertyName, items);
        }
    };
    BaseSerializationContext.prototype.clearEvents = function () {
        this._validationEvents = [];
    };
    BaseSerializationContext.prototype.logEvent = function (source, phase, event, message) {
        this._validationEvents.push({
            source: source,
            phase: phase,
            event: event,
            message: message
        });
    };
    BaseSerializationContext.prototype.logParseEvent = function (source, event, message) {
        this.logEvent(source, Enums.ValidationPhase.Parse, event, message);
    };
    BaseSerializationContext.prototype.getEventAt = function (index) {
        return this._validationEvents[index];
    };
    Object.defineProperty(BaseSerializationContext.prototype, "eventCount", {
        get: function () {
            return this._validationEvents.length;
        },
        enumerable: false,
        configurable: true
    });
    return BaseSerializationContext;
}());
exports.BaseSerializationContext = BaseSerializationContext;
var SimpleSerializationContext = /** @class */ (function (_super) {
    __extends(SimpleSerializationContext, _super);
    function SimpleSerializationContext() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return SimpleSerializationContext;
}(BaseSerializationContext));
var PropertyDefinition = /** @class */ (function () {
    function PropertyDefinition(targetVersion, name, defaultValue, onGetInitialValue) {
        this.targetVersion = targetVersion;
        this.name = name;
        this.defaultValue = defaultValue;
        this.onGetInitialValue = onGetInitialValue;
        this.isSerializationEnabled = true;
        this.sequentialNumber = PropertyDefinition._sequentialNumber;
        PropertyDefinition._sequentialNumber++;
    }
    PropertyDefinition.prototype.getInternalName = function () {
        return this.name;
    };
    PropertyDefinition.prototype.parse = function (sender, source, context) {
        return source[this.name];
    };
    PropertyDefinition.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value, this.defaultValue);
    };
    PropertyDefinition._sequentialNumber = 0;
    return PropertyDefinition;
}());
exports.PropertyDefinition = PropertyDefinition;
var StringProperty = /** @class */ (function (_super) {
    __extends(StringProperty, _super);
    function StringProperty(targetVersion, name, treatEmptyAsUndefined, regEx, defaultValue, onGetInitialValue) {
        if (treatEmptyAsUndefined === void 0) { treatEmptyAsUndefined = true; }
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.treatEmptyAsUndefined = treatEmptyAsUndefined;
        _this.regEx = regEx;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        return _this;
    }
    StringProperty.prototype.parse = function (sender, source, context) {
        var parsedValue = Utils.parseString(source[this.name], this.defaultValue);
        var isUndefined = parsedValue === undefined || (parsedValue === "" && this.treatEmptyAsUndefined);
        if (!isUndefined && this.regEx !== undefined) {
            var matches = this.regEx.exec(parsedValue);
            if (!matches) {
                context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(parsedValue, this.name));
                return undefined;
            }
        }
        return parsedValue;
    };
    StringProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value === "" && this.treatEmptyAsUndefined ? undefined : value, this.defaultValue);
    };
    return StringProperty;
}(PropertyDefinition));
exports.StringProperty = StringProperty;
var BoolProperty = /** @class */ (function (_super) {
    __extends(BoolProperty, _super);
    function BoolProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BoolProperty.prototype.parse = function (sender, source, context) {
        return Utils.parseBool(source[this.name], this.defaultValue);
    };
    BoolProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, value, this.defaultValue);
    };
    return BoolProperty;
}(PropertyDefinition));
exports.BoolProperty = BoolProperty;
var NumProperty = /** @class */ (function (_super) {
    __extends(NumProperty, _super);
    function NumProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumProperty.prototype.parse = function (sender, source, context) {
        return Utils.parseNumber(source[this.name], this.defaultValue);
    };
    NumProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeNumber(target, this.name, value, this.defaultValue);
    };
    return NumProperty;
}(PropertyDefinition));
exports.NumProperty = NumProperty;
var PixelSizeProperty = /** @class */ (function (_super) {
    __extends(PixelSizeProperty, _super);
    function PixelSizeProperty() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PixelSizeProperty.prototype.parse = function (sender, source, context) {
        var result = undefined;
        var value = source[this.name];
        if (typeof value === "string") {
            var isValid = false;
            try {
                var size = shared_1.SizeAndUnit.parse(value, true);
                if (size.unit == Enums.SizeUnit.Pixel) {
                    result = size.physicalSize;
                    isValid = true;
                }
            }
            catch (_a) {
                // Do nothing. A parse error is emitted below
            }
            if (!isValid) {
                context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(source[this.name], "minHeight"));
            }
        }
        return result;
    };
    PixelSizeProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeValue(target, this.name, typeof value === "number" && !isNaN(value) ? value + "px" : undefined);
    };
    return PixelSizeProperty;
}(PropertyDefinition));
exports.PixelSizeProperty = PixelSizeProperty;
var ValueSetProperty = /** @class */ (function (_super) {
    __extends(ValueSetProperty, _super);
    function ValueSetProperty(targetVersion, name, values, defaultValue, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.values = values;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        return _this;
    }
    ValueSetProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.defaultValue;
        }
        if (typeof sourceValue === "string") {
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (sourceValue.toLowerCase() === versionedValue.value.toLowerCase()) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        return versionedValue.value;
                    }
                    else {
                        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));
                        return this.defaultValue;
                    }
                }
            }
        }
        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));
        return this.defaultValue;
    };
    ValueSetProperty.prototype.toJSON = function (sender, target, value, context) {
        var valueFound = false;
        for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
            var versionedValue = _a[_i];
            if (versionedValue.value === value) {
                var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                if (targetVersion.compareTo(context.targetVersion) <= 0) {
                    valueFound = true;
                    break;
                }
                else {
                    context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(value, this.name, targetVersion.toString(), context.targetVersion.toString()));
                }
            }
        }
        if (valueFound) {
            context.serializeValue(target, this.name, value, this.defaultValue);
        }
    };
    return ValueSetProperty;
}(PropertyDefinition));
exports.ValueSetProperty = ValueSetProperty;
var EnumProperty = /** @class */ (function (_super) {
    __extends(EnumProperty, _super);
    function EnumProperty(targetVersion, name, enumType, defaultValue, values, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.enumType = enumType;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        _this._values = [];
        if (!values) {
            for (var key in enumType) {
                var keyAsNumber = parseInt(key, 10);
                if (keyAsNumber >= 0) {
                    _this._values.push({ value: keyAsNumber });
                }
            }
        }
        else {
            _this._values = values;
        }
        return _this;
    }
    EnumProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (typeof sourceValue !== "string") {
            return this.defaultValue;
        }
        var enumValue = Utils.getEnumValueByName(this.enumType, sourceValue);
        if (enumValue !== undefined) {
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (versionedValue.value === enumValue) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        return enumValue;
                    }
                    else {
                        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));
                        return this.defaultValue;
                    }
                }
            }
        }
        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));
        return this.defaultValue;
    };
    EnumProperty.prototype.toJSON = function (sender, target, value, context) {
        if (value !== undefined) {
            var valueFound = false;
            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {
                var versionedValue = _a[_i];
                if (versionedValue.value === value) {
                    var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;
                    if (targetVersion.compareTo(context.targetVersion) <= 0) {
                        valueFound = true;
                        break;
                    }
                    else {
                        context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(value, this.name));
                    }
                }
            }
            if (valueFound) {
                context.serializeEnum(this.enumType, target, this.name, value, this.defaultValue);
            }
        }
    };
    Object.defineProperty(EnumProperty.prototype, "values", {
        get: function () {
            return this._values;
        },
        enumerable: false,
        configurable: true
    });
    return EnumProperty;
}(PropertyDefinition));
exports.EnumProperty = EnumProperty;
var SerializableObjectProperty = /** @class */ (function (_super) {
    __extends(SerializableObjectProperty, _super);
    function SerializableObjectProperty(targetVersion, name, objectType, defaultValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, function (sender) { return new _this.objectType(); }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.objectType = objectType;
        return _this;
    }
    SerializableObjectProperty.prototype.parse = function (sender, source, context) {
        var sourceValue = source[this.name];
        if (sourceValue === undefined) {
            return this.onGetInitialValue ? this.onGetInitialValue(sender) : this.defaultValue;
        }
        var result = new this.objectType();
        result.parse(sourceValue, context);
        return result;
    };
    SerializableObjectProperty.prototype.toJSON = function (sender, target, value, context) {
        var serializedValue = value !== undefined ? value.toJSON(context) : value;
        if (typeof serializedValue === "object" && Object.keys(serializedValue).length === 0) {
            serializedValue = undefined;
        }
        _super.prototype.toJSON.call(this, sender, target, serializedValue, context);
    };
    return SerializableObjectProperty;
}(PropertyDefinition));
exports.SerializableObjectProperty = SerializableObjectProperty;
var SerializableObjectCollectionProperty = /** @class */ (function (_super) {
    __extends(SerializableObjectCollectionProperty, _super);
    function SerializableObjectCollectionProperty(targetVersion, name, objectType, onItemAdded) {
        var _this = _super.call(this, targetVersion, name, undefined, function (sender) { return []; }) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.objectType = objectType;
        _this.onItemAdded = onItemAdded;
        return _this;
    }
    SerializableObjectCollectionProperty.prototype.parse = function (sender, source, context) {
        var result = [];
        var sourceCollection = source[this.name];
        if (Array.isArray(sourceCollection)) {
            for (var _i = 0, sourceCollection_1 = sourceCollection; _i < sourceCollection_1.length; _i++) {
                var sourceItem = sourceCollection_1[_i];
                var item = new this.objectType();
                item.parse(sourceItem, context);
                result.push(item);
                if (this.onItemAdded) {
                    this.onItemAdded(sender, item);
                }
            }
        }
        return result.length > 0 ? result : (this.onGetInitialValue ? this.onGetInitialValue(sender) : undefined);
    };
    SerializableObjectCollectionProperty.prototype.toJSON = function (sender, target, value, context) {
        context.serializeArray(target, this.name, value);
    };
    return SerializableObjectCollectionProperty;
}(PropertyDefinition));
exports.SerializableObjectCollectionProperty = SerializableObjectCollectionProperty;
var CustomProperty = /** @class */ (function (_super) {
    __extends(CustomProperty, _super);
    function CustomProperty(targetVersion, name, onParse, onToJSON, defaultValue, onGetInitialValue) {
        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;
        _this.targetVersion = targetVersion;
        _this.name = name;
        _this.onParse = onParse;
        _this.onToJSON = onToJSON;
        _this.defaultValue = defaultValue;
        _this.onGetInitialValue = onGetInitialValue;
        if (!_this.onParse) {
            throw new Error("CustomPropertyDefinition instances must have an onParse handler.");
        }
        if (!_this.onToJSON) {
            throw new Error("CustomPropertyDefinition instances must have an onToJSON handler.");
        }
        return _this;
    }
    CustomProperty.prototype.parse = function (sender, source, context) {
        return this.onParse(sender, this, source, context);
    };
    CustomProperty.prototype.toJSON = function (sender, target, value, context) {
        this.onToJSON(sender, this, target, value, context);
    };
    return CustomProperty;
}(PropertyDefinition));
exports.CustomProperty = CustomProperty;
var SerializableObjectSchema = /** @class */ (function () {
    function SerializableObjectSchema() {
        this._properties = [];
    }
    SerializableObjectSchema.prototype.indexOf = function (property) {
        for (var i = 0; i < this._properties.length; i++) {
            if (this._properties[i] === property) {
                return i;
            }
        }
        return -1;
    };
    SerializableObjectSchema.prototype.add = function () {
        var properties = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            properties[_i] = arguments[_i];
        }
        for (var i = 0; i < properties.length; i++) {
            if (this.indexOf(properties[i]) === -1) {
                this._properties.push(properties[i]);
            }
        }
    };
    SerializableObjectSchema.prototype.remove = function () {
        var properties = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            properties[_i] = arguments[_i];
        }
        for (var _a = 0, properties_1 = properties; _a < properties_1.length; _a++) {
            var property_1 = properties_1[_a];
            while (true) {
                var index = this.indexOf(property_1);
                if (index >= 0) {
                    this._properties.splice(index, 1);
                }
                else {
                    break;
                }
            }
        }
    };
    SerializableObjectSchema.prototype.getItemAt = function (index) {
        return this._properties[index];
    };
    SerializableObjectSchema.prototype.getCount = function () {
        return this._properties.length;
    };
    return SerializableObjectSchema;
}());
exports.SerializableObjectSchema = SerializableObjectSchema;
// This is a decorator function, used to map SerializableObject descendant class members to
// schema properties
function property(property) {
    return function (target, propertyKey) {
        var descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};
        if (!descriptor.get && !descriptor.set) {
            descriptor.get = function () { return this.getValue(property); };
            descriptor.set = function (value) { this.setValue(property, value); };
            Object.defineProperty(target, propertyKey, descriptor);
        }
    };
}
exports.property = property;
var SerializableObject = /** @class */ (function () {
    function SerializableObject() {
        this._propertyBag = {};
        this._rawProperties = {};
        this.maxVersion = Versions.v1_3;
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_2 = s.getItemAt(i);
            if (property_2.onGetInitialValue) {
                this.setValue(property_2, property_2.onGetInitialValue(this));
            }
        }
    }
    SerializableObject.prototype.populateSchema = function (schema) {
        var ctor = this.constructor;
        var properties = [];
        for (var propertyName in ctor) {
            try {
                var propertyValue = ctor[propertyName];
                if (propertyValue instanceof PropertyDefinition) {
                    properties.push(propertyValue);
                }
            }
            catch (_a) {
                // If a property happens to have a getter function and
                // it throws an exception, we need to catch it here
            }
        }
        if (properties.length > 0) {
            var sortedProperties = properties.sort(function (p1, p2) {
                if (p1.sequentialNumber > p2.sequentialNumber) {
                    return 1;
                }
                else if (p1.sequentialNumber < p2.sequentialNumber) {
                    return -1;
                }
                return 0;
            });
            schema.add.apply(schema, sortedProperties);
        }
        if (SerializableObject.onRegisterCustomProperties) {
            SerializableObject.onRegisterCustomProperties(this, schema);
        }
    };
    SerializableObject.prototype.getValue = function (property) {
        return this._propertyBag.hasOwnProperty(property.getInternalName()) ? this._propertyBag[property.getInternalName()] : property.defaultValue;
    };
    SerializableObject.prototype.setValue = function (property, value) {
        if (value === undefined || value === null) {
            delete this._propertyBag[property.getInternalName()];
        }
        else {
            this._propertyBag[property.getInternalName()] = value;
        }
    };
    SerializableObject.prototype.internalParse = function (source, context) {
        this._propertyBag = {};
        this._rawProperties = shared_1.GlobalSettings.enableFullJsonRoundTrip ? (source ? source : {}) : {};
        if (source) {
            var s = this.getSchema();
            for (var i = 0; i < s.getCount(); i++) {
                var property_3 = s.getItemAt(i);
                if (property_3.isSerializationEnabled) {
                    var propertyValue = property_3.onGetInitialValue ? property_3.onGetInitialValue(this) : undefined;
                    if (source.hasOwnProperty(property_3.name)) {
                        if (property_3.targetVersion.compareTo(context.targetVersion) <= 0) {
                            propertyValue = property_3.parse(this, source, context);
                        }
                        else {
                            context.logParseEvent(this, Enums.ValidationEvent.UnsupportedProperty, strings_1.Strings.errors.propertyNotSupported(property_3.name, property_3.targetVersion.toString(), context.targetVersion.toString()));
                        }
                    }
                    this.setValue(property_3, propertyValue);
                }
            }
        }
        else {
            this.resetDefaultValues();
        }
    };
    SerializableObject.prototype.internalToJSON = function (target, context) {
        var s = this.getSchema();
        var serializedProperties = [];
        for (var i = 0; i < s.getCount(); i++) {
            var property_4 = s.getItemAt(i);
            // Avoid serializing the same property multiple times. This is necessary
            // because some property definitions map to the same underlying schema
            // property
            if (property_4.isSerializationEnabled && property_4.targetVersion.compareTo(context.targetVersion) <= 0 && serializedProperties.indexOf(property_4.name) === -1) {
                property_4.toJSON(this, target, this.getValue(property_4), context);
                serializedProperties.push(property_4.name);
            }
        }
    };
    SerializableObject.prototype.shouldSerialize = function (context) {
        return true;
    };
    SerializableObject.prototype.parse = function (source, context) {
        this.internalParse(source, context ? context : new SimpleSerializationContext());
    };
    SerializableObject.prototype.toJSON = function (context) {
        var effectiveContext = context ? context : new SimpleSerializationContext();
        if (this.shouldSerialize(effectiveContext)) {
            var result = void 0;
            if (shared_1.GlobalSettings.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === "object") {
                result = this._rawProperties;
            }
            else {
                result = {};
            }
            this.internalToJSON(result, effectiveContext);
            return result;
        }
        else {
            return undefined;
        }
    };
    SerializableObject.prototype.hasDefaultValue = function (property) {
        return this.getValue(property) === property.defaultValue;
    };
    SerializableObject.prototype.hasAllDefaultValues = function () {
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_5 = s.getItemAt(i);
            if (!this.hasDefaultValue(property_5)) {
                return false;
            }
        }
        return true;
    };
    SerializableObject.prototype.resetDefaultValues = function () {
        var s = this.getSchema();
        for (var i = 0; i < s.getCount(); i++) {
            var property_6 = s.getItemAt(i);
            this.setValue(property_6, property_6.defaultValue);
        }
    };
    SerializableObject.prototype.setCustomProperty = function (name, value) {
        var shouldDeleteProperty = (typeof value === "string" && !value) || value === undefined || value === null;
        if (shouldDeleteProperty) {
            delete this._rawProperties[name];
        }
        else {
            this._rawProperties[name] = value;
        }
    };
    SerializableObject.prototype.getCustomProperty = function (name) {
        return this._rawProperties[name];
    };
    SerializableObject.prototype.getSchema = function () {
        var schema = SerializableObject._schemaCache[this.getSchemaKey()];
        if (!schema) {
            schema = new SerializableObjectSchema();
            this.populateSchema(schema);
            SerializableObject._schemaCache[this.getSchemaKey()] = schema;
        }
        return schema;
    };
    SerializableObject._schemaCache = {};
    return SerializableObject;
}());
exports.SerializableObject = SerializableObject;


/***/ }),

/***/ "./src/shared.ts":
/*!***********************!*\
  !*** ./src/shared.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.UUID = exports.SizeAndUnit = exports.PaddingDefinition = exports.SpacingDefinition = exports.StringWithSubstitutions = exports.ContentTypes = exports.GlobalSettings = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var GlobalSettings = /** @class */ (function () {
    function GlobalSettings() {
    }
    GlobalSettings.useAdvancedTextBlockTruncation = true;
    GlobalSettings.useAdvancedCardBottomTruncation = false;
    GlobalSettings.useMarkdownInRadioButtonAndCheckbox = true;
    GlobalSettings.allowMarkForTextHighlighting = false;
    GlobalSettings.alwaysBleedSeparators = false;
    GlobalSettings.enableFullJsonRoundTrip = false;
    GlobalSettings.displayInputValidationErrors = true;
    GlobalSettings.allowPreProcessingPropertyValues = false;
    GlobalSettings.setTabIndexAtCardRoot = true;
    GlobalSettings.enableFallback = true;
    return GlobalSettings;
}());
exports.GlobalSettings = GlobalSettings;
exports.ContentTypes = {
    applicationJson: "application/json",
    applicationXWwwFormUrlencoded: "application/x-www-form-urlencoded"
};
var StringWithSubstitutions = /** @class */ (function () {
    function StringWithSubstitutions() {
        this._isProcessed = false;
    }
    StringWithSubstitutions.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        if (!referencedInputs) {
            throw new Error("The referencedInputs parameter cannot be null.");
        }
        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {
            var input = inputs_1[_i];
            var matches = new RegExp("\\{{2}(" + input.id + ").value\\}{2}", "gi").exec(this._original);
            if (matches != null && input.id) {
                referencedInputs[input.id] = input;
            }
        }
    };
    StringWithSubstitutions.prototype.substituteInputValues = function (inputs, contentType) {
        this._processed = this._original;
        if (this._original) {
            var regEx = /\{{2}([a-z0-9_$@]+).value\}{2}/gi;
            var matches = void 0;
            while ((matches = regEx.exec(this._original)) !== null) {
                for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
                    var key = _a[_i];
                    if (key.toLowerCase() == matches[1].toLowerCase()) {
                        var matchedInput = inputs[key];
                        var valueForReplace = "";
                        if (matchedInput.value) {
                            valueForReplace = matchedInput.value;
                        }
                        if (contentType === exports.ContentTypes.applicationJson) {
                            valueForReplace = JSON.stringify(valueForReplace);
                            valueForReplace = valueForReplace.slice(1, -1);
                        }
                        else if (contentType === exports.ContentTypes.applicationXWwwFormUrlencoded) {
                            valueForReplace = encodeURIComponent(valueForReplace);
                        }
                        this._processed = this._processed.replace(matches[0], valueForReplace);
                        break;
                    }
                }
            }
        }
        this._isProcessed = true;
    };
    StringWithSubstitutions.prototype.getOriginal = function () {
        return this._original;
    };
    StringWithSubstitutions.prototype.get = function () {
        if (!this._isProcessed) {
            return this._original;
        }
        else {
            return this._processed;
        }
    };
    StringWithSubstitutions.prototype.set = function (value) {
        this._original = value;
        this._isProcessed = false;
    };
    return StringWithSubstitutions;
}());
exports.StringWithSubstitutions = StringWithSubstitutions;
var SpacingDefinition = /** @class */ (function () {
    function SpacingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = 0; }
        if (right === void 0) { right = 0; }
        if (bottom === void 0) { bottom = 0; }
        if (left === void 0) { left = 0; }
        this.left = 0;
        this.top = 0;
        this.right = 0;
        this.bottom = 0;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return SpacingDefinition;
}());
exports.SpacingDefinition = SpacingDefinition;
var PaddingDefinition = /** @class */ (function () {
    function PaddingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = Enums.Spacing.None; }
        if (right === void 0) { right = Enums.Spacing.None; }
        if (bottom === void 0) { bottom = Enums.Spacing.None; }
        if (left === void 0) { left = Enums.Spacing.None; }
        this.top = Enums.Spacing.None;
        this.right = Enums.Spacing.None;
        this.bottom = Enums.Spacing.None;
        this.left = Enums.Spacing.None;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return PaddingDefinition;
}());
exports.PaddingDefinition = PaddingDefinition;
var SizeAndUnit = /** @class */ (function () {
    function SizeAndUnit(physicalSize, unit) {
        this.physicalSize = physicalSize;
        this.unit = unit;
    }
    SizeAndUnit.parse = function (input, requireUnitSpecifier) {
        if (requireUnitSpecifier === void 0) { requireUnitSpecifier = false; }
        var result = new SizeAndUnit(0, Enums.SizeUnit.Weight);
        if (typeof input === "number") {
            result.physicalSize = input;
            return result;
        }
        else if (typeof input === "string") {
            var regExp = /^([0-9]+)(px|\*)?$/g;
            var matches = regExp.exec(input);
            var expectedMatchCount = requireUnitSpecifier ? 3 : 2;
            if (matches && matches.length >= expectedMatchCount) {
                result.physicalSize = parseInt(matches[1]);
                if (matches.length == 3) {
                    if (matches[2] == "px") {
                        result.unit = Enums.SizeUnit.Pixel;
                    }
                }
                return result;
            }
        }
        throw new Error("Invalid size: " + input);
    };
    return SizeAndUnit;
}());
exports.SizeAndUnit = SizeAndUnit;
/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/
var UUID = /** @class */ (function () {
    function UUID() {
    }
    UUID.generate = function () {
        var d0 = Math.random() * 0xffffffff | 0;
        var d1 = Math.random() * 0xffffffff | 0;
        var d2 = Math.random() * 0xffffffff | 0;
        var d3 = Math.random() * 0xffffffff | 0;
        return UUID.lut[d0 & 0xff] + UUID.lut[d0 >> 8 & 0xff] + UUID.lut[d0 >> 16 & 0xff] + UUID.lut[d0 >> 24 & 0xff] + '-' +
            UUID.lut[d1 & 0xff] + UUID.lut[d1 >> 8 & 0xff] + '-' + UUID.lut[d1 >> 16 & 0x0f | 0x40] + UUID.lut[d1 >> 24 & 0xff] + '-' +
            UUID.lut[d2 & 0x3f | 0x80] + UUID.lut[d2 >> 8 & 0xff] + '-' + UUID.lut[d2 >> 16 & 0xff] + UUID.lut[d2 >> 24 & 0xff] +
            UUID.lut[d3 & 0xff] + UUID.lut[d3 >> 8 & 0xff] + UUID.lut[d3 >> 16 & 0xff] + UUID.lut[d3 >> 24 & 0xff];
    };
    UUID.initialize = function () {
        for (var i = 0; i < 256; i++) {
            UUID.lut[i] = (i < 16 ? '0' : '') + i.toString(16);
        }
    };
    UUID.lut = [];
    return UUID;
}());
exports.UUID = UUID;
UUID.initialize();


/***/ }),

/***/ "./src/strings.ts":
/*!************************!*\
  !*** ./src/strings.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Strings = void 0;
var Strings = /** @class */ (function () {
    function Strings() {
    }
    Strings.errors = {
        unknownElementType: function (typeName) { return "Unknown element type \"" + typeName + "\". Fallback will be used if present."; },
        unknownActionType: function (typeName) { return "Unknown action type \"" + typeName + "\". Fallback will be used if present."; },
        elementTypeNotAllowed: function (typeName) { return "Element type \"" + typeName + "\" is not allowed in this context."; },
        actionTypeNotAllowed: function (typeName) { return "Action type \"" + typeName + "\" is not allowed in this context."; },
        invalidPropertyValue: function (value, propertyName) { return "Invalid value \"" + value + "\" for property \"" + propertyName + "\"."; },
        showCardMustHaveCard: function () { return "\"An Action.ShowCard must have its \"card\" property set to a valid AdaptiveCard object."; },
        invalidColumnWidth: function (invalidWidth) { return "Invalid column width \"" + invalidWidth + "\" - defaulting to \"auto\"."; },
        invalidCardVersion: function (defaultingToVersion) { return "Invalid card version. Defaulting to \"" + defaultingToVersion + "\"."; },
        invalidVersionString: function (versionString) { return "Invalid version string \"" + versionString + "\"."; },
        propertyValueNotSupported: function (value, propertyName, supportedInVersion, versionUsed) { return "Value \"" + value + "\" for property \"" + propertyName + "\" is supported in version " + supportedInVersion + ", but you are using version " + versionUsed + "."; },
        propertyNotSupported: function (propertyName, supportedInVersion, versionUsed) { return "Property \"" + propertyName + "\" is supported in version " + supportedInVersion + ", but you are using version " + versionUsed + "."; },
        indexOutOfRange: function (index) { return "Index out of range (" + index + ")."; },
        elementCannotBeUsedAsInline: function () { return "RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline."; },
        inlineAlreadyParented: function () { return "RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock."; },
        interactivityNotAllowed: function () { return "Interactivity is not allowed."; },
        inputsMustHaveUniqueId: function () { return "All inputs must have a unique Id."; },
        choiceSetMustHaveAtLeastOneChoice: function () { return "An Input.ChoiceSet must have at least one choice defined."; },
        choiceSetChoicesMustHaveTitleAndValue: function () { return "All choices in an Input.ChoiceSet must have their title and value properties set."; },
        propertyMustBeSet: function (propertyName) { return "Property \"" + propertyName + "\" must be set."; },
        actionHttpHeadersMustHaveNameAndValue: function () { return "All headers of an Action.Http must have their name and value properties set."; },
        tooManyActions: function (maximumActions) { return "Maximum number of actions exceeded (" + maximumActions + ")."; },
        columnAlreadyBelongsToAnotherSet: function () { return "This column already belongs to another ColumnSet."; },
        invalidCardType: function () { return "Invalid or missing card type. Make sure the card's type property is set to \"AdaptiveCard\"."; },
        unsupportedCardVersion: function (version, maxSupportedVersion) { return "The specified card version (" + version + ") is not supported. The maximum supported card version is " + maxSupportedVersion + "."; },
        duplicateId: function (id) { return "Duplicate Id \"" + id + "\"."; },
        markdownProcessingNotEnabled: function () { return "Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown"; },
        processMarkdownEventRemoved: function () { return "The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead."; },
        elementAlreadyParented: function () { return "The element already belongs to another container."; },
        actionAlreadyParented: function () { return "The action already belongs to another element."; },
        elementTypeNotStandalone: function (typeName) { return "Elements of type " + typeName + " cannot be used as standalone elements."; }
    };
    Strings.hints = {
        dontUseWeightedAndStrecthedColumnsInSameSet: function () { return "It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space."; }
    };
    return Strings;
}());
exports.Strings = Strings;


/***/ }),

/***/ "./src/text-formatters.ts":
/*!********************************!*\
  !*** ./src/text-formatters.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatText = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var AbstractTextFormatter = /** @class */ (function () {
    function AbstractTextFormatter(regularExpression) {
        this._regularExpression = regularExpression;
    }
    AbstractTextFormatter.prototype.format = function (lang, input) {
        var matches;
        if (input) {
            var result = input;
            while ((matches = this._regularExpression.exec(input)) != null) {
                result = result.replace(matches[0], this.internalFormat(lang, matches));
            }
            ;
            return result;
        }
        else {
            return input;
        }
    };
    return AbstractTextFormatter;
}());
var DateFormatter = /** @class */ (function (_super) {
    __extends(DateFormatter, _super);
    function DateFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        var format = matches[2] != undefined ? matches[2].toLowerCase() : "compact";
        if (format != "compact") {
            return date.toLocaleDateString(lang, { day: "numeric", weekday: format, month: format, year: "numeric" });
        }
        else {
            return date.toLocaleDateString();
        }
    };
    return DateFormatter;
}(AbstractTextFormatter));
var TimeFormatter = /** @class */ (function (_super) {
    __extends(TimeFormatter, _super);
    function TimeFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        return date.toLocaleTimeString(lang, { hour: 'numeric', minute: '2-digit' });
    };
    return TimeFormatter;
}(AbstractTextFormatter));
function formatText(lang, text) {
    var formatters = [
        new DateFormatter(/\{{2}DATE\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))(?:, ?(COMPACT|LONG|SHORT))?\)\}{2}/g),
        new TimeFormatter(/\{{2}TIME\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))\)\}{2}/g)
    ];
    var result = text;
    for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {
        var formatter = formatters_1[_i];
        result = formatter.format(lang, result);
    }
    return result;
}
exports.formatText = formatText;


/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.getFitStatus = exports.truncate = exports.stringToCssColor = exports.renderSeparation = exports.parseEnum = exports.getEnumValueByName = exports.parseBool = exports.parseNumber = exports.parseString = exports.appendChild = exports.generateUniqueId = exports.isMobileOS = void 0;
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "./src/enums.ts");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
function isMobileOS() {
    var userAgent = window.navigator.userAgent;
    return !!userAgent.match(/Android/i) || !!userAgent.match(/iPad/i) || !!userAgent.match(/iPhone/i);
}
exports.isMobileOS = isMobileOS;
/**
 * Generate a UUID prepended with "__ac-"
 */
function generateUniqueId() {
    return "__ac-" + Shared.UUID.generate();
}
exports.generateUniqueId = generateUniqueId;
function appendChild(node, child) {
    if (child) {
        node.appendChild(child);
    }
}
exports.appendChild = appendChild;
function parseString(obj, defaultValue) {
    return typeof obj === "string" ? obj : defaultValue;
}
exports.parseString = parseString;
function parseNumber(obj, defaultValue) {
    return typeof obj === "number" ? obj : defaultValue;
}
exports.parseNumber = parseNumber;
function parseBool(value, defaultValue) {
    if (typeof value === "boolean") {
        return value;
    }
    else if (typeof value === "string") {
        switch (value.toLowerCase()) {
            case "true":
                return true;
            case "false":
                return false;
            default:
                return defaultValue;
        }
    }
    return defaultValue;
}
exports.parseBool = parseBool;
function getEnumValueByName(enumType, name) {
    for (var key in enumType) {
        var keyAsNumber = parseInt(key, 10);
        if (keyAsNumber >= 0) {
            var value = enumType[key];
            if (value && typeof value === "string" && value.toLowerCase() === name.toLowerCase()) {
                return keyAsNumber;
            }
        }
    }
    return undefined;
}
exports.getEnumValueByName = getEnumValueByName;
function parseEnum(enumType, name, defaultValue) {
    if (!name) {
        return defaultValue;
    }
    var enumValue = getEnumValueByName(enumType, name);
    return enumValue !== undefined ? enumValue : defaultValue;
}
exports.parseEnum = parseEnum;
function renderSeparation(hostConfig, separationDefinition, orientation) {
    if (separationDefinition.spacing > 0 || (separationDefinition.lineThickness && separationDefinition.lineThickness > 0)) {
        var separator = document.createElement("div");
        separator.className = hostConfig.makeCssClassName("ac-" + (orientation == Enums.Orientation.Horizontal ? "horizontal" : "vertical") + "-separator");
        var color = separationDefinition.lineColor ? stringToCssColor(separationDefinition.lineColor) : "";
        if (orientation == Enums.Orientation.Horizontal) {
            if (separationDefinition.lineThickness) {
                separator.style.paddingTop = (separationDefinition.spacing / 2) + "px";
                separator.style.marginBottom = (separationDefinition.spacing / 2) + "px";
                separator.style.borderBottom = separationDefinition.lineThickness + "px solid " + color;
            }
            else {
                separator.style.height = separationDefinition.spacing + "px";
            }
        }
        else {
            if (separationDefinition.lineThickness) {
                separator.style.paddingLeft = (separationDefinition.spacing / 2) + "px";
                separator.style.marginRight = (separationDefinition.spacing / 2) + "px";
                separator.style.borderRight = separationDefinition.lineThickness + "px solid " + color;
            }
            else {
                separator.style.width = separationDefinition.spacing + "px";
            }
        }
        separator.style.overflow = "hidden";
        separator.style.flex = "0 0 auto";
        return separator;
    }
    else {
        return undefined;
    }
}
exports.renderSeparation = renderSeparation;
function stringToCssColor(color) {
    if (color) {
        var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;
        var matches = regEx.exec(color);
        if (matches && matches[4]) {
            var a = parseInt(matches[1], 16) / 255;
            var r = parseInt(matches[2], 16);
            var g = parseInt(matches[3], 16);
            var b = parseInt(matches[4], 16);
            return "rgba(" + r + "," + g + "," + b + "," + a + ")";
        }
    }
    return color;
}
exports.stringToCssColor = stringToCssColor;
function truncate(element, maxHeight, lineHeight) {
    var fits = function () {
        // Allow a one pixel overflow to account for rounding differences
        // between browsers
        return maxHeight - element.scrollHeight >= -1.0;
    };
    if (fits())
        return;
    var fullText = element.innerHTML;
    var truncateAt = function (idx) {
        element.innerHTML = fullText.substring(0, idx) + '...';
    };
    var breakableIndices = findBreakableIndices(fullText);
    var lo = 0;
    var hi = breakableIndices.length;
    var bestBreakIdx = 0;
    // Do a binary search for the longest string that fits
    while (lo < hi) {
        var mid = Math.floor((lo + hi) / 2);
        truncateAt(breakableIndices[mid]);
        if (fits()) {
            bestBreakIdx = breakableIndices[mid];
            lo = mid + 1;
        }
        else {
            hi = mid;
        }
    }
    truncateAt(bestBreakIdx);
    // If we have extra room, try to expand the string letter by letter
    // (covers the case where we have to break in the middle of a long word)
    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {
        var idx = findNextCharacter(fullText, bestBreakIdx);
        while (idx < fullText.length) {
            truncateAt(idx);
            if (fits()) {
                bestBreakIdx = idx;
                idx = findNextCharacter(fullText, idx);
            }
            else {
                break;
            }
        }
        truncateAt(bestBreakIdx);
    }
}
exports.truncate = truncate;
function findBreakableIndices(html) {
    var results = [];
    var idx = findNextCharacter(html, -1);
    while (idx < html.length) {
        if (html[idx] == ' ') {
            results.push(idx);
        }
        idx = findNextCharacter(html, idx);
    }
    return results;
}
function findNextCharacter(html, currIdx) {
    currIdx += 1;
    // If we found the start of an HTML tag, keep advancing until we get
    // past it, so we don't end up truncating in the middle of the tag
    while (currIdx < html.length && html[currIdx] == '<') {
        while (currIdx < html.length && html[currIdx++] != '>')
            ;
    }
    return currIdx;
}
function getFitStatus(element, containerEnd) {
    var start = element.offsetTop;
    var end = start + element.clientHeight;
    if (end <= containerEnd) {
        return Enums.ContainerFitStatus.FullyInContainer;
    }
    else if (start < containerEnd) {
        return Enums.ContainerFitStatus.Overflowing;
    }
    else {
        return Enums.ContainerFitStatus.FullyOutOfContainer;
    }
}
exports.getFitStatus = getFitStatus;


/***/ })

/******/ });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvYWRhcHRpdmVjYXJkcy50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL2NhcmQtZWxlbWVudHMudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy9jYXJkLW9iamVjdC50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL2VudW1zLnRzIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvaG9zdC1jYXBhYmlsaXRpZXMudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy9ob3N0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3JlZ2lzdHJ5LnRzIiwid2VicGFjazovL0FkYXB0aXZlQ2FyZHMvLi9zcmMvc2VyaWFsaXphdGlvbi50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3NoYXJlZC50cyIsIndlYnBhY2s6Ly9BZGFwdGl2ZUNhcmRzLy4vc3JjL3N0cmluZ3MudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy90ZXh0LWZvcm1hdHRlcnMudHMiLCJ3ZWJwYWNrOi8vQWRhcHRpdmVDYXJkcy8uL3NyYy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztRQ1ZBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FB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dkQ7QUFDTCxDQUFDO0FBYkQsb0NBYUMiLCJmaWxlIjoiYWRhcHRpdmVjYXJkcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkFkYXB0aXZlQ2FyZHNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiQWRhcHRpdmVDYXJkc1wiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvYWRhcHRpdmVjYXJkcy50c1wiKTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuZXhwb3J0ICogZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmVnaXN0cnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NhcmQtb2JqZWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jYXJkLWVsZW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9lbnVtc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vaG9zdC1jb25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NoYXJlZFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXRpbHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0cmluZ3NcIjtcbmV4cG9ydCB7IElBZGFwdGl2ZUNhcmQsIElDYXJkRWxlbWVudCB9IGZyb20gXCIuL3NjaGVtYVwiO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgKiBhcyBFbnVtcyBmcm9tIFwiLi9lbnVtc1wiO1xuaW1wb3J0IHsgUGFkZGluZ0RlZmluaXRpb24sIEdsb2JhbFNldHRpbmdzLCBTaXplQW5kVW5pdCxTcGFjaW5nRGVmaW5pdGlvbixcbiAgICBEaWN0aW9uYXJ5LCBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucywgQ29udGVudFR5cGVzLCBJSW5wdXQsIElSZXNvdXJjZUluZm9ybWF0aW9uIH0gZnJvbSBcIi4vc2hhcmVkXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgSG9zdENvbmZpZywgZGVmYXVsdEhvc3RDb25maWcsIEJhc2VUZXh0RGVmaW5pdGlvbiwgRm9udFR5cGVEZWZpbml0aW9uLCBDb2xvclNldERlZmluaXRpb24sIFRleHRDb2xvckRlZmluaXRpb24sIENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbiB9IGZyb20gXCIuL2hvc3QtY29uZmlnXCI7XG5pbXBvcnQgKiBhcyBUZXh0Rm9ybWF0dGVycyBmcm9tIFwiLi90ZXh0LWZvcm1hdHRlcnNcIjtcbmltcG9ydCB7IENhcmRPYmplY3QsIFZhbGlkYXRpb25SZXN1bHRzIH0gZnJvbSBcIi4vY2FyZC1vYmplY3RcIjtcbmltcG9ydCB7IFZlcnNpb25zLCBWZXJzaW9uLCBwcm9wZXJ0eSwgQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0LCBTZXJpYWxpemFibGVPYmplY3QsIFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSwgU3RyaW5nUHJvcGVydHksXG4gICAgQm9vbFByb3BlcnR5LCBWYWx1ZVNldFByb3BlcnR5LCBFbnVtUHJvcGVydHksIFNlcmlhbGl6YWJsZU9iamVjdENvbGxlY3Rpb25Qcm9wZXJ0eSwgU2VyaWFsaXphYmxlT2JqZWN0UHJvcGVydHksIFBpeGVsU2l6ZVByb3BlcnR5LFxuICAgIE51bVByb3BlcnR5LCBQcm9wZXJ0eUJhZywgQ3VzdG9tUHJvcGVydHksIFByb3BlcnR5RGVmaW5pdGlvbiB9IGZyb20gXCIuL3NlcmlhbGl6YXRpb25cIjtcbmltcG9ydCB7IENhcmRPYmplY3RSZWdpc3RyeSB9IGZyb20gXCIuL3JlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBTdHJpbmdzIH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuXG5leHBvcnQgdHlwZSBDYXJkRWxlbWVudEhlaWdodCA9IFwiYXV0b1wiIHwgXCJzdHJldGNoXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkRWxlbWVudCBleHRlbmRzIENhcmRPYmplY3Qge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSBsYW5nUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJsYW5nXCIsIHRydWUsIC9eW2Etel17MiwzfSQvaWcpO1xuICAgIHN0YXRpYyByZWFkb25seSBpc1Zpc2libGVQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJpc1Zpc2libGVcIiwgdHJ1ZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNlcGFyYXRvclByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInNlcGFyYXRvclwiLCBmYWxzZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IGhlaWdodFByb3BlcnR5ID0gbmV3IFZhbHVlU2V0UHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzEsXG4gICAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICAgIFtcbiAgICAgICAgICAgIHsgdmFsdWU6IFwiYXV0b1wiIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiBcInN0cmV0Y2hcIiB9XG4gICAgICAgIF0sXG4gICAgICAgIFwiYXV0b1wiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcbiAgICAgICAgXCJob3Jpem9udGFsQWxpZ25tZW50XCIsXG4gICAgICAgIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQsXG4gICAgICAgIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuTGVmdCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNwYWNpbmdQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwic3BhY2luZ1wiLFxuICAgICAgICBFbnVtcy5TcGFjaW5nLFxuICAgICAgICBFbnVtcy5TcGFjaW5nLkRlZmF1bHQpO1xuXG4gICAgQHByb3BlcnR5KENhcmRFbGVtZW50Lmhvcml6b250YWxBbGlnbm1lbnRQcm9wZXJ0eSlcbiAgICBob3Jpem9udGFsQWxpZ25tZW50OiBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50O1xuXG4gICAgQHByb3BlcnR5KENhcmRFbGVtZW50LnNwYWNpbmdQcm9wZXJ0eSlcbiAgICBzcGFjaW5nOiBFbnVtcy5TcGFjaW5nO1xuXG4gICAgQHByb3BlcnR5KENhcmRFbGVtZW50LnNlcGFyYXRvclByb3BlcnR5KVxuICAgIHNlcGFyYXRvcjogYm9vbGVhbjtcblxuICAgIEBwcm9wZXJ0eShDYXJkRWxlbWVudC5oZWlnaHRQcm9wZXJ0eSlcbiAgICBoZWlnaHQ6IENhcmRFbGVtZW50SGVpZ2h0O1xuXG4gICAgQHByb3BlcnR5KENhcmRFbGVtZW50LmxhbmdQcm9wZXJ0eSlcbiAgICBnZXQgbGFuZygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgbGFuZyA9IHRoaXMuZ2V0VmFsdWUoQ2FyZEVsZW1lbnQubGFuZ1Byb3BlcnR5KTtcblxuICAgICAgICBpZiAobGFuZykge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQubGFuZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQgbGFuZyh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoQ2FyZEVsZW1lbnQubGFuZ1Byb3BlcnR5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KENhcmRFbGVtZW50LmlzVmlzaWJsZVByb3BlcnR5KVxuICAgIGdldCBpc1Zpc2libGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKENhcmRFbGVtZW50LmlzVmlzaWJsZVByb3BlcnR5KTtcbiAgICB9XG5cbiAgICBzZXQgaXNWaXNpYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIGdvaW5nIHRvIGJlIGhpZGRlbiwgcmVzZXQgYW55IGNoYW5nZXMgdGhhdCB3ZXJlIGR1ZVxuICAgICAgICAvLyB0byBvdmVyZmxvdyB0cnVuY2F0aW9uICh0aGlzIGVuc3VyZXMgdGhhdCBpZiB0aGUgZWxlbWVudCBpcyBsYXRlclxuICAgICAgICAvLyB1bi1oaWRkZW4gaXQgaGFzIHRoZSByaWdodCBjb250ZW50KVxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbiAmJiAhdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudW5kb092ZXJmbG93VHJ1bmNhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShDYXJkRWxlbWVudC5pc1Zpc2libGVQcm9wZXJ0eSwgdmFsdWUpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkRWxlbWVudFZpc2liaWxpdHkoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgX2hvc3RDb25maWc/OiBIb3N0Q29uZmlnO1xuICAgIHByaXZhdGUgX3NlcGFyYXRvckVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF90cnVuY2F0ZWREdWVUb092ZXJmbG93OiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfZGVmYXVsdFJlbmRlcmVkRWxlbWVudERpc3BsYXlNb2RlPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3BhZGRpbmc/OiBQYWRkaW5nRGVmaW5pdGlvbjtcblxuICAgIHByaXZhdGUgaW50ZXJuYWxSZW5kZXJTZXBhcmF0b3IoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVuZGVyZWRTZXBhcmF0b3IgPSBVdGlscy5yZW5kZXJTZXBhcmF0aW9uKFxuICAgICAgICAgICAgdGhpcy5ob3N0Q29uZmlnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHRoaXMuaG9zdENvbmZpZy5nZXRFZmZlY3RpdmVTcGFjaW5nKHRoaXMuc3BhY2luZyksXG4gICAgICAgICAgICAgICAgbGluZVRoaWNrbmVzczogdGhpcy5zZXBhcmF0b3IgPyB0aGlzLmhvc3RDb25maWcuc2VwYXJhdG9yLmxpbmVUaGlja25lc3MgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbGluZUNvbG9yOiB0aGlzLnNlcGFyYXRvciA/IHRoaXMuaG9zdENvbmZpZy5zZXBhcmF0b3IubGluZUNvbG9yIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JPcmllbnRhdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChHbG9iYWxTZXR0aW5ncy5hbHdheXNCbGVlZFNlcGFyYXRvcnMgJiYgcmVuZGVyZWRTZXBhcmF0b3IgJiYgdGhpcy5zZXBhcmF0b3JPcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRqdXN0IHNlcGFyYXRvcidzIG1hcmdpbnMgaWYgdGhlIG9wdGlvbiB0byBhbHdheXMgYmxlZWQgc2VwYXJhdG9ycyBpcyB0dXJuZWQgb25cbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRDb250YWluZXIgJiYgcGFyZW50Q29udGFpbmVyLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50UGh5c2ljYWxQYWRkaW5nID0gdGhpcy5ob3N0Q29uZmlnLnBhZGRpbmdEZWZpbml0aW9uVG9TcGFjaW5nRGVmaW5pdGlvbihwYXJlbnRDb250YWluZXIuZ2V0RWZmZWN0aXZlUGFkZGluZygpKTtcblxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZFNlcGFyYXRvci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBwYXJlbnRQaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRTZXBhcmF0b3Iuc3R5bGUubWFyZ2luUmlnaHQgPSBcIi1cIiArIHBhcmVudFBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZW5kZXJlZFNlcGFyYXRvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVJlbmRlcmVkRWxlbWVudFZpc2liaWxpdHkoKSB7XG4gICAgICAgIGxldCBkaXNwbGF5TW9kZSA9IHRoaXMuaXNEZXNpZ25Nb2RlKCkgfHwgdGhpcy5pc1Zpc2libGUgPyB0aGlzLl9kZWZhdWx0UmVuZGVyZWRFbGVtZW50RGlzcGxheU1vZGUgOiBcIm5vbmVcIjtcblxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZGlzcGxheU1vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXlNb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zZXBhcmF0b3JFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuaXNGaXJzdEVsZW1lbnQodGhpcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXBhcmF0b3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXBhcmF0b3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5TW9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlcGFyYXRvckVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZUVsZW1lbnREdWVUb092ZXJmbG93KCkge1xuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICByYWlzZUVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEV2ZW50KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0VsZW1lbnRIaWRkZW5EdWVUb092ZXJmbG93KCkge1xuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50ICYmICF0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwidmlzaWJpbGl0eVwiKTtcblxuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgcmFpc2VFbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRFdmVudCh0aGlzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYXJrZWQgcHJpdmF0ZSB0byBlbXVsYXRlIGludGVybmFsIGFjY2Vzc1xuICAgIHByaXZhdGUgaGFuZGxlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlIHx8IHRoaXMuaXNIaWRkZW5EdWVUb092ZXJmbG93KCkpIHtcbiAgICAgICAgICAgIGxldCBoYW5kbGVkID0gdGhpcy50cnVuY2F0ZU92ZXJmbG93KG1heEhlaWdodCk7XG5cbiAgICAgICAgICAgIC8vIEV2ZW4gaWYgd2Ugd2VyZSB1bmFibGUgdG8gdHJ1bmNhdGUgdGhlIGVsZW1lbnQgdG8gZml0IHRoaXMgdGltZSxcbiAgICAgICAgICAgIC8vIGl0IHN0aWxsIGNvdWxkIGhhdmUgYmVlbiBwcmV2aW91c2x5IHRydW5jYXRlZFxuICAgICAgICAgICAgdGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdyA9IGhhbmRsZWQgfHwgdGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdztcblxuICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudER1ZVRvT3ZlcmZsb3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRsZWQgJiYgIXRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1hcmtlZCBwcml2YXRlIHRvIGVtdWxhdGUgaW50ZXJuYWwgYWNjZXNzXG4gICAgcHJpdmF0ZSByZXNldE92ZXJmbG93KCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgc2l6ZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5fdHJ1bmNhdGVkRHVlVG9PdmVyZmxvdykge1xuICAgICAgICAgICAgdGhpcy51bmRvT3ZlcmZsb3dUcnVuY2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLl90cnVuY2F0ZWREdWVUb092ZXJmbG93ID0gZmFsc2U7XG4gICAgICAgICAgICBzaXplQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbkR1ZVRvT3ZlcmZsb3coKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaXplQ2hhbmdlZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlUGxhY2Vob2xkZXJFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IHN0eWxlRGVmaW5pdGlvbiA9IHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGVEZWZpbml0aW9uKCk7XG4gICAgICAgIGxldCBmb3JlZ3JvdW5kQ3NzQ29sb3IgPSBVdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHN0eWxlRGVmaW5pdGlvbi5mb3JlZ3JvdW5kQ29sb3JzLmRlZmF1bHQuc3VidGxlKTtcblxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyID0gXCIxcHggZGFzaGVkIFwiICsgZm9yZWdyb3VuZENzc0NvbG9yO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjRweFwiO1xuICAgICAgICBlbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMzJweFwiO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gXCIxMHB4XCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuY29sb3IgPSA8c3RyaW5nPmZvcmVncm91bmRDc3NDb2xvcjtcbiAgICAgICAgZWxlbWVudC5pbm5lclRleHQgPSBcIkVtcHR5IFwiICsgdGhpcy5nZXRKc29uVHlwZU5hbWUoKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWRqdXN0UmVuZGVyZWRFbGVtZW50U2l6ZShyZW5kZXJlZEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCA9PT0gXCJhdXRvXCIpIHtcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaXNEaXNwbGF5ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzVmlzaWJsZSAmJiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG5cbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGVJbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsUmVuZGVyKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFwcGx5UGFkZGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VwYXJhdG9yRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLmFsd2F5c0JsZWVkU2VwYXJhdG9ycyAmJiB0aGlzLnNlcGFyYXRvck9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwgJiYgIXRoaXMuaXNCbGVlZGluZygpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhZGRpbmcgPSBuZXcgUGFkZGluZ0RlZmluaXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKHBhZGRpbmcpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHBoeXNpY2FsUGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiLVwiICsgcGh5c2ljYWxQYWRkaW5nLmxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcucmlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiMFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIGVsZW1lbnQgb3ZlcmZsb3dzIHRoZSBib3R0b20gb2YgdGhlIGNhcmQuXG4gICAgICogbWF4SGVpZ2h0IHdpbGwgYmUgdGhlIGFtb3VudCBvZiBzcGFjZSBzdGlsbCBhdmFpbGFibGUgb24gdGhlIGNhcmQgKDAgaWZcbiAgICAgKiB0aGUgZWxlbWVudCBpcyBmdWxseSBvZmYgdGhlIGNhcmQpLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCB0cnVuY2F0ZU92ZXJmbG93KG1heEhlaWdodDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIENoaWxkIGltcGxlbWVudGF0aW9ucyBzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGVsZW1lbnQgaGFuZGxlZFxuICAgICAgICAvLyB0aGUgdHJ1bmNhdGlvbiByZXF1ZXN0IHN1Y2ggdGhhdCBpdHMgY29udGVudCBmaXRzIHdpdGhpbiBtYXhIZWlnaHQsXG4gICAgICAgIC8vIGZhbHNlIGlmIHRoZSBlbGVtZW50IHNob3VsZCBmYWxsIGJhY2sgdG8gYmVpbmcgaGlkZGVuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFRoaXMgc2hvdWxkIHJldmVyc2UgYW55IGNoYW5nZXMgcGVyZm9ybWVkIGluIHRydW5jYXRlT3ZlcmZsb3coKS5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdW5kb092ZXJmbG93VHJ1bmNhdGlvbigpIHsgfVxuXG4gICAgcHJvdGVjdGVkIGdldERlZmF1bHRQYWRkaW5nKCk6IFBhZGRpbmdEZWZpbml0aW9uIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYWRkaW5nRGVmaW5pdGlvbigpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRIYXNCYWNrZ3JvdW5kKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldFBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFkZGluZztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0UGFkZGluZyh2YWx1ZTogUGFkZGluZ0RlZmluaXRpb24gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fcGFkZGluZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzaG91bGRTZXJpYWxpemUoY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZWxlbWVudFJlZ2lzdHJ5LmZpbmRCeU5hbWUodGhpcy5nZXRKc29uVHlwZU5hbWUoKSkgIT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHVzZURlZmF1bHRTaXppbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgYWxsb3dDdXN0b21QYWRkaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHNlcGFyYXRvck9yaWVudGF0aW9uKCk6IEVudW1zLk9yaWVudGF0aW9uIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWw7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBkZWZhdWx0U3R5bGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHQ7XG4gICAgfVxuXG4gICAgY3VzdG9tQ3NzU2VsZWN0b3I/OiBzdHJpbmc7XG5cbiAgICBwYXJzZShzb3VyY2U6IGFueSwgY29udGV4dD86IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHN1cGVyLnBhcnNlKHNvdXJjZSwgY29udGV4dCA/IGNvbnRleHQgOiBuZXcgU2VyaWFsaXphdGlvbkNvbnRleHQoKSk7XG4gICAgfVxuXG4gICAgdG9KU09OKGNvbnRleHQ/OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IFByb3BlcnR5QmFnIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnRvSlNPTihjb250ZXh0ID8gY29udGV4dCA6IG5ldyBTZXJpYWxpemF0aW9uQ29udGV4dCgpKTtcbiAgICB9XG5cbiAgICBhc1N0cmluZygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBpc0JsZWVkaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0RWZmZWN0aXZlU3R5bGUoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RWZmZWN0aXZlU3R5bGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdHlsZTtcbiAgICB9XG5cbiAgICBnZXRFZmZlY3RpdmVTdHlsZURlZmluaXRpb24oKTogQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdENvbmZpZy5jb250YWluZXJTdHlsZXMuZ2V0U3R5bGVCeU5hbWUodGhpcy5nZXRFZmZlY3RpdmVTdHlsZSgpKTtcbiAgICB9XG5cbiAgICBnZXRGb3JiaWRkZW5BY3Rpb25UeXBlcygpOiBBY3Rpb25UeXBlW10ge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKFxuICAgICAgICByZXN1bHQ6IFBhZGRpbmdEZWZpbml0aW9uLFxuICAgICAgICBwcm9jZXNzVG9wOiBib29sZWFuID0gdHJ1ZSxcbiAgICAgICAgcHJvY2Vzc1JpZ2h0OiBib29sZWFuID0gdHJ1ZSxcbiAgICAgICAgcHJvY2Vzc0JvdHRvbTogYm9vbGVhbiA9IHRydWUsXG4gICAgICAgIHByb2Nlc3NMZWZ0OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGxldCBkb1Byb2Nlc3NUb3AgPSBwcm9jZXNzVG9wICYmIHRoaXMucGFyZW50LmlzVG9wRWxlbWVudCh0aGlzKTtcbiAgICAgICAgICAgIGxldCBkb1Byb2Nlc3NSaWdodCA9IHByb2Nlc3NSaWdodCAmJiB0aGlzLnBhcmVudC5pc1JpZ2h0TW9zdEVsZW1lbnQodGhpcyk7XG4gICAgICAgICAgICBsZXQgZG9Qcm9jZXNzQm90dG9tID0gcHJvY2Vzc0JvdHRvbSAmJiB0aGlzLnBhcmVudC5pc0JvdHRvbUVsZW1lbnQodGhpcyk7XG4gICAgICAgICAgICBsZXQgZG9Qcm9jZXNzTGVmdCA9IHByb2Nlc3NMZWZ0ICYmIHRoaXMucGFyZW50LmlzTGVmdE1vc3RFbGVtZW50KHRoaXMpO1xuXG4gICAgICAgICAgICBsZXQgZWZmZWN0aXZlUGFkZGluZyA9IHRoaXMucGFyZW50LmdldEVmZmVjdGl2ZVBhZGRpbmcoKTtcblxuICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVBhZGRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzVG9wICYmIGVmZmVjdGl2ZVBhZGRpbmcudG9wICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQudG9wID0gZWZmZWN0aXZlUGFkZGluZy50b3A7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzVG9wID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc1JpZ2h0ICYmIGVmZmVjdGl2ZVBhZGRpbmcucmlnaHQgIT0gRW51bXMuU3BhY2luZy5Ob25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yaWdodCA9IGVmZmVjdGl2ZVBhZGRpbmcucmlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzQm90dG9tICYmIGVmZmVjdGl2ZVBhZGRpbmcuYm90dG9tICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYm90dG9tID0gZWZmZWN0aXZlUGFkZGluZy5ib3R0b207XG5cbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzQm90dG9tID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc0xlZnQgJiYgZWZmZWN0aXZlUGFkZGluZy5sZWZ0ICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQubGVmdCA9IGVmZmVjdGl2ZVBhZGRpbmcubGVmdDtcblxuICAgICAgICAgICAgICAgICAgICBkb1Byb2Nlc3NMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZG9Qcm9jZXNzVG9wIHx8IGRvUHJvY2Vzc1JpZ2h0IHx8IGRvUHJvY2Vzc0JvdHRvbSB8fCBkb1Byb2Nlc3NMZWZ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIGRvUHJvY2Vzc1RvcCxcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzUmlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGRvUHJvY2Vzc0JvdHRvbSxcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzTGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBY3Rpb25Db3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBnZXRBY3Rpb25BdChpbmRleDogbnVtYmVyKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZ3MuZXJyb3JzLmluZGV4T3V0T2ZSYW5nZShpbmRleCkpO1xuICAgIH1cblxuICAgIHJlbW92ZSgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50IGluc3RhbmNlb2YgQ2FyZEVsZW1lbnRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5yZW1vdmVJdGVtKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudCA9IHRoaXMub3ZlcnJpZGVJbnRlcm5hbFJlbmRlcigpO1xuICAgICAgICB0aGlzLl9zZXBhcmF0b3JFbGVtZW50ID0gdGhpcy5pbnRlcm5hbFJlbmRlclNlcGFyYXRvcigpO1xuXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUNzc1NlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jdXN0b21Dc3NTZWxlY3Rvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRSZW5kZXJlZEVsZW1lbnREaXNwbGF5TW9kZSA9IHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID8gdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuYWRqdXN0UmVuZGVyZWRFbGVtZW50U2l6ZSh0aGlzLl9yZW5kZXJlZEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudCA9IHRoaXMuY3JlYXRlUGxhY2Vob2xkZXJFbGVtZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRFbGVtZW50O1xuICAgIH1cblxuICAgIHVwZGF0ZUxheW91dChwcm9jZXNzQ2hpbGRyZW46IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZWRFbGVtZW50VmlzaWJpbGl0eSgpO1xuICAgICAgICB0aGlzLmFwcGx5UGFkZGluZygpO1xuICAgIH1cblxuICAgIGluZGV4T2YoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGlzRGVzaWduTW9kZSgpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHJvb3RFbGVtZW50ID0gdGhpcy5nZXRSb290RWxlbWVudCgpO1xuXG4gICAgICAgIHJldHVybiByb290RWxlbWVudCBpbnN0YW5jZW9mIEFkYXB0aXZlQ2FyZCAmJiByb290RWxlbWVudC5kZXNpZ25Nb2RlO1xuICAgIH1cblxuICAgIGlzRmlyc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlzTGFzdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaXNBdFRoZVZlcnlMZWZ0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5pc0xlZnRNb3N0RWxlbWVudCh0aGlzKSAmJiB0aGlzLnBhcmVudC5pc0F0VGhlVmVyeUxlZnQoKSA6IHRydWU7XG4gICAgfVxuXG4gICAgaXNBdFRoZVZlcnlSaWdodCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuaXNSaWdodE1vc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5UmlnaHQoKSA6IHRydWU7XG4gICAgfVxuXG4gICAgaXNBdFRoZVZlcnlUb3AoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzRmlyc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5VG9wKCkgOiB0cnVlO1xuICAgIH1cblxuICAgIGlzQXRUaGVWZXJ5Qm90dG9tKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5pc0xhc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5Qm90dG9tKCkgOiB0cnVlO1xuICAgIH1cblxuICAgIGlzQmxlZWRpbmdBdFRvcCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzQmxlZWRpbmdBdEJvdHRvbSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzTGVmdE1vc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlzUmlnaHRNb3N0RWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpc1RvcEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGaXJzdEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgaXNCb3R0b21FbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTGFzdEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgaXNIaWRkZW5EdWVUb092ZXJmbG93KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7XG4gICAgfVxuXG4gICAgZ2V0Um9vdEVsZW1lbnQoKTogQ2FyZEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb290T2JqZWN0KCkgYXMgQ2FyZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0UGFyZW50Q29udGFpbmVyKCk6IENvbnRhaW5lciB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBjdXJyZW50RWxlbWVudCA9IHRoaXMucGFyZW50O1xuXG4gICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxDb250YWluZXI+Y3VycmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRBbGxJbnB1dHMocHJvY2Vzc0FjdGlvbnM6IGJvb2xlYW4gPSB0cnVlKTogSW5wdXRbXSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudEJ5SWQoaWQ6IHN0cmluZyk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQgPT09IGlkID8gdGhpcyA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRBY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldEVmZmVjdGl2ZVBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24ge1xuICAgICAgICBsZXQgcGFkZGluZyA9IHRoaXMuZ2V0UGFkZGluZygpO1xuXG4gICAgICAgIHJldHVybiAocGFkZGluZyAmJiB0aGlzLmFsbG93Q3VzdG9tUGFkZGluZykgPyBwYWRkaW5nIDogdGhpcy5nZXREZWZhdWx0UGFkZGluZygpO1xuICAgIH1cblxuICAgIGdldCBob3N0Q29uZmlnKCk6IEhvc3RDb25maWcge1xuICAgICAgICBpZiAodGhpcy5faG9zdENvbmZpZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3RDb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuaG9zdENvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0SG9zdENvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCBob3N0Q29uZmlnKHZhbHVlOiBIb3N0Q29uZmlnKSB7XG4gICAgICAgIHRoaXMuX2hvc3RDb25maWcgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgaW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGlzSW50ZXJhY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXQgaXNTdGFuZGFsb25lKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXQgaXNJbmxpbmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXQgaGFzVmlzaWJsZVNlcGFyYXRvcigpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMuc2VwYXJhdG9yRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudC5pc0ZpcnN0RWxlbWVudCh0aGlzKSAmJiAodGhpcy5pc1Zpc2libGUgfHwgdGhpcy5pc0Rlc2lnbk1vZGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgc2VwYXJhdG9yRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXBhcmF0b3JFbGVtZW50O1xuICAgIH1cblxuICAgIGdldCBwYXJlbnQoKTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gPENhcmRFbGVtZW50PnRoaXMuX3BhcmVudDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBY3Rpb25Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XG4gICAgcGFyc2Uoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IDxDYXJkRWxlbWVudD5zZW5kZXI7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRleHQucGFyc2VBY3Rpb24oXG4gICAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgICBzb3VyY2VbdGhpcy5uYW1lXSxcbiAgICAgICAgICAgIHRoaXMuZm9yYmlkZGVuQWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBwYXJlbnQuaXNEZXNpZ25Nb2RlKCkpO1xuICAgIH1cblxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IEFjdGlvbiB8IHVuZGVmaW5lZCwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHRoaXMubmFtZSwgdmFsdWUgPyB2YWx1ZS50b0pTT04oY29udGV4dCkgOiB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGZvcmJpZGRlbkFjdGlvblR5cGVzOiBzdHJpbmdbXSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIG5hbWUsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVRleHRCbG9jayBleHRlbmRzIENhcmRFbGVtZW50IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgdGV4dFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcInRleHRcIixcbiAgICAgICAgdHJ1ZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNpemVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwic2l6ZVwiLFxuICAgICAgICBFbnVtcy5UZXh0U2l6ZSxcbiAgICAgICAgRW51bXMuVGV4dFNpemUuRGVmYXVsdCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHdlaWdodFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcbiAgICAgICAgXCJ3ZWlnaHRcIixcbiAgICAgICAgRW51bXMuVGV4dFdlaWdodCxcbiAgICAgICAgRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0KTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgY29sb3JQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwiY29sb3JcIixcbiAgICAgICAgRW51bXMuVGV4dENvbG9yLFxuICAgICAgICBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IGlzU3VidGxlUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcImlzU3VidGxlXCIsXG4gICAgICAgIGZhbHNlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgZm9udFR5cGVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzIsXG4gICAgICAgIFwiZm9udFR5cGVcIixcbiAgICAgICAgRW51bXMuRm9udFR5cGUpO1xuICAgIHN0YXRpYyByZWFkb25seSBzZWxlY3RBY3Rpb25Qcm9wZXJ0eSA9IG5ldyBBY3Rpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInNlbGVjdEFjdGlvblwiLCBbIFwiQWN0aW9uLlNob3dDYXJkXCIgXSk7XG5cbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcbiAgICAgICAgc3VwZXIucG9wdWxhdGVTY2hlbWEoc2NoZW1hKTtcblxuICAgICAgICAvLyBzZWxlY3RBY3Rpb24gaXMgZGVjbGFyZWQgb24gQmFzZVRleHRCbG9jayBidXQgaXMgb25seSBleHBvc2VkIG9uIFRleHRSdW4sXG4gICAgICAgIC8vIHNvIHRoZSBwcm9wZXJ0eSBpcyByZW1vdmVkIGZyb20gdGhlIEJhc2VUZXh0QmxvY2sgc2NoZW1hLlxuICAgICAgICBzY2hlbWEucmVtb3ZlKEJhc2VUZXh0QmxvY2suc2VsZWN0QWN0aW9uUHJvcGVydHkpO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnNpemVQcm9wZXJ0eSlcbiAgICBzaXplOiBFbnVtcy5UZXh0U2l6ZSA9IEVudW1zLlRleHRTaXplLkRlZmF1bHQ7XG5cbiAgICBAcHJvcGVydHkoQmFzZVRleHRCbG9jay53ZWlnaHRQcm9wZXJ0eSlcbiAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQgPSBFbnVtcy5UZXh0V2VpZ2h0LkRlZmF1bHQ7XG5cbiAgICBAcHJvcGVydHkoQmFzZVRleHRCbG9jay5jb2xvclByb3BlcnR5KVxuICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IgPSBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdDtcblxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLmZvbnRUeXBlUHJvcGVydHkpXG4gICAgZm9udFR5cGU/OiBFbnVtcy5Gb250VHlwZTtcblxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLmlzU3VidGxlUHJvcGVydHkpXG4gICAgaXNTdWJ0bGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnRleHRQcm9wZXJ0eSlcbiAgICBnZXQgdGV4dCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShCYXNlVGV4dEJsb2NrLnRleHRQcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgc2V0IHRleHQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNldFRleHQodmFsdWUpO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnNlbGVjdEFjdGlvblByb3BlcnR5KVxuICAgIHNlbGVjdEFjdGlvbj86IEFjdGlvbjtcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJvdGVjdGVkIGdldEZvbnRTaXplKGZvbnRUeXBlOiBGb250VHlwZURlZmluaXRpb24pOiBudW1iZXIge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5TbWFsbDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9udFR5cGUuZm9udFNpemVzLnNtYWxsO1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbnRUeXBlLmZvbnRTaXplcy5tZWRpdW07XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLkxhcmdlOlxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMubGFyZ2U7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLkV4dHJhTGFyZ2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbnRUeXBlLmZvbnRTaXplcy5leHRyYUxhcmdlO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9udFR5cGUuZm9udFNpemVzLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0Q29sb3JEZWZpbml0aW9uKGNvbG9yU2V0OiBDb2xvclNldERlZmluaXRpb24sIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IpOiBUZXh0Q29sb3JEZWZpbml0aW9uIHtcbiAgICAgICAgc3dpdGNoIChjb2xvcikge1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuQWNjZW50OlxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5hY2NlbnQ7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5EYXJrOlxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5kYXJrO1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuTGlnaHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmxpZ2h0O1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuR29vZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JTZXQuZ29vZDtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dENvbG9yLldhcm5pbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0Lndhcm5pbmc7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5BdHRlbnRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmF0dGVudGlvbjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0VGV4dCh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoQmFzZVRleHRCbG9jay50ZXh0UHJvcGVydHksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBhcmlhSGlkZGVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0Pzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluaXQodGV4dERlZmluaXRpb246IEJhc2VUZXh0RGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLnNpemUgPSB0ZXh0RGVmaW5pdGlvbi5zaXplO1xuICAgICAgICB0aGlzLndlaWdodCA9IHRleHREZWZpbml0aW9uLndlaWdodDtcbiAgICAgICAgdGhpcy5jb2xvciA9IHRleHREZWZpbml0aW9uLmNvbG9yO1xuICAgICAgICB0aGlzLmlzU3VidGxlID0gdGV4dERlZmluaXRpb24uaXNTdWJ0bGU7XG4gICAgfVxuXG4gICAgYXNTdHJpbmcoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICB9XG5cbiAgICBhcHBseVN0eWxlc1RvKHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBmb250VHlwZSA9IHRoaXMuaG9zdENvbmZpZy5nZXRGb250VHlwZURlZmluaXRpb24odGhpcy5mb250VHlwZSk7XG5cbiAgICAgICAgaWYgKGZvbnRUeXBlLmZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IGZvbnRUeXBlLmZvbnRGYW1pbHk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZm9udFNpemU6IG51bWJlcjtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5TbWFsbDpcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IGZvbnRUeXBlLmZvbnRTaXplcy5zbWFsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuTWVkaXVtOlxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLm1lZGl1bTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuTGFyZ2U6XG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBmb250VHlwZS5mb250U2l6ZXMubGFyZ2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLkV4dHJhTGFyZ2U6XG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBmb250VHlwZS5mb250U2l6ZXMuZXh0cmFMYXJnZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBmb250VHlwZS5mb250U2l6ZXMuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArIFwicHhcIjtcblxuICAgICAgICBsZXQgY29sb3JEZWZpbml0aW9uID0gdGhpcy5nZXRDb2xvckRlZmluaXRpb24odGhpcy5nZXRFZmZlY3RpdmVTdHlsZURlZmluaXRpb24oKS5mb3JlZ3JvdW5kQ29sb3JzLCB0aGlzLmVmZmVjdGl2ZUNvbG9yKTtcblxuICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmNvbG9yID0gPHN0cmluZz5VdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHRoaXMuaXNTdWJ0bGUgPyBjb2xvckRlZmluaXRpb24uc3VidGxlIDogY29sb3JEZWZpbml0aW9uLmRlZmF1bHQpO1xuXG4gICAgICAgIGxldCBmb250V2VpZ2h0OiBudW1iZXI7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLndlaWdodCkge1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0V2VpZ2h0LkxpZ2h0ZXI6XG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9IGZvbnRUeXBlLmZvbnRXZWlnaHRzLmxpZ2h0ZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyOlxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgPSBmb250VHlwZS5mb250V2VpZ2h0cy5ib2xkZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgPSBmb250VHlwZS5mb250V2VpZ2h0cy5kZWZhdWx0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gZm9udFdlaWdodC50b1N0cmluZygpO1xuXG4gICAgICAgIGlmICh0aGlzLmFyaWFIaWRkZW4pIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGVmZmVjdGl2ZUNvbG9yKCk6IEVudW1zLlRleHRDb2xvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yID8gdGhpcy5jb2xvciA6IEVudW1zLlRleHRDb2xvci5EZWZhdWx0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRleHRCbG9jayBleHRlbmRzIEJhc2VUZXh0QmxvY2sge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwid3JhcFwiLCBmYWxzZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1heExpbmVzUHJvcGVydHkgPSBuZXcgTnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJtYXhMaW5lc1wiKTtcblxuICAgIEBwcm9wZXJ0eShUZXh0QmxvY2sud3JhcFByb3BlcnR5KVxuICAgIHdyYXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eShUZXh0QmxvY2subWF4TGluZXNQcm9wZXJ0eSlcbiAgICBtYXhMaW5lcz86IG51bWJlcjtcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfY29tcHV0ZWRMaW5lSGVpZ2h0OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfb3JpZ2luYWxJbm5lckh0bWw6IHN0cmluZztcbiAgICBwcml2YXRlIF9wcm9jZXNzZWRUZXh0Pzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3RyZWF0QXNQbGFpblRleHQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgcHJpdmF0ZSByZXN0b3JlT3JpZ2luYWxDb250ZW50KCkge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF4TGluZXMgJiYgdGhpcy5tYXhMaW5lcyA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgKiB0aGlzLm1heExpbmVzICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLl9vcmlnaW5hbElubmVySHRtbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdHJ1bmNhdGVJZlN1cHBvcnRlZChtYXhIZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRm9yIG5vdywgb25seSB0cnVuY2F0ZSBUZXh0QmxvY2tzIHRoYXQgY29udGFpbiBqdXN0IGEgc2luZ2xlXG4gICAgICAgICAgICAvLyBwYXJhZ3JhcGggLS0gc2luY2UgdGhlIG1heExpbmVzIGNhbGN1bGF0aW9uIGRvZXNuJ3QgdGFrZSBpbnRvXG4gICAgICAgICAgICAvLyBhY2NvdW50IE1hcmtkb3duIGxpc3RzXG4gICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLnJlbmRlcmVkRWxlbWVudC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGxldCBpc1RleHRPbmx5ID0gIWNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB0cnVuY2F0aW9uU3VwcG9ydGVkID0gaXNUZXh0T25seSB8fCBjaGlsZHJlbi5sZW5ndGggPT0gMSAmJiAoPEhUTUxFbGVtZW50PmNoaWxkcmVuWzBdKS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ3AnO1xuXG4gICAgICAgICAgICBpZiAodHJ1bmNhdGlvblN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gaXNUZXh0T25seSA/IHRoaXMucmVuZGVyZWRFbGVtZW50IDogPEhUTUxFbGVtZW50PmNoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICAgICAgVXRpbHMudHJ1bmNhdGUoZWxlbWVudCwgbWF4SGVpZ2h0LCB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNldFRleHQodmFsdWU6IHN0cmluZykge1xuICAgICAgICBzdXBlci5zZXRUZXh0KHZhbHVlKTtcblxuICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NlZFRleHQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMudGV4dCkge1xuICAgICAgICAgICAgbGV0IHByZVByb2Nlc3NlZFRleHQgPSB0aGlzLnByZVByb2Nlc3NQcm9wZXJ0eVZhbHVlKEJhc2VUZXh0QmxvY2sudGV4dFByb3BlcnR5KTtcbiAgICAgICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xuXG4gICAgICAgICAgICBsZXQgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLmZvckVsZW1lbnRJZCkge1xuICAgICAgICAgICAgICAgIGxldCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50Lmh0bWxGb3IgPSB0aGlzLmZvckVsZW1lbnRJZDtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBsYWJlbEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXRleHRCbG9ja1wiKSk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblxuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlc1RvKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0QWN0aW9uLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRhYkluZGV4ID0gMFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgdGhpcy5zZWxlY3RBY3Rpb24uZ2V0QXJpYVJvbGUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5zZWxlY3RBY3Rpb24udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm9jZXNzZWRUZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkVGV4dCA9IFRleHRGb3JtYXR0ZXJzLmZvcm1hdFRleHQodGhpcy5sYW5nLCBwcmVQcm9jZXNzZWRUZXh0KTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZU1hcmtkb3duICYmIGZvcm1hdHRlZFRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLmFsbG93TWFya0ZvclRleHRIaWdobGlnaHRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFRleHQgPSBmb3JtYXR0ZWRUZXh0LnJlcGxhY2UoLzxtYXJrPi9nLCBcIj09PVwiKS5yZXBsYWNlKC88XFwvbWFyaz4vZywgXCIvPT0vXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCA9IEFkYXB0aXZlQ2FyZC5hcHBseU1hcmtkb3duKGZvcm1hdHRlZFRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZG93blByb2Nlc3NpbmdSZXN1bHQuZGlkUHJvY2VzcyAmJiBtYXJrZG93blByb2Nlc3NpbmdSZXN1bHQub3V0cHV0SHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IG1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdC5vdXRwdXRIdG1sO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHByb2Nlc3MgPG1hcms+IHRhZyBpZiBtYXJrZG93biBwcm9jZXNzaW5nIHdhcyBhcHBsaWVkIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hcmtkb3duIHByb2Nlc3NpbmcgaXMgYWxzbyByZXNwb25zaWJsZSBmb3Igc2FuaXRpemluZyB0aGUgaW5wdXQgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuYWxsb3dNYXJrRm9yVGV4dEhpZ2hsaWdodGluZyAmJiB0aGlzLl9wcm9jZXNzZWRUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtTdHlsZTogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWZmZWN0aXZlU3R5bGUgPSB0aGlzLmdldEVmZmVjdGl2ZVN0eWxlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrU3R5bGUgKz0gXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIiArIGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEJhY2tncm91bmRDb2xvciArIFwiO1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3RpdmVTdHlsZS5oaWdobGlnaHRGb3JlZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya1N0eWxlICs9IFwiY29sb3I6IFwiICsgZWZmZWN0aXZlU3R5bGUuaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrU3R5bGUgPSAnc3R5bGU9XCInICsgbWFya1N0eWxlICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gdGhpcy5fcHJvY2Vzc2VkVGV4dC5yZXBsYWNlKC89PT0vZywgXCI8bWFyayBcIiArIG1hcmtTdHlsZSArIFwiPlwiKS5yZXBsYWNlKC9cXC89PVxcLy9nLCBcIjwvbWFyaz5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gZm9ybWF0dGVkVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyZWF0QXNQbGFpblRleHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gZm9ybWF0dGVkVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3Byb2Nlc3NlZFRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuX3RyZWF0QXNQbGFpblRleHQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuX3Byb2Nlc3NlZFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3Byb2Nlc3NlZFRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3RFbGVtZW50Q2hpbGQgPSA8SFRNTEVsZW1lbnQ+ZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjBweFwiO1xuICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud3JhcCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudENoaWxkLnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICg8SFRNTEVsZW1lbnQ+ZWxlbWVudC5sYXN0RWxlbWVudENoaWxkKS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBweFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgYW5jaG9ycyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuY2hvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYW5jaG9yID0gPEhUTUxBbmNob3JFbGVtZW50PmFuY2hvcnNbaV07XG4gICAgICAgICAgICAgICAgYW5jaG9yLmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtYW5jaG9yXCIpKTtcbiAgICAgICAgICAgICAgICBhbmNob3IudGFyZ2V0ID0gXCJfYmxhbmtcIjtcbiAgICAgICAgICAgICAgICBhbmNob3Iub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYWlzZUFuY2hvckNsaWNrZWRFdmVudCh0aGlzLCBlLnRhcmdldCBhcyBIVE1MQW5jaG9yRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMud3JhcCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud29yZFdyYXAgPSBcImJyZWFrLXdvcmRcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heExpbmVzICYmIHRoaXMubWF4TGluZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gKHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCAqIHRoaXMubWF4TGluZXMpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRUZXh0QmxvY2tUcnVuY2F0aW9uIHx8IEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcmlnaW5hbElubmVySHRtbCA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdHJ1bmNhdGVPdmVyZmxvdyhtYXhIZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAobWF4SGVpZ2h0ID49IHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJ1bmNhdGVJZlN1cHBvcnRlZChtYXhIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB1bmRvT3ZlcmZsb3dUcnVuY2F0aW9uKCkge1xuICAgICAgICB0aGlzLnJlc3RvcmVPcmlnaW5hbENvbnRlbnQoKTtcblxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRUZXh0QmxvY2tUcnVuY2F0aW9uICYmIHRoaXMubWF4TGluZXMpIHtcbiAgICAgICAgICAgIGxldCBtYXhIZWlnaHQgPSB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgKiB0aGlzLm1heExpbmVzO1xuXG4gICAgICAgICAgICB0aGlzLnRydW5jYXRlSWZTdXBwb3J0ZWQobWF4SGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVzZU1hcmtkb3duOiBib29sZWFuID0gdHJ1ZTtcbiAgICBmb3JFbGVtZW50SWQ/OiBzdHJpbmc7XG5cbiAgICBhcHBseVN0eWxlc1RvKHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmFwcGx5U3R5bGVzVG8odGFyZ2V0RWxlbWVudCk7XG5cbiAgICAgICAgbGV0IHBhcmVudENvbnRhaW5lciA9IHRoaXMuZ2V0UGFyZW50Q29udGFpbmVyKCk7XG4gICAgICAgIGxldCBpc1J0bCA9IHBhcmVudENvbnRhaW5lciA/IHBhcmVudENvbnRhaW5lci5pc1J0bCgpIDogZmFsc2U7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gaXNSdGwgPyBcImxlZnRcIiA6IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBpc1J0bCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpbmVIZWlnaHRzID0gdGhpcy5ob3N0Q29uZmlnLmxpbmVIZWlnaHRzO1xuXG4gICAgICAgIGlmIChsaW5lSGVpZ2h0cykge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNpemUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0cy5zbWFsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCA9IGxpbmVIZWlnaHRzLm1lZGl1bTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMubGFyZ2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMuZXh0cmFMYXJnZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBMb29rcyBsaWtlIDEuMzMgaXMgdGhlIG1hZ2ljIG51bWJlciB0byBjb21wdXRlIGxpbmUtaGVpZ2h0XG4gICAgICAgICAgICAvLyBmcm9tIGZvbnQgc2l6ZS5cbiAgICAgICAgICAgIHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCA9IHRoaXMuZ2V0Rm9udFNpemUodGhpcy5ob3N0Q29uZmlnLmdldEZvbnRUeXBlRGVmaW5pdGlvbih0aGlzLmZvbnRUeXBlKSkgKiAxLjMzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJUZXh0QmxvY2tcIjtcbiAgICB9XG5cbiAgICB1cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIudXBkYXRlTGF5b3V0KHByb2Nlc3NDaGlsZHJlbik7XG5cbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbiAmJiB0aGlzLm1heExpbmVzICYmIHRoaXMuaXNEaXNwbGF5ZWQoKSkge1xuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGVsZW1lbnQncyBpbm5lckhUTUwgaW4gY2FzZSB0aGUgYXZhaWxhYmxlIHJvb20gZm9yXG4gICAgICAgICAgICAvLyBjb250ZW50IGhhcyBpbmNyZWFzZWRcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9yaWdpbmFsQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy50cnVuY2F0ZUlmU3VwcG9ydGVkKHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCAqIHRoaXMubWF4TGluZXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGV4dFJ1biBleHRlbmRzIEJhc2VUZXh0QmxvY2sge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSBpdGFsaWNQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJpdGFsaWNcIiwgZmFsc2UpO1xuICAgIHN0YXRpYyByZWFkb25seSBzdHJpa2V0aHJvdWdoUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwic3RyaWtldGhyb3VnaFwiLCBmYWxzZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IGhpZ2hsaWdodFByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8yLCBcImhpZ2hsaWdodFwiLCBmYWxzZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHVuZGVybGluZVByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8zLCBcInVuZGVybGluZVwiLCBmYWxzZSk7XG5cbiAgICBwcm90ZWN0ZWQgcG9wdWxhdGVTY2hlbWEoc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpIHtcbiAgICAgICAgc3VwZXIucG9wdWxhdGVTY2hlbWEoc2NoZW1hKTtcblxuICAgICAgICBzY2hlbWEuYWRkKEJhc2VUZXh0QmxvY2suc2VsZWN0QWN0aW9uUHJvcGVydHkpO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShUZXh0UnVuLml0YWxpY1Byb3BlcnR5KVxuICAgIGl0YWxpYzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KFRleHRSdW4uc3RyaWtldGhyb3VnaFByb3BlcnR5KVxuICAgIHN0cmlrZXRocm91Z2g6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eShUZXh0UnVuLmhpZ2hsaWdodFByb3BlcnR5KVxuICAgIGhpZ2hsaWdodDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KFRleHRSdW4udW5kZXJsaW5lUHJvcGVydHkpXG4gICAgdW5kZXJsaW5lOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLnRleHQpIHtcbiAgICAgICAgICAgIGxldCBwcmVQcm9jZXNzZWRUZXh0ID0gdGhpcy5wcmVQcm9jZXNzUHJvcGVydHlWYWx1ZShCYXNlVGV4dEJsb2NrLnRleHRQcm9wZXJ0eSk7XG4gICAgICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcblxuICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFRleHQgPSBUZXh0Rm9ybWF0dGVycy5mb3JtYXRUZXh0KHRoaXMubGFuZywgcHJlUHJvY2Vzc2VkVGV4dCk7XG5cbiAgICAgICAgICAgIGlmICghZm9ybWF0dGVkVGV4dCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFRleHQgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXRleHRSdW5cIikpO1xuXG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGVzVG8oZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbiAmJiBob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSkge1xuICAgICAgICAgICAgICAgIGxldCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBhbmNob3IuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1hbmNob3JcIikpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGhyZWYgPSB0aGlzLnNlbGVjdEFjdGlvbi5nZXRIcmVmKCk7XG5cbiAgICAgICAgICAgICAgICBhbmNob3IuaHJlZiA9IGhyZWYgPyBocmVmIDogXCJcIjtcbiAgICAgICAgICAgICAgICBhbmNob3IudGFyZ2V0ID0gXCJfYmxhbmtcIjtcbiAgICAgICAgICAgICAgICBhbmNob3Iub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYW5jaG9yLmlubmVyVGV4dCA9IGZvcm1hdHRlZFRleHQ7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9IGZvcm1hdHRlZFRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcGx5U3R5bGVzVG8odGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIuYXBwbHlTdHlsZXNUbyh0YXJnZXRFbGVtZW50KTtcblxuICAgICAgICBpZiAodGhpcy5pdGFsaWMpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udFN0eWxlID0gXCJpdGFsaWNcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0cmlrZXRocm91Z2gpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUudGV4dERlY29yYXRpb24gPSBcImxpbmUtdGhyb3VnaFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICBsZXQgY29sb3JEZWZpbml0aW9uID0gdGhpcy5nZXRDb2xvckRlZmluaXRpb24odGhpcy5nZXRFZmZlY3RpdmVTdHlsZURlZmluaXRpb24oKS5mb3JlZ3JvdW5kQ29sb3JzLCB0aGlzLmVmZmVjdGl2ZUNvbG9yKTtcblxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSA8c3RyaW5nPlV0aWxzLnN0cmluZ1RvQ3NzQ29sb3IodGhpcy5pc1N1YnRsZSA/IGNvbG9yRGVmaW5pdGlvbi5oaWdobGlnaHRDb2xvcnMuc3VidGxlIDogY29sb3JEZWZpbml0aW9uLmhpZ2hsaWdodENvbG9ycy5kZWZhdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnVuZGVybGluZSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwidW5kZXJsaW5lXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiVGV4dFJ1blwiO1xuICAgIH1cblxuICAgIGdldCBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXQgaXNJbmxpbmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJpY2hUZXh0QmxvY2sgZXh0ZW5kcyBDYXJkRWxlbWVudCB7XG4gICAgcHJpdmF0ZSBfaW5saW5lczogQ2FyZEVsZW1lbnRbXSA9IFtdO1xuXG4gICAgcHJpdmF0ZSBpbnRlcm5hbEFkZElubGluZShpbmxpbmU6IENhcmRFbGVtZW50LCBmb3JjZUFkZDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghaW5saW5lLmlzSW5saW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5ncy5lcnJvcnMuZWxlbWVudENhbm5vdEJlVXNlZEFzSW5saW5lKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRvQWRkOiBib29sZWFuID0gaW5saW5lLnBhcmVudCA9PT0gdW5kZWZpbmVkIHx8IGZvcmNlQWRkO1xuXG4gICAgICAgIGlmICghZG9BZGQgJiYgaW5saW5lLnBhcmVudCAhPSB0aGlzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5ncy5lcnJvcnMuaW5saW5lQWxyZWFkeVBhcmVudGVkKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5saW5lLnNldFBhcmVudCh0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5faW5saW5lcy5wdXNoKGlubGluZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxQYXJzZShzb3VyY2UsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuX2lubGluZXMgPSBbXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2VbXCJpbmxpbmVzXCJdKSkge1xuICAgICAgICAgICAgZm9yIChsZXQganNvbklubGluZSBvZiBzb3VyY2VbXCJpbmxpbmVzXCJdKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlubGluZTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpzb25JbmxpbmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRSdW4gPSBuZXcgVGV4dFJ1bigpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0UnVuLnRleHQgPSBqc29uSW5saW5lO1xuXG4gICAgICAgICAgICAgICAgICAgIGlubGluZSA9IHRleHRSdW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBmYWxsYmFjayBmb3IgaW5saW5lcyBpbiAxLjJcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lID0gY29udGV4dC5wYXJzZUVsZW1lbnQodGhpcywganNvbklubGluZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpbmxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbEFkZElubGluZShpbmxpbmUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFRvSlNPTih0YXJnZXQsIGNvbnRleHQpO1xuXG4gICAgICAgIGlmICh0aGlzLl9pbmxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBqc29uSW5saW5lczogYW55W10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5saW5lIG9mIHRoaXMuX2lubGluZXMpIHtcbiAgICAgICAgICAgICAgICBqc29uSW5saW5lcy5wdXNoKGlubGluZS50b0pTT04oY29udGV4dCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKHRhcmdldCwgXCJpbmxpbmVzXCIsIGpzb25JbmxpbmVzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLl9pbmxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZm9yRWxlbWVudElkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuaHRtbEZvciA9IHRoaXMuZm9yRWxlbWVudElkO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGxhYmVsRWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtcmljaFRleHRCbG9ja1wiKTtcblxuICAgICAgICAgICAgbGV0IHBhcmVudENvbnRhaW5lciA9IHRoaXMuZ2V0UGFyZW50Q29udGFpbmVyKCk7XG4gICAgICAgICAgICBsZXQgaXNSdGwgPSBwYXJlbnRDb250YWluZXIgPyBwYXJlbnRDb250YWluZXIuaXNSdGwoKSA6IGZhbHNlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9IGlzUnRsID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gaXNSdGwgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByZW5kZXJlZElubGluZXM6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGlubGluZSBvZiB0aGlzLl9pbmxpbmVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlcmVkSW5saW5lID0gaW5saW5lLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkSW5saW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQocmVuZGVyZWRJbmxpbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkSW5saW5lcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlbmRlcmVkSW5saW5lcyA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZm9yRWxlbWVudElkPzogc3RyaW5nO1xuXG4gICAgYXNTdHJpbmcoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG5cbiAgICAgICAgZm9yIChsZXQgaW5saW5lIG9mIHRoaXMuX2lubGluZXMpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbmxpbmUuYXNTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIlJpY2hUZXh0QmxvY2tcIjtcbiAgICB9XG5cbiAgICBnZXRJbmxpbmVDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5saW5lcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgZ2V0SW5saW5lQXQoaW5kZXg6IG51bWJlcik6IENhcmRFbGVtZW50IHtcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLl9pbmxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lubGluZXNbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZ3MuZXJyb3JzLmluZGV4T3V0T2ZSYW5nZShpbmRleCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkSW5saW5lKGlubGluZTogQ2FyZEVsZW1lbnQgfCBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmxpbmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxBZGRJbmxpbmUobmV3IFRleHRSdW4oaW5saW5lKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmludGVybmFsQWRkSW5saW5lKGlubGluZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVJbmxpbmUoaW5saW5lOiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLl9pbmxpbmVzLmluZGV4T2YoaW5saW5lKTtcblxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5faW5saW5lc1tpbmRleF0uc2V0UGFyZW50KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLl9pbmxpbmVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZhY3QgZXh0ZW5kcyBTZXJpYWxpemFibGVPYmplY3Qge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB0aXRsZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidGl0bGVcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcblxuICAgIC8vIEZvciBoaXN0b3JpYyByZWFzb25zLCB0aGUgXCJ0aXRsZVwiIHNjaGVtYSBwcm9wZXJ0eSBpcyBleHBvc2VkIGFzIFwibmFtZVwiIGluIHRoZSBPTS5cbiAgICBAcHJvcGVydHkoRmFjdC50aXRsZVByb3BlcnR5KVxuICAgIG5hbWU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoRmFjdC52YWx1ZVByb3BlcnR5KVxuICAgIHZhbHVlPzogc3RyaW5nO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkZhY3RcIjtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lPzogc3RyaW5nLCB2YWx1ZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWN0U2V0IGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSBmYWN0c1Byb3BlcnR5ID0gbmV3IFNlcmlhbGl6YWJsZU9iamVjdENvbGxlY3Rpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImZhY3RzXCIsIEZhY3QpO1xuXG4gICAgQHByb3BlcnR5KEZhY3RTZXQuZmFjdHNQcm9wZXJ0eSlcbiAgICBmYWN0czogRmFjdFtdO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHVzZURlZmF1bHRTaXppbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgZWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xuXG4gICAgICAgIGlmICh0aGlzLmZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlcldpZHRoID0gXCIwcHhcIjtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyU3BhY2luZyA9IFwiMHB4XCI7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlclN0eWxlID0gXCJub25lXCI7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlckNvbGxhcHNlID0gXCJjb2xsYXBzZVwiO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtZmFjdHNldFwiKSk7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJwcmVzZW50YXRpb25cIik7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB0ckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IGhvc3RDb25maWcuZmFjdFNldC5zcGFjaW5nICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRpdGxlIGNvbHVtblxuICAgICAgICAgICAgICAgIGxldCB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1mYWN0LXRpdGxlXCIpKTtcblxuICAgICAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUubWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gaG9zdENvbmZpZy5mYWN0U2V0LnRpdGxlLm1heFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRkRWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJ0b3BcIjtcblxuICAgICAgICAgICAgICAgIGxldCB0ZXh0QmxvY2sgPSBuZXcgVGV4dEJsb2NrKCk7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sudGV4dCA9ICghdGhpcy5mYWN0c1tpXS5uYW1lICYmIHRoaXMuaXNEZXNpZ25Nb2RlKCkpID8gXCJUaXRsZVwiIDogdGhpcy5mYWN0c1tpXS5uYW1lO1xuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zaXplID0gaG9zdENvbmZpZy5mYWN0U2V0LnRpdGxlLnNpemU7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLmNvbG9yID0gaG9zdENvbmZpZy5mYWN0U2V0LnRpdGxlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHRleHRCbG9jay5pc1N1YnRsZSA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5pc1N1YnRsZTtcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sud2VpZ2h0ID0gaG9zdENvbmZpZy5mYWN0U2V0LnRpdGxlLndlaWdodDtcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sud3JhcCA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS53cmFwO1xuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lO1xuXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGRFbGVtZW50LCB0ZXh0QmxvY2sucmVuZGVyKCkpO1xuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRyRWxlbWVudCwgdGRFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIFNwYWNlciBjb2x1bW5cbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMHB4XCI7XG5cbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ckVsZW1lbnQsIHRkRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjb2x1bW5cbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwidG9wXCI7XG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtZmFjdC12YWx1ZVwiKSk7XG5cbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sgPSBuZXcgVGV4dEJsb2NrKCk7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sudGV4dCA9IHRoaXMuZmFjdHNbaV0udmFsdWU7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNpemUgPSBob3N0Q29uZmlnLmZhY3RTZXQudmFsdWUuc2l6ZTtcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suY29sb3IgPSBob3N0Q29uZmlnLmZhY3RTZXQudmFsdWUuY29sb3I7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLmlzU3VidGxlID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLmlzU3VidGxlO1xuICAgICAgICAgICAgICAgIHRleHRCbG9jay53ZWlnaHQgPSBob3N0Q29uZmlnLmZhY3RTZXQudmFsdWUud2VpZ2h0O1xuICAgICAgICAgICAgICAgIHRleHRCbG9jay53cmFwID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLndyYXA7XG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XG5cbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ZEVsZW1lbnQsIHRleHRCbG9jay5yZW5kZXIoKSk7XG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodHJFbGVtZW50LCB0ZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHRyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiRmFjdFNldFwiO1xuICAgIH1cbn1cblxuY2xhc3MgSW1hZ2VEaW1lbnNpb25Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XG4gICAgZ2V0SW50ZXJuYWxOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsTmFtZTtcbiAgICB9XG5cbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlc3VsdDogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcblxuICAgICAgICBpZiAoc291cmNlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBzaXplID0gU2l6ZUFuZFVuaXQucGFyc2Uoc291cmNlVmFsdWUsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNpemUudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzaXplLnBoeXNpY2FsU2l6ZTtcblxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZy4gQSBwYXJzZSBlcnJvciBpcyBlbWl0dGVkIGJlbG93XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcbiAgICAgICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmludmFsaWRQcm9wZXJ0eVZhbHVlKHNvdXJjZVZhbHVlLCB0aGlzLm5hbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZShcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4odmFsdWUpID8gdmFsdWUgKyBcInB4XCIgOiB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGludGVybmFsTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIG5hbWUpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEltYWdlIGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB1cmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgYWx0VGV4dFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiYWx0VGV4dFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgYmFja2dyb3VuZENvbG9yUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJiYWNrZ3JvdW5kQ29sb3JcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgIEVudW1zLkltYWdlU3R5bGUsXG4gICAgICAgIEVudW1zLkltYWdlU3R5bGUuRGVmYXVsdCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNpemVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwic2l6ZVwiLFxuICAgICAgICBFbnVtcy5TaXplLFxuICAgICAgICBFbnVtcy5TaXplLkF1dG8pO1xuICAgIHN0YXRpYyByZWFkb25seSBwaXhlbFdpZHRoUHJvcGVydHkgPSBuZXcgSW1hZ2VEaW1lbnNpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcIndpZHRoXCIsIFwicGl4ZWxXaWR0aFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGl4ZWxIZWlnaHRQcm9wZXJ0eSA9IG5ldyBJbWFnZURpbWVuc2lvblByb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwiaGVpZ2h0XCIsIFwicGl4ZWxIZWlnaHRcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNlbGVjdEFjdGlvblByb3BlcnR5ID0gbmV3IEFjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwic2VsZWN0QWN0aW9uXCIsIFsgXCJBY3Rpb24uU2hvd0NhcmRcIiBdKTtcblxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xuXG4gICAgICAgIHNjaGVtYS5yZW1vdmUoQ2FyZEVsZW1lbnQuaGVpZ2h0UHJvcGVydHkpO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShJbWFnZS51cmxQcm9wZXJ0eSlcbiAgICB1cmw/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoSW1hZ2UuYWx0VGV4dFByb3BlcnR5KVxuICAgIGFsdFRleHQ/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoSW1hZ2UuYmFja2dyb3VuZENvbG9yUHJvcGVydHkpXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KEltYWdlLnNpemVQcm9wZXJ0eSlcbiAgICBzaXplOiBFbnVtcy5TaXplID0gRW51bXMuU2l6ZS5BdXRvO1xuXG4gICAgQHByb3BlcnR5KEltYWdlLnN0eWxlUHJvcGVydHkpXG4gICAgc3R5bGU6IEVudW1zLkltYWdlU3R5bGUgPSBFbnVtcy5JbWFnZVN0eWxlLkRlZmF1bHQ7XG5cbiAgICBAcHJvcGVydHkoSW1hZ2UucGl4ZWxXaWR0aFByb3BlcnR5KVxuICAgIHBpeGVsV2lkdGg/OiBudW1iZXI7XG5cbiAgICBAcHJvcGVydHkoSW1hZ2UucGl4ZWxIZWlnaHRQcm9wZXJ0eSlcbiAgICBwaXhlbEhlaWdodD86IG51bWJlcjtcblxuICAgIEBwcm9wZXJ0eShJbWFnZS5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSlcbiAgICBzZWxlY3RBY3Rpb24/OiBBY3Rpb247XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgYXBwbHlTaXplKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnBpeGVsV2lkdGggfHwgdGhpcy5waXhlbEhlaWdodCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGl4ZWxXaWR0aCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLnBpeGVsV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBpeGVsSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnBpeGVsSGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIGNvbnN0cmFpbmVkIGluIGhlaWdodCwgd2Ugc2V0IGl0cyBoZWlnaHQgcHJvcGVydHkgYW5kXG4gICAgICAgICAgICAgICAgLy8gYXV0byBhbmQgc3RyZXRjaCBhcmUgaWdub3JlZCAoZGVmYXVsdCB0byBtZWRpdW0pLiBUSGlzIGlzIG5lY2Vzc2FyeSBmb3JcbiAgICAgICAgICAgICAgICAvLyBJbWFnZVNldCB3aGljaCB1c2VzIGEgbWF4aW11bSBpbWFnZSBoZWlnaHQgYXMgb3Bwb3NlZCB0byB0aGUgY2FyZHMgd2lkdGhcbiAgICAgICAgICAgICAgICAvLyBhcyBhIGNvbnN0cmFpbmluZyBkaW1lbnNpb25cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlNpemUuU21hbGw6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuaG9zdENvbmZpZy5pbWFnZVNpemVzLnNtYWxsICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5MYXJnZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMubGFyZ2UgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMubWVkaXVtICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm1heEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TdHJldGNoOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5BdXRvOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TbWFsbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLmhvc3RDb25maWcuaW1hZ2VTaXplcy5zbWFsbCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlNpemUuTGFyZ2U6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMubGFyZ2UgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5TaXplLk1lZGl1bTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLmhvc3RDb25maWcuaW1hZ2VTaXplcy5tZWRpdW0gKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCB1c2VEZWZhdWx0U2l6aW5nKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0aGlzLnVybCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiZmxleC1zdGFydFwiO1xuXG4gICAgICAgICAgICBlbGVtZW50Lm9ua2V5cHJlc3MgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbiAmJiAoZS5rZXlDb2RlID09IDEzIHx8IGUua2V5Q29kZSA9PSAzMikpIHsgLy8gZW50ZXIgb3Igc3BhY2UgcHJlc3NlZFxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEFjdGlvbi5leGVjdXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEFjdGlvbi5leGVjdXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtc3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgdG8gYXZvaWQgd2Fsa2luZyB0aGUgcGFyZW50IGhpZXJhcmNoeSBtdWx0aXBsZSB0aW1lc1xuICAgICAgICAgICAgbGV0IGhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XG5cbiAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgaW1hZ2VFbGVtZW50Lm9ubG9hZCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJhaXNlSW1hZ2VMb2FkZWRFdmVudCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5vbmVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYXJkID0gdGhpcy5nZXRSb290RWxlbWVudCgpIGFzIEFkYXB0aXZlQ2FyZDtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJkICYmIGNhcmQuZGVzaWduTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNFRUVFRUVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5pbm5lclRleHQgPSBcIjotKFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVNpemUoZXJyb3JFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyb3JFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJhaXNlSW1hZ2VMb2FkZWRFdmVudCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5taW5XaWR0aCA9IFwiMFwiO1xuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW1hZ2VcIikpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSkge1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC50YWJJbmRleCA9IDBcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCB0aGlzLnNlbGVjdEFjdGlvbi5nZXRBcmlhUm9sZSgpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbi50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCA8c3RyaW5nPnRoaXMuc2VsZWN0QWN0aW9uLnRpdGxlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1zZWxlY3RhYmxlXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hcHBseVNpemUoaW1hZ2VFbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUgPT09IEVudW1zLkltYWdlU3R5bGUuUGVyc29uKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNTAlXCI7XG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiNTAlIDUwJVwiO1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IDxzdHJpbmc+VXRpbHMuc3RyaW5nVG9Dc3NDb2xvcih0aGlzLmJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gPHN0cmluZz50aGlzLnByZVByb2Nlc3NQcm9wZXJ0eVZhbHVlKEltYWdlLnVybFByb3BlcnR5KTtcblxuICAgICAgICAgICAgY29uc3QgYWx0VGV4dFByb3BlcnR5ID0gdGhpcy5wcmVQcm9jZXNzUHJvcGVydHlWYWx1ZShJbWFnZS5hbHRUZXh0UHJvcGVydHkpO1xuICAgICAgICAgICAgaWYgKGFsdFRleHRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5hbHQgPSA8c3RyaW5nPmFsdFRleHRQcm9wZXJ0eTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgbWF4SGVpZ2h0PzogbnVtYmVyO1xuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkltYWdlXCI7XG4gICAgfVxuXG4gICAgZ2V0QWN0aW9uQnlJZChpZDogc3RyaW5nKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcblxuICAgICAgICBpZiAoIXJlc3VsdCAmJiB0aGlzLnNlbGVjdEFjdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RBY3Rpb24uZ2V0QWN0aW9uQnlJZChpZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybCA/IFt7IHVybDogdGhpcy51cmwsIG1pbWVUeXBlOiBcImltYWdlXCIgfV0gOiBbXTtcbiAgICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkRWxlbWVudENvbnRhaW5lciBleHRlbmRzIENhcmRFbGVtZW50IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgc2VsZWN0QWN0aW9uUHJvcGVydHkgPSBuZXcgQWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJzZWxlY3RBY3Rpb25cIiwgWyBcIkFjdGlvbi5TaG93Q2FyZFwiIF0pO1xuXG4gICAgcHJvdGVjdGVkIHBvcHVsYXRlU2NoZW1hKHNjaGVtYTogU2VyaWFsaXphYmxlT2JqZWN0U2NoZW1hKSB7XG4gICAgICAgIHN1cGVyLnBvcHVsYXRlU2NoZW1hKHNjaGVtYSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzU2VsZWN0YWJsZSkge1xuICAgICAgICAgICAgc2NoZW1hLnJlbW92ZShDYXJkRWxlbWVudENvbnRhaW5lci5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAcHJvcGVydHkoQ2FyZEVsZW1lbnRDb250YWluZXIuc2VsZWN0QWN0aW9uUHJvcGVydHkpXG4gICAgcHJvdGVjdGVkIF9zZWxlY3RBY3Rpb24/OiBBY3Rpb247XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByb3RlY3RlZCBpc0VsZW1lbnRBbGxvd2VkKGVsZW1lbnQ6IENhcmRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5IHx8ICFlbGVtZW50LmlzSW50ZXJhY3RpdmU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFwcGx5UGFkZGluZygpIHtcbiAgICAgICAgc3VwZXIuYXBwbHlQYWRkaW5nKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBoeXNpY2FsUGFkZGluZyA9IG5ldyBTcGFjaW5nRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xuICAgICAgICAgICAgcGh5c2ljYWxQYWRkaW5nID0gdGhpcy5ob3N0Q29uZmlnLnBhZGRpbmdEZWZpbml0aW9uVG9TcGFjaW5nRGVmaW5pdGlvbih0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wID0gcGh5c2ljYWxQYWRkaW5nLnRvcCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSBwaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcblxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMFwiO1xuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIwXCI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBpc1NlbGVjdGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBnZXRJdGVtQ291bnQoKTogbnVtYmVyO1xuICAgIGFic3RyYWN0IGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQ7XG4gICAgYWJzdHJhY3QgZ2V0Rmlyc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkO1xuICAgIGFic3RyYWN0IGdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkO1xuICAgIGFic3RyYWN0IHJlbW92ZUl0ZW0oaXRlbTogQ2FyZEVsZW1lbnQpOiBib29sZWFuO1xuXG4gICAgYWxsb3dWZXJ0aWNhbE92ZXJmbG93OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmdldEl0ZW1BdChpKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5ICYmIGl0ZW0uaXNJbnRlcmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludGVyYWN0aXZpdHlOb3RBbGxvd2VkLFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRWxlbWVudEFsbG93ZWQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuZWxlbWVudFR5cGVOb3RBbGxvd2VkKGl0ZW0uZ2V0SnNvblR5cGVOYW1lKCkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbi5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gc3VwZXIucmVuZGVyKCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1ZlcnRpY2FsT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93WCA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvd1kgPSBcImF1dG9cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgJiYgdGhpcy5pc1NlbGVjdGFibGUgJiYgdGhpcy5fc2VsZWN0QWN0aW9uICYmIGhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudGFiSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCB0aGlzLl9zZWxlY3RBY3Rpb24uZ2V0QXJpYVJvbGUoKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLl9zZWxlY3RBY3Rpb24udGl0bGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsZW1lbnQub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vbmtleXByZXNzID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NlbGVjdEFjdGlvbiAhPT0gdW5kZWZpbmVkICYmIChlLmtleUNvZGUgPT0gMTMgfHwgZS5rZXlDb2RlID09IDMyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW50ZXIgb3Igc3BhY2UgcHJlc3NlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgdXBkYXRlTGF5b3V0KHByb2Nlc3NDaGlsZHJlbjogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIudXBkYXRlTGF5b3V0KHByb2Nlc3NDaGlsZHJlbik7XG5cbiAgICAgICAgaWYgKHByb2Nlc3NDaGlsZHJlbikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdldEl0ZW1Db3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW1BdChpKS51cGRhdGVMYXlvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9uczogYm9vbGVhbiA9IHRydWUpOiBJbnB1dFtdIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSW5wdXRbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuZ2V0SXRlbUF0KGkpLmdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9ucykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xuICAgICAgICBsZXQgcmVzdWx0OiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdldEl0ZW1Db3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodGhpcy5nZXRJdGVtQXQoaSkuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudEJ5SWQoaWQ6IHN0cmluZyk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN1cGVyLmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdldEl0ZW1Db3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldEl0ZW1BdChpKS5nZXRFbGVtZW50QnlJZChpZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW1hZ2VTZXQgZXh0ZW5kcyBDYXJkRWxlbWVudENvbnRhaW5lciB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IGltYWdlc1Byb3BlcnR5ID0gbmV3IFNlcmlhbGl6YWJsZU9iamVjdENvbGxlY3Rpb25Qcm9wZXJ0eShcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcbiAgICAgICAgXCJpbWFnZXNcIixcbiAgICAgICAgSW1hZ2UsXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgaXRlbTogSW1hZ2UpID0+IHsgaXRlbS5zZXRQYXJlbnQoPENhcmRFbGVtZW50PnNlbmRlcik7IH0pO1xuICAgIHN0YXRpYyByZWFkb25seSBpbWFnZVNpemVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwiaW1hZ2VTaXplXCIsXG4gICAgICAgIEVudW1zLkltYWdlU2l6ZSxcbiAgICAgICAgRW51bXMuSW1hZ2VTaXplLk1lZGl1bSk7XG5cbiAgICBAcHJvcGVydHkoSW1hZ2VTZXQuaW1hZ2VzUHJvcGVydHkpXG4gICAgcHJpdmF0ZSBfaW1hZ2VzOiBJbWFnZVtdID0gW107XG5cbiAgICBAcHJvcGVydHkoSW1hZ2VTZXQuaW1hZ2VTaXplUHJvcGVydHkpXG4gICAgaW1hZ2VTaXplOiBFbnVtcy5JbWFnZVNpemUgPSBFbnVtcy5JbWFnZVNpemUuTWVkaXVtO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgZWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX2ltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mbGV4V3JhcCA9IFwid3JhcFwiO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbWFnZSBvZiB0aGlzLl9pbWFnZXMpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaW1hZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSW1hZ2VTaXplLlNtYWxsOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2l6ZSA9IEVudW1zLlNpemUuU21hbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5JbWFnZVNpemUuTGFyZ2U6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zaXplID0gRW51bXMuU2l6ZS5MYXJnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2l6ZSA9IEVudW1zLlNpemUuTWVkaXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaW1hZ2UubWF4SGVpZ2h0ID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2V0Lm1heEltYWdlSGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlcmVkSW1hZ2UgPSBpbWFnZS5yZW5kZXIoKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlZEltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkSW1hZ2Uuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWZsZXhcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRJbWFnZS5zdHlsZS5tYXJnaW4gPSBcIjBweFwiO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgcmVuZGVyZWRJbWFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0SXRlbUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5faW1hZ2VzW2luZGV4XTtcbiAgICB9XG5cbiAgICBnZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0oKTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5faW1hZ2VzICYmIHRoaXMuX2ltYWdlcy5sZW5ndGggPiAwID8gdGhpcy5faW1hZ2VzWzBdIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcyAmJiB0aGlzLl9pbWFnZXMubGVuZ3RoID4gMCA/IHRoaXMuX2ltYWdlc1t0aGlzLl9pbWFnZXMubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmVtb3ZlSXRlbShpdGVtOiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEltYWdlKSB7XG4gICAgICAgICAgICBsZXQgaXRlbUluZGV4ID0gdGhpcy5faW1hZ2VzLmluZGV4T2YoaXRlbSk7XG5cbiAgICAgICAgICAgIGlmIChpdGVtSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ltYWdlcy5zcGxpY2UoaXRlbUluZGV4LCAxKTtcblxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KHVuZGVmaW5lZCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkltYWdlU2V0XCI7XG4gICAgfVxuXG4gICAgYWRkSW1hZ2UoaW1hZ2U6IEltYWdlKSB7XG4gICAgICAgIGlmICghaW1hZ2UucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9pbWFnZXMucHVzaChpbWFnZSk7XG5cbiAgICAgICAgICAgIGltYWdlLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgaW1hZ2UgYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgSW1hZ2VTZXRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbmRleE9mKGNhcmRFbGVtZW50OiBDYXJkRWxlbWVudCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudCBpbnN0YW5jZW9mIEltYWdlID8gdGhpcy5faW1hZ2VzLmluZGV4T2YoY2FyZEVsZW1lbnQpIDogLTE7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVkaWFTb3VyY2UgZXh0ZW5kcyBTZXJpYWxpemFibGVPYmplY3Qge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSBtaW1lVHlwZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwibWltZVR5cGVcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwidXJsXCIpO1xuXG4gICAgQHByb3BlcnR5KE1lZGlhU291cmNlLm1pbWVUeXBlUHJvcGVydHkpXG4gICAgbWltZVR5cGU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoTWVkaWFTb3VyY2UudXJsUHJvcGVydHkpXG4gICAgdXJsPzogc3RyaW5nO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIk1lZGlhU291cmNlXCI7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IodXJsPzogc3RyaW5nLCBtaW1lVHlwZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLm1pbWVUeXBlID0gbWltZVR5cGU7XG4gICAgfVxuXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWltZVR5cGUgJiYgdGhpcy51cmwgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgcmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSFRNTFNvdXJjZUVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuICAgICAgICAgICAgcmVzdWx0LnNyYyA9IDxzdHJpbmc+dGhpcy51cmw7XG4gICAgICAgICAgICByZXN1bHQudHlwZSA9IDxzdHJpbmc+dGhpcy5taW1lVHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVkaWEgZXh0ZW5kcyBDYXJkRWxlbWVudCB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHNvdXJjZXNQcm9wZXJ0eSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RDb2xsZWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJzb3VyY2VzXCIsIE1lZGlhU291cmNlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcG9zdGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJwb3N0ZXJcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IGFsdFRleHRQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcImFsdFRleHRcIik7XG5cbiAgICBAcHJvcGVydHkoTWVkaWEuc291cmNlc1Byb3BlcnR5KVxuICAgIHNvdXJjZXM6IE1lZGlhU291cmNlW10gPSBbXTtcblxuICAgIEBwcm9wZXJ0eShNZWRpYS5wb3N0ZXJQcm9wZXJ0eSlcbiAgICBwb3N0ZXI/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoTWVkaWEuYWx0VGV4dFByb3BlcnR5KVxuICAgIGFsdFRleHQ/OiBzdHJpbmc7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHN0YXRpYyByZWFkb25seSBzdXBwb3J0ZWRNZWRpYVR5cGVzID0gW1wiYXVkaW9cIiwgXCJ2aWRlb1wiXTtcblxuICAgIHByaXZhdGUgX3NlbGVjdGVkTWVkaWFUeXBlPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX3NlbGVjdGVkU291cmNlczogTWVkaWFTb3VyY2VbXTtcblxuICAgIHByaXZhdGUgZ2V0UG9zdGVyVXJsKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RlciA/IHRoaXMucG9zdGVyIDogdGhpcy5ob3N0Q29uZmlnLm1lZGlhLmRlZmF1bHRQb3N0ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzU291cmNlcygpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcbiAgICAgICAgICAgIGxldCBtaW1lQ29tcG9uZW50cyA9IHNvdXJjZS5taW1lVHlwZSA/IHNvdXJjZS5taW1lVHlwZS5zcGxpdCgnLycpIDogW107XG5cbiAgICAgICAgICAgIGlmIChtaW1lQ29tcG9uZW50cy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gTWVkaWEuc3VwcG9ydGVkTWVkaWFUeXBlcy5pbmRleE9mKG1pbWVDb21wb25lbnRzWzBdKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGUgPSBNZWRpYS5zdXBwb3J0ZWRNZWRpYVR5cGVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWltZUNvbXBvbmVudHNbMF0gPT0gdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzLnB1c2goc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBvc3RlcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IHBsYXlCdXR0b25BcnJvd1dpZHRoID0gMTI7XG4gICAgICAgIGNvbnN0IHBsYXlCdXR0b25BcnJvd0hlaWdodCA9IDE1O1xuXG4gICAgICAgIGxldCBwb3N0ZXJSb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtbWVkaWEtcG9zdGVyXCIpO1xuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiY29udGVudGluZm9cIik7XG4gICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5hbHRUZXh0ID8gdGhpcy5hbHRUZXh0IDogXCJNZWRpYSBjb250ZW50XCIpO1xuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgICAgIGxldCBwb3N0ZXJVcmwgPSB0aGlzLmdldFBvc3RlclVybCgpO1xuXG4gICAgICAgIGlmIChwb3N0ZXJVcmwpIHtcbiAgICAgICAgICAgIGxldCBwb3N0ZXJJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgICAgICBwb3N0ZXJJbWFnZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG5cbiAgICAgICAgICAgIHBvc3RlckltYWdlRWxlbWVudC5vbmVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBvc3RlckltYWdlRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RlckltYWdlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBvc3RlckltYWdlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImVtcHR5XCIpO1xuICAgICAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50LnNyYyA9IHBvc3RlclVybDtcblxuICAgICAgICAgICAgcG9zdGVyUm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQocG9zdGVySW1hZ2VFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbXB0eVwiKTtcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5ICYmIHRoaXMuX3NlbGVjdGVkU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgcGxheUJ1dHRvbk91dGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LnRhYkluZGV4ID0gMDtcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIlBsYXkgbWVkaWFcIik7XG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtbWVkaWEtcGxheUJ1dHRvblwiKTtcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ob3N0Q29uZmlnLm1lZGlhLmFsbG93SW5saW5lUGxheWJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVkaWFQbGF5ZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJNZWRpYVBsYXllcigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuYXBwZW5kQ2hpbGQobWVkaWFQbGF5ZXJFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFQbGF5ZXJFbGVtZW50LnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1lZGlhLm9uUGxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBNZWRpYS5vblBsYXkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwbGF5QnV0dG9uSW5uZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1tZWRpYS1wbGF5QnV0dG9uLWFycm93XCIpO1xuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS53aWR0aCA9IHBsYXlCdXR0b25BcnJvd1dpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBwbGF5QnV0dG9uQXJyb3dIZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclRvcFdpZHRoID0gKHBsYXlCdXR0b25BcnJvd0hlaWdodCAvIDIpICsgXCJweFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA9IChwbGF5QnV0dG9uQXJyb3dIZWlnaHQgLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gcGxheUJ1dHRvbkFycm93V2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBcIjBcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyU3R5bGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclRvcENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5ib3JkZXJSaWdodENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5ib3JkZXJCb3R0b21Db2xvciA9IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyAocGxheUJ1dHRvbkFycm93V2lkdGggLyAxMCkgKyBcInB4LDBweClcIjtcblxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5hcHBlbmRDaGlsZChwbGF5QnV0dG9uSW5uZXJFbGVtZW50KTtcblxuICAgICAgICAgICAgbGV0IHBsYXlCdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUubGVmdCA9IFwiMFwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS50b3AgPSBcIjBcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcblxuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChwbGF5QnV0dG9uT3V0ZXJFbGVtZW50KTtcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHBsYXlCdXR0b25Db250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBvc3RlclJvb3RFbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTWVkaWFQbGF5ZXIoKTogSFRNTE1lZGlhRWxlbWVudCB7XG4gICAgICAgIGxldCBtZWRpYUVsZW1lbnQ6IEhUTUxNZWRpYUVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlID09IFwidmlkZW9cIikge1xuICAgICAgICAgICAgbGV0IHZpZGVvUGxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuXG4gICAgICAgICAgICBsZXQgcG9zdGVyVXJsID0gdGhpcy5nZXRQb3N0ZXJVcmwoKTtcblxuICAgICAgICAgICAgaWYgKHBvc3RlclVybCkge1xuICAgICAgICAgICAgICAgIHZpZGVvUGxheWVyLnBvc3RlciA9IHBvc3RlclVybDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWVkaWFFbGVtZW50ID0gdmlkZW9QbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYUVsZW1lbnQuc2V0QXR0cmlidXRlKFwid2Via2l0LXBsYXlzaW5saW5lXCIsIFwiXCIpO1xuICAgICAgICBtZWRpYUVsZW1lbnQuc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIiwgXCJcIik7XG4gICAgICAgIG1lZGlhRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgIG1lZGlhRWxlbWVudC5jb250cm9scyA9IHRydWU7XG5cbiAgICAgICAgaWYgKFV0aWxzLmlzTW9iaWxlT1MoKSkge1xuICAgICAgICAgICAgbWVkaWFFbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lZGlhRWxlbWVudC5wcmVsb2FkID0gXCJub25lXCI7XG4gICAgICAgIG1lZGlhRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXG4gICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcbiAgICAgICAgICAgIGxldCByZW5kZXJlZFNvdXJjZSA9IHNvdXJjZS5yZW5kZXIoKTtcblxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQobWVkaWFFbGVtZW50LCByZW5kZXJlZFNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVkaWFFbGVtZW50O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1tZWRpYVwiKTtcblxuICAgICAgICB0aGlzLnByb2Nlc3NTb3VyY2VzKCk7XG5cbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlclBvc3RlcigpKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBzdGF0aWMgb25QbGF5PzogKHNlbmRlcjogTWVkaWEpID0+IHZvaWQ7XG5cbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiTWVkaWFcIjtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xuICAgICAgICBsZXQgcmVzdWx0OiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdID0gW107XG5cbiAgICAgICAgbGV0IHBvc3RlclVybCA9IHRoaXMuZ2V0UG9zdGVyVXJsKCk7XG5cbiAgICAgICAgaWYgKHBvc3RlclVybCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB1cmw6IHBvc3RlclVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IG1lZGlhU291cmNlIG9mIHRoaXMuc291cmNlcykge1xuICAgICAgICAgICAgaWYgKG1lZGlhU291cmNlLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IDxzdHJpbmc+bWVkaWFTb3VyY2UudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IDxzdHJpbmc+bWVkaWFTb3VyY2UubWltZVR5cGVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBzZWxlY3RlZE1lZGlhVHlwZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGU7XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSW5wdXQgZXh0ZW5kcyBDYXJkRWxlbWVudCBpbXBsZW1lbnRzIElJbnB1dCB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IGxhYmVsUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMywgXCJsYWJlbFwiLCB0cnVlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaXNSZXF1aXJlZFByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8zLCBcImlzUmVxdWlyZWRcIiwgZmFsc2UpO1xuICAgIHN0YXRpYyByZWFkb25seSBlcnJvck1lc3NhZ2VQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8zLCBcImVycm9yTWVzc2FnZVwiLCB0cnVlKTtcblxuICAgIEBwcm9wZXJ0eShJbnB1dC5sYWJlbFByb3BlcnR5KVxuICAgIGxhYmVsPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KElucHV0LmlzUmVxdWlyZWRQcm9wZXJ0eSlcbiAgICBpc1JlcXVpcmVkOiBib29sZWFuO1xuXG4gICAgQHByb3BlcnR5KElucHV0LmVycm9yTWVzc2FnZVByb3BlcnR5KVxuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfb3V0ZXJDb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9yZW5kZXJlZEVycm9yTWVzc2FnZUVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9yZW5kZXJlZExhYmVsRWxlbWVudD86IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudD86IEhUTUxFbGVtZW50O1xuXG4gICAgcHJvdGVjdGVkIGdldEFsbExhYmVsSWRzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGxhYmVsSWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZExhYmVsRWxlbWVudCkge1xuICAgICAgICAgICAgbGFiZWxJZHMucHVzaCh0aGlzLl9yZW5kZXJlZExhYmVsRWxlbWVudC5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFcnJvck1lc3NhZ2VFbGVtZW50KSB7XG4gICAgICAgICAgICBsYWJlbElkcy5wdXNoKHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudC5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFiZWxJZHM7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUlucHV0Q29udHJvbEFyaWFMYWJlbGxlZEJ5KCkge1xuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgbGFiZWxJZHM6IHN0cmluZ1tdID0gdGhpcy5nZXRBbGxMYWJlbElkcygpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRMYWJlbEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBsYWJlbElkcy5wdXNoKHRoaXMuX3JlbmRlcmVkTGFiZWxFbGVtZW50LmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhYmVsSWRzLnB1c2godGhpcy5fcmVuZGVyZWRFcnJvck1lc3NhZ2VFbGVtZW50LmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxhYmVsSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGxhYmVsSWRzLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGlzTnVsbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGlucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGVJbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xuXG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblxuICAgICAgICBsZXQgcmVuZGVyZWRJbnB1dENvbnRyb2xJZCA9IFV0aWxzLmdlbmVyYXRlVW5pcXVlSWQoKTtcblxuICAgICAgICBpZiAodGhpcy5sYWJlbCkge1xuICAgICAgICAgICAgbGV0IGxhYmVsUmljaFRleHRCbG9jayA9IG5ldyBSaWNoVGV4dEJsb2NrKCk7XG4gICAgICAgICAgICBsYWJlbFJpY2hUZXh0QmxvY2suc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICAgICAgbGFiZWxSaWNoVGV4dEJsb2NrLmZvckVsZW1lbnRJZCA9IHJlbmRlcmVkSW5wdXRDb250cm9sSWQ7XG5cbiAgICAgICAgICAgIGxldCBsYWJlbElubGluZSA9IG5ldyBUZXh0UnVuKHRoaXMubGFiZWwpO1xuICAgICAgICAgICAgbGFiZWxSaWNoVGV4dEJsb2NrLmFkZElubGluZShsYWJlbElubGluZSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBsYWJlbElubGluZS5pbml0KGhvc3RDb25maWcuaW5wdXRzLmxhYmVsLnJlcXVpcmVkSW5wdXRzKTtcblxuICAgICAgICAgICAgICAgIGxldCBpc1JlcXVpcmVkQ3VlSW5saW5lID0gbmV3IFRleHRSdW4oaG9zdENvbmZpZy5pbnB1dHMubGFiZWwucmVxdWlyZWRJbnB1dHMuc3VmZml4KTtcbiAgICAgICAgICAgICAgICBpc1JlcXVpcmVkQ3VlSW5saW5lLmNvbG9yID0gaG9zdENvbmZpZy5pbnB1dHMubGFiZWwucmVxdWlyZWRJbnB1dHMuc3VmZml4Q29sb3I7XG4gICAgICAgICAgICAgICAgaXNSZXF1aXJlZEN1ZUlubGluZS5hcmlhSGlkZGVuID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGxhYmVsUmljaFRleHRCbG9jay5hZGRJbmxpbmUoaXNSZXF1aXJlZEN1ZUlubGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYWJlbElubGluZS5pbml0KGhvc3RDb25maWcuaW5wdXRzLmxhYmVsLm9wdGlvbmFsSW5wdXRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRMYWJlbEVsZW1lbnQgPSBsYWJlbFJpY2hUZXh0QmxvY2sucmVuZGVyKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZExhYmVsRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkTGFiZWxFbGVtZW50LmlkID0gVXRpbHMuZ2VuZXJhdGVVbmlxdWVJZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkTGFiZWxFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IGhvc3RDb25maWcuZ2V0RWZmZWN0aXZlU3BhY2luZyhob3N0Q29uZmlnLmlucHV0cy5sYWJlbC5pbnB1dFNwYWNpbmcpICsgXCJweFwiO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3JlbmRlcmVkTGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLl9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0LWNvbnRhaW5lclwiKTtcbiAgICAgICAgdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50ID0gdGhpcy5pbnRlcm5hbFJlbmRlcigpO1xuXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5pZCA9IHJlbmRlcmVkSW5wdXRDb250cm9sSWQ7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBweFwiO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc051bGxhYmxlICYmIHRoaXMuaXNSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dC1yZXF1aXJlZFwiKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dENvbnRyb2xBcmlhTGFiZWxsZWRCeSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uRmFpbHVyZUN1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub25WYWx1ZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25WYWx1ZUNoYW5nZWQodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByYWlzZUlucHV0VmFsdWVDaGFuZ2VkRXZlbnQodGhpcyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHJlc2V0VmFsaWRhdGlvbkZhaWx1cmVDdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0LXZhbGlkYXRpb24tZmFpbGVkXCIpKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dENvbnRyb2xBcmlhTGFiZWxsZWRCeSgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFcnJvck1lc3NhZ2VFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVycm9yTWVzc2FnZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2hvd1ZhbGlkYXRpb25FcnJvck1lc3NhZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCAmJiB0aGlzLmVycm9yTWVzc2FnZSAmJiBHbG9iYWxTZXR0aW5ncy5kaXNwbGF5SW5wdXRWYWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlVGV4dEJsb2NrID0gbmV3IFRleHRCbG9jaygpO1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlVGV4dEJsb2NrLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZVRleHRCbG9jay50ZXh0ID0gdGhpcy5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2VUZXh0QmxvY2sud3JhcCA9IHRydWU7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2VUZXh0QmxvY2suaW5pdCh0aGlzLmhvc3RDb25maWcuaW5wdXRzLmVycm9yTWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudCA9IGVycm9yTWVzc2FnZVRleHRCbG9jay5yZW5kZXIoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRXJyb3JNZXNzYWdlRWxlbWVudC5pZCA9IFV0aWxzLmdlbmVyYXRlVW5pcXVlSWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdXRlckNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcmVuZGVyZWRFcnJvck1lc3NhZ2VFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRDb250cm9sQXJpYUxhYmVsbGVkQnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVmFsdWVDaGFuZ2VkOiAoc2VuZGVyOiBJbnB1dCkgPT4gdm9pZDtcblxuICAgIGFic3RyYWN0IGlzU2V0KCk6IGJvb2xlYW47XG5cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXG4gICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuaW5wdXRzTXVzdEhhdmVVbmlxdWVJZCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlJlcXVpcmVkSW5wdXRzU2hvdWxkSGF2ZUxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBcIlJlcXVpcmVkIGlucHV0cyBzaG91bGQgaGF2ZSBhIGxhYmVsXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuUmVxdWlyZWRJbnB1dHNTaG91bGRIYXZlRXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBcIlJlcXVpcmVkIGlucHV0cyBzaG91bGQgaGF2ZSBhbiBlcnJvciBtZXNzYWdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFsaWRhdGVWYWx1ZSgpOiBib29sZWFuIHtcbiAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb25GYWlsdXJlQ3VlKCk7XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuaXNSZXF1aXJlZCA/IHRoaXMuaXNTZXQoKSAmJiB0aGlzLmlzVmFsaWQoKSA6IHRoaXMuaXNWYWxpZCgpO1xuXG4gICAgICAgIGlmICghcmVzdWx0ICYmIHRoaXMucmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtdmFsaWRhdGlvbi1mYWlsZWRcIikpO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dWYWxpZGF0aW9uRXJyb3JNZXNzYWdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9uczogYm9vbGVhbiA9IHRydWUpOiBJbnB1dFtdIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cblxuICAgIGFic3RyYWN0IGdldCB2YWx1ZSgpOiBhbnk7XG5cbiAgICBnZXQgaXNJbnRlcmFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGV4dElucHV0IGV4dGVuZHMgSW5wdXQge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidmFsdWVcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1heExlbmd0aFByb3BlcnR5ID0gbmV3IE51bVByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibWF4TGVuZ3RoXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSBpc011bHRpbGluZVByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImlzTXVsdGlsaW5lXCIsIGZhbHNlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGxhY2Vob2xkZXJQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInBsYWNlaG9sZGVyXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSBzdHlsZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInN0eWxlXCIsIEVudW1zLklucHV0VGV4dFN0eWxlLCBFbnVtcy5JbnB1dFRleHRTdHlsZS5UZXh0KTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaW5saW5lQWN0aW9uUHJvcGVydHkgPSBuZXcgQWN0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJpbmxpbmVBY3Rpb25cIiwgWyBcIkFjdGlvbi5TaG93Q2FyZFwiIF0pO1xuICAgIHN0YXRpYyByZWFkb25seSByZWdleFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzMsIFwicmVnZXhcIiwgdHJ1ZSk7XG5cbiAgICBAcHJvcGVydHkoVGV4dElucHV0LnZhbHVlUHJvcGVydHkpXG4gICAgZGVmYXVsdFZhbHVlPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KFRleHRJbnB1dC5tYXhMZW5ndGhQcm9wZXJ0eSlcbiAgICBtYXhMZW5ndGg/OiBudW1iZXI7XG5cbiAgICBAcHJvcGVydHkoVGV4dElucHV0LmlzTXVsdGlsaW5lUHJvcGVydHkpXG4gICAgaXNNdWx0aWxpbmU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eShUZXh0SW5wdXQucGxhY2Vob2xkZXJQcm9wZXJ0eSlcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShUZXh0SW5wdXQuc3R5bGVQcm9wZXJ0eSlcbiAgICBzdHlsZTogRW51bXMuSW5wdXRUZXh0U3R5bGUgPSBFbnVtcy5JbnB1dFRleHRTdHlsZS5UZXh0O1xuXG4gICAgQHByb3BlcnR5KFRleHRJbnB1dC5pbmxpbmVBY3Rpb25Qcm9wZXJ0eSlcbiAgICBpbmxpbmVBY3Rpb24/OiBBY3Rpb247XG5cbiAgICBAcHJvcGVydHkoVGV4dElucHV0LnJlZ2V4UHJvcGVydHkpXG4gICAgcmVnZXg/OiBzdHJpbmc7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgc2V0dXBJbnB1dChpbnB1dDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICAgICAgaW5wdXQuc3R5bGUuZmxleCA9IFwiMSAxIGF1dG9cIjtcbiAgICAgICAgaW5wdXQudGFiSW5kZXggPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMucGxhY2Vob2xkZXIpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXhMZW5ndGggJiYgdGhpcy5tYXhMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbnB1dC5tYXhMZW5ndGggPSB0aGlzLm1heExlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHRoaXMudmFsdWVDaGFuZ2VkKCk7IH1cbiAgICAgICAgaW5wdXQub25rZXlwcmVzcyA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBDdHJsK0VudGVyIHByZXNzZWRcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTAgJiYgdGhpcy5pbmxpbmVBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlubGluZUFjdGlvbi5leGVjdXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudDtcblxuICAgICAgICBpZiAodGhpcy5pc011bHRpbGluZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10ZXh0SW5wdXRcIiwgXCJhYy1tdWx0aWxpbmVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgICAgICByZXN1bHQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLXRleHRJbnB1dFwiKTtcbiAgICAgICAgICAgIHJlc3VsdC50eXBlID0gRW51bXMuSW5wdXRUZXh0U3R5bGVbdGhpcy5zdHlsZV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0dXBJbnB1dChyZXN1bHQpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlSW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVuZGVyZWRJbnB1dENvbnRyb2wgPSBzdXBlci5vdmVycmlkZUludGVybmFsUmVuZGVyKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uKSB7XG4gICAgICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlubGluZUFjdGlvbkJ1dHRvblwiKTtcbiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5saW5lQWN0aW9uLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbmxpbmVBY3Rpb24uaWNvblVybCkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaWNvbk9ubHlcIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICAgICAgaWNvbi5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBiZWxvdyB0cmljayBpcyBuZWNlc3NhcnkgYXMgYSB3b3JrYXJvdW5kIGluIENocm9tZSB3aGVyZSB0aGUgaWNvbiBpcyBpbml0aWFsbHkgZGlzcGxheWVkXG4gICAgICAgICAgICAgICAgLy8gYXQgaXRzIG5hdGl2ZSBzaXplIHRoZW4gcmVzaXplZCB0byAxMDAlIG9mIHRoZSBidXR0b24ncyBoZWlnaHQuIFRoaXMgY2ZyZWF0ZXMgYW4gdW5wbGVhc2FudFxuICAgICAgICAgICAgICAgIC8vIGZsaWNrZXIuIE9uIHRvcCBvZiB0aGF0LCBDaHJvbWUncyBmbGV4IGltcGxlbWVudGF0aW9uIGZhaWxzIHRvIHBycGVybHkgcmUtbGF5b3V0IHRoZSBidXR0b25cbiAgICAgICAgICAgICAgICAvLyBhZnRlciB0aGUgaW1hZ2UgaGFzIGxvYWRlZCBhbmQgYmVlbiBnaWN2ZW4gaXRzIGZpbmFsIHNpemUuIFRoZSBiZWxvdyB0cmljayBhbHNvIGZpeGVzIHRoYXQuXG4gICAgICAgICAgICAgICAgaWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgaWNvbi5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGljb24uc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWNvbi5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2hpbGQoaWNvbik7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbk9ubHlcIik7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGV4dE9ubHlcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSB0aGlzLmlubGluZUFjdGlvbi50aXRsZSA/IHRoaXMuaW5saW5lQWN0aW9uLnRpdGxlIDogXCJUaXRsZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJUaXRsZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWNvbi5zcmMgPSB0aGlzLmlubGluZUFjdGlvbi5pY29uVXJsO1xuXG4gICAgICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGljb24pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5saW5lQWN0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50aXRsZSA9IHRoaXMuaW5saW5lQWN0aW9uLnRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGV4dE9ubHlcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5pbmxpbmVBY3Rpb24udGl0bGUgPyB0aGlzLmlubGluZUFjdGlvbi50aXRsZSA6IFwiVGl0bGVcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSBcIjhweFwiO1xuXG4gICAgICAgICAgICB0aGlzLmlucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJlZElucHV0Q29udHJvbDtcbiAgICB9XG5cbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuVGV4dFwiO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc3VwZXIuZ2V0QWN0aW9uQnlJZChpZCk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQgJiYgdGhpcy5pbmxpbmVBY3Rpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuaW5saW5lQWN0aW9uLmdldEFjdGlvbkJ5SWQoaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBpc1NldCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlZ2V4KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCh0aGlzLnJlZ2V4LCBcImdcIikudGVzdCh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldCB2YWx1ZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlsaW5lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICg8SFRNTFRleHRBcmVhRWxlbWVudD50aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMucmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUb2dnbGVJbnB1dCBleHRlbmRzIElucHV0IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSB0aXRsZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidGl0bGVcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlT25Qcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlT25cIiwgdHJ1ZSwgdW5kZWZpbmVkLCBcInRydWVcIiwgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB7IHJldHVybiBcInRydWVcIjsgfSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlT2ZmUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZU9mZlwiLCB0cnVlLCB1bmRlZmluZWQsIFwiZmFsc2VcIiwgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB7IHJldHVybiBcImZhbHNlXCI7IH0pO1xuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwid3JhcFwiLCBmYWxzZSk7XG5cbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudmFsdWVQcm9wZXJ0eSlcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudGl0bGVQcm9wZXJ0eSlcbiAgICB0aXRsZT86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShUb2dnbGVJbnB1dC52YWx1ZU9uUHJvcGVydHkpXG4gICAgdmFsdWVPbjogc3RyaW5nID0gXCJ0cnVlXCI7XG5cbiAgICBAcHJvcGVydHkoVG9nZ2xlSW5wdXQudmFsdWVPZmZQcm9wZXJ0eSlcbiAgICB2YWx1ZU9mZjogc3RyaW5nID0gXCJmYWxzZVwiO1xuXG4gICAgQHByb3BlcnR5KFRvZ2dsZUlucHV0LndyYXBQcm9wZXJ0eSlcbiAgICB3cmFwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgX2NoZWNrYm94SW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgX2NoZWNrYm94SW5wdXRMYWJlbEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUlucHV0Q29udHJvbEFyaWFMYWJlbGxlZEJ5KCkge1xuICAgICAgICBpZiAodGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBqb2luZWRMYWJlbElkcyA9IHRoaXMuZ2V0QWxsTGFiZWxJZHMoKS5qb2luKFwiIFwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2NoZWNrYm94SW5wdXRMYWJlbEVsZW1lbnQgJiYgdGhpcy5fY2hlY2tib3hJbnB1dExhYmVsRWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIGpvaW5lZExhYmVsSWRzICs9IFwiIFwiICsgdGhpcy5fY2hlY2tib3hJbnB1dExhYmVsRWxlbWVudC5pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGpvaW5lZExhYmVsSWRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGpvaW5lZExhYmVsSWRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIFwiYWMtdG9nZ2xlSW5wdXRcIik7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LmlkID0gVXRpbHMuZ2VuZXJhdGVVbmlxdWVJZCgpO1xuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC50eXBlID0gXCJjaGVja2JveFwiO1xuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xuXG4gICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMudGl0bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNSZXF1aXJlZCkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1yZXF1aXJlZFwiLCBcInRydWVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC50YWJJbmRleCA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFZhbHVlID09IHRoaXMudmFsdWVPbikge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5vbmNoYW5nZSA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxuXG4gICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50KTtcblxuICAgICAgICBpZiAodGhpcy50aXRsZSB8fCB0aGlzLmlzRGVzaWduTW9kZSgpKSB7XG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBuZXcgVGV4dEJsb2NrKCk7XG4gICAgICAgICAgICBsYWJlbC5zZXRQYXJlbnQodGhpcyk7XG4gICAgICAgICAgICBsYWJlbC5mb3JFbGVtZW50SWQgPSB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5pZDtcbiAgICAgICAgICAgIGxhYmVsLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XG4gICAgICAgICAgICBsYWJlbC50ZXh0ID0gIXRoaXMudGl0bGUgPyB0aGlzLmdldEpzb25UeXBlTmFtZSgpIDogdGhpcy50aXRsZTtcbiAgICAgICAgICAgIGxhYmVsLnVzZU1hcmtkb3duID0gR2xvYmFsU2V0dGluZ3MudXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3g7XG4gICAgICAgICAgICBsYWJlbC53cmFwID0gdGhpcy53cmFwO1xuXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0TGFiZWxFbGVtZW50ID0gbGFiZWwucmVuZGVyKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGVja2JveElucHV0TGFiZWxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dExhYmVsRWxlbWVudC5pZCA9IFV0aWxzLmdlbmVyYXRlVW5pcXVlSWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0TGFiZWxFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRMYWJlbEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMSAxIGF1dG9cIjtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0TGFiZWxFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjZweFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRMYWJlbEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG5cbiAgICAgICAgICAgICAgICBsZXQgc3BhY2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc3BhY2VyRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiNnB4XCI7XG5cbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBzcGFjZXJFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0aGlzLl9jaGVja2JveElucHV0TGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaXNOdWxsYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJJbnB1dC5Ub2dnbGVcIjtcbiAgICB9XG5cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNTZXQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSB0aGlzLnZhbHVlT247XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuY2hlY2tlZCA/IHRoaXMudmFsdWVPbiA6IHRoaXMudmFsdWVPZmY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hvaWNlIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgdGl0bGVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInRpdGxlXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidmFsdWVcIik7XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlLnRpdGxlUHJvcGVydHkpXG4gICAgdGl0bGU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlLnZhbHVlUHJvcGVydHkpXG4gICAgdmFsdWU/OiBzdHJpbmc7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hvaWNlXCI7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IodGl0bGU/OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hvaWNlU2V0SW5wdXQgZXh0ZW5kcyBJbnB1dCB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgY2hvaWNlc1Byb3BlcnR5ID0gbmV3IFNlcmlhbGl6YWJsZU9iamVjdENvbGxlY3Rpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImNob2ljZXNcIiwgQ2hvaWNlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBWYWx1ZVNldFByb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgIFtcbiAgICAgICAgICAgIHsgdmFsdWU6IFwiY29tcGFjdFwiIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiBcImV4cGFuZGVkXCIgfVxuICAgICAgICBdLFxuICAgICAgICBcImNvbXBhY3RcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IGlzTXVsdGlTZWxlY3RQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJpc011bHRpU2VsZWN0XCIsIGZhbHNlKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGxhY2Vob2xkZXJQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInBsYWNlaG9sZGVyXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbFByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwid3JhcFwiLCBmYWxzZSk7XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlU2V0SW5wdXQudmFsdWVQcm9wZXJ0eSlcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlU2V0SW5wdXQuc3R5bGVQcm9wZXJ0eSlcbiAgICBzdHlsZT86IFwiY29tcGFjdFwiIHwgXCJleHBhbmRlZFwiO1xuXG4gICAgZ2V0IGlzQ29tcGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGUgIT09IFwiZXhwYW5kZWRcIjtcbiAgICB9XG5cbiAgICBzZXQgaXNDb21wYWN0KHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuc3R5bGUgPSB2YWx1ZSA/IHVuZGVmaW5lZCA6IFwiZXhwYW5kZWRcIjtcbiAgICB9XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlU2V0SW5wdXQuaXNNdWx0aVNlbGVjdFByb3BlcnR5KVxuICAgIGlzTXVsdGlTZWxlY3Q6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eShDaG9pY2VTZXRJbnB1dC5wbGFjZWhvbGRlclByb3BlcnR5KVxuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KENob2ljZVNldElucHV0LndyYXBQcm9wZXJ0eSlcbiAgICB3cmFwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAcHJvcGVydHkoQ2hvaWNlU2V0SW5wdXQuY2hvaWNlc1Byb3BlcnR5KVxuICAgIGNob2ljZXM6IENob2ljZVtdID0gW107XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgc3RhdGljIHVuaXF1ZUNhdGVnb3J5Q291bnRlciA9IDA7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRVbmlxdWVDYXRlZ29yeU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHVuaXF1ZUNhdGVnb3J5TmFtZSA9IFwiX19hYy1jYXRlZ29yeVwiICsgQ2hvaWNlU2V0SW5wdXQudW5pcXVlQ2F0ZWdvcnlDb3VudGVyO1xuXG4gICAgICAgIENob2ljZVNldElucHV0LnVuaXF1ZUNhdGVnb3J5Q291bnRlcisrO1xuXG4gICAgICAgIHJldHVybiB1bmlxdWVDYXRlZ29yeU5hbWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdW5pcXVlQ2F0ZWdvcnlOYW1lOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfc2VsZWN0RWxlbWVudDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfdG9nZ2xlSW5wdXRzOiBIVE1MSW5wdXRFbGVtZW50W107XG4gICAgcHJpdmF0ZSBfbGFiZWxzOiBBcnJheTxIVE1MRWxlbWVudCB8IHVuZGVmaW5lZD47XG5cbiAgICBwcml2YXRlIHJlbmRlckNvbXBvdW5kSW5wdXQoY3NzQ2xhc3NOYW1lOiBzdHJpbmcsIHR5cGU6IFwiY2hlY2tib3hcIiB8IFwicmFkaW9cIiwgZGVmYXVsdFZhbHVlczogc3RyaW5nW10gfCB1bmRlZmluZWQpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIGNzc0NsYXNzTmFtZSk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblxuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dHMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGFiZWxzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgY2hvaWNlIG9mIHRoaXMuY2hvaWNlcykge1xuICAgICAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgaW5wdXQuaWQgPSBVdGlscy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XG4gICAgICAgICAgICBpbnB1dC50eXBlID0gdHlwZTtcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICAgICAgICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICAgICAgICBpbnB1dC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XG4gICAgICAgICAgICBpbnB1dC5uYW1lID0gdGhpcy5pZCA/IHRoaXMuaWQgOiB0aGlzLl91bmlxdWVDYXRlZ29yeU5hbWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNob2ljZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gY2hvaWNlLnZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hvaWNlLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBjaG9pY2UudGl0bGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlcyAmJiBjaG9pY2UudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlcy5pbmRleE9mKGNob2ljZS52YWx1ZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKCkgPT4geyB0aGlzLnZhbHVlQ2hhbmdlZCgpOyB9XG5cbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0cy5wdXNoKGlucHV0KTtcblxuICAgICAgICAgICAgbGV0IGNvbXBvdW5kSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY29tcG91bmRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICBjb21wb3VuZElucHV0LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXG4gICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChjb21wb3VuZElucHV0LCBpbnB1dCk7XG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IG5ldyBUZXh0QmxvY2soKTtcbiAgICAgICAgICAgIGxhYmVsLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgICAgIGxhYmVsLmZvckVsZW1lbnRJZCA9IGlucHV0LmlkO1xuICAgICAgICAgICAgbGFiZWwuaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcbiAgICAgICAgICAgIGxhYmVsLnRleHQgPSBjaG9pY2UudGl0bGUgPyBjaG9pY2UudGl0bGUgOiBcIkNob2ljZSBcIiArIHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGg7XG4gICAgICAgICAgICBsYWJlbC51c2VNYXJrZG93biA9IEdsb2JhbFNldHRpbmdzLnVzZU1hcmtkb3duSW5SYWRpb0J1dHRvbkFuZENoZWNrYm94O1xuICAgICAgICAgICAgbGFiZWwud3JhcCA9IHRoaXMud3JhcDtcblxuICAgICAgICAgICAgbGV0IGxhYmVsRWxlbWVudCA9IGxhYmVsLnJlbmRlcigpO1xuXG4gICAgICAgICAgICB0aGlzLl9sYWJlbHMucHVzaChsYWJlbEVsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiAobGFiZWxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LmlkID0gVXRpbHMuZ2VuZXJhdGVVbmlxdWVJZCgpO1xuICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMSAxIGF1dG9cIjtcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiNnB4XCI7XG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xuXG4gICAgICAgICAgICAgICAgbGV0IHNwYWNlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHNwYWNlckVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjZweFwiO1xuXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgc3BhY2VyRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgbGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgY29tcG91bmRJbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdXBkYXRlSW5wdXRDb250cm9sQXJpYUxhYmVsbGVkQnkoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGlTZWxlY3QgfHwgdGhpcy5zdHlsZSA9PT0gXCJleHBhbmRlZFwiKSB7XG4gICAgICAgICAgICBsZXQgbGFiZWxJZHM6IHN0cmluZ1tdID0gdGhpcy5nZXRBbGxMYWJlbElkcygpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBqb2luZWRMYWJlbElkcyA9IGxhYmVsSWRzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IHRoaXMuX2xhYmVsc1tpXTtcblxuICAgICAgICAgICAgICAgIGlmIChsYWJlbCAmJiBsYWJlbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICBqb2luZWRMYWJlbElkcyArPSBcIiBcIiArIGxhYmVsLmlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChqb2luZWRMYWJlbElkcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dHNbaV0uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGpvaW5lZExhYmVsSWRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0c1tpXS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlSW5wdXRDb250cm9sQXJpYUxhYmVsbGVkQnkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSBgYXJpYS1jdXJyZW50YCBpcyBhcHBsaWVkIHRvIHRoZSBjdXJyZW50bHktc2VsZWN0ZWQgaXRlbVxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEFwcGx5QXJpYUN1cnJlbnQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RFbGVtZW50Lm9wdGlvbnM7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zW2ldLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbaV0uc2V0QXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbaV0ucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHRoaXMuX3VuaXF1ZUNhdGVnb3J5TmFtZSA9IENob2ljZVNldElucHV0LmdldFVuaXF1ZUNhdGVnb3J5TmFtZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGlTZWxlY3QpIHtcbiAgICAgICAgICAgIC8vIFJlbmRlciBhcyBhIGxpc3Qgb2YgdG9nZ2xlIGlucHV0c1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ29tcG91bmRJbnB1dChcbiAgICAgICAgICAgICAgICBcImFjLWNob2ljZVNldElucHV0LW11bHRpU2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID8gdGhpcy5kZWZhdWx0VmFsdWUuc3BsaXQodGhpcy5ob3N0Q29uZmlnLmNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3IpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlID09PSBcImV4cGFuZGVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYXMgYSBzZXJpZXMgb2YgcmFkaW8gYnV0dG9uc1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckNvbXBvdW5kSW5wdXQoXG4gICAgICAgICAgICAgICAgICAgIFwiYWMtY2hvaWNlU2V0SW5wdXQtZXhwYW5kZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJyYWRpb1wiLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA/IFsgdGhpcy5kZWZhdWx0VmFsdWUgXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZW5kZXIgYXMgYSBjb21ibyBib3hcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy1tdWx0aWNob2ljZUlucHV0XCIsIFwiYWMtY2hvaWNlU2V0SW5wdXQtY29tcGFjdFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG9wdGlvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgb3B0aW9uLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gdGhpcy5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0aGlzLl9zZWxlY3RFbGVtZW50LCBvcHRpb24pO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2hvaWNlIG9mIHRoaXMuY2hvaWNlcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gPHN0cmluZz5jaG9pY2UudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gPHN0cmluZz5jaG9pY2UudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIDxzdHJpbmc+Y2hvaWNlLnRpdGxlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hvaWNlLnZhbHVlID09IHRoaXMuZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGhpcy5fc2VsZWN0RWxlbWVudCwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsQXBwbHlBcmlhQ3VycmVudCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxBcHBseUFyaWFDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRKc29uVHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuQ2hvaWNlU2V0XCI7XG4gICAgfVxuXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGlTZWxlY3QgfHwgdGhpcy5zdHlsZSA9PT0gXCJleHBhbmRlZFwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdG9nZ2xlSW5wdXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dHNbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBpZiAodGhpcy5jaG9pY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuQ29sbGVjdGlvbkNhbnRCZUVtcHR5LFxuICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmNob2ljZVNldE11c3RIYXZlQXRMZWFzdE9uZUNob2ljZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGNob2ljZSBvZiB0aGlzLmNob2ljZXMpIHtcbiAgICAgICAgICAgIGlmICghY2hvaWNlLnRpdGxlIHx8ICFjaG9pY2UudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmNob2ljZVNldENob2ljZXNNdXN0SGF2ZVRpdGxlQW5kVmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1NldCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0IHZhbHVlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghdGhpcy5pc011bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NvbXBhY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0RWxlbWVudC5zZWxlY3RlZEluZGV4ID4gMCA/IHRoaXMuX3NlbGVjdEVsZW1lbnQudmFsdWUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fdG9nZ2xlSW5wdXRzIHx8IHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHRvZ2dsZUlucHV0IG9mIHRoaXMuX3RvZ2dsZUlucHV0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlSW5wdXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvZ2dsZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdG9nZ2xlSW5wdXRzIHx8IHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9IFwiXCI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHRvZ2dsZUlucHV0IG9mIHRoaXMuX3RvZ2dsZUlucHV0cykge1xuICAgICAgICAgICAgICAgIGlmICh0b2dnbGVJbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMuaG9zdENvbmZpZy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRvZ2dsZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE51bWJlcklucHV0IGV4dGVuZHMgSW5wdXQge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IE51bVByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwidmFsdWVcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHBsYWNlaG9sZGVyUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJwbGFjZWhvbGRlclwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWluUHJvcGVydHkgPSBuZXcgTnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJtaW5cIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1heFByb3BlcnR5ID0gbmV3IE51bVByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibWF4XCIpO1xuXG4gICAgQHByb3BlcnR5KE51bWJlcklucHV0LnZhbHVlUHJvcGVydHkpXG4gICAgZGVmYXVsdFZhbHVlPzogbnVtYmVyO1xuXG4gICAgQHByb3BlcnR5KE51bWJlcklucHV0Lm1pblByb3BlcnR5KVxuICAgIG1pbj86IG51bWJlcjtcblxuICAgIEBwcm9wZXJ0eShOdW1iZXJJbnB1dC5tYXhQcm9wZXJ0eSlcbiAgICBtYXg/OiBudW1iZXI7XG5cbiAgICBAcHJvcGVydHkoTnVtYmVySW5wdXQucGxhY2Vob2xkZXJQcm9wZXJ0eSlcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfbnVtYmVySW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcIm51bWJlclwiKTtcblxuICAgICAgICBpZiAodGhpcy5taW4pIHtcbiAgICAgICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgdGhpcy5taW4udG9TdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgdGhpcy5tYXgudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLW51bWJlcklucHV0XCIpO1xuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnRhYkluZGV4ID0gMDtcblxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnZhbHVlQXNOdW1iZXIgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQub25pbnB1dCA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIklucHV0Lk51bWJlclwiO1xuICAgIH1cblxuICAgIGlzU2V0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSAhPT0gdW5kZWZpbmVkICYmICFpc05hTih0aGlzLnZhbHVlKTtcbiAgICB9XG5cbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5pc1JlcXVpcmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMubWluICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiAodGhpcy52YWx1ZSA+PSB0aGlzLm1pbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmICh0aGlzLnZhbHVlIDw9IHRoaXMubWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0IHZhbHVlKCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQgPyB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQudmFsdWVBc051bWJlciA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlSW5wdXQgZXh0ZW5kcyBJbnB1dCB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHZhbHVlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGxhY2Vob2xkZXJQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInBsYWNlaG9sZGVyXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSBtaW5Qcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1pblwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJtYXhcIik7XG5cbiAgICBAcHJvcGVydHkoRGF0ZUlucHV0LnZhbHVlUHJvcGVydHkpXG4gICAgZGVmYXVsdFZhbHVlPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KERhdGVJbnB1dC5taW5Qcm9wZXJ0eSlcbiAgICBtaW4/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoRGF0ZUlucHV0Lm1heFByb3BlcnR5KVxuICAgIG1heD86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShEYXRlSW5wdXQucGxhY2Vob2xkZXJQcm9wZXJ0eSlcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfZGF0ZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG5cbiAgICAgICAgaWYgKHRoaXMubWluKSB7XG4gICAgICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCB0aGlzLm1pbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHRoaXMubWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLWRhdGVJbnB1dFwiKTtcbiAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQub25pbnB1dCA9ICgpID0+IHsgdGhpcy52YWx1ZUNoYW5nZWQoKTsgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIklucHV0LkRhdGVcIjtcbiAgICB9XG5cbiAgICBpc1NldCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNSZXF1aXJlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2YWx1ZUFzRGF0ZSA9IG5ldyBEYXRlKHRoaXMudmFsdWUpO1xuXG4gICAgICAgIGxldCByZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLm1pbikge1xuICAgICAgICAgICAgbGV0IG1pbkRhdGUgPSBuZXcgRGF0ZSh0aGlzLm1pbik7XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiAodmFsdWVBc0RhdGUgPj0gbWluRGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXgpIHtcbiAgICAgICAgICAgIGxldCBtYXhEYXRlID0gbmV3IERhdGUodGhpcy5tYXgpO1xuXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgKHZhbHVlQXNEYXRlIDw9IG1heERhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQgPyB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnZhbHVlIDogdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRpbWVQcm9wZXJ0eSBleHRlbmRzIEN1c3RvbVByb3BlcnR5PHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sIHJlYWRvbmx5IG5hbWU6IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIHRhcmdldFZlcnNpb24sXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHkubmFtZV07XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlICYmIC9eWzAtOV17Mn06WzAtOV17Mn0kLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUodGFyZ2V0LCBwcm9wZXJ0eS5uYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUaW1lSW5wdXQgZXh0ZW5kcyBJbnB1dCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgY29udmVydFRpbWVTdHJpbmdUb0RhdGUodGltZVN0cmluZzogc3RyaW5nKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShcIjE5NzMtMDktMDRUXCIgKyB0aW1lU3RyaW5nICsgXCI6MDBaXCIpO1xuICAgIH1cblxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInZhbHVlXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSBwbGFjZWhvbGRlclByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwicGxhY2Vob2xkZXJcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1pblByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcIm1pblwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4UHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibWF4XCIpO1xuXG4gICAgQHByb3BlcnR5KFRpbWVJbnB1dC52YWx1ZVByb3BlcnR5KVxuICAgIGRlZmF1bHRWYWx1ZT86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShUaW1lSW5wdXQubWluUHJvcGVydHkpXG4gICAgbWluPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KFRpbWVJbnB1dC5tYXhQcm9wZXJ0eSlcbiAgICBtYXg/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoVGltZUlucHV0LnBsYWNlaG9sZGVyUHJvcGVydHkpXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgX3RpbWVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0aW1lXCIpO1xuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCA8c3RyaW5nPnRoaXMubWluKTtcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgPHN0cmluZz50aGlzLm1heCk7XG4gICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLXRpbWVJbnB1dFwiKTtcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50Lm9uaW5wdXQgPSAoKSA9PiB7IHRoaXMudmFsdWVDaGFuZ2VkKCk7IH1cblxuICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lSW5wdXRFbGVtZW50O1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJJbnB1dC5UaW1lXCI7XG4gICAgfVxuXG4gICAgaXNTZXQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH1cblxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzUmVxdWlyZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmFsdWVBc0RhdGUgPSBUaW1lSW5wdXQuY29udmVydFRpbWVTdHJpbmdUb0RhdGUodGhpcy52YWx1ZSk7XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMubWluKSB7XG4gICAgICAgICAgICBsZXQgbWluRGF0ZSA9IFRpbWVJbnB1dC5jb252ZXJ0VGltZVN0cmluZ1RvRGF0ZSh0aGlzLm1pbik7XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiAodmFsdWVBc0RhdGUgPj0gbWluRGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXgpIHtcbiAgICAgICAgICAgIGxldCBtYXhEYXRlID0gVGltZUlucHV0LmNvbnZlcnRUaW1lU3RyaW5nVG9EYXRlKHRoaXMubWF4KTtcblxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmICh2YWx1ZUFzRGF0ZSA8PSBtYXhEYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0IHZhbHVlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lSW5wdXRFbGVtZW50ID8gdGhpcy5fdGltZUlucHV0RWxlbWVudC52YWx1ZSA6IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmNvbnN0IGVudW0gQWN0aW9uQnV0dG9uU3RhdGUge1xuICAgIE5vcm1hbCxcbiAgICBFeHBhbmRlZCxcbiAgICBTdWJkdWVkXG59XG5cbmNsYXNzIEFjdGlvbkJ1dHRvbiB7XG4gICAgcHJpdmF0ZSBfcGFyZW50Q29udGFpbmVyU3R5bGU6IHN0cmluZztcbiAgICBwcml2YXRlIF9zdGF0ZTogQWN0aW9uQnV0dG9uU3RhdGUgPSBBY3Rpb25CdXR0b25TdGF0ZS5Ob3JtYWw7XG5cbiAgICBwcml2YXRlIHVwZGF0ZUNzc1N0eWxlKCkge1xuICAgICAgICBpZiAodGhpcy5hY3Rpb24ucGFyZW50ICYmIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IGhvc3RDb25maWcgPSB0aGlzLmFjdGlvbi5wYXJlbnQuaG9zdENvbmZpZztcblxuICAgICAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTmFtZSA9IGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXB1c2hCdXR0b25cIik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXJlbnRDb250YWluZXJTdHlsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic3R5bGUtXCIgKyB0aGlzLl9wYXJlbnRDb250YWluZXJTdHlsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnVwZGF0ZUFjdGlvbkJ1dHRvbkNzc1N0eWxlKHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudCwgdGhpcy5fc3RhdGUpO1xuXG4gICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJleHBhbmRlZFwiKSk7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJzdWJkdWVkXCIpKTtcblxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgQWN0aW9uQnV0dG9uU3RhdGUuRXhwYW5kZWQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGVkXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBBY3Rpb25CdXR0b25TdGF0ZS5TdWJkdWVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJzdWJkdWVkXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbi5zdHlsZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbi5zdHlsZSA9PT0gRW51bXMuQWN0aW9uU3R5bGUuUG9zaXRpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lcyhcInByaW1hcnlcIiwgXCJzdHlsZS1wb3NpdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWVzKFwic3R5bGUtXCIgKyB0aGlzLmFjdGlvbi5zdHlsZS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZG9ubHkgYWN0aW9uOiBBY3Rpb247XG5cbiAgICBjb25zdHJ1Y3RvcihhY3Rpb246IEFjdGlvbiwgcGFyZW50Q29udGFpbmVyU3R5bGU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgdGhpcy5fcGFyZW50Q29udGFpbmVyU3R5bGUgPSBwYXJlbnRDb250YWluZXJTdHlsZTtcbiAgICB9XG5cbiAgICBvbkNsaWNrPzogKGFjdGlvbkJ1dHRvbjogQWN0aW9uQnV0dG9uKSA9PiB2b2lkO1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXIoKTtcblxuICAgICAgICBpZiAodGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2soKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3NzU3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsaWNrKCkge1xuICAgICAgICBpZiAodGhpcy5vbkNsaWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25DbGljayh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBzdGF0ZSgpOiBBY3Rpb25CdXR0b25TdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9XG5cbiAgICBzZXQgc3RhdGUodmFsdWU6IEFjdGlvbkJ1dHRvblN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gdmFsdWU7XG5cbiAgICAgICAgdGhpcy51cGRhdGVDc3NTdHlsZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IHR5cGUgQWN0aW9uVHlwZSA9IHsgbmV3KCk6IEFjdGlvbiB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWN0aW9uIGV4dGVuZHMgQ2FyZE9iamVjdCB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHRpdGxlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ0aXRsZVwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaWNvblVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzEsIFwiaWNvblVybFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBWYWx1ZVNldFByb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8yLFxuICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgIFtcbiAgICAgICAgICAgIHsgdmFsdWU6IEVudW1zLkFjdGlvblN0eWxlLkRlZmF1bHQgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6IEVudW1zLkFjdGlvblN0eWxlLlBvc2l0aXZlIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5BY3Rpb25TdHlsZS5EZXN0cnVjdGl2ZSB9XG4gICAgICAgIF0sXG4gICAgICAgIEVudW1zLkFjdGlvblN0eWxlLkRlZmF1bHQpO1xuICAgIC8vIFRPRE86IFJldmlzZSB0aGlzIHdoZW4gZmluYWxpemluZyBpbnB1dCB2YWxpZGF0aW9uXG4gICAgc3RhdGljIHJlYWRvbmx5IGlnbm9yZUlucHV0VmFsaWRhdGlvblByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8zLCBcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiLCBmYWxzZSk7XG5cbiAgICBAcHJvcGVydHkoQWN0aW9uLnRpdGxlUHJvcGVydHkpXG4gICAgdGl0bGU/OiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoQWN0aW9uLmljb25VcmxQcm9wZXJ0eSlcbiAgICBpY29uVXJsPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KEFjdGlvbi5zdHlsZVByb3BlcnR5KVxuICAgIHN0eWxlOiBzdHJpbmcgPSBFbnVtcy5BY3Rpb25TdHlsZS5EZWZhdWx0O1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcml2YXRlIF9hY3Rpb25Db2xsZWN0aW9uPzogQWN0aW9uQ29sbGVjdGlvbjsgLy8gaG9sZCB0aGUgcmVmZXJlbmNlIHRvIGl0cyBhY3Rpb24gY29sbGVjdGlvblxuXG4gICAgcHJvdGVjdGVkIGFkZENzc0NsYXNzZXMoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsR2V0UmVmZXJlbmNlZElucHV0cygpOiBEaWN0aW9uYXJ5PElucHV0PiB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQcmVwYXJlRm9yRXhlY3V0aW9uKGlucHV0czogRGljdGlvbmFyeTxJbnB1dD4gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsVmFsaWRhdGVJbnB1dHMocmVmZXJlbmNlZElucHV0czogRGljdGlvbmFyeTxJbnB1dD4gfCB1bmRlZmluZWQpOiBJbnB1dFtdIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSW5wdXRbXSA9IFtdO1xuXG4gICAgICAgIGlmICghdGhpcy5pZ25vcmVJbnB1dFZhbGlkYXRpb24gJiYgcmVmZXJlbmNlZElucHV0cykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKHJlZmVyZW5jZWRJbnB1dHMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gcmVmZXJlbmNlZElucHV0c1trZXldO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC52YWxpZGF0ZVZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5wdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3VsZFNlcmlhbGl6ZShjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29udGV4dC5hY3Rpb25SZWdpc3RyeS5maW5kQnlOYW1lKHRoaXMuZ2V0SnNvblR5cGVOYW1lKCkpICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgb25FeGVjdXRlOiAoc2VuZGVyOiBBY3Rpb24pID0+IHZvaWQ7XG5cbiAgICBnZXRIcmVmKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIGdldEFyaWFSb2xlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImJ1dHRvblwiO1xuICAgIH1cblxuICAgIHVwZGF0ZUFjdGlvbkJ1dHRvbkNzc1N0eWxlKGFjdGlvbkJ1dHRvbkVsZW1lbnQ6IEhUTUxFbGVtZW50LCBidXR0b25TdGF0ZTogQWN0aW9uQnV0dG9uU3RhdGUgPSBBY3Rpb25CdXR0b25TdGF0ZS5Ob3JtYWwpOiB2b2lkIHtcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXG4gICAgfVxuXG4gICAgcGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ/OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gc3VwZXIucGFyc2Uoc291cmNlLCBjb250ZXh0ID8gY29udGV4dCA6IG5ldyBTZXJpYWxpemF0aW9uQ29udGV4dCgpKTtcbiAgICB9XG5cbiAgICB0b0pTT04oY29udGV4dD86IFNlcmlhbGl6YXRpb25Db250ZXh0KTogUHJvcGVydHlCYWcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gc3VwZXIudG9KU09OKGNvbnRleHQgPyBjb250ZXh0IDogbmV3IFNlcmlhbGl6YXRpb25Db250ZXh0KCkpO1xuICAgIH1cblxuICAgIHJlbmRlcihiYXNlQ3NzQ2xhc3M6IHN0cmluZyA9IFwiYWMtcHVzaEJ1dHRvblwiKSB7XG4gICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgZm9yIHBlcmZcbiAgICAgICAgbGV0IGhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XG5cbiAgICAgICAgbGV0IGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgICAgIHRoaXMuYWRkQ3NzQ2xhc3NlcyhidXR0b25FbGVtZW50KTtcblxuICAgICAgICBpZiAodGhpcy50aXRsZSkge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMudGl0bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uRWxlbWVudC50eXBlID0gXCJidXR0b25cIjtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCB0aGlzLmdldEFyaWFSb2xlKCkpO1xuXG4gICAgICAgIGxldCB0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aXRsZUVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB0aXRsZUVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xuXG4gICAgICAgIGlmICghKGhvc3RDb25maWcuYWN0aW9ucy5pY29uUGxhY2VtZW50ID09IEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQuQWJvdmVUaXRsZSB8fCBob3N0Q29uZmlnLmFjdGlvbnMuYWxsb3dUaXRsZVRvV3JhcCkpIHtcbiAgICAgICAgICAgIHRpdGxlRWxlbWVudC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XG4gICAgICAgICAgICB0aXRsZUVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy50aXRsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pY29uVXJsKSB7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJub0ljb25cIik7XG5cbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGl0bGVFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICBpY29uRWxlbWVudC5zcmMgPSB0aGlzLmljb25Vcmw7XG4gICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS53aWR0aCA9IGhvc3RDb25maWcuYWN0aW9ucy5pY29uU2l6ZSArIFwicHhcIjtcbiAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmhlaWdodCA9IGhvc3RDb25maWcuYWN0aW9ucy5pY29uU2l6ZSArIFwicHhcIjtcbiAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XG5cbiAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuaWNvblBsYWNlbWVudCA9PSBFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LkFib3ZlVGl0bGUpIHtcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpY29uQWJvdmVcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNnB4XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaWNvbkxlZnRcIik7XG5cbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBcIjEwMCVcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI2cHhcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoaWNvbkVsZW1lbnQpO1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZCh0aXRsZUVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gYnV0dG9uRWxlbWVudDtcbiAgICB9XG5cbiAgICBleGVjdXRlKCkge1xuICAgICAgICBpZiAodGhpcy5vbkV4ZWN1dGUpIHtcbiAgICAgICAgICAgIHRoaXMub25FeGVjdXRlKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFpc2VFeGVjdXRlQWN0aW9uRXZlbnQodGhpcyk7XG4gICAgfVxuXG4gICAgcHJlcGFyZUZvckV4ZWN1dGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHJlZmVyZW5jZWRJbnB1dHMgPSB0aGlzLmdldFJlZmVyZW5jZWRJbnB1dHMoKTtcbiAgICAgICAgbGV0IGludmFsaWRJbnB1dHMgPSB0aGlzLmludGVybmFsVmFsaWRhdGVJbnB1dHMocmVmZXJlbmNlZElucHV0cyk7XG5cbiAgICAgICAgaWYgKGludmFsaWRJbnB1dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW52YWxpZElucHV0c1swXS5mb2N1cygpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludGVybmFsUHJlcGFyZUZvckV4ZWN1dGlvbihyZWZlcmVuY2VkSW5wdXRzKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmVtb3ZlKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVtb3ZlQWN0aW9uKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9uczogYm9vbGVhbiA9IHRydWUpOiBJbnB1dFtdIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljb25VcmwgPyBbeyB1cmw6IHRoaXMuaWNvblVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9XSA6IFtdO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkID09PSBpZCA/IHRoaXMgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0UmVmZXJlbmNlZElucHV0cygpOiBEaWN0aW9uYXJ5PElucHV0PiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsR2V0UmVmZXJlbmNlZElucHV0cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgaW5wdXRzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFjdGlvbi5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIGxpc3Qgb2YgaW5wdXRzIHRoYXQgZmFpbGVkIHZhbGlkYXRpb24sIG9yIGFuIGVtcHR5IGFycmF5IGlmIG5vIGlucHV0IGZhaWxlZCB2YWxpZGF0aW9uLlxuICAgICAqL1xuICAgIHZhbGlkYXRlSW5wdXRzKCk6IElucHV0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbGlkYXRlSW5wdXRzKHRoaXMuZ2V0UmVmZXJlbmNlZElucHV0cygpKTtcbiAgICB9XG5cbiAgICBnZXQgaXNQcmltYXJ5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZSA9PSBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZTtcbiAgICB9XG5cbiAgICBzZXQgaXNQcmltYXJ5KHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IEVudW1zLkFjdGlvblN0eWxlLlBvc2l0aXZlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUgPT0gRW51bXMuQWN0aW9uU3R5bGUuUG9zaXRpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlID0gRW51bXMuQWN0aW9uU3R5bGUuRGVmYXVsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBpZ25vcmVJbnB1dFZhbGlkYXRpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldCBob3N0Q29uZmlnKCk6IEhvc3RDb25maWcge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5ob3N0Q29uZmlnIDogZGVmYXVsdEhvc3RDb25maWc7XG4gICAgfVxuXG4gICAgZ2V0IHBhcmVudCgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiA8Q2FyZEVsZW1lbnQ+dGhpcy5fcGFyZW50O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN1Ym1pdEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IGRhdGFQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eURlZmluaXRpb24oVmVyc2lvbnMudjFfMCwgXCJkYXRhXCIpO1xuXG4gICAgQHByb3BlcnR5KFN1Ym1pdEFjdGlvbi5kYXRhUHJvcGVydHkpXG4gICAgcHJpdmF0ZSBfb3JpZ2luYWxEYXRhPzogUHJvcGVydHlCYWc7XG5cbiAgICBAcHJvcGVydHkoQWN0aW9uLmlnbm9yZUlucHV0VmFsaWRhdGlvblByb3BlcnR5KVxuICAgIHByaXZhdGUgX2lnbm9yZUlucHV0VmFsaWRhdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICAvLyBOb3RlIHRoZSBcIndlaXJkXCIgd2F5IHRoaXMgZmllbGQgaXMgZGVjbGFyZWQgaXMgdG8gd29yayBhcm91bmQgYSBicmVha2luZ1xuICAgIC8vIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXG4gICAgc3RhdGljIHJlYWRvbmx5IEpzb25UeXBlTmFtZTogXCJBY3Rpb24uU3VibWl0XCIgPSBcIkFjdGlvbi5TdWJtaXRcIjtcblxuICAgIHByaXZhdGUgX2lzUHJlcGFyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9wcm9jZXNzZWREYXRhPzogUHJvcGVydHlCYWc7XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRSZWZlcmVuY2VkSW5wdXRzKCk6IERpY3Rpb25hcnk8SW5wdXQ+IHtcbiAgICAgICAgbGV0IHJlc3VsdDogRGljdGlvbmFyeTxJbnB1dD4gPSB7fTtcbiAgICAgICAgbGV0IGN1cnJlbnQ6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGxldCBpbnB1dHM6IElucHV0W10gPSBbXTtcblxuICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgaW5wdXRzID0gaW5wdXRzLmNvbmNhdChjdXJyZW50LmdldEFsbElucHV0cyhmYWxzZSkpO1xuXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5pZCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpbnB1dC5pZF0gPSBpbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUHJlcGFyZUZvckV4ZWN1dGlvbihpbnB1dHM6IERpY3Rpb25hcnk8SW5wdXQ+IHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcmlnaW5hbERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NlZERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuX29yaWdpbmFsRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkRGF0YSA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3Byb2Nlc3NlZERhdGEgJiYgaW5wdXRzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXRzKSkge1xuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IGlucHV0c1trZXldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NlZERhdGFbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNQcmVwYXJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBTdWJtaXRBY3Rpb24uSnNvblR5cGVOYW1lO1xuICAgIH1cblxuICAgIGdldCBpZ25vcmVJbnB1dFZhbGlkYXRpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb247XG4gICAgfVxuXG4gICAgc2V0IGlnbm9yZUlucHV0VmFsaWRhdGlvbih2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb24gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZGF0YSgpOiBvYmplY3QgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNQcmVwYXJlZCA/IHRoaXMuX3Byb2Nlc3NlZERhdGEgOiB0aGlzLl9vcmlnaW5hbERhdGE7XG4gICAgfVxuXG4gICAgc2V0IGRhdGEodmFsdWU6IG9iamVjdCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vcmlnaW5hbERhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5faXNQcmVwYXJlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE9wZW5VcmxBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB1cmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcblxuICAgIEBwcm9wZXJ0eShPcGVuVXJsQWN0aW9uLnVybFByb3BlcnR5KVxuICAgIHVybD86IHN0cmluZztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgLy8gTm90ZSB0aGUgXCJ3ZWlyZFwiIHdheSB0aGlzIGZpZWxkIGlzIGRlY2xhcmVkIGlzIHRvIHdvcmsgYXJvdW5kIGEgYnJlYWtpbmdcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxuICAgIHN0YXRpYyByZWFkb25seSBKc29uVHlwZU5hbWU6IFwiQWN0aW9uLk9wZW5VcmxcIiA9IFwiQWN0aW9uLk9wZW5VcmxcIjtcblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gT3BlblVybEFjdGlvbi5Kc29uVHlwZU5hbWU7XG4gICAgfVxuXG4gICAgZ2V0QXJpYVJvbGUoKSA6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImxpbmtcIjtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBpZiAoIXRoaXMudXJsKSB7XG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuUHJvcGVydHlDYW50QmVOdWxsLFxuICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLnByb3BlcnR5TXVzdEJlU2V0KFwidXJsXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEhyZWYoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRvZ2dsZVZpc2liaWxpdHlBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB0YXJnZXRFbGVtZW50c1Byb3BlcnR5ID0gbmV3IEN1c3RvbVByb3BlcnR5PFByb3BlcnR5QmFnPihcbiAgICAgICAgVmVyc2lvbnMudjFfMixcbiAgICAgICAgXCJ0YXJnZXRFbGVtZW50c1wiLFxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdDogUHJvcGVydHlCYWcgPSB7fVxuXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2VbcHJvcGVydHkubmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBzb3VyY2VbcHJvcGVydHkubmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50SWQgPSBpdGVtW1wiZWxlbWVudElkXCJdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtlbGVtZW50SWRdID0gVXRpbHMucGFyc2VCb29sKGl0ZW1bXCJpc1Zpc2libGVcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0RWxlbWVudHM6IGFueVtdID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGlkIG9mIE9iamVjdC5rZXlzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWVbaWRdID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlOiB2YWx1ZVtpZF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnRzLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVBcnJheSh0YXJnZXQsIHByb3BlcnR5Lm5hbWUsIHRhcmdldEVsZW1lbnRzKTtcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4geyByZXR1cm4ge307IH0pO1xuXG4gICAgQHByb3BlcnR5KFRvZ2dsZVZpc2liaWxpdHlBY3Rpb24udGFyZ2V0RWxlbWVudHNQcm9wZXJ0eSlcbiAgICB0YXJnZXRFbGVtZW50czogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICAvLyBOb3RlIHRoZSBcIndlaXJkXCIgd2F5IHRoaXMgZmllbGQgaXMgZGVjbGFyZWQgaXMgdG8gd29yayBhcm91bmQgYSBicmVha2luZ1xuICAgIC8vIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXG4gICAgc3RhdGljIHJlYWRvbmx5IEpzb25UeXBlTmFtZTogXCJBY3Rpb24uVG9nZ2xlVmlzaWJpbGl0eVwiID0gXCJBY3Rpb24uVG9nZ2xlVmlzaWJpbGl0eVwiO1xuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLkpzb25UeXBlTmFtZTtcbiAgICB9XG5cbiAgICBleGVjdXRlKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGVsZW1lbnRJZCBvZiBPYmplY3Qua2V5cyh0aGlzLnRhcmdldEVsZW1lbnRzKSkge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF0gPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LmlzVmlzaWJsZSA9IHRoaXMudGFyZ2V0RWxlbWVudHNbZWxlbWVudElkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuaXNWaXNpYmxlID0gIXRhcmdldEVsZW1lbnQuaXNWaXNpYmxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkVGFyZ2V0RWxlbWVudChlbGVtZW50SWQ6IHN0cmluZywgaXNWaXNpYmxlOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudHNbZWxlbWVudElkXSA9IGlzVmlzaWJsZTtcbiAgICB9XG5cbiAgICByZW1vdmVUYXJnZXRFbGVtZW50KGVsZW1lbnRJZDogc3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF07XG4gICAgfVxufVxuXG5jbGFzcyBTdHJpbmdXaXRoU3Vic3RpdHV0aW9uUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24gIHtcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zKCk7XG4gICAgICAgIHJlc3VsdC5zZXQoVXRpbHMucGFyc2VTdHJpbmcoc291cmNlW3RoaXMubmFtZV0pKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHRoaXMubmFtZSwgdmFsdWUuZ2V0T3JpZ2luYWwoKSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZykge1xuICAgICAgICBzdXBlcih0YXJnZXRWZXJzaW9uLCBuYW1lLCB1bmRlZmluZWQsICgpID0+IHsgcmV0dXJuIG5ldyBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucygpOyB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBIdHRwSGVhZGVyIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgbmFtZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibmFtZVwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdXaXRoU3Vic3RpdHV0aW9uUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZVwiKTtcblxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiSHR0cEhlYWRlclwiO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShIdHRwSGVhZGVyLm5hbWVQcm9wZXJ0eSlcbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICBAcHJvcGVydHkoSHR0cEhlYWRlci52YWx1ZVByb3BlcnR5KVxuICAgIHByaXZhdGUgX3ZhbHVlOiBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nID0gXCJcIiwgdmFsdWU6IHN0cmluZyA9IFwiXCIpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0UmVmZXJlbmNlZElucHV0cyhpbnB1dHM6IElucHV0W10sIHJlZmVyZW5jZWRJbnB1dHM6IERpY3Rpb25hcnk8SW5wdXQ+KSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlLmdldFJlZmVyZW5jZWRJbnB1dHMoaW5wdXRzLCByZWZlcmVuY2VkSW5wdXRzKTtcbiAgICB9XG5cbiAgICBwcmVwYXJlRm9yRXhlY3V0aW9uKGlucHV0czogRGljdGlvbmFyeTxJbnB1dD4pIHtcbiAgICAgICAgdGhpcy5fdmFsdWUuc3Vic3RpdHV0ZUlucHV0VmFsdWVzKGlucHV0cywgQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKTtcbiAgICB9XG5cbiAgICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlLmdldCgpO1xuICAgIH1cblxuICAgIHNldCB2YWx1ZShuZXdWYWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlLnNldChuZXdWYWx1ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSHR0cEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInVybFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgYm9keVByb3BlcnR5ID0gbmV3IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25Qcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcImJvZHlcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1ldGhvZFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwibWV0aG9kXCIpO1xuICAgIHN0YXRpYyByZWFkb25seSBoZWFkZXJzUHJvcGVydHkgPSBuZXcgU2VyaWFsaXphYmxlT2JqZWN0Q29sbGVjdGlvblByb3BlcnR5KFZlcnNpb25zLnYxXzAsIFwiaGVhZGVyc1wiLCBIdHRwSGVhZGVyKTtcblxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xuXG4gICAgICAgIHNjaGVtYS5hZGQoQWN0aW9uLmlnbm9yZUlucHV0VmFsaWRhdGlvblByb3BlcnR5KTtcbiAgICB9XG5cbiAgICBAcHJvcGVydHkoSHR0cEFjdGlvbi51cmxQcm9wZXJ0eSlcbiAgICBwcml2YXRlIF91cmw6IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zO1xuXG4gICAgQHByb3BlcnR5KEh0dHBBY3Rpb24uYm9keVByb3BlcnR5KVxuICAgIHByaXZhdGUgX2JvZHk6IFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zO1xuXG4gICAgQHByb3BlcnR5KEh0dHBBY3Rpb24ubWV0aG9kUHJvcGVydHkpXG4gICAgbWV0aG9kPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KEh0dHBBY3Rpb24uaGVhZGVyc1Byb3BlcnR5KVxuICAgIGhlYWRlcnM6IEh0dHBIZWFkZXJbXTtcblxuICAgIEBwcm9wZXJ0eShBY3Rpb24uaWdub3JlSW5wdXRWYWxpZGF0aW9uUHJvcGVydHkpXG4gICAgcHJpdmF0ZSBfaWdub3JlSW5wdXRWYWxpZGF0aW9uOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXG4gICAgLy8gY2hhbmdlIGludHJvZHVjZWQgaW4gVFMgMy4xIHdydCBkLnRzIGdlbmVyYXRpb24uIERPIE5PVCBDSEFOR0VcbiAgICBzdGF0aWMgcmVhZG9ubHkgSnNvblR5cGVOYW1lOiBcIkFjdGlvbi5IdHRwXCIgPSBcIkFjdGlvbi5IdHRwXCI7XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRSZWZlcmVuY2VkSW5wdXRzKCk6IERpY3Rpb25hcnk8SW5wdXQ+IHtcbiAgICAgICAgbGV0IGFsbElucHV0cyA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRBbGxJbnB1dHMoKSA6IFtdO1xuICAgICAgICBsZXQgcmVzdWx0OiBEaWN0aW9uYXJ5PElucHV0PiA9IHt9O1xuXG4gICAgICAgIHRoaXMuX3VybC5nZXRSZWZlcmVuY2VkSW5wdXRzKGFsbElucHV0cywgcmVzdWx0KTtcblxuICAgICAgICBmb3IgKGxldCBoZWFkZXIgb2YgdGhpcy5oZWFkZXJzKSB7XG4gICAgICAgICAgICBoZWFkZXIuZ2V0UmVmZXJlbmNlZElucHV0cyhhbGxJbnB1dHMsIHJlc3VsdCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9ib2R5LmdldFJlZmVyZW5jZWRJbnB1dHMoYWxsSW5wdXRzLCByZXN1bHQpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUHJlcGFyZUZvckV4ZWN1dGlvbihpbnB1dHM6IERpY3Rpb25hcnk8SW5wdXQ+IHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChpbnB1dHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3VybC5zdWJzdGl0dXRlSW5wdXRWYWx1ZXMoaW5wdXRzLCBDb250ZW50VHlwZXMuYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQpO1xuXG4gICAgICAgICAgICBsZXQgY29udGVudFR5cGUgPSBDb250ZW50VHlwZXMuYXBwbGljYXRpb25Kc29uO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBoZWFkZXIgb2YgdGhpcy5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyLnByZXBhcmVGb3JFeGVjdXRpb24oaW5wdXRzKTtcblxuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIubmFtZSAmJiBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpID09IFwiY29udGVudC10eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSA8c3RyaW5nPmhlYWRlci52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2JvZHkuc3Vic3RpdHV0ZUlucHV0VmFsdWVzKGlucHV0cywgY29udGVudFR5cGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gSHR0cEFjdGlvbi5Kc29uVHlwZU5hbWU7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dDogVmFsaWRhdGlvblJlc3VsdHMpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnVybCkge1xuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlByb3BlcnR5Q2FudEJlTnVsbCxcbiAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5wcm9wZXJ0eU11c3RCZVNldChcInVybFwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5oZWFkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGhlYWRlciBvZiB0aGlzLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhlYWRlci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuUHJvcGVydHlDYW50QmVOdWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuYWN0aW9uSHR0cEhlYWRlcnNNdXN0SGF2ZU5hbWVBbmRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgaWdub3JlSW5wdXRWYWxpZGF0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uO1xuICAgIH1cblxuICAgIHNldCBpZ25vcmVJbnB1dFZhbGlkYXRpb24odmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHVybCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXJsLmdldCgpO1xuICAgIH1cblxuICAgIHNldCB1cmwodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl91cmwuc2V0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXQgYm9keSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9keS5nZXQoKTtcbiAgICB9XG5cbiAgICBzZXQgYm9keSh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2JvZHkuc2V0KHZhbHVlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaG93Q2FyZEFjdGlvbiBleHRlbmRzIEFjdGlvbiB7XG4gICAgLy8gTm90ZSB0aGUgXCJ3ZWlyZFwiIHdheSB0aGlzIGZpZWxkIGlzIGRlY2xhcmVkIGlzIHRvIHdvcmsgYXJvdW5kIGEgYnJlYWtpbmdcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxuICAgIHN0YXRpYyByZWFkb25seSBKc29uVHlwZU5hbWU6IFwiQWN0aW9uLlNob3dDYXJkXCIgPSBcIkFjdGlvbi5TaG93Q2FyZFwiO1xuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcblxuICAgICAgICBsZXQganNvbkNhcmQgPSBzb3VyY2VbXCJjYXJkXCJdO1xuXG4gICAgICAgIGlmIChqc29uQ2FyZCkge1xuICAgICAgICAgICAgdGhpcy5jYXJkLnBhcnNlKGpzb25DYXJkLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5Qcm9wZXJ0eUNhbnRCZU51bGwsXG4gICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuc2hvd0NhcmRNdXN0SGF2ZUNhcmQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxUb0pTT04odGFyZ2V0LCBjb250ZXh0KTtcblxuICAgICAgICBpZiAodGhpcy5jYXJkKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKHRhcmdldCwgXCJjYXJkXCIsIHRoaXMuY2FyZC50b0pTT04oY29udGV4dCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFkZENzc0NsYXNzZXMoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIuYWRkQ3NzQ2xhc3NlcyhlbGVtZW50KTtcblxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnBhcmVudC5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJleHBhbmRhYmxlXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWRvbmx5IGNhcmQ6IEFkYXB0aXZlQ2FyZCA9IG5ldyBJbmxpbmVBZGFwdGl2ZUNhcmQoKTtcblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lO1xuICAgIH1cblxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuY2FyZC5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcbiAgICB9XG5cbiAgICB1cGRhdGVBY3Rpb25CdXR0b25Dc3NTdHlsZShhY3Rpb25CdXR0b25FbGVtZW50OiBIVE1MRWxlbWVudCwgYnV0dG9uU3RhdGU6IEFjdGlvbkJ1dHRvblN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZUFjdGlvbkJ1dHRvbkNzc1N0eWxlKGFjdGlvbkJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgYWN0aW9uQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMucGFyZW50Lmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGFibGVcIikpO1xuICAgICAgICAgICAgYWN0aW9uQnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIChidXR0b25TdGF0ZSA9PT0gQWN0aW9uQnV0dG9uU3RhdGUuRXhwYW5kZWQpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UGFyZW50KHZhbHVlOiBDYXJkRWxlbWVudCkge1xuICAgICAgICBzdXBlci5zZXRQYXJlbnQodmFsdWUpO1xuXG4gICAgICAgIHRoaXMuY2FyZC5zZXRQYXJlbnQodmFsdWUpO1xuICAgIH1cblxuICAgIGdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9uczogYm9vbGVhbiA9IHRydWUpOiBJbnB1dFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FyZC5nZXRBbGxJbnB1dHMocHJvY2Vzc0FjdGlvbnMpO1xuICAgIH1cblxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkuY29uY2F0KHRoaXMuY2FyZC5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkpO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcblxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jYXJkLmdldEFjdGlvbkJ5SWQoaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5cbmNsYXNzIEFjdGlvbkNvbGxlY3Rpb24ge1xuICAgIHByaXZhdGUgX293bmVyOiBDYXJkRWxlbWVudDtcbiAgICBwcml2YXRlIF9hY3Rpb25DYXJkQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIF9leHBhbmRlZEFjdGlvbj86IFNob3dDYXJkQWN0aW9uO1xuICAgIHByaXZhdGUgX3JlbmRlcmVkQWN0aW9uQ291bnQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfYWN0aW9uQ2FyZD86IEhUTUxFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBpc0FjdGlvbkFsbG93ZWQoYWN0aW9uOiBBY3Rpb24pOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGZvcmJpZGRlblR5cGVzID0gdGhpcy5fb3duZXIuZ2V0Rm9yYmlkZGVuQWN0aW9uVHlwZXMoKTtcblxuICAgICAgICBpZiAoZm9yYmlkZGVuVHlwZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGZvcmJpZGRlblR5cGUgb2YgZm9yYmlkZGVuVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmNvbnN0cnVjdG9yID09PSBmb3JiaWRkZW5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2hDb250YWluZXIoKSB7XG4gICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICBpZiAoIXRoaXMuX2FjdGlvbkNhcmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZENvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSB0aGlzLl9yZW5kZXJlZEFjdGlvbkNvdW50ID4gMCA/IHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5zaG93Q2FyZC5pbmxpbmVUb3BNYXJnaW4gKyBcInB4XCIgOiBcIjBweFwiO1xuXG4gICAgICAgIGxldCBwYWRkaW5nID0gdGhpcy5fb3duZXIuZ2V0RWZmZWN0aXZlUGFkZGluZygpO1xuXG4gICAgICAgIHRoaXMuX293bmVyLmdldEltbWVkaWF0ZVN1cnJvdW5kaW5nUGFkZGluZyhwYWRkaW5nKTtcblxuICAgICAgICBsZXQgcGh5c2ljYWxQYWRkaW5nID0gdGhpcy5fb3duZXIuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZyk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNhcmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUucGFkZGluZ0xlZnQgPSBwaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25DYXJkLnN0eWxlLm1hcmdpbkxlZnQgPSBcIi1cIiArIHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICBpZiAocGh5c2ljYWxQYWRkaW5nLmJvdHRvbSAhPSAwICYmICF0aGlzLl9vd25lci5pc0Rlc2lnbk1vZGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IHBoeXNpY2FsUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIi1cIiArIHBoeXNpY2FsUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIsIHRoaXMuX2FjdGlvbkNhcmQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsYXlvdXRDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLl9vd25lci5nZXRSb290RWxlbWVudCgpLnVwZGF0ZUxheW91dCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZUFjdGlvbkNhcmQoKSB7XG4gICAgICAgIGxldCBwcmV2aW91c2x5RXhwYW5kZWRBY3Rpb24gPSB0aGlzLl9leHBhbmRlZEFjdGlvbjtcblxuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnJlZnJlc2hDb250YWluZXIoKTtcblxuICAgICAgICBpZiAocHJldmlvdXNseUV4cGFuZGVkQWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dENoYW5nZWQoKTtcblxuICAgICAgICAgICAgcmFpc2VJbmxpbmVDYXJkRXhwYW5kZWRFdmVudChwcmV2aW91c2x5RXhwYW5kZWRBY3Rpb24sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0FjdGlvbkNhcmQoYWN0aW9uOiBTaG93Q2FyZEFjdGlvbiwgc3VwcHJlc3NTdHlsZTogYm9vbGVhbiA9IGZhbHNlLCByYWlzZUV2ZW50OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAoPElubGluZUFkYXB0aXZlQ2FyZD5hY3Rpb24uY2FyZCkuc3VwcHJlc3NTdHlsZSA9IHN1cHByZXNzU3R5bGU7XG5cbiAgICAgICAgLy8gQWx3YXlzIHJlLXJlbmRlciBhIFNob3dDYXJkIGFjdGlvbiBpbiBkZXNpZ24gbW9kZTsgcmV1c2UgYWxyZWFkeSByZW5kZXJlZCBTaG93Q2FyZCAoaWYgYXZhaWxhYmxlKSBvdGhlcndpc2VcbiAgICAgICAgbGV0IHJlbmRlcmVkQ2FyZCA9IGFjdGlvbi5jYXJkLnJlbmRlcmVkRWxlbWVudCAmJiAhdGhpcy5fb3duZXIuaXNEZXNpZ25Nb2RlKCkgPyBhY3Rpb24uY2FyZC5yZW5kZXJlZEVsZW1lbnQgOiBhY3Rpb24uY2FyZC5yZW5kZXIoKTtcblxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkID0gcmVuZGVyZWRDYXJkO1xuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IGFjdGlvbjtcblxuICAgICAgICB0aGlzLnJlZnJlc2hDb250YWluZXIoKTtcblxuICAgICAgICBpZiAocmFpc2VFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRDaGFuZ2VkKCk7XG5cbiAgICAgICAgICAgIHJhaXNlSW5saW5lQ2FyZEV4cGFuZGVkRXZlbnQoYWN0aW9uLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY29sbGFwc2VFeHBhbmRlZEFjdGlvbigpIHtcbiAgICAgICAgZm9yIChsZXQgYnV0dG9uIG9mIHRoaXMuYnV0dG9ucykge1xuICAgICAgICAgICAgYnV0dG9uLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5oaWRlQWN0aW9uQ2FyZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZXhwYW5kU2hvd0NhcmRBY3Rpb24oYWN0aW9uOiBTaG93Q2FyZEFjdGlvbiwgcmFpc2VFdmVudDogYm9vbGVhbikge1xuICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBpZiAoYnV0dG9uLmFjdGlvbiAhPT0gYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuU3ViZHVlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLkV4cGFuZGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG93QWN0aW9uQ2FyZChcbiAgICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICAgICEodGhpcy5fb3duZXIuaXNBdFRoZVZlcnlMZWZ0KCkgJiYgdGhpcy5fb3duZXIuaXNBdFRoZVZlcnlSaWdodCgpKSxcbiAgICAgICAgICAgIHJhaXNlRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWN0aW9uQ2xpY2tlZChhY3Rpb25CdXR0b246IEFjdGlvbkJ1dHRvbikge1xuICAgICAgICBpZiAoIShhY3Rpb25CdXR0b24uYWN0aW9uIGluc3RhbmNlb2YgU2hvd0NhcmRBY3Rpb24pKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmhpZGVBY3Rpb25DYXJkKCk7XG5cbiAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5zaG93Q2FyZC5hY3Rpb25Nb2RlID09PSBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGUuUG9wdXApIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWN0aW9uLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbkJ1dHRvbi5hY3Rpb24gPT09IHRoaXMuX2V4cGFuZGVkQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUV4cGFuZGVkQWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZFNob3dDYXJkQWN0aW9uKGFjdGlvbkJ1dHRvbi5hY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXJlbnRDb250YWluZXIoKTogQ29udGFpbmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMuX293bmVyIGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuZ2V0UGFyZW50Q29udGFpbmVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbmRBY3Rpb25CdXR0b24oYWN0aW9uOiBBY3Rpb24pOiBBY3Rpb25CdXR0b24gfCB1bmRlZmluZWQge1xuICAgICAgICBmb3IgKGxldCBhY3Rpb25CdXR0b24gb2YgdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBpZiAoYWN0aW9uQnV0dG9uLmFjdGlvbiA9PSBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uQnV0dG9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpdGVtczogQWN0aW9uW10gPSBbXTtcbiAgICBidXR0b25zOiBBY3Rpb25CdXR0b25bXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3Iob3duZXI6IENhcmRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XG4gICAgfVxuXG4gICAgcGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqc29uQWN0aW9uIG9mIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPSBjb250ZXh0LnBhcnNlQWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lcixcbiAgICAgICAgICAgICAgICAgICAganNvbkFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW10sXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLl9vd25lci5pc0Rlc2lnbk1vZGUoKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aW9uKGFjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9KU09OKHRhcmdldDogUHJvcGVydHlCYWcsIHByb3BlcnR5TmFtZTogc3RyaW5nLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IGFueSB7XG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplQXJyYXkodGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIHRoaXMuaXRlbXMpO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCByZXN1bHQ6IEFjdGlvbiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW0uZ2V0QWN0aW9uQnlJZChpZCk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XG4gICAgICAgIGlmICh0aGlzLl9vd25lci5ob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucyAmJiB0aGlzLml0ZW1zLmxlbmd0aCA+IHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zKSB7XG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIsXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlRvb01hbnlBY3Rpb25zLFxuICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLnRvb01hbnlBY3Rpb25zKHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwICYmICF0aGlzLl9vd25lci5ob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSkge1xuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLFxuICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcbiAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aW9uQWxsb3dlZChpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5BY3Rpb25UeXBlTm90QWxsb3dlZCxcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuYWN0aW9uVHlwZU5vdEFsbG93ZWQoaXRlbS5nZXRKc29uVHlwZU5hbWUoKSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKG9yaWVudGF0aW9uOiBFbnVtcy5PcmllbnRhdGlvbiwgaXNEZXNpZ25Nb2RlOiBib29sZWFuKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICAvLyBDYWNoZSBob3N0Q29uZmlnIGZvciBiZXR0ZXIgcGVyZlxuICAgICAgICBsZXQgaG9zdENvbmZpZyA9IHRoaXMuX293bmVyLmhvc3RDb25maWc7XG5cbiAgICAgICAgaWYgKCFob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbGV0IG1heEFjdGlvbnMgPSBob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucyA/IE1hdGgubWluKGhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zLCB0aGlzLml0ZW1zLmxlbmd0aCkgOiB0aGlzLml0ZW1zLmxlbmd0aDtcblxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XG5cbiAgICAgICAgaWYgKGhvc3RDb25maWcuYWN0aW9ucy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbiAmJiBtYXhBY3Rpb25zID09IDEgJiYgdGhpcy5pdGVtc1swXSBpbnN0YW5jZW9mIFNob3dDYXJkQWN0aW9uICYmIHRoaXMuaXNBY3Rpb25BbGxvd2VkKHRoaXMuaXRlbXNbMF0pKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dBY3Rpb25DYXJkKDxTaG93Q2FyZEFjdGlvbj50aGlzLml0ZW1zWzBdLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkQWN0aW9uQ291bnQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGJ1dHRvblN0cmlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwLmNsYXNzTmFtZSA9IGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWFjdGlvblNldFwiKTtcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJncm91cFwiKTtcblxuICAgICAgICAgICAgaWYgKG9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJyb3dcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vd25lci5ob3Jpem9udGFsQWxpZ25tZW50ICYmIGhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25BbGlnbm1lbnQgIT0gRW51bXMuQWN0aW9uQWxpZ25tZW50LlN0cmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9vd25lci5ob3Jpem9udGFsQWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtc3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LXN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vd25lci5ob3Jpem9udGFsQWxpZ25tZW50ICYmIGhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25BbGlnbm1lbnQgIT0gRW51bXMuQWN0aW9uQWxpZ25tZW50LlN0cmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9vd25lci5ob3Jpem9udGFsQWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtZW5kXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LWVuZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJzdHJldGNoXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHBhcmVudENvbnRhaW5lciA9IHRoaXMuZ2V0UGFyZW50Q29udGFpbmVyKCk7XG5cbiAgICAgICAgICAgIGlmIChwYXJlbnRDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50Q29udGFpbmVyU3R5bGUgPSBwYXJlbnRDb250YWluZXIuZ2V0RWZmZWN0aXZlU3R5bGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93ZWRBY3Rpb25zID0gdGhpcy5pdGVtcy5maWx0ZXIodGhpcy5pc0FjdGlvbkFsbG93ZWQuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbG93ZWRBY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpb25CdXR0b24gPSB0aGlzLmZpbmRBY3Rpb25CdXR0b24oYWxsb3dlZEFjdGlvbnNbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghYWN0aW9uQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24gPSBuZXcgQWN0aW9uQnV0dG9uKGFsbG93ZWRBY3Rpb25zW2ldLCBwYXJlbnRDb250YWluZXJTdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24ub25DbGljayA9IChhYikgPT4geyB0aGlzLmFjdGlvbkNsaWNrZWQoYWIpOyB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnMucHVzaChhY3Rpb25CdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25CdXR0b24uYWN0aW9uLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1wb3NpbnNldFwiLCAoaSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1zZXRzaXplXCIsIGFsbG93ZWRBY3Rpb25zLmxlbmd0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJsaXN0aXRlbVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25zT3JpZW50YXRpb24gPT0gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCAmJiBob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50ID09IEVudW1zLkFjdGlvbkFsaWdubWVudC5TdHJldGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAxIDEwMCVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMSBhdXRvXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLmFwcGVuZENoaWxkKGFjdGlvbkJ1dHRvbi5hY3Rpb24ucmVuZGVyZWRFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA+PSBob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucyB8fCBpID09IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaG9zdENvbmZpZy5hY3Rpb25zLmJ1dHRvblNwYWNpbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VyLnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5zdHlsZS53aWR0aCA9IGhvc3RDb25maWcuYWN0aW9ucy5idXR0b25TcGFjaW5nICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VyLnN0eWxlLmhlaWdodCA9IGhvc3RDb25maWcuYWN0aW9ucy5idXR0b25TcGFjaW5nICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGJ1dHRvblN0cmlwLCBzcGFjZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgYnV0dG9uU3RyaXBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgYnV0dG9uU3RyaXBDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgYnV0dG9uU3RyaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uU3RyaXApO1xuXG4gICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBidXR0b25TdHJpcENvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0aGlzLl9hY3Rpb25DYXJkQ29udGFpbmVyKTtcblxuICAgICAgICBmb3IgKGxldCBidXR0b24gb2YgdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBpZiAoYnV0dG9uLnN0YXRlID09IEFjdGlvbkJ1dHRvblN0YXRlLkV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRTaG93Q2FyZEFjdGlvbig8U2hvd0NhcmRBY3Rpb24+YnV0dG9uLmFjdGlvbiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA+IDAgPyBlbGVtZW50IDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGFkZEFjdGlvbihhY3Rpb246IEFjdGlvbikge1xuICAgICAgICBpZiAoIWFjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGFjdGlvbiBwYXJhbWV0ZXIgY2Fubm90IGJlIG51bGwuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCghYWN0aW9uLnBhcmVudCB8fCBhY3Rpb24ucGFyZW50ID09PSB0aGlzLl9vd25lcikgJiYgdGhpcy5pdGVtcy5pbmRleE9mKGFjdGlvbikgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goYWN0aW9uKTtcblxuICAgICAgICAgICAgaWYgKCFhY3Rpb24ucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uLnNldFBhcmVudCh0aGlzLl9vd25lcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFjdGlvbltcIl9hY3Rpb25Db2xsZWN0aW9uXCJdID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmdzLmVycm9ycy5hY3Rpb25BbHJlYWR5UGFyZW50ZWQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVBY3Rpb24oYWN0aW9uOiBBY3Rpb24pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRBY3Rpb24gJiYgdGhpcy5fZXhwYW5kZWRBY3Rpb24gPT0gYWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlRXhwYW5kZWRBY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhY3Rpb25JbmRleCA9IHRoaXMuaXRlbXMuaW5kZXhPZihhY3Rpb24pO1xuXG4gICAgICAgIGlmIChhY3Rpb25JbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShhY3Rpb25JbmRleCwgMSk7XG5cbiAgICAgICAgICAgIGFjdGlvbi5zZXRQYXJlbnQodW5kZWZpbmVkKTtcblxuICAgICAgICAgICAgYWN0aW9uW1wiX2FjdGlvbkNvbGxlY3Rpb25cIl0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uc1tpXS5hY3Rpb24gPT0gYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9ucy5zcGxpY2UoaSwgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBbXTtcblxuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XG4gICAgfVxuXG4gICAgZ2V0QWxsSW5wdXRzKHByb2Nlc3NBY3Rpb25zOiBib29sZWFuID0gdHJ1ZSk6IElucHV0W10ge1xuICAgICAgICBsZXQgcmVzdWx0OiBJbnB1dFtdID0gW107XG5cbiAgICAgICAgaWYgKHByb2Nlc3NBY3Rpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBhY3Rpb24gb2YgdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoYWN0aW9uLmdldEFsbElucHV0cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpOiBJUmVzb3VyY2VJbmZvcm1hdGlvbltdIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSVJlc291cmNlSW5mb3JtYXRpb25bXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGFjdGlvbiBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFjdGlvbi5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXQgcmVuZGVyZWRBY3Rpb25Db3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudDtcbiAgICB9XG5cbiAgICBnZXQgZXhwYW5kZWRBY3Rpb24oKTogU2hvd0NhcmRBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kZWRBY3Rpb247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWN0aW9uU2V0IGV4dGVuZHMgQ2FyZEVsZW1lbnQge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSBvcmllbnRhdGlvblByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8xLCBcIm9yaWVudGF0aW9uXCIsIEVudW1zLk9yaWVudGF0aW9uKTtcblxuICAgIEBwcm9wZXJ0eShBY3Rpb25TZXQub3JpZW50YXRpb25Qcm9wZXJ0eSlcbiAgICBvcmllbnRhdGlvbj86IEVudW1zLk9yaWVudGF0aW9uO1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcml2YXRlIF9hY3Rpb25Db2xsZWN0aW9uOiBBY3Rpb25Db2xsZWN0aW9uO1xuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnBhcnNlKHNvdXJjZVtcImFjdGlvbnNcIl0sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFRvSlNPTih0YXJnZXQsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24udG9KU09OKHRhcmdldCwgXCJhY3Rpb25zXCIsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcih0aGlzLm9yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyB0aGlzLm9yaWVudGF0aW9uIDogdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uc09yaWVudGF0aW9uLCB0aGlzLmlzRGVzaWduTW9kZSgpKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uID0gbmV3IEFjdGlvbkNvbGxlY3Rpb24odGhpcyk7XG4gICAgfVxuXG4gICAgaXNCbGVlZGluZ0F0Qm90dG9tKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5yZW5kZXJlZEFjdGlvbkNvdW50ID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5pc0JsZWVkaW5nQXRCb3R0b20oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkFjdGlvblNldFwiO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXRBY3Rpb25BdChpbmRleDogbnVtYmVyKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmdldEFjdGlvbkNvdW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRBY3Rpb25BdChpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcbiAgICB9XG5cbiAgICBhZGRBY3Rpb24oYWN0aW9uOiBBY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5hZGRBY3Rpb24oYWN0aW9uKTtcbiAgICB9XG5cbiAgICBnZXRBbGxJbnB1dHMocHJvY2Vzc0FjdGlvbnM6IGJvb2xlYW4gPSB0cnVlKTogSW5wdXRbXSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzQWN0aW9ucyA/IHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0QWxsSW5wdXRzKCkgOiBbXTtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk7XG4gICAgfVxuXG4gICAgZ2V0IGlzSW50ZXJhY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIgZXh0ZW5kcyBDYXJkRWxlbWVudENvbnRhaW5lciB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgVmFsdWVTZXRQcm9wZXJ0eShcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcbiAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICBbXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0IH0sXG4gICAgICAgICAgICB7IHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpcyB9LFxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCB2YWx1ZTogRW51bXMuQ29udGFpbmVyU3R5bGUuQWNjZW50IH0sXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzIsIHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5Hb29kIH0sXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzIsIHZhbHVlOiBFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb24gfSxcbiAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMiwgdmFsdWU6IEVudW1zLkNvbnRhaW5lclN0eWxlLldhcm5pbmcgfVxuICAgICAgICBdKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgYmxlZWRQcm9wZXJ0eSA9IG5ldyBCb29sUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJibGVlZFwiLCBmYWxzZSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IG1pbkhlaWdodFByb3BlcnR5ID0gbmV3IFBpeGVsU2l6ZVByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwibWluSGVpZ2h0XCIpO1xuXG4gICAgQHByb3BlcnR5KFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIuc3R5bGVQcm9wZXJ0eSlcbiAgICBnZXQgc3R5bGUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dDdXN0b21TdHlsZSkge1xuICAgICAgICAgICAgbGV0IHN0eWxlID0gdGhpcy5nZXRWYWx1ZShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnN0eWxlUHJvcGVydHkpO1xuXG4gICAgICAgICAgICBpZiAoc3R5bGUgJiYgdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZShzdHlsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHNldCBzdHlsZSh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5zdHlsZVByb3BlcnR5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIuYmxlZWRQcm9wZXJ0eSlcbiAgICBwcml2YXRlIF9ibGVlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIubWluSGVpZ2h0UHJvcGVydHkpXG4gICAgbWluUGl4ZWxIZWlnaHQ/OiBudW1iZXI7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByb3RlY3RlZCBhZGp1c3RSZW5kZXJlZEVsZW1lbnRTaXplKHJlbmRlcmVkRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIuYWRqdXN0UmVuZGVyZWRFbGVtZW50U2l6ZShyZW5kZXJlZEVsZW1lbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLm1pblBpeGVsSGVpZ2h0KSB7XG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gdGhpcy5taW5QaXhlbEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBhcHBseUJhY2tncm91bmQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHN0eWxlRGVmaW5pdGlvbiA9IHRoaXMuaG9zdENvbmZpZy5jb250YWluZXJTdHlsZXMuZ2V0U3R5bGVCeU5hbWUodGhpcy5zdHlsZSwgdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZSh0aGlzLmRlZmF1bHRTdHlsZSkpO1xuXG4gICAgICAgICAgICBpZiAoc3R5bGVEZWZpbml0aW9uLmJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IDxzdHJpbmc+VXRpbHMuc3RyaW5nVG9Dc3NDb2xvcihzdHlsZURlZmluaXRpb24uYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBhcHBseVBhZGRpbmcoKSB7XG4gICAgICAgIHN1cGVyLmFwcGx5UGFkZGluZygpO1xuXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwaHlzaWNhbFBhZGRpbmcgPSBuZXcgU3BhY2luZ0RlZmluaXRpb24oKTtcblxuICAgICAgICBpZiAodGhpcy5nZXRFZmZlY3RpdmVQYWRkaW5nKCkpIHtcbiAgICAgICAgICAgIHBoeXNpY2FsUGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24odGhpcy5nZXRFZmZlY3RpdmVQYWRkaW5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcCA9IHBoeXNpY2FsUGFkZGluZy50b3AgKyBcInB4XCI7XG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IHBoeXNpY2FsUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gcGh5c2ljYWxQYWRkaW5nLmxlZnQgKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNCbGVlZGluZygpKSB7XG4gICAgICAgICAgICAvLyBCbGVlZCBpbnRvIHRoZSBmaXJzdCBwYXJlbnQgdGhhdCBkb2VzIGhhdmUgcGFkZGluZ1xuICAgICAgICAgICAgbGV0IHBhZGRpbmcgPSBuZXcgUGFkZGluZ0RlZmluaXRpb24oKTtcblxuICAgICAgICAgICAgdGhpcy5nZXRJbW1lZGlhdGVTdXJyb3VuZGluZ1BhZGRpbmcocGFkZGluZyk7XG5cbiAgICAgICAgICAgIGxldCBzdXJyb3VuZGluZ1BhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHBhZGRpbmcpO1xuXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLmxlZnQgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Rlc2lnbk1vZGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnRvcCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIi1cIiArIHN1cnJvdW5kaW5nUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlcGFyYXRvckVsZW1lbnQgJiYgdGhpcy5zZXBhcmF0b3JPcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIi1cIiArIHN1cnJvdW5kaW5nUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjBcIjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiMFwiO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIwXCI7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlcGFyYXRvckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiMFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEhhc0JhY2tncm91bmQoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBjdXJyZW50RWxlbWVudDogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQgPSB0aGlzLnBhcmVudDtcblxuICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50RWxlbWVudEhhc0JhY2tncm91bmRJbWFnZSA9IGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgQ29udGFpbmVyID8gY3VycmVudEVsZW1lbnQuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSA6IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzRXhwbGljaXRTdHlsZSAmJiAoY3VycmVudEVsZW1lbnQuZ2V0RWZmZWN0aXZlU3R5bGUoKSAhPSB0aGlzLmdldEVmZmVjdGl2ZVN0eWxlKCkgfHwgY3VycmVudEVsZW1lbnRIYXNCYWNrZ3JvdW5kSW1hZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldERlZmF1bHRQYWRkaW5nKCk6IFBhZGRpbmdEZWZpbml0aW9uIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGFzQmFja2dyb3VuZCgpID9cbiAgICAgICAgICAgIG5ldyBQYWRkaW5nRGVmaW5pdGlvbihcbiAgICAgICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXG4gICAgICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxuICAgICAgICAgICAgICAgIEVudW1zLlNwYWNpbmcuUGFkZGluZyxcbiAgICAgICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcpIDogc3VwZXIuZ2V0RGVmYXVsdFBhZGRpbmcoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0SGFzRXhwYW5kZWRBY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0QmxlZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibGVlZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0QmxlZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fYmxlZWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJlbmRlcmVkQWN0aW9uQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBoYXNFeHBsaWNpdFN0eWxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnN0eWxlUHJvcGVydHkpICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBhbGxvd0N1c3RvbVN0eWxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpc0JsZWVkaW5nKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAodGhpcy5nZXRIYXNCYWNrZ3JvdW5kKCkgfHwgdGhpcy5ob3N0Q29uZmlnLmFsd2F5c0FsbG93QmxlZWQpICYmIHRoaXMuZ2V0QmxlZWQoKTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBsZXQgZXhwbGljaXRTdHlsZSA9IHRoaXMuZ2V0VmFsdWUoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5zdHlsZVByb3BlcnR5KTtcblxuICAgICAgICBpZiAoZXhwbGljaXRTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGVEZWZpbml0aW9uID0gdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZShleHBsaWNpdFN0eWxlKTtcblxuICAgICAgICAgICAgaWYgKCFzdHlsZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuaW52YWxpZFByb3BlcnR5VmFsdWUoZXhwbGljaXRTdHlsZSwgXCJzdHlsZVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVuZGVyZWRFbGVtZW50ID0gc3VwZXIucmVuZGVyKCk7XG5cbiAgICAgICAgaWYgKHJlbmRlcmVkRWxlbWVudCAmJiB0aGlzLmdldEhhc0JhY2tncm91bmQoKSkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUJhY2tncm91bmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJlZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0RWZmZWN0aXZlU3R5bGUoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGVmZmVjdGl2ZVN0eWxlID0gdGhpcy5zdHlsZTtcblxuICAgICAgICByZXR1cm4gZWZmZWN0aXZlU3R5bGUgPyBlZmZlY3RpdmVTdHlsZSA6IHN1cGVyLmdldEVmZmVjdGl2ZVN0eWxlKCk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmFja2dyb3VuZEltYWdlIGV4dGVuZHMgU2VyaWFsaXphYmxlT2JqZWN0IHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgdXJsUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJ1cmxcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IGZpbGxNb2RlUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5KFZlcnNpb25zLnYxXzIsIFwiZmlsbE1vZGVcIiwgRW51bXMuRmlsbE1vZGUsIEVudW1zLkZpbGxNb2RlLkNvdmVyKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eShWZXJzaW9ucy52MV8yLCBcImhvcml6b250YWxBbGlnbm1lbnRcIiwgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudCwgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5MZWZ0KTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmVydGljYWxBbGlnbm1lbnRQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMiwgXCJ2ZXJ0aWNhbEFsaWdubWVudFwiLCBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudCwgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuVG9wKTtcblxuICAgIEBwcm9wZXJ0eShCYWNrZ3JvdW5kSW1hZ2UudXJsUHJvcGVydHkpXG4gICAgdXJsPzogc3RyaW5nO1xuXG4gICAgQHByb3BlcnR5KEJhY2tncm91bmRJbWFnZS5maWxsTW9kZVByb3BlcnR5KVxuICAgIGZpbGxNb2RlOiBFbnVtcy5GaWxsTW9kZTtcblxuICAgIEBwcm9wZXJ0eShCYWNrZ3JvdW5kSW1hZ2UuaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5KVxuICAgIGhvcml6b250YWxBbGlnbm1lbnQ6IEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQ7XG5cbiAgICBAcHJvcGVydHkoQmFja2dyb3VuZEltYWdlLnZlcnRpY2FsQWxpZ25tZW50UHJvcGVydHkpXG4gICAgdmVydGljYWxBbGlnbm1lbnQ6IEVudW1zLlZlcnRpY2FsQWxpZ25tZW50O1xuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkJhY2tncm91bmRJbWFnZVwiO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXREZWZhdWx0VmFsdWVzKCk7XG4gICAgICAgICAgICB0aGlzLnVybCA9IHNvdXJjZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhcHBseShlbGVtZW50OiBDYXJkRWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy51cmwgJiYgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGVsZW1lbnQucHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUoQmFja2dyb3VuZEltYWdlLnVybFByb3BlcnR5LCB0aGlzLnVybCkgKyBcIicpXCI7XG5cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5maWxsTW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuRmlsbE1vZGUuUmVwZWF0OlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJyZXBlYXRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5GaWxsTW9kZS5SZXBlYXRIb3Jpem9udGFsbHk6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSBcInJlcGVhdC14XCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuRmlsbE1vZGUuUmVwZWF0VmVydGljYWxseTpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IFwicmVwZWF0LXlcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5GaWxsTW9kZS5Db3ZlcjpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIjtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImNvdmVyXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvblggPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVuZGVyZWRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvblggPSBcInJpZ2h0XCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMudmVydGljYWxBbGlnbm1lbnQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LkNlbnRlcjpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWSA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25ZID0gXCJib3R0b21cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy51cmwgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lciB7XG4gICAgLy8jcmVnaW9uIFNjaGVtYVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IGJhY2tncm91bmRJbWFnZVByb3BlcnR5ID0gbmV3IFNlcmlhbGl6YWJsZU9iamVjdFByb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcImJhY2tncm91bmRJbWFnZVwiLFxuICAgICAgICBCYWNrZ3JvdW5kSW1hZ2UpO1xuICAgIHN0YXRpYyByZWFkb25seSB2ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnRQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHkoVmVyc2lvbnMudjFfMSwgXCJ2ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnRcIiwgRW51bXMuVmVydGljYWxBbGlnbm1lbnQsIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LlRvcCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHJ0bFByb3BlcnR5ID0gbmV3IEJvb2xQcm9wZXJ0eShWZXJzaW9ucy52MV8wLCBcInJ0bFwiKTtcblxuICAgIEBwcm9wZXJ0eShDb250YWluZXIuYmFja2dyb3VuZEltYWdlUHJvcGVydHkpXG4gICAgZ2V0IGJhY2tncm91bmRJbWFnZSgpOiBCYWNrZ3JvdW5kSW1hZ2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShDb250YWluZXIuYmFja2dyb3VuZEltYWdlUHJvcGVydHkpO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eShDb250YWluZXIudmVydGljYWxDb250ZW50QWxpZ25tZW50UHJvcGVydHkpXG4gICAgdmVydGljYWxDb250ZW50QWxpZ25tZW50OiBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudCA9IEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LlRvcDtcblxuICAgIEBwcm9wZXJ0eShDb250YWluZXIucnRsUHJvcGVydHkpXG4gICAgcnRsPzogYm9vbGVhbjtcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfaXRlbXM6IENhcmRFbGVtZW50W10gPSBbXTtcbiAgICBwcml2YXRlIF9yZW5kZXJlZEl0ZW1zOiBDYXJkRWxlbWVudFtdID0gW107XG5cbiAgICBwcml2YXRlIGluc2VydEl0ZW1BdChcbiAgICAgICAgaXRlbTogQ2FyZEVsZW1lbnQsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIGZvcmNlSW5zZXJ0OiBib29sZWFuKSB7XG4gICAgICAgIGlmICghaXRlbS5wYXJlbnQgfHwgZm9yY2VJbnNlcnQpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmlzU3RhbmRhbG9uZSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5faXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZ3MuZXJyb3JzLmVsZW1lbnRUeXBlTm90U3RhbmRhbG9uZShpdGVtLmdldEpzb25UeXBlTmFtZSgpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5ncy5lcnJvcnMuZWxlbWVudEFscmVhZHlQYXJlbnRlZCgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBzdXBwb3J0c0V4Y3BsaXRpSGVpZ2h0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0SXRlbXNDb2xsZWN0aW9uUHJvcGVydHlOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIml0ZW1zXCI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFwcGx5QmFja2dyb3VuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSAmJiB0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuYXBwbHkodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci5hcHBseUJhY2tncm91bmQoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gW107XG5cbiAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyB0byBhdm9pZCB3YWxraW5nIHRoZSBwYXJlbnQgaGllcmFyY2h5IHNldmVyYWwgdGltZXNcbiAgICAgICAgbGV0IGhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XG5cbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIGlmICh0aGlzLnJ0bCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnRsKSB7XG4gICAgICAgICAgICBlbGVtZW50LmRpciA9IFwicnRsXCI7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtY29udGFpbmVyXCIpKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG5cbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24pIHtcbiAgICAgICAgICAgIC8vIEZvcmNlcyB0aGUgY29udGFpbmVyIHRvIGJlIGF0IGxlYXN0IGFzIHRhbGwgYXMgaXRzIGNvbnRlbnQuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRml4ZXMgYSBxdWlyayBpbiBDaHJvbWUgd2hlcmUsIGZvciBuZXN0ZWQgZmxleCBlbGVtZW50cywgdGhlXG4gICAgICAgICAgICAvLyBpbm5lciBlbGVtZW50J3MgaGVpZ2h0IHdvdWxkIG5ldmVyIGV4Y2VlZCB0aGUgb3V0ZXIgZWxlbWVudCdzXG4gICAgICAgICAgICAvLyBoZWlnaHQuIFRoaXMgY2F1c2VkIG92ZXJmbG93IHRydW5jYXRpb24gdG8gYnJlYWsgLS0gY29udGFpbmVyc1xuICAgICAgICAgICAgLy8gd291bGQgYWx3YXlzIGJlIG1lYXN1cmVkIGFzIG5vdCBvdmVyZmxvd2luZywgc2luY2UgdGhlaXIgaGVpZ2h0c1xuICAgICAgICAgICAgLy8gd2VyZSBjb25zdHJhaW5lZCBieSB0aGVpciBwYXJlbnRzIGFzIG9wcG9zZWQgdG8gdHJ1bHkgcmVmbGVjdGluZ1xuICAgICAgICAgICAgLy8gdGhlIGhlaWdodCBvZiB0aGVpciBjb250ZW50LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFNlZSB0aGUgXCJCcm93c2VyIFJlbmRlcmluZyBOb3Rlc1wiIHNlY3Rpb24gb2YgdGhpcyBhbnN3ZXI6XG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNjI0NzE0MC93aHktZG9lc250LWZsZXgtaXRlbS1zaHJpbmstcGFzdC1jb250ZW50LXNpemVcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJy13ZWJraXQtbWluLWNvbnRlbnQnO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnZlcnRpY2FsQ29udGVudEFsaWdubWVudCkge1xuICAgICAgICAgICAgY2FzZSBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudC5DZW50ZXI6XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LkJvdHRvbTpcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LXN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtcykge1xuICAgICAgICAgICAgICAgIGxldCByZW5kZXJlZEl0ZW0gPSB0aGlzLmlzRWxlbWVudEFsbG93ZWQoaXRlbSkgPyBpdGVtLnJlbmRlcigpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIGl0ZW0uc2VwYXJhdG9yRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIGl0ZW0uc2VwYXJhdG9yRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZEl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc2lnbk1vZGUoKSkge1xuICAgICAgICAgICAgICAgIGxldCBwbGFjZWhvbGRlckVsZW1lbnQgPSB0aGlzLmNyZWF0ZVBsYWNlaG9sZGVyRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQocGxhY2Vob2xkZXJFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB0cnVuY2F0ZU92ZXJmbG93KG1heEhlaWdodDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xuICAgICAgICAgICAgLy8gQWRkIDEgdG8gYWNjb3VudCBmb3Igcm91bmRpbmcgZGlmZmVyZW5jZXMgYmV0d2VlbiBicm93c2Vyc1xuICAgICAgICAgICAgbGV0IGJvdW5kYXJ5ID0gdGhpcy5yZW5kZXJlZEVsZW1lbnQub2Zmc2V0VG9wICsgbWF4SGVpZ2h0ICsgMTtcblxuICAgICAgICAgICAgbGV0IGhhbmRsZUVsZW1lbnQgPSAoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVsdCA9IGNhcmRFbGVtZW50LnJlbmRlcmVkRWxlbWVudDtcblxuICAgICAgICAgICAgICAgIGlmIChlbHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChVdGlscy5nZXRGaXRTdGF0dXMoZWx0LCBib3VuZGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLkZ1bGx5SW5Db250YWluZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVDaGFuZ2VkID0gY2FyZEVsZW1lbnRbJ3Jlc2V0T3ZlcmZsb3cnXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50J3Mgc2l6ZSBjaGFuZ2VkIGFmdGVyIHJlc2V0dGluZyBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gY2hlY2sgaWYgaXQgc3RpbGwgZml0cyBmdWxseSBpbiB0aGUgY2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXplQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFbGVtZW50KGNhcmRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5PdmVyZmxvd2luZzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF4SGVpZ2h0ID0gYm91bmRhcnkgLSBlbHQub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50WydoYW5kbGVPdmVyZmxvdyddKG1heEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseU91dE9mQ29udGFpbmVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50WydoYW5kbGVPdmVyZmxvdyddKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtcykge1xuICAgICAgICAgICAgICAgIGhhbmRsZUVsZW1lbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB1bmRvT3ZlcmZsb3dUcnVuY2F0aW9uKCkge1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuX2l0ZW1zKSB7XG4gICAgICAgICAgICBpdGVtWydyZXNldE92ZXJmbG93J10oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRIYXNCYWNrZ3JvdW5kKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaXNWYWxpZCgpIHx8IHN1cGVyLmdldEhhc0JhY2tncm91bmQoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxQYXJzZShzb3VyY2UsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zZXRTaG91bGRGYWxsYmFjayhmYWxzZSk7XG5cbiAgICAgICAgbGV0IGpzb25JdGVtcyA9IHNvdXJjZVt0aGlzLmdldEl0ZW1zQ29sbGVjdGlvblByb3BlcnR5TmFtZSgpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uSXRlbXMpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGpzb25JdGVtcykge1xuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gY29udGV4dC5wYXJzZUVsZW1lbnQodGhpcywgaXRlbSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRJdGVtQXQoZWxlbWVudCwgLTEsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFRvSlNPTih0YXJnZXQsIGNvbnRleHQpO1xuXG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplQXJyYXkodGFyZ2V0LCB0aGlzLmdldEl0ZW1zQ29sbGVjdGlvblByb3BlcnR5TmFtZSgpLCB0aGlzLl9pdGVtcyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBpc1NlbGVjdGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldEl0ZW1Db3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICAgIH1cblxuICAgIGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogQ2FyZEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGdldEZpcnN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCAmJiB0aGlzLl9yZW5kZXJlZEl0ZW1zICYmIHRoaXMuX3JlbmRlcmVkSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9yZW5kZXJlZEl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkSXRlbXMgJiYgdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEl0ZW1zW2ldLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRJdGVtc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJDb250YWluZXJcIjtcbiAgICB9XG5cbiAgICBpc0ZpcnN0RWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgZGVzaWduTW9kZSA9IHRoaXMuaXNEZXNpZ25Nb2RlKCk7XG5cbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXNWaXNpYmxlIHx8IGRlc2lnbk1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzTGFzdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGRlc2lnbk1vZGUgPSB0aGlzLmlzRGVzaWduTW9kZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLl9pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2l0ZW1zW2ldLmlzVmlzaWJsZSB8fCBkZXNpZ25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zW2ldID09IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaXNSdGwoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLnJ0bCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudENvbnRhaW5lciA/IHBhcmVudENvbnRhaW5lci5pc1J0bCgpIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0JsZWVkaW5nQXRUb3AoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBmaXJzdFJlbmRlcmVkSXRlbSA9IHRoaXMuZ2V0Rmlyc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbGVlZGluZygpIHx8IChmaXJzdFJlbmRlcmVkSXRlbSA/IGZpcnN0UmVuZGVyZWRJdGVtLmlzQmxlZWRpbmdBdFRvcCgpIDogZmFsc2UpO1xuICAgIH1cblxuICAgIGlzQmxlZWRpbmdBdEJvdHRvbSgpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGxhc3RSZW5kZXJlZEl0ZW0gPSB0aGlzLmdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbGVlZGluZygpIHx8IChsYXN0UmVuZGVyZWRJdGVtID8gbGFzdFJlbmRlcmVkSXRlbS5pc0JsZWVkaW5nQXRCb3R0b20oKSAmJiBsYXN0UmVuZGVyZWRJdGVtLmdldEVmZmVjdGl2ZVN0eWxlKCkgPT0gdGhpcy5nZXRFZmZlY3RpdmVTdHlsZSgpIDogZmFsc2UpO1xuICAgIH1cblxuICAgIGluZGV4T2YoY2FyZEVsZW1lbnQ6IENhcmRFbGVtZW50KTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmluZGV4T2YoY2FyZEVsZW1lbnQpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oaXRlbTogQ2FyZEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRJdGVtQXQoaXRlbSwgLTEsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpbnNlcnRJdGVtQmVmb3JlKGl0ZW06IENhcmRFbGVtZW50LCBpbnNlcnRCZWZvcmU6IENhcmRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIHRoaXMuX2l0ZW1zLmluZGV4T2YoaW5zZXJ0QmVmb3JlKSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGluc2VydEl0ZW1BZnRlcihpdGVtOiBDYXJkRWxlbWVudCwgaW5zZXJ0QWZ0ZXI6IENhcmRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIHRoaXMuX2l0ZW1zLmluZGV4T2YoaW5zZXJ0QWZ0ZXIpICsgMSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJlbW92ZUl0ZW0oaXRlbTogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGl0ZW1JbmRleCA9IHRoaXMuX2l0ZW1zLmluZGV4T2YoaXRlbSk7XG5cbiAgICAgICAgaWYgKGl0ZW1JbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pdGVtcy5zcGxpY2UoaXRlbUluZGV4LCAxKTtcblxuICAgICAgICAgICAgaXRlbS5zZXRQYXJlbnQodW5kZWZpbmVkKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBbXTtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk6IElSZXNvdXJjZUluZm9ybWF0aW9uW10ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc3VwZXIuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRJbWFnZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiA8c3RyaW5nPnRoaXMuYmFja2dyb3VuZEltYWdlLnVybCxcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFwiaW1hZ2VcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCByZXN1bHQ6IEFjdGlvbiB8IHVuZGVmaW5lZCA9IHN1cGVyLmdldEFjdGlvbkJ5SWQoaWQpO1xuXG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdEFjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW0uZ2V0QWN0aW9uQnlJZChpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBwYWRkaW5nKCk6IFBhZGRpbmdEZWZpbml0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFkZGluZygpO1xuICAgIH1cblxuICAgIHNldCBwYWRkaW5nKHZhbHVlOiBQYWRkaW5nRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNldFBhZGRpbmcodmFsdWUpO1xuICAgIH1cblxuICAgIGdldCBzZWxlY3RBY3Rpb24oKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdEFjdGlvbjtcbiAgICB9XG5cbiAgICBzZXQgc2VsZWN0QWN0aW9uKHZhbHVlOiBBY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0QWN0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGJsZWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRCbGVlZCgpO1xuICAgIH1cblxuICAgIHNldCBibGVlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLnNldEJsZWVkKHZhbHVlKTtcbiAgICB9XG59XG5cbmV4cG9ydCB0eXBlIENvbHVtbldpZHRoID0gU2l6ZUFuZFVuaXQgfCBcImF1dG9cIiB8IFwic3RyZXRjaFwiO1xuXG5leHBvcnQgY2xhc3MgQ29sdW1uIGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgd2lkdGhQcm9wZXJ0eSA9IG5ldyBDdXN0b21Qcm9wZXJ0eTxDb2x1bW5XaWR0aD4oXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwid2lkdGhcIixcbiAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IENvbHVtbldpZHRoID0gcHJvcGVydHkuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gc291cmNlW3Byb3BlcnR5Lm5hbWVdO1xuICAgICAgICAgICAgbGV0IGludmFsaWRXaWR0aCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU2l6ZUFuZFVuaXQodmFsdWUsIEVudW1zLlNpemVVbml0LldlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gXCJhdXRvXCIgfHwgdmFsdWUgPT09IFwic3RyZXRjaFwiKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBTaXplQW5kVW5pdC5wYXJzZSh2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC51bml0ID09PSBFbnVtcy5TaXplVW5pdC5QaXhlbCAmJiBwcm9wZXJ0eS50YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFdpZHRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkV2lkdGggPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGludmFsaWRXaWR0aCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnZhbGlkV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnZhbGlkQ29sdW1uV2lkdGgodmFsdWUpKTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiYXV0b1wiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBDb2x1bW5XaWR0aCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTaXplQW5kVW5pdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS51bml0ID09PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKHRhcmdldCwgXCJ3aWR0aFwiLCB2YWx1ZS5waHlzaWNhbFNpemUgKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVOdW1iZXIodGFyZ2V0LCBcIndpZHRoXCIsIHZhbHVlLnBoeXNpY2FsU2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIFwid2lkdGhcIiwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInN0cmV0Y2hcIik7XG5cbiAgICBAcHJvcGVydHkoQ29sdW1uLndpZHRoUHJvcGVydHkpXG4gICAgd2lkdGg6IENvbHVtbldpZHRoID0gXCJzdHJldGNoXCI7XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgX2NvbXB1dGVkV2VpZ2h0OiBudW1iZXIgPSAwO1xuXG4gICAgcHJvdGVjdGVkIGFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUocmVuZGVyZWRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBtaW5EZXNpZ25UaW1lQ29sdW1uSGVpZ2h0ID0gMjA7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNEZXNpZ25Nb2RlKCkpIHtcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5taW5XaWR0aCA9IFwiMjBweFwiO1xuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICghdGhpcy5taW5QaXhlbEhlaWdodCA/IG1pbkRlc2lnblRpbWVDb2x1bW5IZWlnaHQgOiBNYXRoLm1heCh0aGlzLm1pblBpeGVsSGVpZ2h0LCBtaW5EZXNpZ25UaW1lQ29sdW1uSGVpZ2h0KSkgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBcIjtcblxuICAgICAgICAgICAgaWYgKHRoaXMubWluUGl4ZWxIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gdGhpcy5taW5QaXhlbEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndpZHRoID09PSBcImF1dG9cIikge1xuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMSBhdXRvXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy53aWR0aCA9PT0gXCJzdHJldGNoXCIpIHtcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgNTBweFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2lkdGggaW5zdGFuY2VvZiBTaXplQW5kVW5pdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGgudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGgucGh5c2ljYWxTaXplICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBcIiArICh0aGlzLl9jb21wdXRlZFdlaWdodCA+IDAgPyB0aGlzLl9jb21wdXRlZFdlaWdodCA6IHRoaXMud2lkdGgucGh5c2ljYWxTaXplKSArIFwiJVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3VsZFNlcmlhbGl6ZShjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHNlcGFyYXRvck9yaWVudGF0aW9uKCk6IEVudW1zLk9yaWVudGF0aW9uIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLk9yaWVudGF0aW9uLlZlcnRpY2FsO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBDb2x1bW5XaWR0aCA9IFwic3RyZXRjaFwiKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJDb2x1bW5cIjtcbiAgICB9XG5cbiAgICBnZXQgaGFzVmlzaWJsZVNlcGFyYXRvcigpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50IGluc3RhbmNlb2YgQ29sdW1uU2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXBhcmF0b3JFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMucGFyZW50LmlzTGVmdE1vc3RFbGVtZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGlzU3RhbmRhbG9uZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbHVtblNldCBleHRlbmRzIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIge1xuICAgIHByaXZhdGUgX2NvbHVtbnM6IENvbHVtbltdID0gW107XG4gICAgcHJpdmF0ZSBfcmVuZGVyZWRDb2x1bW5zOiBDb2x1bW5bXTtcblxuICAgIHByaXZhdGUgY3JlYXRlQ29sdW1uSW5zdGFuY2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KTogQ29sdW1uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQucGFyc2VDYXJkT2JqZWN0PENvbHVtbj4oXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgW10sIC8vIEZvcmJpZGRlbiB0eXBlcyBub3Qgc3VwcG9ydGVkIGZvciBlbGVtZW50cyBmb3Igbm93XG4gICAgICAgICAgICAhdGhpcy5pc0Rlc2lnbk1vZGUoKSxcbiAgICAgICAgICAgICh0eXBlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0eXBlTmFtZSB8fCB0eXBlTmFtZSA9PT0gXCJDb2x1bW5cIiA/IG5ldyBDb2x1bW4oKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZywgZXJyb3JUeXBlOiBUeXBlRXJyb3JUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5FbGVtZW50VHlwZU5vdEFsbG93ZWQsXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmVsZW1lbnRUeXBlTm90QWxsb3dlZCh0eXBlTmFtZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRDb2x1bW5zID0gW107XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyB0byBhdm9pZCB3YWxraW5nIHRoZSBwYXJlbnQgaGllcmFyY2h5IHNldmVyYWwgdGltZXNcbiAgICAgICAgICAgIGxldCBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xuXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWNvbHVtblNldFwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IGluIENvbnRhaW5lci5pbnRlcm5hbFJlbmRlcigpXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAnLXdlYmtpdC1taW4tY29udGVudCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LkNlbnRlcjpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRvdGFsV2VpZ2h0OiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ud2lkdGggaW5zdGFuY2VvZiBTaXplQW5kVW5pdCAmJiAoY29sdW1uLndpZHRoLnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuV2VpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICB0b3RhbFdlaWdodCArPSBjb2x1bW4ud2lkdGgucGh5c2ljYWxTaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuX2NvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLndpZHRoIGluc3RhbmNlb2YgU2l6ZUFuZFVuaXQgJiYgY29sdW1uLndpZHRoLnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuV2VpZ2h0ICYmIHRvdGFsV2VpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29tcHV0ZWRXZWlnaHQgPSAxMDAgLyB0b3RhbFdlaWdodCAqIGNvbHVtbi53aWR0aC5waHlzaWNhbFNpemU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQmVzdCB3YXkgdG8gZW11bGF0ZSBcImludGVybmFsXCIgYWNjZXNzIEkga25vdyBvZlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5bXCJfY29tcHV0ZWRXZWlnaHRcIl0gPSBjb21wdXRlZFdlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgcmVuZGVyZWRDb2x1bW4gPSBjb2x1bW4ucmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWRDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggPiAwICYmIGNvbHVtbi5zZXBhcmF0b3JFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4uc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBjb2x1bW4uc2VwYXJhdG9yRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZENvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRDb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCA/IGVsZW1lbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHRydW5jYXRlT3ZlcmZsb3cobWF4SGVpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuX2NvbHVtbnMpIHtcbiAgICAgICAgICAgIGNvbHVtblsnaGFuZGxlT3ZlcmZsb3cnXShtYXhIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHVuZG9PdmVyZmxvd1RydW5jYXRpb24oKSB7XG4gICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLl9jb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2x1bW5bJ3Jlc2V0T3ZlcmZsb3cnXSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBpc1NlbGVjdGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFBhcnNlKHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XG5cbiAgICAgICAgdGhpcy5fY29sdW1ucyA9IFtdO1xuICAgICAgICB0aGlzLl9yZW5kZXJlZENvbHVtbnMgPSBbXTtcblxuICAgICAgICBsZXQganNvbkNvbHVtbnMgPSBzb3VyY2VbXCJjb2x1bW5zXCJdO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb25Db2x1bW5zKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBqc29uQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGxldCBjb2x1bW4gPSB0aGlzLmNyZWF0ZUNvbHVtbkluc3RhbmNlKGl0ZW0sIGNvbnRleHQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxUb0pTT04odGFyZ2V0LCBjb250ZXh0KTtcblxuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZUFycmF5KHRhcmdldCwgXCJjb2x1bW5zXCIsIHRoaXMuX2NvbHVtbnMpO1xuICAgIH1cblxuICAgIGlzRmlyc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLl9jb2x1bW5zKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4gPT0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpc0JsZWVkaW5nQXRUb3AoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmlzQmxlZWRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRDb2x1bW5zICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaXNCbGVlZGluZ0F0VG9wKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzQmxlZWRpbmdBdEJvdHRvbSgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCbGVlZGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZENvbHVtbnMgJiYgdGhpcy5fcmVuZGVyZWRDb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLl9jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5pc0JsZWVkaW5nQXRCb3R0b20oKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0SXRlbUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0oKTogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgJiYgdGhpcy5fcmVuZGVyZWRDb2x1bW5zICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkQ29sdW1uc1t0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q29sdW1uQXQoaW5kZXg6IG51bWJlcik6IENvbHVtbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zW2luZGV4XTtcbiAgICB9XG5cbiAgICBnZXRJdGVtQXQoaW5kZXg6IG51bWJlcik6IENhcmRFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uQXQoaW5kZXgpO1xuICAgIH1cblxuICAgIGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJDb2x1bW5TZXRcIjtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBsZXQgd2VpZ2h0ZWRDb2x1bW5zOiBudW1iZXIgPSAwO1xuICAgICAgICBsZXQgc3RyZXRjaGVkQ29sdW1uczogbnVtYmVyID0gMDtcblxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2x1bW4ud2lkdGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICB3ZWlnaHRlZENvbHVtbnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi53aWR0aCA9PT0gXCJzdHJldGNoXCIpIHtcbiAgICAgICAgICAgICAgICBzdHJldGNoZWRDb2x1bW5zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2VpZ2h0ZWRDb2x1bW5zID4gMCAmJiBzdHJldGNoZWRDb2x1bW5zID4gMCkge1xuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkhpbnQsXG4gICAgICAgICAgICAgICAgU3RyaW5ncy5oaW50cy5kb250VXNlV2VpZ2h0ZWRBbmRTdHJlY3RoZWRDb2x1bW5zSW5TYW1lU2V0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ29sdW1uKGNvbHVtbjogQ29sdW1uKSB7XG4gICAgICAgIGlmICghY29sdW1uLnBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5fY29sdW1ucy5wdXNoKGNvbHVtbik7XG5cbiAgICAgICAgICAgIGNvbHVtbi5zZXRQYXJlbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5ncy5lcnJvcnMuY29sdW1uQWxyZWFkeUJlbG9uZ3NUb0Fub3RoZXJTZXQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVJdGVtKGl0ZW06IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29sdW1uKSB7XG4gICAgICAgICAgICBsZXQgaXRlbUluZGV4ID0gdGhpcy5fY29sdW1ucy5pbmRleE9mKGl0ZW0pO1xuXG4gICAgICAgICAgICBpZiAoaXRlbUluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2x1bW5zLnNwbGljZShpdGVtSW5kZXgsIDEpO1xuXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRQYXJlbnQodW5kZWZpbmVkKTtcblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpbmRleE9mKGNhcmRFbGVtZW50OiBDYXJkRWxlbWVudCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudCBpbnN0YW5jZW9mIENvbHVtbiA/IHRoaXMuX2NvbHVtbnMuaW5kZXhPZihjYXJkRWxlbWVudCkgOiAtMTtcbiAgICB9XG5cbiAgICBpc0xlZnRNb3N0RWxlbWVudChlbGVtZW50OiBDYXJkRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29sdW1ucy5pbmRleE9mKDxDb2x1bW4+ZWxlbWVudCkgPT0gMDtcbiAgICB9XG5cbiAgICBpc1JpZ2h0TW9zdEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMuaW5kZXhPZig8Q29sdW1uPmVsZW1lbnQpID09IHRoaXMuX2NvbHVtbnMubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpc1RvcEVsZW1lbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMuaW5kZXhPZig8Q29sdW1uPmVsZW1lbnQpID49IDA7XG4gICAgfVxuXG4gICAgaXNCb3R0b21FbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmluZGV4T2YoPENvbHVtbj5lbGVtZW50KSA+PSAwO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCByZXN1bHQ6IEFjdGlvbiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5fY29sdW1ucykge1xuICAgICAgICAgICAgcmVzdWx0ID0gY29sdW1uLmdldEFjdGlvbkJ5SWQoaWQpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBibGVlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxlZWQoKTtcbiAgICB9XG5cbiAgICBzZXQgYmxlZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5zZXRCbGVlZCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0IHBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYWRkaW5nKCk7XG4gICAgfVxuXG4gICAgc2V0IHBhZGRpbmcodmFsdWU6IFBhZGRpbmdEZWZpbml0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0UGFkZGluZyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0IHNlbGVjdEFjdGlvbigpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0QWN0aW9uO1xuICAgIH1cblxuICAgIHNldCBzZWxlY3RBY3Rpb24odmFsdWU6IEFjdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24gPSB2YWx1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJhaXNlSW1hZ2VMb2FkZWRFdmVudChpbWFnZTogSW1hZ2UpIHtcbiAgICBsZXQgY2FyZCA9IGltYWdlLmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkO1xuICAgIGxldCBvbkltYWdlTG9hZGVkSGFuZGxlciA9IChjYXJkICYmIGNhcmQub25JbWFnZUxvYWRlZCkgPyBjYXJkLm9uSW1hZ2VMb2FkZWQgOiBBZGFwdGl2ZUNhcmQub25JbWFnZUxvYWRlZDtcblxuICAgIGlmIChvbkltYWdlTG9hZGVkSGFuZGxlcikge1xuICAgICAgICBvbkltYWdlTG9hZGVkSGFuZGxlcihpbWFnZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByYWlzZUFuY2hvckNsaWNrZWRFdmVudChlbGVtZW50OiBDYXJkRWxlbWVudCwgYW5jaG9yOiBIVE1MQW5jaG9yRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGxldCBjYXJkID0gZWxlbWVudC5nZXRSb290RWxlbWVudCgpIGFzIEFkYXB0aXZlQ2FyZDtcbiAgICBsZXQgb25BbmNob3JDbGlja2VkSGFuZGxlciA9IChjYXJkICYmIGNhcmQub25BbmNob3JDbGlja2VkKSA/IGNhcmQub25BbmNob3JDbGlja2VkIDogQWRhcHRpdmVDYXJkLm9uQW5jaG9yQ2xpY2tlZDtcblxuICAgIHJldHVybiBvbkFuY2hvckNsaWNrZWRIYW5kbGVyICE9PSB1bmRlZmluZWQgPyBvbkFuY2hvckNsaWNrZWRIYW5kbGVyKGVsZW1lbnQsIGFuY2hvcikgOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmFpc2VFeGVjdXRlQWN0aW9uRXZlbnQoYWN0aW9uOiBBY3Rpb24pIHtcbiAgICBsZXQgY2FyZCA9IGFjdGlvbi5wYXJlbnQgPyBhY3Rpb24ucGFyZW50LmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkIDogdW5kZWZpbmVkO1xuICAgIGxldCBvbkV4ZWN1dGVBY3Rpb25IYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbkV4ZWN1dGVBY3Rpb24pID8gY2FyZC5vbkV4ZWN1dGVBY3Rpb24gOiBBZGFwdGl2ZUNhcmQub25FeGVjdXRlQWN0aW9uO1xuXG4gICAgaWYgKGFjdGlvbi5wcmVwYXJlRm9yRXhlY3V0aW9uKCkgJiYgb25FeGVjdXRlQWN0aW9uSGFuZGxlcikge1xuICAgICAgICBvbkV4ZWN1dGVBY3Rpb25IYW5kbGVyKGFjdGlvbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByYWlzZUlubGluZUNhcmRFeHBhbmRlZEV2ZW50KGFjdGlvbjogU2hvd0NhcmRBY3Rpb24sIGlzRXhwYW5kZWQ6IGJvb2xlYW4pIHtcbiAgICBsZXQgY2FyZCA9IGFjdGlvbi5wYXJlbnQgPyBhY3Rpb24ucGFyZW50LmdldFJvb3RFbGVtZW50KCkgYXMgQWRhcHRpdmVDYXJkIDogdW5kZWZpbmVkO1xuICAgIGxldCBvbklubGluZUNhcmRFeHBhbmRlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uSW5saW5lQ2FyZEV4cGFuZGVkKSA/IGNhcmQub25JbmxpbmVDYXJkRXhwYW5kZWQgOiBBZGFwdGl2ZUNhcmQub25JbmxpbmVDYXJkRXhwYW5kZWQ7XG5cbiAgICBpZiAob25JbmxpbmVDYXJkRXhwYW5kZWRIYW5kbGVyKSB7XG4gICAgICAgIG9uSW5saW5lQ2FyZEV4cGFuZGVkSGFuZGxlcihhY3Rpb24sIGlzRXhwYW5kZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmFpc2VJbnB1dFZhbHVlQ2hhbmdlZEV2ZW50KGlucHV0OiBJbnB1dCkge1xuICAgIGxldCBjYXJkID0gaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKSBhcyBBZGFwdGl2ZUNhcmQ7XG4gICAgbGV0IG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkKSA/IGNhcmQub25JbnB1dFZhbHVlQ2hhbmdlZCA6IEFkYXB0aXZlQ2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkO1xuXG4gICAgaWYgKG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyKSB7XG4gICAgICAgIG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyKGlucHV0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQoZWxlbWVudDogQ2FyZEVsZW1lbnQsIHNob3VsZFVwZGF0ZUxheW91dDogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBsZXQgcm9vdEVsZW1lbnQgPSBlbGVtZW50LmdldFJvb3RFbGVtZW50KCk7XG5cbiAgICBpZiAoc2hvdWxkVXBkYXRlTGF5b3V0KSB7XG4gICAgICAgIHJvb3RFbGVtZW50LnVwZGF0ZUxheW91dCgpO1xuICAgIH1cblxuICAgIGxldCBjYXJkID0gcm9vdEVsZW1lbnQgYXMgQWRhcHRpdmVDYXJkO1xuICAgIGxldCBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkKSA/IGNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQgOiBBZGFwdGl2ZUNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQ7XG5cbiAgICBpZiAob25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRIYW5kbGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRIYW5kbGVyKGVsZW1lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbnRhaW5lcldpdGhBY3Rpb25zIGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICBwcml2YXRlIF9hY3Rpb25Db2xsZWN0aW9uOiBBY3Rpb25Db2xsZWN0aW9uO1xuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IFNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnBhcnNlKHNvdXJjZVtcImFjdGlvbnNcIl0sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFRvSlNPTih0YXJnZXQsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24udG9KU09OKHRhcmdldCwgXCJhY3Rpb25zXCIsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gc3VwZXIuaW50ZXJuYWxSZW5kZXIoKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHJlbmRlcmVkQWN0aW9ucyA9IHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVuZGVyKHRoaXMuaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbnNPcmllbnRhdGlvbiwgZmFsc2UpO1xuXG4gICAgICAgICAgICBpZiAocmVuZGVyZWRBY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnJlbmRlclNlcGFyYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvc3RDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2luZzogdGhpcy5ob3N0Q29uZmlnLmdldEVmZmVjdGl2ZVNwYWNpbmcodGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuc3BhY2luZylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKSk7XG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgcmVuZGVyZWRBY3Rpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVySWZFbXB0eSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGVsZW1lbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEhhc0V4cGFuZGVkQWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEFjdGlvbkNvdW50ID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJlbmRlcmVkQWN0aW9uQ291bnQgPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCByZW5kZXJlZEFjdGlvbkNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcmVkQWN0aW9uQ291bnQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCByZW5kZXJJZkVtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbiA9IG5ldyBBY3Rpb25Db2xsZWN0aW9uKHRoaXMpO1xuICAgIH1cblxuICAgIGdldEFjdGlvbkNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXRBY3Rpb25BdChpbmRleDogbnVtYmVyKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmdldEFjdGlvbkNvdW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLml0ZW1zW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRBY3Rpb25BdChpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0OiBBY3Rpb24gfCB1bmRlZmluZWQgPSB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmdldEFjdGlvbkJ5SWQoaWQpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQgPyByZXN1bHQgOiBzdXBlci5nZXRBY3Rpb25CeUlkKGlkKTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcblxuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi52YWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0xhc3RFbGVtZW50KGVsZW1lbnQ6IENhcmRFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzdXBlci5pc0xhc3RFbGVtZW50KGVsZW1lbnQpICYmIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoID09IDA7XG4gICAgfVxuXG4gICAgYWRkQWN0aW9uKGFjdGlvbjogQWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uYWRkQWN0aW9uKGFjdGlvbik7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHN1cGVyLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5jbGVhcigpO1xuICAgIH1cblxuICAgIGdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9uczogYm9vbGVhbiA9IHRydWUpOiBJbnB1dFtdIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN1cGVyLmdldEFsbElucHV0cyhwcm9jZXNzQWN0aW9ucyk7XG5cbiAgICAgICAgaWYgKHByb2Nlc3NBY3Rpb25zKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0QWxsSW5wdXRzKHByb2Nlc3NBY3Rpb25zKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldFJlc291cmNlSW5mb3JtYXRpb24oKTogSVJlc291cmNlSW5mb3JtYXRpb25bXSB7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkuY29uY2F0KHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcbiAgICB9XG5cbiAgICBpc0JsZWVkaW5nQXRCb3R0b20oKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcmVkQWN0aW9uQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmlzQmxlZWRpbmdBdEJvdHRvbSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPT0gdW5kZWZpbmVkICYmICF0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmV4cGFuZGVkQWN0aW9uICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgaXNTdGFuZGFsb25lKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQge1xuICAgIGRpZFByb2Nlc3M6IGJvb2xlYW47XG4gICAgb3V0cHV0SHRtbD86IGFueTtcbn1cblxuLy8gQGR5bmFtaWNcbmV4cG9ydCBjbGFzcyBBZGFwdGl2ZUNhcmQgZXh0ZW5kcyBDb250YWluZXJXaXRoQWN0aW9ucyB7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNjaGVtYVVybCA9IFwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW8vc2NoZW1hcy9hZGFwdGl2ZS1jYXJkLmpzb25cIjtcblxuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgJHNjaGVtYVByb3BlcnR5ID0gbmV3IEN1c3RvbVByb3BlcnR5PHN0cmluZz4oXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXG4gICAgICAgIFwiJHNjaGVtYVwiLFxuICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIEFkYXB0aXZlQ2FyZC5zY2hlbWFVcmw7XG4gICAgICAgIH0sXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFZlcnNpb25zIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUodGFyZ2V0LCBwcm9wZXJ0eS5uYW1lLCBBZGFwdGl2ZUNhcmQuc2NoZW1hVXJsKTtcbiAgICAgICAgfSk7XG5cbiAgICBzdGF0aWMgcmVhZG9ubHkgdmVyc2lvblByb3BlcnR5ID0gbmV3IEN1c3RvbVByb3BlcnR5PFZlcnNpb24gfCB1bmRlZmluZWQ+KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcInZlcnNpb25cIixcbiAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uLCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIGxldCB2ZXJzaW9uID0gVmVyc2lvbi5wYXJzZShzb3VyY2VbcHJvcGVydHkubmFtZV0sIGNvbnRleHQpO1xuXG4gICAgICAgICAgICBpZiAodmVyc2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbiA9IFZlcnNpb25zLmxhdGVzdDtcblxuICAgICAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmludmFsaWRDYXJkVmVyc2lvbih2ZXJzaW9uLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgICAgIH0sXG4gICAgICAgIChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFZlcnNpb25zIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5Lm5hbWUsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBWZXJzaW9ucy52MV8wKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgZmFsbGJhY2tUZXh0UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJmYWxsYmFja1RleHRcIik7XG4gICAgc3RhdGljIHJlYWRvbmx5IHNwZWFrUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJzcGVha1wiKTtcblxuICAgIEBwcm9wZXJ0eShBZGFwdGl2ZUNhcmQudmVyc2lvblByb3BlcnR5KVxuICAgIHZlcnNpb246IFZlcnNpb247XG5cbiAgICBAcHJvcGVydHkoQWRhcHRpdmVDYXJkLmZhbGxiYWNrVGV4dFByb3BlcnR5KVxuICAgIGZhbGxiYWNrVGV4dD86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShBZGFwdGl2ZUNhcmQuc3BlYWtQcm9wZXJ0eSlcbiAgICBzcGVhaz86IHN0cmluZztcblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgc3RhdGljIG9uQW5jaG9yQ2xpY2tlZD86IChlbGVtZW50OiBDYXJkRWxlbWVudCwgYW5jaG9yOiBIVE1MQW5jaG9yRWxlbWVudCkgPT4gYm9vbGVhbjtcbiAgICBzdGF0aWMgb25FeGVjdXRlQWN0aW9uPzogKGFjdGlvbjogQWN0aW9uKSA9PiB2b2lkO1xuICAgIHN0YXRpYyBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZD86IChlbGVtZW50OiBDYXJkRWxlbWVudCkgPT4gdm9pZDtcbiAgICBzdGF0aWMgb25JbWFnZUxvYWRlZD86IChpbWFnZTogSW1hZ2UpID0+IHZvaWQ7XG4gICAgc3RhdGljIG9uSW5saW5lQ2FyZEV4cGFuZGVkPzogKGFjdGlvbjogU2hvd0NhcmRBY3Rpb24sIGlzRXhwYW5kZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgc3RhdGljIG9uSW5wdXRWYWx1ZUNoYW5nZWQ/OiAoaW5wdXQ6IElucHV0KSA9PiB2b2lkO1xuICAgIHN0YXRpYyBvblByb2Nlc3NNYXJrZG93bj86ICh0ZXh0OiBzdHJpbmcsIHJlc3VsdDogSU1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCkgPT4gdm9pZDtcblxuICAgIHN0YXRpYyBnZXQgcHJvY2Vzc01hcmtkb3duKCk6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZyB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmdzLmVycm9ycy5wcm9jZXNzTWFya2Rvd25FdmVudFJlbW92ZWQoKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldCBwcm9jZXNzTWFya2Rvd24odmFsdWU6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5ncy5lcnJvcnMucHJvY2Vzc01hcmtkb3duRXZlbnRSZW1vdmVkKCkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhcHBseU1hcmtkb3duKHRleHQ6IHN0cmluZyk6IElNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQge1xuICAgICAgICBsZXQgcmVzdWx0OiBJTWFya2Rvd25Qcm9jZXNzaW5nUmVzdWx0ID0ge1xuICAgICAgICAgICAgZGlkUHJvY2VzczogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLm9uUHJvY2Vzc01hcmtkb3duKSB7XG4gICAgICAgICAgICBBZGFwdGl2ZUNhcmQub25Qcm9jZXNzTWFya2Rvd24odGV4dCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoPGFueT53aW5kb3cpLm1hcmtkb3duaXQpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBtYXJrZG93bml0XG4gICAgICAgICAgICBsZXQgbWFya2Rvd25JdDogYW55ID0gKDxhbnk+d2luZG93KS5tYXJrZG93bml0O1xuICAgICAgICAgICAgcmVzdWx0Lm91dHB1dEh0bWwgPSBtYXJrZG93bkl0KCkucmVuZGVyKHRleHQpO1xuICAgICAgICAgICAgcmVzdWx0LmRpZFByb2Nlc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFN0cmluZ3MuZXJyb3JzLm1hcmtkb3duUHJvY2Vzc2luZ05vdEVuYWJsZWQpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgX2ZhbGxiYWNrQ2FyZD86IEFkYXB0aXZlQ2FyZDtcblxuICAgIHByaXZhdGUgaXNWZXJzaW9uU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5ieXBhc3NWZXJzaW9uQ2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHVuc3VwcG9ydGVkVmVyc2lvbjogYm9vbGVhbiA9XG4gICAgICAgICAgICAgICAgIXRoaXMudmVyc2lvbiB8fFxuICAgICAgICAgICAgICAgICF0aGlzLnZlcnNpb24uaXNWYWxpZCB8fFxuICAgICAgICAgICAgICAgICh0aGlzLm1heFZlcnNpb24ubWFqb3IgPCB0aGlzLnZlcnNpb24ubWFqb3IpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMubWF4VmVyc2lvbi5tYWpvciA9PSB0aGlzLnZlcnNpb24ubWFqb3IgJiYgdGhpcy5tYXhWZXJzaW9uLm1pbm9yIDwgdGhpcy52ZXJzaW9uLm1pbm9yKTtcblxuICAgICAgICAgICAgcmV0dXJuICF1bnN1cHBvcnRlZFZlcnNpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0SXRlbXNDb2xsZWN0aW9uUHJvcGVydHlOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImJvZHlcIjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxQYXJzZShzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGxldCBmYWxsYmFja0VsZW1lbnQgPSBjb250ZXh0LnBhcnNlRWxlbWVudCh1bmRlZmluZWQsIHNvdXJjZVtcImZhbGxiYWNrXCJdLCAhdGhpcy5pc0Rlc2lnbk1vZGUoKSk7XG5cbiAgICAgICAgaWYgKGZhbGxiYWNrRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkID0gbmV3IEFkYXB0aXZlQ2FyZCgpO1xuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkLmFkZEl0ZW0oZmFsbGJhY2tFbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLmludGVybmFsUGFyc2Uoc291cmNlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxUb0pTT04odGFyZ2V0OiBQcm9wZXJ0eUJhZywgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShBZGFwdGl2ZUNhcmQudmVyc2lvblByb3BlcnR5LCBjb250ZXh0LnRhcmdldFZlcnNpb24pO1xuXG4gICAgICAgIHN1cGVyLmludGVybmFsVG9KU09OKHRhcmdldCwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlbmRlcmVkRWxlbWVudCA9IHN1cGVyLmludGVybmFsUmVuZGVyKCk7XG5cbiAgICAgICAgaWYgKEdsb2JhbFNldHRpbmdzLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24gJiYgcmVuZGVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBVbmxpa2UgY29udGFpbmVycywgdGhlIHJvb3QgY2FyZCBlbGVtZW50IHNob3VsZCBiZSBhbGxvd2VkIHRvXG4gICAgICAgICAgICAvLyBiZSBzaG9ydGVyIHRoYW4gaXRzIGNvbnRlbnQgKG90aGVyd2lzZSB0aGUgb3ZlcmZsb3cgdHJ1bmNhdGlvblxuICAgICAgICAgICAgLy8gbG9naWMgd291bGQgbmV2ZXIgZ2V0IHRyaWdnZXJlZClcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcIm1pbkhlaWdodFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJlZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEhhc0JhY2tncm91bmQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXREZWZhdWx0UGFkZGluZygpOiBQYWRkaW5nRGVmaW5pdGlvbiB7XG4gICAgICAgIHJldHVybiBuZXcgUGFkZGluZ0RlZmluaXRpb24oXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsXG4gICAgICAgICAgICBFbnVtcy5TcGFjaW5nLlBhZGRpbmcpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzaG91bGRTZXJpYWxpemUoY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCByZW5kZXJJZkVtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGJ5cGFzc1ZlcnNpb25DaGVjaygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgYWxsb3dDdXN0b21TdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdENvbmZpZy5hZGFwdGl2ZUNhcmQgJiYgdGhpcy5ob3N0Q29uZmlnLmFkYXB0aXZlQ2FyZC5hbGxvd0N1c3RvbVN0eWxlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaGFzQmFja2dyb3VuZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgb25BbmNob3JDbGlja2VkPzogKGVsZW1lbnQ6IENhcmRFbGVtZW50LCBhbmNob3I6IEhUTUxBbmNob3JFbGVtZW50KSA9PiBib29sZWFuO1xuICAgIG9uRXhlY3V0ZUFjdGlvbj86IChhY3Rpb246IEFjdGlvbikgPT4gdm9pZDtcbiAgICBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZD86IChlbGVtZW50OiBDYXJkRWxlbWVudCkgPT4gdm9pZDtcbiAgICBvbkltYWdlTG9hZGVkPzogKGltYWdlOiBJbWFnZSkgPT4gdm9pZDtcbiAgICBvbklubGluZUNhcmRFeHBhbmRlZD86IChhY3Rpb246IFNob3dDYXJkQWN0aW9uLCBpc0V4cGFuZGVkOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIG9uSW5wdXRWYWx1ZUNoYW5nZWQ/OiAoaW5wdXQ6IElucHV0KSA9PiB2b2lkO1xuXG4gICAgZGVzaWduTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgZ2V0SnNvblR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkFkYXB0aXZlQ2FyZFwiO1xuICAgIH1cblxuICAgIGludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQ6IFZhbGlkYXRpb25SZXN1bHRzKSB7XG4gICAgICAgIHN1cGVyLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xuXG4gICAgICAgIGlmICh0aGlzLmdldFZhbHVlKENhcmRFbGVtZW50LnR5cGVOYW1lUHJvcGVydHkpICE9PSBcIkFkYXB0aXZlQ2FyZFwiKSB7XG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuTWlzc2luZ0NhcmRUeXBlLFxuICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmludmFsaWRDYXJkVHlwZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5ieXBhc3NWZXJzaW9uQ2hlY2sgJiYgIXRoaXMudmVyc2lvbikge1xuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LlByb3BlcnR5Q2FudEJlTnVsbCxcbiAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5wcm9wZXJ0eU11c3RCZVNldChcInZlcnNpb25cIikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmlzVmVyc2lvblN1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuVW5zdXBwb3J0ZWRDYXJkVmVyc2lvbixcbiAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy51bnN1cHBvcnRlZENhcmRWZXJzaW9uKHRoaXMudmVyc2lvbi50b1N0cmluZygpLCB0aGlzLm1heFZlcnNpb24udG9TdHJpbmcoKSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKHRhcmdldD86IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRGYWxsYmFjaygpICYmIHRoaXMuX2ZhbGxiYWNrQ2FyZCkge1xuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XG5cbiAgICAgICAgICAgIHJlbmRlcmVkQ2FyZCA9IHRoaXMuX2ZhbGxiYWNrQ2FyZC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcmVkQ2FyZCA9IHN1cGVyLnJlbmRlcigpO1xuXG4gICAgICAgICAgICBpZiAocmVuZGVyZWRDYXJkKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWRDYXJkLmNsYXNzTGlzdC5hZGQodGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1hZGFwdGl2ZUNhcmRcIikpO1xuXG4gICAgICAgICAgICAgICAgLy8gSGF2aW5nIGEgdGFiSW5kZXggb24gdGhlIHJvb3QgY29udGFpbmVyIGZvciBhIGNhcmQgY2FuIG1lc3MgdXAgYWNjZXNzaWJpbGl0eSBpbiBzb21lIHNjZW5hcmlvcy5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSd2ZSBzaGlwcGVkIHRoaXMgYmVoYXZpb3IgYmVmb3JlLCBhbmQgc28gY2FuJ3QganVzdCB0dXJuIGl0IG9mZiBpbiBhIHBvaW50IHJlbGVhc2UuIEZvclxuICAgICAgICAgICAgICAgIC8vIG5vdywgdG8gdW5ibG9jayBhY2Nlc3NpYmlsaXR5IHNjZW5hcmlvcyBmb3Igb3VyIGN1c3RvbWVycywgd2UndmUgZ290IGFuIG9wdGlvbiB0byB0dXJuIGl0IG9mZi4gSW4gYVxuICAgICAgICAgICAgICAgIC8vIGZ1dHVyZSByZWxlYXNlLCB3ZSBzaG91bGQgc3Ryb25nbHkgY29uc2lkZXIgZmxpcHBpbmcgdGhlIGRlZmF1bHQgc3VjaCB0aGF0IHdlICpkb24ndCogZW1pdCBhIHRhYkluZGV4XG4gICAgICAgICAgICAgICAgLy8gYnkgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3Muc2V0VGFiSW5kZXhBdENhcmRSb290KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC50YWJJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3BlYWspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRDYXJkLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5zcGVhayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGFyZ2V0LCByZW5kZXJlZENhcmQpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkQ2FyZDtcbiAgICB9XG5cbiAgICB1cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuOiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBzdXBlci51cGRhdGVMYXlvdXQocHJvY2Vzc0NoaWxkcmVuKTtcblxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbiAmJiB0aGlzLmlzRGlzcGxheWVkKCkpIHtcbiAgICAgICAgICAgIGxldCBwYWRkaW5nID0gdGhpcy5ob3N0Q29uZmlnLmdldEVmZmVjdGl2ZVNwYWNpbmcoRW51bXMuU3BhY2luZy5EZWZhdWx0KTtcblxuICAgICAgICAgICAgdGhpc1snaGFuZGxlT3ZlcmZsb3cnXSgoPEhUTUxFbGVtZW50PnRoaXMucmVuZGVyZWRFbGVtZW50KS5vZmZzZXRIZWlnaHQgLSBwYWRkaW5nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3VsZEZhbGxiYWNrKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc3VwZXIuc2hvdWxkRmFsbGJhY2soKSB8fCAhdGhpcy5pc1ZlcnNpb25TdXBwb3J0ZWQoKTtcbiAgICB9XG5cbiAgICBnZXQgaGFzVmlzaWJsZVNlcGFyYXRvcigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuY2xhc3MgSW5saW5lQWRhcHRpdmVDYXJkIGV4dGVuZHMgQWRhcHRpdmVDYXJkIHtcbiAgICAvLyNyZWdpb24gU2NoZW1hXG5cbiAgICBwcm90ZWN0ZWQgZ2V0U2NoZW1hS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIklubGluZUFkYXB0aXZlQ2FyZFwiO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBwb3B1bGF0ZVNjaGVtYShzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSkge1xuICAgICAgICBzdXBlci5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xuXG4gICAgICAgIHNjaGVtYS5yZW1vdmUoXG4gICAgICAgICAgICBBZGFwdGl2ZUNhcmQuJHNjaGVtYVByb3BlcnR5LFxuICAgICAgICAgICAgQWRhcHRpdmVDYXJkLnZlcnNpb25Qcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdFBhZGRpbmcoKTogUGFkZGluZ0RlZmluaXRpb24ge1xuICAgICAgICByZXR1cm4gbmV3IFBhZGRpbmdEZWZpbml0aW9uKFxuICAgICAgICAgICAgdGhpcy5zdXBwcmVzc1N0eWxlID8gRW51bXMuU3BhY2luZy5Ob25lIDogRW51bXMuU3BhY2luZy5QYWRkaW5nLFxuICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nLFxuICAgICAgICAgICAgdGhpcy5zdXBwcmVzc1N0eWxlID8gRW51bXMuU3BhY2luZy5Ob25lIDogRW51bXMuU3BhY2luZy5QYWRkaW5nLFxuICAgICAgICAgICAgRW51bXMuU3BhY2luZy5QYWRkaW5nKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGJ5cGFzc1ZlcnNpb25DaGVjaygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBkZWZhdWx0U3R5bGUoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuc3VwcHJlc3NTdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuc2hvd0NhcmQuc3R5bGUgPyB0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5zaG93Q2FyZC5zdHlsZSA6IEVudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3VwcHJlc3NTdHlsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcmVuZGVyKHRhcmdldD86IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkID0gc3VwZXIucmVuZGVyKHRhcmdldCk7XG5cbiAgICAgICAgaWYgKHJlbmRlcmVkQ2FyZCkge1xuICAgICAgICAgICAgcmVuZGVyZWRDYXJkLnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiKTtcbiAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJlZENhcmQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2xvYmFsUmVnaXN0cnkge1xuICAgIHN0YXRpYyBwb3B1bGF0ZVdpdGhEZWZhdWx0RWxlbWVudHMocmVnaXN0cnk6IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4pIHtcbiAgICAgICAgcmVnaXN0cnkuY2xlYXIoKTtcblxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIkNvbnRhaW5lclwiLCBDb250YWluZXIpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIlRleHRCbG9ja1wiLCBUZXh0QmxvY2spO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIlJpY2hUZXh0QmxvY2tcIiwgUmljaFRleHRCbG9jaywgVmVyc2lvbnMudjFfMik7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiVGV4dFJ1blwiLCBUZXh0UnVuLCBWZXJzaW9ucy52MV8yKTtcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbWFnZVwiLCBJbWFnZSk7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW1hZ2VTZXRcIiwgSW1hZ2VTZXQpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIk1lZGlhXCIsIE1lZGlhLCBWZXJzaW9ucy52MV8xKTtcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJGYWN0U2V0XCIsIEZhY3RTZXQpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIkNvbHVtblNldFwiLCBDb2x1bW5TZXQpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIkFjdGlvblNldFwiLCBBY3Rpb25TZXQsIFZlcnNpb25zLnYxXzIpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIklucHV0LlRleHRcIiwgVGV4dElucHV0KTtcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5EYXRlXCIsIERhdGVJbnB1dCk7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW5wdXQuVGltZVwiLCBUaW1lSW5wdXQpO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihcIklucHV0Lk51bWJlclwiLCBOdW1iZXJJbnB1dCk7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiSW5wdXQuQ2hvaWNlU2V0XCIsIENob2ljZVNldElucHV0KTtcbiAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoXCJJbnB1dC5Ub2dnbGVcIiwgVG9nZ2xlSW5wdXQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBwb3B1bGF0ZVdpdGhEZWZhdWx0QWN0aW9ucyhyZWdpc3RyeTogQ2FyZE9iamVjdFJlZ2lzdHJ5PEFjdGlvbj4pIHtcbiAgICAgICAgcmVnaXN0cnkuY2xlYXIoKTtcblxuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihPcGVuVXJsQWN0aW9uLkpzb25UeXBlTmFtZSwgT3BlblVybEFjdGlvbik7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFN1Ym1pdEFjdGlvbi5Kc29uVHlwZU5hbWUsIFN1Ym1pdEFjdGlvbik7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFNob3dDYXJkQWN0aW9uLkpzb25UeXBlTmFtZSwgU2hvd0NhcmRBY3Rpb24pO1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLkpzb25UeXBlTmFtZSwgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbiwgVmVyc2lvbnMudjFfMik7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlYWRvbmx5IGVsZW1lbnRzID0gbmV3IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4oKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgYWN0aW9ucyA9IG5ldyBDYXJkT2JqZWN0UmVnaXN0cnk8QWN0aW9uPigpO1xuXG4gICAgc3RhdGljIHJlc2V0KCkge1xuICAgICAgICBHbG9iYWxSZWdpc3RyeS5wb3B1bGF0ZVdpdGhEZWZhdWx0RWxlbWVudHMoR2xvYmFsUmVnaXN0cnkuZWxlbWVudHMpO1xuICAgICAgICBHbG9iYWxSZWdpc3RyeS5wb3B1bGF0ZVdpdGhEZWZhdWx0QWN0aW9ucyhHbG9iYWxSZWdpc3RyeS5hY3Rpb25zKTtcbiAgICB9XG59XG5cbkdsb2JhbFJlZ2lzdHJ5LnJlc2V0KCk7XG5cbmNvbnN0IGVudW0gVHlwZUVycm9yVHlwZSB7XG4gICAgVW5rbm93blR5cGUsXG4gICAgRm9yYmlkZGVuVHlwZVxufVxuXG5leHBvcnQgY2xhc3MgU2VyaWFsaXphdGlvbkNvbnRleHQgZXh0ZW5kcyBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQge1xuICAgIHByaXZhdGUgX2VsZW1lbnRSZWdpc3RyeT86IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD47XG4gICAgcHJpdmF0ZSBfYWN0aW9uUmVnaXN0cnk/OiBDYXJkT2JqZWN0UmVnaXN0cnk8QWN0aW9uPjtcblxuICAgIHByaXZhdGUgaW50ZXJuYWxQYXJzZUNhcmRPYmplY3Q8VCBleHRlbmRzIENhcmRPYmplY3Q+KFxuICAgICAgICBwYXJlbnQ6IENhcmRFbGVtZW50IHwgdW5kZWZpbmVkLFxuICAgICAgICBzb3VyY2U6IGFueSxcbiAgICAgICAgZm9yYmlkZGVuVHlwZU5hbWVzOiBzdHJpbmdbXSxcbiAgICAgICAgYWxsb3dGYWxsYmFjazogYm9vbGVhbixcbiAgICAgICAgY3JlYXRlSW5zdGFuY2VDYWxsYmFjazogKHR5cGVOYW1lOiBzdHJpbmcpID0+IFQgfCB1bmRlZmluZWQsXG4gICAgICAgIGxvZ1BhcnNlRXZlbnQ6ICh0eXBlTmFtZTogc3RyaW5nLCBlcnJvclR5cGU6IFR5cGVFcnJvclR5cGUpID0+IHZvaWQpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IHJlc3VsdDogVCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGxldCB0eXBlTmFtZSA9IFV0aWxzLnBhcnNlU3RyaW5nKHNvdXJjZVtcInR5cGVcIl0pO1xuXG4gICAgICAgICAgICBpZiAodHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yYmlkZGVuVHlwZU5hbWVzLmluZGV4T2YodHlwZU5hbWUpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nUGFyc2VFdmVudCh0eXBlTmFtZSwgVHlwZUVycm9yVHlwZS5Gb3JiaWRkZW5UeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0cnlUb0ZhbGxiYWNrID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY3JlYXRlSW5zdGFuY2VDYWxsYmFjayh0eXBlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVRvRmFsbGJhY2sgPSBHbG9iYWxTZXR0aW5ncy5lbmFibGVGYWxsYmFjayAmJiBhbGxvd0ZhbGxiYWNrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dQYXJzZUV2ZW50KHR5cGVOYW1lLCBUeXBlRXJyb3JUeXBlLlVua25vd25UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRQYXJlbnQocGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJzZShzb3VyY2UsIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlUb0ZhbGxiYWNrID0gR2xvYmFsU2V0dGluZ3MuZW5hYmxlRmFsbGJhY2sgJiYgYWxsb3dGYWxsYmFjayAmJiByZXN1bHQuc2hvdWxkRmFsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cnlUb0ZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmFsbGJhY2sgPSBzb3VyY2VbXCJmYWxsYmFja1wiXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWxsYmFjayAmJiBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc2V0U2hvdWxkRmFsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcInN0cmluZ1wiICYmIGZhbGxiYWNrLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5pbnRlcm5hbFBhcnNlQ2FyZE9iamVjdDxUPihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yYmlkZGVuVHlwZU5hbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dQYXJzZUV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGNhcmRPYmplY3RQYXJzZWQobzogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IGFueSkge1xuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEFjdGlvbiAmJiB0aGlzLm9uUGFyc2VBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMub25QYXJzZUFjdGlvbihvLCBzb3VyY2UsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG8gaW5zdGFuY2VvZiBDYXJkRWxlbWVudCAmJiB0aGlzLm9uUGFyc2VFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLm9uUGFyc2VFbGVtZW50KG8sIHNvdXJjZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBhcnNlQWN0aW9uPzogKGFjdGlvbjogQWN0aW9uLCBzb3VyY2U6IGFueSwgY29udGV4dDogU2VyaWFsaXphdGlvbkNvbnRleHQpID0+IHZvaWQ7XG4gICAgb25QYXJzZUVsZW1lbnQ/OiAoZWxlbWVudDogQ2FyZEVsZW1lbnQsIHNvdXJjZTogYW55LCBjb250ZXh0OiBTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4gdm9pZDtcblxuICAgIHBhcnNlQ2FyZE9iamVjdDxUIGV4dGVuZHMgQ2FyZE9iamVjdD4oXG4gICAgICAgIHBhcmVudDogQ2FyZEVsZW1lbnQgfCB1bmRlZmluZWQsXG4gICAgICAgIHNvdXJjZTogYW55LFxuICAgICAgICBmb3JiaWRkZW5UeXBlTmFtZXM6IHN0cmluZ1tdLFxuICAgICAgICBhbGxvd0ZhbGxiYWNrOiBib29sZWFuLFxuICAgICAgICBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrOiAodHlwZU5hbWU6IHN0cmluZykgPT4gVCB8IHVuZGVmaW5lZCxcbiAgICAgICAgbG9nUGFyc2VFdmVudDogKHR5cGVOYW1lOiBzdHJpbmcsIGVycm9yVHlwZTogVHlwZUVycm9yVHlwZSkgPT4gdm9pZCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5pbnRlcm5hbFBhcnNlQ2FyZE9iamVjdChcbiAgICAgICAgICAgIHBhcmVudCxcbiAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgIGZvcmJpZGRlblR5cGVOYW1lcyxcbiAgICAgICAgICAgIGFsbG93RmFsbGJhY2ssXG4gICAgICAgICAgICBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrLFxuICAgICAgICAgICAgbG9nUGFyc2VFdmVudCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNhcmRPYmplY3RQYXJzZWQocmVzdWx0LCBzb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBwYXJzZUVsZW1lbnQocGFyZW50OiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCwgc291cmNlOiBhbnksIGFsbG93RmFsbGJhY2s6IGJvb2xlYW4pOiBDYXJkRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlQ2FyZE9iamVjdDxDYXJkRWxlbWVudD4oXG4gICAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICBbXSwgLy8gRm9yYmlkZGVuIHR5cGVzIG5vdCBzdXBwb3J0ZWQgZm9yIGVsZW1lbnRzIGZvciBub3dcbiAgICAgICAgICAgIGFsbG93RmFsbGJhY2ssXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWdpc3RyeS5jcmVhdGVJbnN0YW5jZSh0eXBlTmFtZSwgdGhpcy50YXJnZXRWZXJzaW9uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAodHlwZU5hbWU6IHN0cmluZywgZXJyb3JUeXBlOiBUeXBlRXJyb3JUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yVHlwZSA9PT0gVHlwZUVycm9yVHlwZS5Vbmtub3duVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuVW5rbm93bkVsZW1lbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMudW5rbm93bkVsZW1lbnRUeXBlKHR5cGVOYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuRWxlbWVudFR5cGVOb3RBbGxvd2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuZWxlbWVudFR5cGVOb3RBbGxvd2VkKHR5cGVOYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFyc2VBY3Rpb24oXG4gICAgICAgIHBhcmVudDogQ2FyZEVsZW1lbnQsXG4gICAgICAgIHNvdXJjZTogYW55LFxuICAgICAgICBmb3JiaWRkZW5BY3Rpb25UeXBlczogc3RyaW5nW10sXG4gICAgICAgIGFsbG93RmFsbGJhY2s6IGJvb2xlYW4pOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUNhcmRPYmplY3Q8QWN0aW9uPihcbiAgICAgICAgICAgIHBhcmVudCxcbiAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgIGZvcmJpZGRlbkFjdGlvblR5cGVzLFxuICAgICAgICAgICAgYWxsb3dGYWxsYmFjayxcbiAgICAgICAgICAgICh0eXBlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uUmVnaXN0cnkuY3JlYXRlSW5zdGFuY2UodHlwZU5hbWUsIHRoaXMudGFyZ2V0VmVyc2lvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKHR5cGVOYW1lOiBzdHJpbmcsIGVycm9yVHlwZTogVHlwZUVycm9yVHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvclR5cGUgPT0gVHlwZUVycm9yVHlwZS5Vbmtub3duVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuVW5rbm93bkFjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy51bmtub3duQWN0aW9uVHlwZSh0eXBlTmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkFjdGlvblR5cGVOb3RBbGxvd2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuYWN0aW9uVHlwZU5vdEFsbG93ZWQodHlwZU5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgZWxlbWVudFJlZ2lzdHJ5KCk6IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudFJlZ2lzdHJ5ID8gdGhpcy5fZWxlbWVudFJlZ2lzdHJ5IDogR2xvYmFsUmVnaXN0cnkuZWxlbWVudHM7XG4gICAgfVxuXG4gICAgLy8gTm90IHVzaW5nIGEgcHJvcGVydHkgc2V0dGVyIGhlcmUgYmVjYXVzZSB0aGUgc2V0dGVyIHNob3VsZCBhY2NlcHQgXCJ1bmRlZmluZWRcIlxuICAgIC8vIHdoZXJlYXMgdGhlIGdldHRlciBzaG91bGQgbmV2ZXIgcmV0dXJuIHVuZGVmaW5lZC5cbiAgICBzZXRFbGVtZW50UmVnaXN0cnkodmFsdWU6IENhcmRPYmplY3RSZWdpc3RyeTxDYXJkRWxlbWVudD4gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudFJlZ2lzdHJ5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGFjdGlvblJlZ2lzdHJ5KCk6IENhcmRPYmplY3RSZWdpc3RyeTxBY3Rpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvblJlZ2lzdHJ5ID8gdGhpcy5fYWN0aW9uUmVnaXN0cnkgOiBHbG9iYWxSZWdpc3RyeS5hY3Rpb25zO1xuICAgIH1cblxuICAgIC8vIE5vdCB1c2luZyBhIHByb3BlcnR5IHNldHRlciBoZXJlIGJlY2F1c2UgdGhlIHNldHRlciBzaG91bGQgYWNjZXB0IFwidW5kZWZpbmVkXCJcbiAgICAvLyB3aGVyZWFzIHRoZSBnZXR0ZXIgc2hvdWxkIG5ldmVyIHJldHVybiB1bmRlZmluZWQuXG4gICAgc2V0QWN0aW9uUmVnaXN0cnkodmFsdWU6IENhcmRPYmplY3RSZWdpc3RyeTxBY3Rpb24+IHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX2FjdGlvblJlZ2lzdHJ5ID0gdmFsdWU7XG4gICAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgKiBhcyBFbnVtcyBmcm9tIFwiLi9lbnVtc1wiO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IFN0cmluZ3N9IGZyb20gXCIuL3N0cmluZ3NcIjtcbmltcG9ydCB7IERpY3Rpb25hcnksIEdsb2JhbFNldHRpbmdzIH0gZnJvbSBcIi4vc2hhcmVkXCI7XG5pbXBvcnQgeyBIb3N0Q29uZmlnIH0gZnJvbSBcIi4vaG9zdC1jb25maWdcIjtcbmltcG9ydCB7IEhvc3RDYXBhYmlsaXRpZXMgfSBmcm9tIFwiLi9ob3N0LWNhcGFiaWxpdGllc1wiO1xuaW1wb3J0IHsgVmVyc2lvbnMsIHByb3BlcnR5LCBTZXJpYWxpemFibGVPYmplY3QsIFN0cmluZ1Byb3BlcnR5LCBTZXJpYWxpemFibGVPYmplY3RQcm9wZXJ0eSwgSVZhbGlkYXRpb25FdmVudCwgUHJvcGVydHlEZWZpbml0aW9uIH0gZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblJlc3VsdHMge1xuICAgIHJlYWRvbmx5IGFsbElkczogRGljdGlvbmFyeTxudW1iZXI+ID0ge307XG4gICAgcmVhZG9ubHkgdmFsaWRhdGlvbkV2ZW50czogSVZhbGlkYXRpb25FdmVudFtdID0gW107XG5cbiAgICBhZGRGYWlsdXJlKGNhcmRPYmplY3Q6IENhcmRPYmplY3QsIGV2ZW50OiBFbnVtcy5WYWxpZGF0aW9uRXZlbnQsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25FdmVudHMucHVzaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwaGFzZTogRW51bXMuVmFsaWRhdGlvblBoYXNlLlZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgc291cmNlOiBjYXJkT2JqZWN0LFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgdHlwZSBDYXJkT2JqZWN0VHlwZSA9IHsgbmV3KCk6IENhcmRPYmplY3QgfTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhcmRPYmplY3QgZXh0ZW5kcyBTZXJpYWxpemFibGVPYmplY3Qge1xuICAgIC8vI3JlZ2lvbiBTY2hlbWFcblxuICAgIHN0YXRpYyByZWFkb25seSB0eXBlTmFtZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFxuICAgICAgICBWZXJzaW9ucy52MV8wLFxuICAgICAgICBcInR5cGVcIixcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgKHNlbmRlcjogb2JqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKDxDYXJkT2JqZWN0PnNlbmRlcikuZ2V0SnNvblR5cGVOYW1lKClcbiAgICAgICAgfSk7XG4gICAgc3RhdGljIHJlYWRvbmx5IGlkUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoVmVyc2lvbnMudjFfMCwgXCJpZFwiKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgcmVxdWlyZXNQcm9wZXJ0eSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RQcm9wZXJ0eShcbiAgICAgICAgVmVyc2lvbnMudjFfMixcbiAgICAgICAgXCJyZXF1aXJlc1wiLFxuICAgICAgICBIb3N0Q2FwYWJpbGl0aWVzLFxuICAgICAgICBuZXcgSG9zdENhcGFiaWxpdGllcygpKTtcblxuICAgIHByb3RlY3RlZCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SnNvblR5cGVOYW1lKCk7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KENhcmRPYmplY3QuaWRQcm9wZXJ0eSlcbiAgICBpZD86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eShDYXJkT2JqZWN0LnJlcXVpcmVzUHJvcGVydHkpXG4gICAgZ2V0IHJlcXVpcmVzKCk6IEhvc3RDYXBhYmlsaXRpZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZShDYXJkT2JqZWN0LnJlcXVpcmVzUHJvcGVydHkpO1xuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBfc2hvdWxkRmFsbGJhY2s6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByb3RlY3RlZCBfcGFyZW50PzogQ2FyZE9iamVjdDtcbiAgICBwcm90ZWN0ZWQgX3JlbmRlcmVkRWxlbWVudD86IEhUTUxFbGVtZW50O1xuXG4gICAgb25QcmVQcm9jZXNzUHJvcGVydHlWYWx1ZT86IChzZW5kZXI6IENhcmRPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHZhbHVlOiBhbnkpID0+IGFueTtcblxuICAgIGFic3RyYWN0IGdldEpzb25UeXBlTmFtZSgpOiBzdHJpbmc7XG5cbiAgICBhYnN0cmFjdCBnZXQgaG9zdENvbmZpZygpOiBIb3N0Q29uZmlnO1xuXG4gICAgcHJlUHJvY2Vzc1Byb3BlcnR5VmFsdWUocHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgcHJvcGVydHlWYWx1ZT86IGFueSk6IGFueSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCA/IHRoaXMuZ2V0VmFsdWUocHJvcGVydHkpIDogcHJvcGVydHlWYWx1ZTtcblxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuYWxsb3dQcmVQcm9jZXNzaW5nUHJvcGVydHlWYWx1ZXMpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50T2JqZWN0OiBDYXJkT2JqZWN0IHwgdW5kZWZpbmVkID0gdGhpcztcblxuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRPYmplY3QgJiYgIWN1cnJlbnRPYmplY3Qub25QcmVQcm9jZXNzUHJvcGVydHlWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRPYmplY3QgPSBjdXJyZW50T2JqZWN0LnBhcmVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRPYmplY3QgJiYgY3VycmVudE9iamVjdC5vblByZVByb2Nlc3NQcm9wZXJ0eVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRPYmplY3Qub25QcmVQcm9jZXNzUHJvcGVydHlWYWx1ZSh0aGlzLCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHNldFBhcmVudCh2YWx1ZTogQ2FyZE9iamVjdCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRTaG91bGRGYWxsYmFjayh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9zaG91bGRGYWxsYmFjayA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNob3VsZEZhbGxiYWNrKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hvdWxkRmFsbGJhY2sgfHwgIXRoaXMucmVxdWlyZXMuYXJlQWxsTWV0KHRoaXMuaG9zdENvbmZpZy5ob3N0Q2FwYWJpbGl0aWVzKTtcbiAgICB9XG5cbiAgICBnZXRSb290T2JqZWN0KCk6IENhcmRPYmplY3Qge1xuICAgICAgICBsZXQgcm9vdE9iamVjdDogQ2FyZE9iamVjdCA9IHRoaXM7XG5cbiAgICAgICAgd2hpbGUgKHJvb3RPYmplY3QucGFyZW50KSB7XG4gICAgICAgICAgICByb290T2JqZWN0ID0gcm9vdE9iamVjdC5wYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm9vdE9iamVjdDtcbiAgICB9XG5cbiAgICBpbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0OiBWYWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgICBpZiAodGhpcy5pZCkge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQuYWxsSWRzLmhhc093blByb3BlcnR5KHRoaXMuaWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuYWxsSWRzW3RoaXMuaWRdID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5EdXBsaWNhdGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLmR1cGxpY2F0ZUlkKHRoaXMuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmFsbElkc1t0aGlzLmlkXSArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hbGxJZHNbdGhpcy5pZF0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFsaWRhdGVQcm9wZXJ0aWVzKCk6IFZhbGlkYXRpb25SZXN1bHRzIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBWYWxpZGF0aW9uUmVzdWx0cygpO1xuXG4gICAgICAgIHRoaXMuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMocmVzdWx0KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBwYXJlbnQoKTogQ2FyZE9iamVjdCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQ7XG4gICAgfVxuXG4gICAgZ2V0IHJlbmRlcmVkRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XG4gICAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cbi8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhlc2UgcmVhZG9ubHkgZmllbGRzIGFyZSBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZFxuLy8gYSBicmVha2luZyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxuLy8gYW5kIGFkb3B0IHRoaXMgc3ludGF4IGZvciBhbGwgb3RoZXIgc3RhdGljIHJlYWRvbmx5IGZpZWxkcy5cbmV4cG9ydCBjbGFzcyBBY3Rpb25TdHlsZSB7XG4gICAgc3RhdGljIHJlYWRvbmx5IERlZmF1bHQ6IFwiZGVmYXVsdFwiID0gXCJkZWZhdWx0XCI7XG4gICAgc3RhdGljIHJlYWRvbmx5IFBvc2l0aXZlOiBcInBvc2l0aXZlXCIgPSBcInBvc2l0aXZlXCI7XG4gICAgc3RhdGljIHJlYWRvbmx5IERlc3RydWN0aXZlOiBcImRlc3RydWN0aXZlXCIgPSBcImRlc3RydWN0aXZlXCI7XG59XG5cbmV4cG9ydCBlbnVtIFNpemUge1xuICAgIEF1dG8sXG4gICAgU3RyZXRjaCxcbiAgICBTbWFsbCxcbiAgICBNZWRpdW0sXG4gICAgTGFyZ2Vcbn1cblxuZXhwb3J0IGVudW0gSW1hZ2VTaXplIHtcbiAgICBTbWFsbCxcbiAgICBNZWRpdW0sXG4gICAgTGFyZ2Vcbn1cblxuZXhwb3J0IGVudW0gU2l6ZVVuaXQge1xuICAgIFdlaWdodCxcbiAgICBQaXhlbFxufVxuXG5leHBvcnQgZW51bSBUZXh0U2l6ZSB7XG4gICAgU21hbGwsXG4gICAgRGVmYXVsdCxcbiAgICBNZWRpdW0sXG4gICAgTGFyZ2UsXG4gICAgRXh0cmFMYXJnZVxufVxuXG5leHBvcnQgZW51bSBUZXh0V2VpZ2h0IHtcbiAgICBMaWdodGVyLFxuICAgIERlZmF1bHQsXG4gICAgQm9sZGVyXG59XG5cbmV4cG9ydCBlbnVtIEZvbnRUeXBlIHtcbiAgICBEZWZhdWx0LFxuICAgIE1vbm9zcGFjZVxufVxuXG5leHBvcnQgZW51bSBTcGFjaW5nIHtcbiAgICBOb25lLFxuICAgIFNtYWxsLFxuICAgIERlZmF1bHQsXG4gICAgTWVkaXVtLFxuICAgIExhcmdlLFxuICAgIEV4dHJhTGFyZ2UsXG4gICAgUGFkZGluZ1xufVxuXG5leHBvcnQgZW51bSBUZXh0Q29sb3Ige1xuICAgIERlZmF1bHQsXG4gICAgRGFyayxcbiAgICBMaWdodCxcbiAgICBBY2NlbnQsXG4gICAgR29vZCxcbiAgICBXYXJuaW5nLFxuICAgIEF0dGVudGlvblxufVxuXG5leHBvcnQgZW51bSBIb3Jpem9udGFsQWxpZ25tZW50IHtcbiAgICBMZWZ0LFxuICAgIENlbnRlcixcbiAgICBSaWdodFxufVxuXG5leHBvcnQgZW51bSBWZXJ0aWNhbEFsaWdubWVudCB7XG4gICAgVG9wLFxuICAgIENlbnRlcixcbiAgICBCb3R0b21cbn1cblxuZXhwb3J0IGVudW0gQWN0aW9uQWxpZ25tZW50IHtcbiAgICBMZWZ0LFxuICAgIENlbnRlcixcbiAgICBSaWdodCxcbiAgICBTdHJldGNoXG59XG5cbmV4cG9ydCBlbnVtIEltYWdlU3R5bGUge1xuICAgIERlZmF1bHQsXG4gICAgUGVyc29uXG59XG5cbmV4cG9ydCBlbnVtIFNob3dDYXJkQWN0aW9uTW9kZSB7XG4gICAgSW5saW5lLFxuICAgIFBvcHVwXG59XG5cbmV4cG9ydCBlbnVtIE9yaWVudGF0aW9uIHtcbiAgICBIb3Jpem9udGFsLFxuICAgIFZlcnRpY2FsXG59XG5cbmV4cG9ydCBlbnVtIEZpbGxNb2RlIHtcbiAgICBDb3ZlcixcbiAgICBSZXBlYXRIb3Jpem9udGFsbHksXG4gICAgUmVwZWF0VmVydGljYWxseSxcbiAgICBSZXBlYXRcbn1cblxuZXhwb3J0IGVudW0gQWN0aW9uSWNvblBsYWNlbWVudCB7XG4gICAgTGVmdE9mVGl0bGUsXG4gICAgQWJvdmVUaXRsZVxufVxuXG5leHBvcnQgZW51bSBJbnB1dFRleHRTdHlsZSB7XG4gICAgVGV4dCxcbiAgICBUZWwsXG4gICAgVXJsLFxuICAgIEVtYWlsXG59XG5cbi8qXG4gICAgVGhpcyBzaG91bGQgcmVhbGx5IGJlIGEgc3RyaW5nIGVudW0sIGUuZy5cblxuICAgICAgICBleHBvcnQgZW51bSBDb250YWluZXJTdHlsZSB7XG4gICAgICAgICAgICBEZWZhdWx0ID0gXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBFbXBoYXNpcyA9IFwiZW1waGFzaXNcIlxuICAgICAgICB9XG5cbiAgICBIb3dldmVyLCBzb21lIGhvc3RzIGRvIG5vdCB1c2UgYSB2ZXJzaW9uIG9mIFR5cGVTY3JpcHRcbiAgICByZWNlbnQgZW5vdWdoIHRvIHVuZGVyc3RhbmQgc3RyaW5nIGVudW1zLiBUaGlzIGlzXG4gICAgYSBjb21wYXRpYmxlIGNvbnN0cnVjdCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgdXNpbmdcbiAgICBhIG1vcmUgcmVjZW50IHZlcnNpb24gb2YgVHlwZVNjcmlwdC5cblxuICAgIEFsc28gbm90ZSB0aGUgXCJ3ZWlyZFwiIHdheSB0aGVzZSByZWFkb25seSBmaWVsZHMgYXJlIGRlY2xhcmVkIGlzIHRvIHdvcmsgYXJvdW5kXG4gICAgYSBicmVha2luZyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxuICAgIGFuZCBhZG9wdCB0aGlzIHN5bnRheCBmb3IgYWxsIG90aGVyIHN0YXRpYyByZWFkb25seSBmaWVsZHMuXG4qL1xuZXhwb3J0IGNsYXNzIENvbnRhaW5lclN0eWxlIHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgRGVmYXVsdDogXCJkZWZhdWx0XCIgPSBcImRlZmF1bHRcIjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgRW1waGFzaXM6IFwiZW1waGFzaXNcIiA9IFwiZW1waGFzaXNcIjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgQWNjZW50OiBcImFjY2VudFwiID0gXCJhY2NlbnRcIjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgR29vZDogXCJnb29kXCIgPSBcImdvb2RcIjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgQXR0ZW50aW9uOiBcImF0dGVudGlvblwiID0gXCJhdHRlbnRpb25cIjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgV2FybmluZzogXCJ3YXJuaW5nXCIgPSBcIndhcm5pbmdcIjtcbn1cblxuZXhwb3J0IGVudW0gVmFsaWRhdGlvblBoYXNlIHtcbiAgICBQYXJzZSxcbiAgICBUb0pTT04sXG4gICAgVmFsaWRhdGlvblxufVxuXG5leHBvcnQgZW51bSBWYWxpZGF0aW9uRXZlbnQge1xuICAgIEhpbnQsXG4gICAgQWN0aW9uVHlwZU5vdEFsbG93ZWQsXG4gICAgQ29sbGVjdGlvbkNhbnRCZUVtcHR5LFxuICAgIERlcHJlY2F0ZWQsXG4gICAgRWxlbWVudFR5cGVOb3RBbGxvd2VkLFxuICAgIEludGVyYWN0aXZpdHlOb3RBbGxvd2VkLFxuICAgIEludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgIE1pc3NpbmdDYXJkVHlwZSxcbiAgICBQcm9wZXJ0eUNhbnRCZU51bGwsXG4gICAgVG9vTWFueUFjdGlvbnMsXG4gICAgVW5rbm93bkFjdGlvblR5cGUsXG4gICAgVW5rbm93bkVsZW1lbnRUeXBlLFxuICAgIFVuc3VwcG9ydGVkQ2FyZFZlcnNpb24sXG4gICAgRHVwbGljYXRlSWQsXG4gICAgVW5zdXBwb3J0ZWRQcm9wZXJ0eSxcbiAgICBSZXF1aXJlZElucHV0c1Nob3VsZEhhdmVMYWJlbCxcbiAgICBSZXF1aXJlZElucHV0c1Nob3VsZEhhdmVFcnJvck1lc3NhZ2UsXG4gICAgT3RoZXJcbn1cblxuZXhwb3J0IGVudW0gQ29udGFpbmVyRml0U3RhdHVzIHtcbiAgICBGdWxseUluQ29udGFpbmVyLFxuICAgIE92ZXJmbG93aW5nLFxuICAgIEZ1bGx5T3V0T2ZDb250YWluZXJcbn1cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgVGFyZ2V0VmVyc2lvbiwgVmVyc2lvbiwgU2VyaWFsaXphYmxlT2JqZWN0LCBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQsIFByb3BlcnR5QmFnIH0gZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgSG9zdENhcGFiaWxpdGllcyBleHRlbmRzIFNlcmlhbGl6YWJsZU9iamVjdCB7XG4gICAgcHJpdmF0ZSBfY2FwYWJpbGl0aWVzOiB7IFtrZXk6IHN0cmluZ106IFRhcmdldFZlcnNpb24gfSA9IHt9O1xuXG4gICAgcHJvdGVjdGVkIGdldFNjaGVtYUtleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJIb3N0Q2FwYWJpbGl0aWVzXCI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBhbnksIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBzdXBlci5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCk7XG5cbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBsZXQganNvblZlcnNpb24gPSBzb3VyY2VbbmFtZV07XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpzb25WZXJzaW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uVmVyc2lvbiA9PSBcIipcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDYXBhYmlsaXR5KG5hbWUsIFwiKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZXJzaW9uID0gVmVyc2lvbi5wYXJzZShqc29uVmVyc2lvbiwgY29udGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uICYmIHZlcnNpb24uaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2FwYWJpbGl0eShuYW1lLCB2ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxUb0pTT04odGFyZ2V0LCBjb250ZXh0KTtcblxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fY2FwYWJpbGl0aWVzKSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHRoaXMuX2NhcGFiaWxpdGllc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ2FwYWJpbGl0eShuYW1lOiBzdHJpbmcsIHZlcnNpb246IFRhcmdldFZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5fY2FwYWJpbGl0aWVzW25hbWVdID0gdmVyc2lvbjtcbiAgICB9XG5cbiAgICByZW1vdmVDYXBhYmlsaXR5KG5hbWU6IHN0cmluZykge1xuICAgICAgICBkZWxldGUgdGhpcy5fY2FwYWJpbGl0aWVzW25hbWVdO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9jYXBhYmlsaXRpZXMgPSB7fTtcbiAgICB9XG5cbiAgICBoYXNDYXBhYmlsaXR5KG5hbWU6IHN0cmluZywgdmVyc2lvbjogVGFyZ2V0VmVyc2lvbik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5fY2FwYWJpbGl0aWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBpZiAodmVyc2lvbiA9PSBcIipcIiB8fCB0aGlzLl9jYXBhYmlsaXRpZXNbbmFtZV0gPT0gXCIqXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb24uY29tcGFyZVRvKDxWZXJzaW9uPnRoaXMuX2NhcGFiaWxpdGllc1tuYW1lXSkgPD0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhcmVBbGxNZXQoaG9zdENhcGFiaWxpdGllczogSG9zdENhcGFiaWxpdGllcyk6IGJvb2xlYW4ge1xuICAgICAgICBmb3IgKGxldCBjYXBhYmlsaXR5TmFtZSBpbiB0aGlzLl9jYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICAgIGlmICghaG9zdENhcGFiaWxpdGllcy5oYXNDYXBhYmlsaXR5KGNhcGFiaWxpdHlOYW1lLCB0aGlzLl9jYXBhYmlsaXRpZXNbY2FwYWJpbGl0eU5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCAqIGFzIEVudW1zIGZyb20gXCIuL2VudW1zXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0ICogYXMgU2hhcmVkIGZyb20gXCIuL3NoYXJlZFwiO1xuaW1wb3J0IHsgSG9zdENhcGFiaWxpdGllcyB9IGZyb20gXCIuL2hvc3QtY2FwYWJpbGl0aWVzXCI7XG5cbmZ1bmN0aW9uIHBhcnNlSG9zdENvbmZpZ0VudW0odGFyZ2V0RW51bTogeyBbczogbnVtYmVyXTogc3RyaW5nIH0sIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIsIGRlZmF1bHRWYWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGxldCBwYXJzZWRWYWx1ZSA9IFV0aWxzLnBhcnNlRW51bSh0YXJnZXRFbnVtLCB2YWx1ZSwgZGVmYXVsdFZhbHVlKTtcblxuICAgICAgICByZXR1cm4gcGFyc2VkVmFsdWUgIT09IHVuZGVmaW5lZCA/IHBhcnNlZFZhbHVlIDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb2xvckRlZmluaXRpb24ge1xuICAgIGRlZmF1bHQ6IHN0cmluZyA9IFwiIzAwMDAwMFwiO1xuICAgIHN1YnRsZTogc3RyaW5nID0gXCIjNjY2NjY2XCI7XG5cbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0Q29sb3I/OiBzdHJpbmcsIHN1YnRsZUNvbG9yPzogc3RyaW5nKSB7XG4gICAgICAgIGlmIChkZWZhdWx0Q29sb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IGRlZmF1bHRDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdWJ0bGVDb2xvcikge1xuICAgICAgICAgICAgdGhpcy5zdWJ0bGUgPSBzdWJ0bGVDb2xvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHQgPSBvYmpbXCJkZWZhdWx0XCJdIHx8IHRoaXMuZGVmYXVsdDtcbiAgICAgICAgICAgIHRoaXMuc3VidGxlID0gb2JqW1wic3VidGxlXCJdIHx8IHRoaXMuc3VidGxlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGV4dENvbG9yRGVmaW5pdGlvbiBleHRlbmRzIENvbG9yRGVmaW5pdGlvbiB7XG4gICAgcmVhZG9ubHkgaGlnaGxpZ2h0Q29sb3JzID0gbmV3IENvbG9yRGVmaW5pdGlvbihcIiMyMjAwMDAwMFwiLCBcIiMxMTAwMDAwMFwiKTtcblxuICAgIHBhcnNlKG9iaj86IGFueSkge1xuICAgICAgICBzdXBlci5wYXJzZShvYmopO1xuXG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Q29sb3JzLnBhcnNlKG9ialtcImhpZ2hsaWdodENvbG9yc1wiXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBZGFwdGl2ZUNhcmRDb25maWcge1xuICAgIGFsbG93Q3VzdG9tU3R5bGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93Q3VzdG9tU3R5bGUgPSBvYmpbXCJhbGxvd0N1c3RvbVN0eWxlXCJdIHx8IHRoaXMuYWxsb3dDdXN0b21TdHlsZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEltYWdlU2V0Q29uZmlnIHtcbiAgICBpbWFnZVNpemU6IEVudW1zLlNpemUgPSBFbnVtcy5TaXplLk1lZGl1bTtcbiAgICBtYXhJbWFnZUhlaWdodDogbnVtYmVyID0gMTAwO1xuXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTaXplID0gb2JqW1wiaW1hZ2VTaXplXCJdICE9IG51bGwgPyBvYmpbXCJpbWFnZVNpemVcIl0gOiB0aGlzLmltYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMubWF4SW1hZ2VIZWlnaHQgPSA8bnVtYmVyPlV0aWxzLnBhcnNlTnVtYmVyKG9ialtcIm1heEltYWdlSGVpZ2h0XCJdLCAxMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW1hZ2VTaXplOiBFbnVtcy5TaXplW3RoaXMuaW1hZ2VTaXplXSxcbiAgICAgICAgICAgIG1heEltYWdlSGVpZ2h0OiB0aGlzLm1heEltYWdlSGVpZ2h0XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNZWRpYUNvbmZpZyB7XG4gICAgZGVmYXVsdFBvc3Rlcj86IHN0cmluZztcbiAgICBhbGxvd0lubGluZVBsYXliYWNrOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRQb3N0ZXIgPSBvYmpbXCJkZWZhdWx0UG9zdGVyXCJdO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0lubGluZVBsYXliYWNrID0gb2JqW1wiYWxsb3dJbmxpbmVQbGF5YmFja1wiXSB8fCB0aGlzLmFsbG93SW5saW5lUGxheWJhY2s7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZWZhdWx0UG9zdGVyOiB0aGlzLmRlZmF1bHRQb3N0ZXIsXG4gICAgICAgICAgICBhbGxvd0lubGluZVBsYXliYWNrOiB0aGlzLmFsbG93SW5saW5lUGxheWJhY2tcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhc2VUZXh0RGVmaW5pdGlvbiB7XG4gICAgc2l6ZTogRW51bXMuVGV4dFNpemUgPSBFbnVtcy5UZXh0U2l6ZS5EZWZhdWx0O1xuICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IgPSBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdDs7XG4gICAgaXNTdWJ0bGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQgPSBFbnVtcy5UZXh0V2VpZ2h0LkRlZmF1bHQ7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgdGhpcy5zaXplID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5UZXh0U2l6ZSwgb2JqW1wic2l6ZVwiXSwgdGhpcy5zaXplKTtcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRDb2xvciwgb2JqW1wiY29sb3JcIl0sIHRoaXMuY29sb3IpO1xuICAgICAgICAgICAgdGhpcy5pc1N1YnRsZSA9IG9ialtcImlzU3VidGxlXCJdIHx8IHRoaXMuaXNTdWJ0bGU7XG4gICAgICAgICAgICB0aGlzLndlaWdodCA9IHBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuVGV4dFdlaWdodCwgb2JqW1wid2VpZ2h0XCJdLCB0aGlzLmdldERlZmF1bHRXZWlnaHQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXREZWZhdWx0V2VpZ2h0KCkge1xuICAgICAgICByZXR1cm4gRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0O1xuICAgIH1cblxuICAgIHRvSlNPTigpOiBhbnkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemVbdGhpcy5zaXplXSxcbiAgICAgICAgICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3JbdGhpcy5jb2xvcl0sXG4gICAgICAgICAgICBpc1N1YnRsZTogdGhpcy5pc1N1YnRsZSxcbiAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodFt0aGlzLndlaWdodF1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlcXVpcmVkSW5wdXRMYWJlbFRleHREZWZpbml0aW9uIGV4dGVuZHMgQmFzZVRleHREZWZpbml0aW9uIHtcbiAgICBzdWZmaXg/OiBzdHJpbmcgPSBcIiAqXCI7XG4gICAgc3VmZml4Q29sb3I6IEVudW1zLlRleHRDb2xvciA9IEVudW1zLlRleHRDb2xvci5BdHRlbnRpb247XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgc3VwZXIob2JqKTtcblxuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLnN1ZmZpeCA9IG9ialtcInN1ZmZpeFwiXSB8fCB0aGlzLnN1ZmZpeDtcbiAgICAgICAgICAgIHRoaXMuc3VmZml4Q29sb3IgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRDb2xvciwgb2JqW1wic3VmZml4Q29sb3JcIl0sIHRoaXMuc3VmZml4Q29sb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9KU09OKCk6IGFueSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzdXBlci50b0pTT04oKTtcbiAgICAgICAgcmVzdWx0W1wic3VmZml4XCJdID0gdGhpcy5zdWZmaXg7XG4gICAgICAgIHJlc3VsdFtcInN1ZmZpeENvbG9yXCJdID0gRW51bXMuVGV4dENvbG9yW3RoaXMuc3VmZml4Q29sb3JdO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW5wdXRMYWJlbENvbmZpZyB7XG4gICAgaW5wdXRTcGFjaW5nOiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5TbWFsbDtcbiAgICByZWFkb25seSByZXF1aXJlZElucHV0czogUmVxdWlyZWRJbnB1dExhYmVsVGV4dERlZmluaXRpb24gPSBuZXcgUmVxdWlyZWRJbnB1dExhYmVsVGV4dERlZmluaXRpb24oKTtcbiAgICByZWFkb25seSBvcHRpb25hbElucHV0czogQmFzZVRleHREZWZpbml0aW9uID0gbmV3IEJhc2VUZXh0RGVmaW5pdGlvbigpO1xuXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTcGFjaW5nID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5TcGFjaW5nLCBvYmpbXCJpbnB1dFNwYWNpbmdcIl0sIHRoaXMuaW5wdXRTcGFjaW5nKTtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRJbnB1dHMgPSBuZXcgUmVxdWlyZWRJbnB1dExhYmVsVGV4dERlZmluaXRpb24ob2JqW1wicmVxdWlyZWRJbnB1dHNcIl0pO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25hbElucHV0cyA9IG5ldyBCYXNlVGV4dERlZmluaXRpb24ob2JqW1wib3B0aW9uYWxJbnB1dHNcIl0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW5wdXRDb25maWcge1xuICAgIHJlYWRvbmx5IGxhYmVsOiBJbnB1dExhYmVsQ29uZmlnID0gbmV3IElucHV0TGFiZWxDb25maWcoKTtcbiAgICByZWFkb25seSBlcnJvck1lc3NhZ2U6IEJhc2VUZXh0RGVmaW5pdGlvbiA9IG5ldyBCYXNlVGV4dERlZmluaXRpb24oeyBjb2xvcjogRW51bXMuVGV4dENvbG9yLkF0dGVudGlvbiB9KTtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmxhYmVsID0gbmV3IElucHV0TGFiZWxDb25maWcob2JqW1wibGFiZWxcIl0pO1xuICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBuZXcgQmFzZVRleHREZWZpbml0aW9uKG9ialtcImVycm9yTWVzc2FnZVwiXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWN0VGV4dERlZmluaXRpb24gZXh0ZW5kcyBCYXNlVGV4dERlZmluaXRpb24ge1xuICAgIHdyYXA6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XG4gICAgICAgIHN1cGVyKG9iaik7XG5cbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgdGhpcy53cmFwID0gb2JqW1wid3JhcFwiXSAhPSBudWxsID8gb2JqW1wid3JhcFwiXSA6IHRoaXMud3JhcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvSlNPTigpOiBhbnkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc3VwZXIudG9KU09OKCk7XG4gICAgICAgIHJlc3VsdFtcIndyYXBcIl0gPSB0aGlzLndyYXA7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWN0VGl0bGVEZWZpbml0aW9uIGV4dGVuZHMgRmFjdFRleHREZWZpbml0aW9uIHtcbiAgICBtYXhXaWR0aD86IG51bWJlciA9IDE1MDtcbiAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQgPSBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcjtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBzdXBlcihvYmopO1xuXG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMubWF4V2lkdGggPSBvYmpbXCJtYXhXaWR0aFwiXSAhPSBudWxsID8gb2JqW1wibWF4V2lkdGhcIl0gOiB0aGlzLm1heFdpZHRoO1xuICAgICAgICAgICAgdGhpcy53ZWlnaHQgPSBwYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRXZWlnaHQsIG9ialtcIndlaWdodFwiXSwgRW51bXMuVGV4dFdlaWdodC5Cb2xkZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RGVmYXVsdFdlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZhY3RTZXRDb25maWcge1xuICAgIHJlYWRvbmx5IHRpdGxlOiBGYWN0VGl0bGVEZWZpbml0aW9uID0gbmV3IEZhY3RUaXRsZURlZmluaXRpb24oKTtcbiAgICByZWFkb25seSB2YWx1ZTogRmFjdFRleHREZWZpbml0aW9uID0gbmV3IEZhY3RUZXh0RGVmaW5pdGlvbigpO1xuICAgIHNwYWNpbmc6IG51bWJlciA9IDEwO1xuXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSBuZXcgRmFjdFRpdGxlRGVmaW5pdGlvbihvYmpbXCJ0aXRsZVwiXSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEZhY3RUZXh0RGVmaW5pdGlvbihvYmpbXCJ2YWx1ZVwiXSk7XG4gICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZyAhPSBudWxsID8gb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmcgOiB0aGlzLnNwYWNpbmc7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaG93Q2FyZEFjdGlvbkNvbmZpZyB7XG4gICAgYWN0aW9uTW9kZTogRW51bXMuU2hvd0NhcmRBY3Rpb25Nb2RlID0gRW51bXMuU2hvd0NhcmRBY3Rpb25Nb2RlLklubGluZTtcbiAgICBpbmxpbmVUb3BNYXJnaW46IG51bWJlciA9IDE2O1xuICAgIHN0eWxlPzogc3RyaW5nID0gRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25Nb2RlID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGUsIG9ialtcImFjdGlvbk1vZGVcIl0sIEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZS5JbmxpbmUpO1xuICAgICAgICAgICAgdGhpcy5pbmxpbmVUb3BNYXJnaW4gPSBvYmpbXCJpbmxpbmVUb3BNYXJnaW5cIl0gIT0gbnVsbCA/IG9ialtcImlubGluZVRvcE1hcmdpblwiXSA6IHRoaXMuaW5saW5lVG9wTWFyZ2luO1xuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG9ialtcInN0eWxlXCJdICYmIHR5cGVvZiBvYmpbXCJzdHlsZVwiXSA9PT0gXCJzdHJpbmdcIiA/IG9ialtcInN0eWxlXCJdIDogRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3Rpb25Nb2RlOiBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGVbdGhpcy5hY3Rpb25Nb2RlXSxcbiAgICAgICAgICAgIGlubGluZVRvcE1hcmdpbjogdGhpcy5pbmxpbmVUb3BNYXJnaW4sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5zdHlsZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWN0aW9uc0NvbmZpZyB7XG4gICAgbWF4QWN0aW9uczogbnVtYmVyID0gNTtcbiAgICBzcGFjaW5nOiBFbnVtcy5TcGFjaW5nID0gRW51bXMuU3BhY2luZy5EZWZhdWx0O1xuICAgIGJ1dHRvblNwYWNpbmc6IG51bWJlciA9IDIwO1xuICAgIHJlYWRvbmx5IHNob3dDYXJkOiBTaG93Q2FyZEFjdGlvbkNvbmZpZyA9IG5ldyBTaG93Q2FyZEFjdGlvbkNvbmZpZygpO1xuICAgIHByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uPzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGFjdGlvbnNPcmllbnRhdGlvbjogRW51bXMuT3JpZW50YXRpb24gPSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsO1xuICAgIGFjdGlvbkFsaWdubWVudDogRW51bXMuQWN0aW9uQWxpZ25tZW50ID0gRW51bXMuQWN0aW9uQWxpZ25tZW50LkxlZnQ7XG4gICAgaWNvblBsYWNlbWVudDogRW51bXMuQWN0aW9uSWNvblBsYWNlbWVudCA9IEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQuTGVmdE9mVGl0bGU7XG4gICAgYWxsb3dUaXRsZVRvV3JhcDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGljb25TaXplOiBudW1iZXIgPSAxNjtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLm1heEFjdGlvbnMgPSBvYmpbXCJtYXhBY3Rpb25zXCJdICE9IG51bGwgPyBvYmpbXCJtYXhBY3Rpb25zXCJdIDogdGhpcy5tYXhBY3Rpb25zO1xuICAgICAgICAgICAgdGhpcy5zcGFjaW5nID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5TcGFjaW5nLCBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZywgRW51bXMuU3BhY2luZy5EZWZhdWx0KTtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uU3BhY2luZyA9IG9ialtcImJ1dHRvblNwYWNpbmdcIl0gIT0gbnVsbCA/IG9ialtcImJ1dHRvblNwYWNpbmdcIl0gOiB0aGlzLmJ1dHRvblNwYWNpbmc7XG4gICAgICAgICAgICB0aGlzLnNob3dDYXJkID0gbmV3IFNob3dDYXJkQWN0aW9uQ29uZmlnKG9ialtcInNob3dDYXJkXCJdKTtcbiAgICAgICAgICAgIHRoaXMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb24gPSBVdGlscy5wYXJzZUJvb2wob2JqW1wicHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb25cIl0sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc09yaWVudGF0aW9uID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5PcmllbnRhdGlvbiwgb2JqW1wiYWN0aW9uc09yaWVudGF0aW9uXCJdLCBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uQWxpZ25tZW50ID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5BY3Rpb25BbGlnbm1lbnQsIG9ialtcImFjdGlvbkFsaWdubWVudFwiXSwgRW51bXMuQWN0aW9uQWxpZ25tZW50LkxlZnQpO1xuICAgICAgICAgICAgdGhpcy5pY29uUGxhY2VtZW50ID0gcGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LCBvYmpbXCJpY29uUGxhY2VtZW50XCJdLCBFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LkxlZnRPZlRpdGxlKTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dUaXRsZVRvV3JhcCA9IG9ialtcImFsbG93VGl0bGVUb1dyYXBcIl0gIT0gbnVsbCA/IG9ialtcImFsbG93VGl0bGVUb1dyYXBcIl0gOiB0aGlzLmFsbG93VGl0bGVUb1dyYXA7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IHNpemVBbmRVbml0ID0gU2hhcmVkLlNpemVBbmRVbml0LnBhcnNlKG9ialtcImljb25TaXplXCJdKTtcblxuICAgICAgICAgICAgICAgIGlmIChzaXplQW5kVW5pdC51bml0ID09IEVudW1zLlNpemVVbml0LlBpeGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWNvblNpemUgPSBzaXplQW5kVW5pdC5waHlzaWNhbFNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBTd2FsbG93IHRoaXMsIGtlZXAgZGVmYXVsdCBpY29uIHNpemVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1heEFjdGlvbnM6IHRoaXMubWF4QWN0aW9ucyxcbiAgICAgICAgICAgIHNwYWNpbmc6IEVudW1zLlNwYWNpbmdbdGhpcy5zcGFjaW5nXSxcbiAgICAgICAgICAgIGJ1dHRvblNwYWNpbmc6IHRoaXMuYnV0dG9uU3BhY2luZyxcbiAgICAgICAgICAgIHNob3dDYXJkOiB0aGlzLnNob3dDYXJkLFxuICAgICAgICAgICAgcHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb246IHRoaXMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb24sXG4gICAgICAgICAgICBhY3Rpb25zT3JpZW50YXRpb246IEVudW1zLk9yaWVudGF0aW9uW3RoaXMuYWN0aW9uc09yaWVudGF0aW9uXSxcbiAgICAgICAgICAgIGFjdGlvbkFsaWdubWVudDogRW51bXMuQWN0aW9uQWxpZ25tZW50W3RoaXMuYWN0aW9uQWxpZ25tZW50XVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29sb3JTZXREZWZpbml0aW9uIHtcbiAgICBwcml2YXRlIHBhcnNlU2luZ2xlQ29sb3Iob2JqOiBhbnksIHByb3BlcnR5TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgICgoPGFueT50aGlzKVtwcm9wZXJ0eU5hbWVdIGFzIFRleHRDb2xvckRlZmluaXRpb24pLnBhcnNlKG9ialtwcm9wZXJ0eU5hbWVdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlZmF1bHQ6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xuICAgIGRhcms6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xuICAgIGxpZ2h0OiBUZXh0Q29sb3JEZWZpbml0aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcbiAgICBhY2NlbnQ6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xuICAgIGdvb2Q6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xuICAgIHdhcm5pbmc6IFRleHRDb2xvckRlZmluaXRpb24gPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xuICAgIGF0dGVudGlvbjogVGV4dENvbG9yRGVmaW5pdGlvbiA9IG5ldyBUZXh0Q29sb3JEZWZpbml0aW9uKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgdGhpcy5wYXJzZShvYmopO1xuICAgIH1cblxuICAgIHBhcnNlKG9iajogYW55KSB7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZGVmYXVsdFwiKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZGFya1wiKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwibGlnaHRcIik7XG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcImFjY2VudFwiKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZ29vZFwiKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwid2FybmluZ1wiKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiYXR0ZW50aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG5cbiAgICByZWFkb25seSBmb3JlZ3JvdW5kQ29sb3JzOiBDb2xvclNldERlZmluaXRpb24gPSBuZXcgQ29sb3JTZXREZWZpbml0aW9uKFxuICAgICAgICB7XG4gICAgICAgICAgICBcImRlZmF1bHRcIjogeyBkZWZhdWx0OiBcIiMzMzMzMzNcIiwgc3VidGxlOiBcIiNFRTMzMzMzM1wiIH0sXG4gICAgICAgICAgICBcImRhcmtcIjogeyBkZWZhdWx0OiBcIiMwMDAwMDBcIiwgc3VidGxlOiBcIiM2NjAwMDAwMFwiIH0sXG4gICAgICAgICAgICBcImxpZ2h0XCI6IHsgZGVmYXVsdDogXCIjRkZGRkZGXCIsIHN1YnRsZTogXCIjMzMwMDAwMDBcIiB9LFxuICAgICAgICAgICAgXCJhY2NlbnRcIjogeyBkZWZhdWx0OiBcIiMyRTg5RkNcIiwgc3VidGxlOiBcIiM4ODJFODlGQ1wiIH0sXG4gICAgICAgICAgICBcImdvb2RcIjogeyBkZWZhdWx0OiBcIiMwMjhBMDJcIiwgc3VidGxlOiBcIiNERDAyNzUwMlwiIH0sXG4gICAgICAgICAgICBcIndhcm5pbmdcIjogeyBkZWZhdWx0OiBcIiNFNjk1MDBcIiwgc3VidGxlOiBcIiNEREU2OTUwMFwiIH0sXG4gICAgICAgICAgICBcImF0dGVudGlvblwiOiB7IGRlZmF1bHQ6IFwiI0NDMzMwMFwiLCBzdWJ0bGU6IFwiI0REQ0MzMzAwXCIgfVxuICAgICAgICB9XG4gICAgKTtcblxuICAgIGhpZ2hsaWdodEJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBoaWdobGlnaHRGb3JlZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG5cbiAgICBwYXJzZShvYmo6IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IG9ialtcImJhY2tncm91bmRDb2xvclwiXTtcblxuICAgICAgICAgICAgdGhpcy5mb3JlZ3JvdW5kQ29sb3JzLnBhcnNlKG9ialtcImZvcmVncm91bmRDb2xvcnNcIl0pO1xuXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEJhY2tncm91bmRDb2xvciA9IG9ialtcImhpZ2hsaWdodEJhY2tncm91bmRDb2xvclwiXTtcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yID0gb2JqW1wiaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yXCJdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3Iob2JqPzogYW55KSB7XG4gICAgICAgIHRoaXMucGFyc2Uob2JqKTtcbiAgICB9XG5cbiAgICBnZXQgaXNCdWlsdEluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5jbGFzcyBCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIGV4dGVuZHMgQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uIHtcbiAgICBnZXQgaXNCdWlsdEluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmVIZWlnaHREZWZpbml0aW9ucyB7XG4gICAgc21hbGw6IG51bWJlcjtcbiAgICBtZWRpdW06IG51bWJlcjtcbiAgICBkZWZhdWx0OiBudW1iZXI7XG4gICAgbGFyZ2U6IG51bWJlcjtcbiAgICBleHRyYUxhcmdlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBDb250YWluZXJTdHlsZVNldCB7XG4gICAgcHJpdmF0ZSBfYWxsU3R5bGVzOiB7IFtrZXk6IHN0cmluZ106IENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbiB9ID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHRdID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcbiAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzXSA9IG5ldyBCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uKCk7XG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcbiAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkdvb2RdID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcbiAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkF0dGVudGlvbl0gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuV2FybmluZ10gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0XS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF0pO1xuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzXS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXNdKTtcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdKTtcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5Hb29kXS5wYXJzZShvYmpbRW51bXMuQ29udGFpbmVyU3R5bGUuR29vZF0pO1xuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkF0dGVudGlvbl0ucGFyc2Uob2JqW0VudW1zLkNvbnRhaW5lclN0eWxlLkF0dGVudGlvbl0pO1xuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLldhcm5pbmddLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5XYXJuaW5nXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbVN0eWxlQXJyYXkgPSBvYmpbXCJjdXN0b21TdHlsZXNcIl07XG5cbiAgICAgICAgICAgIGlmIChjdXN0b21TdHlsZUFycmF5ICYmIEFycmF5LmlzQXJyYXkoY3VzdG9tU3R5bGVBcnJheSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjdXN0b21TdHlsZSBvZiBjdXN0b21TdHlsZUFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21TdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlTmFtZSA9IGN1c3RvbVN0eWxlW1wibmFtZVwiXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlTmFtZSAmJiB0eXBlb2Ygc3R5bGVOYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsbFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tzdHlsZU5hbWVdLnBhcnNlKGN1c3RvbVN0eWxlW1wic3R5bGVcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW3N0eWxlTmFtZV0gPSBuZXcgQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uKGN1c3RvbVN0eWxlW1wic3R5bGVcIl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgbGV0IGN1c3RvbVN0eWxlQXJyYXk6IGFueVtdID0gW107XG5cbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fYWxsU3R5bGVzKS5mb3JFYWNoKFxuICAgICAgICAgICAgKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYWxsU3R5bGVzW2tleV0uaXNCdWlsdEluKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVN0eWxlQXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5fYWxsU3R5bGVzW2tleV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHJlc3VsdDogYW55ID0ge1xuICAgICAgICAgICAgZGVmYXVsdDogdGhpcy5kZWZhdWx0LFxuICAgICAgICAgICAgZW1waGFzaXM6IHRoaXMuZW1waGFzaXNcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXN0b21TdHlsZUFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5jdXN0b21TdHlsZXMgPSBjdXN0b21TdHlsZUFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXRTdHlsZUJ5TmFtZShuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsIGRlZmF1bHRWYWx1ZT86IENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbik6IENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbiB7XG4gICAgICAgIGlmIChuYW1lICYmIHRoaXMuX2FsbFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FsbFN0eWxlc1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgPyBkZWZhdWx0VmFsdWUgOiB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZGVmYXVsdCgpOiBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHRdO1xuICAgIH1cblxuICAgIGdldCBlbXBoYXNpcygpOiBDb250YWluZXJTdHlsZURlZmluaXRpb24ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzXTtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvbnRTaXplRGVmaW5pdGlvbnMge1xuICAgIHNtYWxsOiBudW1iZXI7XG4gICAgZGVmYXVsdDogbnVtYmVyO1xuICAgIG1lZGl1bTogbnVtYmVyO1xuICAgIGxhcmdlOiBudW1iZXI7XG4gICAgZXh0cmFMYXJnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGb250V2VpZ2h0RGVmaW5pdGlvbnMge1xuICAgIGxpZ2h0ZXI6IG51bWJlcjtcbiAgICBkZWZhdWx0OiBudW1iZXI7XG4gICAgYm9sZGVyOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBGb250VHlwZURlZmluaXRpb24ge1xuICAgIHN0YXRpYyByZWFkb25seSBtb25vc3BhY2UgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKFwiJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlXCIpO1xuXG4gICAgZm9udEZhbWlseT86IHN0cmluZyA9IFwiU2Vnb2UgVUksU2Vnb2UsU2Vnb2UgV1AsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLHNhbnMtc2VyaWZcIjtcblxuICAgIGZvbnRTaXplczogSUZvbnRTaXplRGVmaW5pdGlvbnMgPSB7XG4gICAgICAgIHNtYWxsOiAxMixcbiAgICAgICAgZGVmYXVsdDogMTQsXG4gICAgICAgIG1lZGl1bTogMTcsXG4gICAgICAgIGxhcmdlOiAyMSxcbiAgICAgICAgZXh0cmFMYXJnZTogMjZcbiAgICB9O1xuXG4gICAgZm9udFdlaWdodHM6IElGb250V2VpZ2h0RGVmaW5pdGlvbnMgPSB7XG4gICAgICAgIGxpZ2h0ZXI6IDIwMCxcbiAgICAgICAgZGVmYXVsdDogNDAwLFxuICAgICAgICBib2xkZXI6IDYwMFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihmb250RmFtaWx5Pzogc3RyaW5nKSB7XG4gICAgICAgIGlmIChmb250RmFtaWx5KSB7XG4gICAgICAgICAgICB0aGlzLmZvbnRGYW1pbHkgPSBmb250RmFtaWx5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFyc2Uob2JqPzogYW55KSB7XG4gICAgICAgIHRoaXMuZm9udEZhbWlseSA9IG9ialtcImZvbnRGYW1pbHlcIl0gfHwgdGhpcy5mb250RmFtaWx5O1xuICAgICAgICB0aGlzLmZvbnRTaXplcyA9IHtcbiAgICAgICAgICAgIHNtYWxsOiBvYmouZm9udFNpemVzICYmIG9iai5mb250U2l6ZXNbXCJzbWFsbFwiXSB8fCB0aGlzLmZvbnRTaXplcy5zbWFsbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5mb250U2l6ZXMgJiYgb2JqLmZvbnRTaXplc1tcImRlZmF1bHRcIl0gfHwgdGhpcy5mb250U2l6ZXMuZGVmYXVsdCxcbiAgICAgICAgICAgIG1lZGl1bTogb2JqLmZvbnRTaXplcyAmJiBvYmouZm9udFNpemVzW1wibWVkaXVtXCJdIHx8IHRoaXMuZm9udFNpemVzLm1lZGl1bSxcbiAgICAgICAgICAgIGxhcmdlOiBvYmouZm9udFNpemVzICYmIG9iai5mb250U2l6ZXNbXCJsYXJnZVwiXSB8fCB0aGlzLmZvbnRTaXplcy5sYXJnZSxcbiAgICAgICAgICAgIGV4dHJhTGFyZ2U6IG9iai5mb250U2l6ZXMgJiYgb2JqLmZvbnRTaXplc1tcImV4dHJhTGFyZ2VcIl0gfHwgdGhpcy5mb250U2l6ZXMuZXh0cmFMYXJnZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZvbnRXZWlnaHRzID0ge1xuICAgICAgICAgICAgbGlnaHRlcjogb2JqLmZvbnRXZWlnaHRzICYmIG9iai5mb250V2VpZ2h0c1tcImxpZ2h0ZXJcIl0gfHwgdGhpcy5mb250V2VpZ2h0cy5saWdodGVyLFxuICAgICAgICAgICAgZGVmYXVsdDogb2JqLmZvbnRXZWlnaHRzICYmIG9iai5mb250V2VpZ2h0c1tcImRlZmF1bHRcIl0gfHwgdGhpcy5mb250V2VpZ2h0cy5kZWZhdWx0LFxuICAgICAgICAgICAgYm9sZGVyOiBvYmouZm9udFdlaWdodHMgJiYgb2JqLmZvbnRXZWlnaHRzW1wiYm9sZGVyXCJdIHx8IHRoaXMuZm9udFdlaWdodHMuYm9sZGVyXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRm9udFR5cGVTZXQge1xuICAgIGRlZmF1bHQ6IEZvbnRUeXBlRGVmaW5pdGlvbjtcbiAgICBtb25vc3BhY2U6IEZvbnRUeXBlRGVmaW5pdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKCk7XG4gICAgICAgIHRoaXMubW9ub3NwYWNlID0gbmV3IEZvbnRUeXBlRGVmaW5pdGlvbihcIidDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZVwiKTtcblxuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHQucGFyc2Uob2JqW1wiZGVmYXVsdFwiXSk7XG4gICAgICAgICAgICB0aGlzLm1vbm9zcGFjZS5wYXJzZShvYmpbXCJtb25vc3BhY2VcIl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0U3R5bGVEZWZpbml0aW9uKHN0eWxlOiBFbnVtcy5Gb250VHlwZSB8IHVuZGVmaW5lZCk6IEZvbnRUeXBlRGVmaW5pdGlvbiB7XG4gICAgICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuRm9udFR5cGUuTW9ub3NwYWNlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vbm9zcGFjZTtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuRm9udFR5cGUuRGVmYXVsdDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEhvc3RDb25maWcge1xuICAgIHJlYWRvbmx5IGhvc3RDYXBhYmlsaXRpZXMgPSBuZXcgSG9zdENhcGFiaWxpdGllcygpO1xuXG4gICAgcHJpdmF0ZSBfbGVnYWN5Rm9udFR5cGU6IEZvbnRUeXBlRGVmaW5pdGlvbjtcblxuICAgIGNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3I6IHN0cmluZyA9IFwiLFwiO1xuICAgIHN1cHBvcnRzSW50ZXJhY3Rpdml0eTogYm9vbGVhbiA9IHRydWU7XG4gICAgbGluZUhlaWdodHM/OiBJTGluZUhlaWdodERlZmluaXRpb25zO1xuICAgIGZvbnRUeXBlcz86IEZvbnRUeXBlU2V0O1xuXG4gICAgcmVhZG9ubHkgc3BhY2luZyA9IHtcbiAgICAgICAgc21hbGw6IDMsXG4gICAgICAgIGRlZmF1bHQ6IDgsXG4gICAgICAgIG1lZGl1bTogMjAsXG4gICAgICAgIGxhcmdlOiAzMCxcbiAgICAgICAgZXh0cmFMYXJnZTogNDAsXG4gICAgICAgIHBhZGRpbmc6IDE1XG4gICAgfTtcblxuICAgIHJlYWRvbmx5IHNlcGFyYXRvciA9IHtcbiAgICAgICAgbGluZVRoaWNrbmVzczogMSxcbiAgICAgICAgbGluZUNvbG9yOiBcIiNFRUVFRUVcIlxuICAgIH07XG5cbiAgICByZWFkb25seSBpbWFnZVNpemVzID0ge1xuICAgICAgICBzbWFsbDogNDAsXG4gICAgICAgIG1lZGl1bTogODAsXG4gICAgICAgIGxhcmdlOiAxNjBcbiAgICB9O1xuXG4gICAgcmVhZG9ubHkgY29udGFpbmVyU3R5bGVzOiBDb250YWluZXJTdHlsZVNldCA9IG5ldyBDb250YWluZXJTdHlsZVNldCgpO1xuICAgIHJlYWRvbmx5IGlucHV0czogSW5wdXRDb25maWcgPSBuZXcgSW5wdXRDb25maWcoKTtcbiAgICByZWFkb25seSBhY3Rpb25zOiBBY3Rpb25zQ29uZmlnID0gbmV3IEFjdGlvbnNDb25maWcoKTtcbiAgICByZWFkb25seSBhZGFwdGl2ZUNhcmQ6IEFkYXB0aXZlQ2FyZENvbmZpZyA9IG5ldyBBZGFwdGl2ZUNhcmRDb25maWcoKTtcbiAgICByZWFkb25seSBpbWFnZVNldDogSW1hZ2VTZXRDb25maWcgPSBuZXcgSW1hZ2VTZXRDb25maWcoKTtcbiAgICByZWFkb25seSBtZWRpYTogTWVkaWFDb25maWcgPSBuZXcgTWVkaWFDb25maWcoKTtcbiAgICByZWFkb25seSBmYWN0U2V0OiBGYWN0U2V0Q29uZmlnID0gbmV3IEZhY3RTZXRDb25maWcoKTtcblxuICAgIGNzc0NsYXNzTmFtZVByZWZpeD86IHN0cmluZztcbiAgICBhbHdheXNBbGxvd0JsZWVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCIgfHwgb2JqIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShvYmogYXMgc3RyaW5nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yID0gKG9iaiAmJiB0eXBlb2Ygb2JqW1wiY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvclwiXSA9PT0gXCJzdHJpbmdcIikgPyBvYmpbXCJjaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yXCJdIDogdGhpcy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yO1xuICAgICAgICAgICAgdGhpcy5zdXBwb3J0c0ludGVyYWN0aXZpdHkgPSAob2JqICYmIHR5cGVvZiBvYmpbXCJzdXBwb3J0c0ludGVyYWN0aXZpdHlcIl0gPT09IFwiYm9vbGVhblwiKSA/IG9ialtcInN1cHBvcnRzSW50ZXJhY3Rpdml0eVwiXSA6IHRoaXMuc3VwcG9ydHNJbnRlcmFjdGl2aXR5O1xuXG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZSA9IG5ldyBGb250VHlwZURlZmluaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLnBhcnNlKG9iaik7XG5cbiAgICAgICAgICAgIGlmIChvYmouZm9udFR5cGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb250VHlwZXMgPSBuZXcgRm9udFR5cGVTZXQob2JqLmZvbnRUeXBlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvYmoubGluZUhlaWdodHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBzbWFsbDogb2JqLmxpbmVIZWlnaHRzW1wic21hbGxcIl0sXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5saW5lSGVpZ2h0c1tcImRlZmF1bHRcIl0sXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogb2JqLmxpbmVIZWlnaHRzW1wibWVkaXVtXCJdLFxuICAgICAgICAgICAgICAgICAgICBsYXJnZTogb2JqLmxpbmVIZWlnaHRzW1wibGFyZ2VcIl0sXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IG9iai5saW5lSGVpZ2h0c1tcImV4dHJhTGFyZ2VcIl1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZVNpemVzID0ge1xuICAgICAgICAgICAgICAgIHNtYWxsOiBvYmouaW1hZ2VTaXplcyAmJiBvYmouaW1hZ2VTaXplc1tcInNtYWxsXCJdIHx8IHRoaXMuaW1hZ2VTaXplcy5zbWFsbCxcbiAgICAgICAgICAgICAgICBtZWRpdW06IG9iai5pbWFnZVNpemVzICYmIG9iai5pbWFnZVNpemVzW1wibWVkaXVtXCJdIHx8IHRoaXMuaW1hZ2VTaXplcy5tZWRpdW0sXG4gICAgICAgICAgICAgICAgbGFyZ2U6IG9iai5pbWFnZVNpemVzICYmIG9iai5pbWFnZVNpemVzW1wibGFyZ2VcIl0gfHwgdGhpcy5pbWFnZVNpemVzLmxhcmdlLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZXMgPSBuZXcgQ29udGFpbmVyU3R5bGVTZXQob2JqW1wiY29udGFpbmVyU3R5bGVzXCJdKTtcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHtcbiAgICAgICAgICAgICAgICBzbWFsbDogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJzbWFsbFwiXSB8fCB0aGlzLnNwYWNpbmcuc21hbGwsXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJkZWZhdWx0XCJdIHx8IHRoaXMuc3BhY2luZy5kZWZhdWx0LFxuICAgICAgICAgICAgICAgIG1lZGl1bTogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJtZWRpdW1cIl0gfHwgdGhpcy5zcGFjaW5nLm1lZGl1bSxcbiAgICAgICAgICAgICAgICBsYXJnZTogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJsYXJnZVwiXSB8fCB0aGlzLnNwYWNpbmcubGFyZ2UsXG4gICAgICAgICAgICAgICAgZXh0cmFMYXJnZTogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJleHRyYUxhcmdlXCJdIHx8IHRoaXMuc3BhY2luZy5leHRyYUxhcmdlLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wicGFkZGluZ1wiXSB8fCB0aGlzLnNwYWNpbmcucGFkZGluZ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSB7XG4gICAgICAgICAgICAgICAgbGluZVRoaWNrbmVzczogb2JqLnNlcGFyYXRvciAmJiBvYmouc2VwYXJhdG9yW1wibGluZVRoaWNrbmVzc1wiXSB8fCB0aGlzLnNlcGFyYXRvci5saW5lVGhpY2tuZXNzLFxuICAgICAgICAgICAgICAgIGxpbmVDb2xvcjogb2JqLnNlcGFyYXRvciAmJiBvYmouc2VwYXJhdG9yW1wibGluZUNvbG9yXCJdIHx8IHRoaXMuc2VwYXJhdG9yLmxpbmVDb2xvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmlucHV0cyA9IG5ldyBJbnB1dENvbmZpZyhvYmouaW5wdXRzIHx8IHRoaXMuaW5wdXRzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9ucyA9IG5ldyBBY3Rpb25zQ29uZmlnKG9iai5hY3Rpb25zIHx8IHRoaXMuYWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmFkYXB0aXZlQ2FyZCA9IG5ldyBBZGFwdGl2ZUNhcmRDb25maWcob2JqLmFkYXB0aXZlQ2FyZCB8fCB0aGlzLmFkYXB0aXZlQ2FyZCk7XG4gICAgICAgICAgICB0aGlzLmltYWdlU2V0ID0gbmV3IEltYWdlU2V0Q29uZmlnKG9ialtcImltYWdlU2V0XCJdKTtcbiAgICAgICAgICAgIHRoaXMuZmFjdFNldCA9IG5ldyBGYWN0U2V0Q29uZmlnKG9ialtcImZhY3RTZXRcIl0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRGb250VHlwZURlZmluaXRpb24oc3R5bGU/OiBFbnVtcy5Gb250VHlwZSk6IEZvbnRUeXBlRGVmaW5pdGlvbiB7XG4gICAgICAgIGlmICh0aGlzLmZvbnRUeXBlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9udFR5cGVzLmdldFN0eWxlRGVmaW5pdGlvbihzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGUgPT0gRW51bXMuRm9udFR5cGUuTW9ub3NwYWNlID8gRm9udFR5cGVEZWZpbml0aW9uLm1vbm9zcGFjZSA6IHRoaXMuX2xlZ2FjeUZvbnRUeXBlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RWZmZWN0aXZlU3BhY2luZyhzcGFjaW5nOiBFbnVtcy5TcGFjaW5nKTogbnVtYmVyIHtcbiAgICAgICAgc3dpdGNoIChzcGFjaW5nKSB7XG4gICAgICAgICAgICBjYXNlIEVudW1zLlNwYWNpbmcuU21hbGw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5zbWFsbDtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5EZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwYWNpbmcuZGVmYXVsdDtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5NZWRpdW06XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5tZWRpdW07XG4gICAgICAgICAgICBjYXNlIEVudW1zLlNwYWNpbmcuTGFyZ2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5sYXJnZTtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5FeHRyYUxhcmdlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwYWNpbmcuZXh0cmFMYXJnZTtcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5QYWRkaW5nOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwYWNpbmcucGFkZGluZztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZ0RlZmluaXRpb246IFNoYXJlZC5QYWRkaW5nRGVmaW5pdGlvbik6IFNoYXJlZC5TcGFjaW5nRGVmaW5pdGlvbiB7XG4gICAgICAgIHJldHVybiBuZXcgU2hhcmVkLlNwYWNpbmdEZWZpbml0aW9uKFxuICAgICAgICAgICAgdGhpcy5nZXRFZmZlY3RpdmVTcGFjaW5nKHBhZGRpbmdEZWZpbml0aW9uLnRvcCksXG4gICAgICAgICAgICB0aGlzLmdldEVmZmVjdGl2ZVNwYWNpbmcocGFkZGluZ0RlZmluaXRpb24ucmlnaHQpLFxuICAgICAgICAgICAgdGhpcy5nZXRFZmZlY3RpdmVTcGFjaW5nKHBhZGRpbmdEZWZpbml0aW9uLmJvdHRvbSksXG4gICAgICAgICAgICB0aGlzLmdldEVmZmVjdGl2ZVNwYWNpbmcocGFkZGluZ0RlZmluaXRpb24ubGVmdCkpO1xuICAgIH1cblxuICAgIG1ha2VDc3NDbGFzc05hbWVzKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGNsYXNzTmFtZSBvZiBjbGFzc05hbWVzKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCgodGhpcy5jc3NDbGFzc05hbWVQcmVmaXggPyB0aGlzLmNzc0NsYXNzTmFtZVByZWZpeCArIFwiLVwiIDogXCJcIikgKyBjbGFzc05hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBtYWtlQ3NzQ2xhc3NOYW1lKC4uLmNsYXNzTmFtZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWFrZUNzc0NsYXNzTmFtZXMoLi4uY2xhc3NOYW1lcykuam9pbihcIiBcIik7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdCA6IFwiXCI7XG4gICAgfVxuXG4gICAgZ2V0IGZvbnRGYW1pbHkoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLmZvbnRGYW1pbHk7XG4gICAgfVxuXG4gICAgc2V0IGZvbnRGYW1pbHkodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250RmFtaWx5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGZvbnRTaXplcygpOiBJRm9udFNpemVEZWZpbml0aW9ucyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250U2l6ZXM7XG4gICAgfVxuXG4gICAgZ2V0IGZvbnRXZWlnaHRzKCk6IElGb250V2VpZ2h0RGVmaW5pdGlvbnMge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVnYWN5Rm9udFR5cGUuZm9udFdlaWdodHM7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdEhvc3RDb25maWc6IEhvc3RDb25maWcgPSBuZXcgSG9zdENvbmZpZyhcbiAgICB7XG4gICAgICAgIHN1cHBvcnRzSW50ZXJhY3Rpdml0eTogdHJ1ZSxcbiAgICAgICAgc3BhY2luZzoge1xuICAgICAgICAgICAgc21hbGw6IDEwLFxuICAgICAgICAgICAgZGVmYXVsdDogMjAsXG4gICAgICAgICAgICBtZWRpdW06IDMwLFxuICAgICAgICAgICAgbGFyZ2U6IDQwLFxuICAgICAgICAgICAgZXh0cmFMYXJnZTogNTAsXG4gICAgICAgICAgICBwYWRkaW5nOiAyMFxuICAgICAgICB9LFxuICAgICAgICBzZXBhcmF0b3I6IHtcbiAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IDEsXG4gICAgICAgICAgICBsaW5lQ29sb3I6IFwiI0VFRUVFRVwiXG4gICAgICAgIH0sXG4gICAgICAgIGZvbnRUeXBlczoge1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IFwiJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWZcIixcbiAgICAgICAgICAgICAgICBmb250U2l6ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc21hbGw6IDEyLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAxNCxcbiAgICAgICAgICAgICAgICAgICAgbWVkaXVtOiAxNyxcbiAgICAgICAgICAgICAgICAgICAgbGFyZ2U6IDIxLFxuICAgICAgICAgICAgICAgICAgICBleHRyYUxhcmdlOiAyNlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRlcjogMjAwLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiA0MDAsXG4gICAgICAgICAgICAgICAgICAgIGJvbGRlcjogNjAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vbm9zcGFjZToge1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IFwiJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlXCIsXG4gICAgICAgICAgICAgICAgZm9udFNpemVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNtYWxsOiAxMixcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogMTQsXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogMTcsXG4gICAgICAgICAgICAgICAgICAgIGxhcmdlOiAyMSxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFMYXJnZTogMjZcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0ZXI6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogNDAwLFxuICAgICAgICAgICAgICAgICAgICBib2xkZXI6IDYwMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2VTaXplczoge1xuICAgICAgICAgICAgc21hbGw6IDQwLFxuICAgICAgICAgICAgbWVkaXVtOiA4MCxcbiAgICAgICAgICAgIGxhcmdlOiAxNjBcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFpbmVyU3R5bGVzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkZGRkZcIixcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDI4QTAyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REMDI3NTAyXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbXBoYXNpczoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMDgwMDAwMDBcIixcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDI4QTAyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REMDI3NTAyXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhY2NlbnQ6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0M3REVGOVwiLFxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGFyazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMjhBMDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQwMjc1MDJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdvb2Q6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0NDRkZDQ1wiLFxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGFyazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMjhBMDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQwMjc1MDJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dGVudGlvbjoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRkZDNUIyXCIsXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsaWdodDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdvb2Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAyOEEwMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDAyNzUwMlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2FybmluZzoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRkZFMkIyXCIsXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsaWdodDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdvb2Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAyOEEwMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDAyNzUwMlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0czoge1xuICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZElucHV0czoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogRW51bXMuVGV4dENvbG9yLkFjY2VudCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZSxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgaXNTdWJ0bGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeDogXCIgKHJlcXVpcmVkKVwiLFxuICAgICAgICAgICAgICAgICAgICBzdWZmaXhDb2xvcjogRW51bXMuVGV4dENvbG9yLkdvb2RcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbmFsSW5wdXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IuV2FybmluZyxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemUuTWVkaXVtLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQuTGlnaHRlcixcbiAgICAgICAgICAgICAgICAgICAgaXNTdWJ0bGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IuQWNjZW50LFxuICAgICAgICAgICAgICAgIHNpemU6IEVudW1zLlRleHRTaXplLlNtYWxsLFxuICAgICAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodC5Cb2xkZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYWN0aW9uczoge1xuICAgICAgICAgICAgbWF4QWN0aW9uczogNSxcbiAgICAgICAgICAgIHNwYWNpbmc6IEVudW1zLlNwYWNpbmcuRGVmYXVsdCxcbiAgICAgICAgICAgIGJ1dHRvblNwYWNpbmc6IDEwLFxuICAgICAgICAgICAgc2hvd0NhcmQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25Nb2RlOiBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGUuSW5saW5lLFxuICAgICAgICAgICAgICAgIGlubGluZVRvcE1hcmdpbjogMTZcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhY3Rpb25zT3JpZW50YXRpb246IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwsXG4gICAgICAgICAgICBhY3Rpb25BbGlnbm1lbnQ6IEVudW1zLkFjdGlvbkFsaWdubWVudC5MZWZ0XG4gICAgICAgIH0sXG4gICAgICAgIGFkYXB0aXZlQ2FyZDoge1xuICAgICAgICAgICAgYWxsb3dDdXN0b21TdHlsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2VTZXQ6IHtcbiAgICAgICAgICAgIGltYWdlU2l6ZTogRW51bXMuU2l6ZS5NZWRpdW0sXG4gICAgICAgICAgICBtYXhJbWFnZUhlaWdodDogMTAwXG4gICAgICAgIH0sXG4gICAgICAgIGZhY3RTZXQ6IHtcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IEVudW1zLlRleHRDb2xvci5EZWZhdWx0LFxuICAgICAgICAgICAgICAgIHNpemU6IEVudW1zLlRleHRTaXplLkRlZmF1bHQsXG4gICAgICAgICAgICAgICAgaXNTdWJ0bGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodC5Cb2xkZXIsXG4gICAgICAgICAgICAgICAgd3JhcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogMTUwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IEVudW1zLlRleHRDb2xvci5EZWZhdWx0LFxuICAgICAgICAgICAgICAgIHNpemU6IEVudW1zLlRleHRTaXplLkRlZmF1bHQsXG4gICAgICAgICAgICAgICAgaXNTdWJ0bGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdlaWdodDogRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0LFxuICAgICAgICAgICAgICAgIHdyYXA6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3BhY2luZzogMTBcbiAgICAgICAgfVxuICAgIH0pO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBTZXJpYWxpemFibGVPYmplY3QsIFZlcnNpb24sIFZlcnNpb25zIH0gZnJvbSBcIi4vc2VyaWFsaXphdGlvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElUeXBlUmVnaXN0cmF0aW9uPFQgZXh0ZW5kcyBTZXJpYWxpemFibGVPYmplY3Q+IHtcbiAgICB0eXBlTmFtZTogc3RyaW5nLFxuICAgIG9iamVjdFR5cGU6IHsgbmV3KCk6IFQgfSxcbiAgICBzY2hlbWFWZXJzaW9uOiBWZXJzaW9uXG59XG5cbmV4cG9ydCBjbGFzcyBDYXJkT2JqZWN0UmVnaXN0cnk8VCBleHRlbmRzIFNlcmlhbGl6YWJsZU9iamVjdD4ge1xuICAgIHByaXZhdGUgX2l0ZW1zOiB7IFt0eXBlTmFtZTogc3RyaW5nXTogSVR5cGVSZWdpc3RyYXRpb248VD4gfSA9IHt9O1xuXG4gICAgZmluZEJ5TmFtZSh0eXBlTmFtZTogc3RyaW5nKTogSVR5cGVSZWdpc3RyYXRpb248VD4gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMuaGFzT3duUHJvcGVydHkodHlwZU5hbWUpID8gdGhpcy5faXRlbXNbdHlwZU5hbWVdIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IHt9O1xuICAgIH1cblxuICAgIHJlZ2lzdGVyKHR5cGVOYW1lOiBzdHJpbmcsIG9iamVjdFR5cGU6IHsgbmV3KCk6IFQgfSwgc2NoZW1hVmVyc2lvbjogVmVyc2lvbiA9IFZlcnNpb25zLnYxXzApIHtcbiAgICAgICAgbGV0IHJlZ2lzdHJhdGlvbkluZm8gPSB0aGlzLmZpbmRCeU5hbWUodHlwZU5hbWUpO1xuXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25JbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbkluZm8ub2JqZWN0VHlwZSA9IG9iamVjdFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWdpc3RyYXRpb25JbmZvID0ge1xuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiB0eXBlTmFtZSxcbiAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBvYmplY3RUeXBlLFxuICAgICAgICAgICAgICAgIHNjaGVtYVZlcnNpb246IHNjaGVtYVZlcnNpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2l0ZW1zW3R5cGVOYW1lXSA9IHJlZ2lzdHJhdGlvbkluZm87XG4gICAgfVxuXG4gICAgdW5yZWdpc3Rlcih0eXBlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9pdGVtc1t0eXBlTmFtZV07XG4gICAgfVxuXG4gICAgY3JlYXRlSW5zdGFuY2UodHlwZU5hbWU6IHN0cmluZywgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbik6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVnaXN0cmF0aW9uSW5mbyA9IHRoaXMuZmluZEJ5TmFtZSh0eXBlTmFtZSk7XG5cbiAgICAgICAgcmV0dXJuIChyZWdpc3RyYXRpb25JbmZvICYmIHJlZ2lzdHJhdGlvbkluZm8uc2NoZW1hVmVyc2lvbi5jb21wYXJlVG8odGFyZ2V0VmVyc2lvbikgPD0gMCkgPyBuZXcgcmVnaXN0cmF0aW9uSW5mby5vYmplY3RUeXBlKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0SXRlbUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9pdGVtcykubGVuZ3RoO1xuICAgIH1cblxuICAgIGdldEl0ZW1BdChpbmRleDogbnVtYmVyKTogSVR5cGVSZWdpc3RyYXRpb248VD4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLl9pdGVtcylbaW5kZXhdO1xuICAgIH1cbn1cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgR2xvYmFsU2V0dGluZ3MsIFNpemVBbmRVbml0IH0gZnJvbSBcIi4vc2hhcmVkXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0ICogYXMgRW51bXMgZnJvbSBcIi4vZW51bXNcIjtcbmltcG9ydCB7IFN0cmluZ3MgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb25FdmVudCB7XG4gICAgc291cmNlPzogU2VyaWFsaXphYmxlT2JqZWN0LFxuICAgIHBoYXNlOiBFbnVtcy5WYWxpZGF0aW9uUGhhc2UsXG4gICAgZXZlbnQ6IEVudW1zLlZhbGlkYXRpb25FdmVudCxcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBWZXJzaW9uIHtcbiAgICBwcml2YXRlIF92ZXJzaW9uU3RyaW5nOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfbWFqb3I6IG51bWJlcjtcbiAgICBwcml2YXRlIF9taW5vcjogbnVtYmVyO1xuICAgIHByaXZhdGUgX2lzVmFsaWQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHByaXZhdGUgX2xhYmVsPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IobWFqb3I6IG51bWJlciA9IDEsIG1pbm9yOiBudW1iZXIgPSAxLCBsYWJlbD86IHN0cmluZykge1xuICAgICAgICB0aGlzLl9tYWpvciA9IG1ham9yO1xuICAgICAgICB0aGlzLl9taW5vciA9IG1pbm9yO1xuICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xuICAgIH1cblxuICAgIHN0YXRpYyBwYXJzZSh2ZXJzaW9uU3RyaW5nOiBzdHJpbmcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IFZlcnNpb24gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIXZlcnNpb25TdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFZlcnNpb24oKTtcbiAgICAgICAgcmVzdWx0Ll92ZXJzaW9uU3RyaW5nID0gdmVyc2lvblN0cmluZztcblxuICAgICAgICBsZXQgcmVnRXggPSAvKFxcZCspLihcXGQrKS9naTtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSByZWdFeC5leGVjKHZlcnNpb25TdHJpbmcpO1xuXG4gICAgICAgIGlmIChtYXRjaGVzICE9IG51bGwgJiYgbWF0Y2hlcy5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgcmVzdWx0Ll9tYWpvciA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xuICAgICAgICAgICAgcmVzdWx0Ll9taW5vciA9IHBhcnNlSW50KG1hdGNoZXNbMl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0Ll9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3VsdC5faXNWYWxpZCkge1xuICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXG4gICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuaW52YWxpZFZlcnNpb25TdHJpbmcocmVzdWx0Ll92ZXJzaW9uU3RyaW5nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAhdGhpcy5faXNWYWxpZCA/IHRoaXMuX3ZlcnNpb25TdHJpbmcgOiB0aGlzLl9tYWpvciArIFwiLlwiICsgdGhpcy5fbWlub3I7XG4gICAgfVxuXG4gICAgdG9KU09OKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY29tcGFyZVRvKG90aGVyVmVyc2lvbjogVmVyc2lvbik6IG51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlclZlcnNpb24uaXNWYWxpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbXBhcmUgaW52YWxpZCB2ZXJzaW9uLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1ham9yID4gb3RoZXJWZXJzaW9uLm1ham9yKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm1ham9yIDwgb3RoZXJWZXJzaW9uLm1ham9yKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5taW5vciA+IG90aGVyVmVyc2lvbi5taW5vcikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5taW5vciA8IG90aGVyVmVyc2lvbi5taW5vcikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgZ2V0IGxhYmVsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYWJlbCA/IHRoaXMuX2xhYmVsIDogdGhpcy50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGdldCBtYWpvcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFqb3I7XG4gICAgfVxuXG4gICAgZ2V0IG1pbm9yKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9taW5vcjtcbiAgICB9XG5cbiAgICBnZXQgaXNWYWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmFsaWQ7XG4gICAgfVxufVxuXG5leHBvcnQgdHlwZSBUYXJnZXRWZXJzaW9uID0gVmVyc2lvbiB8IFwiKlwiO1xuXG5leHBvcnQgY2xhc3MgVmVyc2lvbnMge1xuICAgIHN0YXRpYyByZWFkb25seSB2MV8wID0gbmV3IFZlcnNpb24oMSwgMCk7XG4gICAgc3RhdGljIHJlYWRvbmx5IHYxXzEgPSBuZXcgVmVyc2lvbigxLCAxKTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgdjFfMiA9IG5ldyBWZXJzaW9uKDEsIDIpO1xuICAgIHN0YXRpYyByZWFkb25seSB2MV8zID0gbmV3IFZlcnNpb24oMSwgMyk7XG4gICAgc3RhdGljIHJlYWRvbmx5IGxhdGVzdCA9IFZlcnNpb25zLnYxXzM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZlcnNpb25MZXNzT3JFcXVhbCh2ZXJzaW9uOiBUYXJnZXRWZXJzaW9uLCB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uKTogYm9vbGVhbiB7XG4gICAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBWZXJzaW9uKSB7XG4gICAgICAgIGlmICh0YXJnZXRWZXJzaW9uIGluc3RhbmNlb2YgVmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFZlcnNpb24uY29tcGFyZVRvKHZlcnNpb24pID49IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUYXJnZXQgdmVyc2lvbiBpcyAqXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVmVyc2lvbiBpcyAqXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCB7XG4gICAgcHJpdmF0ZSBfdmFsaWRhdGlvbkV2ZW50czogSVZhbGlkYXRpb25FdmVudFtdID0gW107XG5cbiAgICBzZXJpYWxpemVWYWx1ZSh0YXJnZXQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBwcm9wZXJ0eVZhbHVlOiBhbnksIGRlZmF1bHRWYWx1ZTogYW55ID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eVZhbHVlID09PSBudWxsIHx8IHByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCB8fCBwcm9wZXJ0eVZhbHVlID09PSBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghR2xvYmFsU2V0dGluZ3MuZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXJpYWxpemVOdW1iZXIodGFyZ2V0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgcHJvcGVydHlWYWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLCBkZWZhdWx0VmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSA9PT0gbnVsbCB8fCBwcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQgfHwgcHJvcGVydHlWYWx1ZSA9PT0gZGVmYXVsdFZhbHVlIHx8IGlzTmFOKHByb3BlcnR5VmFsdWUpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXJpYWxpemVFbnVtKFxuICAgICAgICBlbnVtVHlwZTogeyBbczogbnVtYmVyXTogc3RyaW5nIH0sXG4gICAgICAgIHRhcmdldDogeyBba2V5OiBzdHJpbmddOiBhbnkgfSxcbiAgICAgICAgcHJvcGVydHlOYW1lOiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnR5VmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGV0IHRhcmdldFZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5TmFtZV07XG5cbiAgICAgICAgbGV0IGNhbkRlbGV0ZVRhcmdldCA9IHRhcmdldFZhbHVlID09IHVuZGVmaW5lZCA/IHRydWUgOiBlbnVtVHlwZVt0YXJnZXRWYWx1ZV0gIT09IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSA9PSBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5EZWxldGVUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FuRGVsZXRlVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IGVudW1UeXBlW3Byb3BlcnR5VmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2VyaWFsaXplQXJyYXkodGFyZ2V0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgcHJvcGVydHlWYWx1ZTogYW55W10gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XG5cbiAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcHJvcGVydHlWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzZXJpYWxpemVkSXRlbTogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBTZXJpYWxpemFibGVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtLnRvSlNPTih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS50b0pTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtLnRvSlNPTigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZEl0ZW0gPSBpdGVtO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzZXJpYWxpemVkSXRlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goc2VyaWFsaXplZEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpICYmIEFycmF5LmlzQXJyYXkodGFyZ2V0W3Byb3BlcnR5TmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJFdmVudHMoKSB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25FdmVudHMgPSBbXTtcbiAgICB9XG5cbiAgICBsb2dFdmVudChcbiAgICAgICAgc291cmNlOiBTZXJpYWxpemFibGVPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgICAgIHBoYXNlOiBFbnVtcy5WYWxpZGF0aW9uUGhhc2UsXG4gICAgICAgIGV2ZW50OiBFbnVtcy5WYWxpZGF0aW9uRXZlbnQsXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLl92YWxpZGF0aW9uRXZlbnRzLnB1c2goXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgICAgICAgICAgcGhhc2U6IHBoYXNlLFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9XG5cbiAgICBsb2dQYXJzZUV2ZW50KHNvdXJjZTogU2VyaWFsaXphYmxlT2JqZWN0IHwgdW5kZWZpbmVkLCBldmVudDogRW51bXMuVmFsaWRhdGlvbkV2ZW50LCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5sb2dFdmVudChzb3VyY2UsIEVudW1zLlZhbGlkYXRpb25QaGFzZS5QYXJzZSwgZXZlbnQsIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGdldEV2ZW50QXQoaW5kZXg6IG51bWJlcik6IElWYWxpZGF0aW9uRXZlbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGlvbkV2ZW50c1tpbmRleF07XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHVibGljIHRhcmdldFZlcnNpb246IFZlcnNpb24gPSBWZXJzaW9ucy5sYXRlc3QpIHt9XG5cbiAgICBnZXQgZXZlbnRDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGlvbkV2ZW50cy5sZW5ndGg7XG4gICAgfVxufVxuXG5jbGFzcyBTaW1wbGVTZXJpYWxpemF0aW9uQ29udGV4dCBleHRlbmRzIEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCB7fVxuXG5leHBvcnQgY2xhc3MgUHJvcGVydHlEZWZpbml0aW9uIHtcbiAgICBwcml2YXRlIHN0YXRpYyBfc2VxdWVudGlhbE51bWJlcjogbnVtYmVyID0gMDtcblxuICAgIGdldEludGVybmFsTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBhbnkge1xuICAgICAgICByZXR1cm4gc291cmNlW3RoaXMubmFtZV07XG4gICAgfVxuXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogYW55LCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZSh0YXJnZXQsIHRoaXMubmFtZSwgdmFsdWUsIHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICB9XG5cbiAgICByZWFkb25seSBzZXF1ZW50aWFsTnVtYmVyOiBudW1iZXI7XG5cbiAgICBpc1NlcmlhbGl6YXRpb25FbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGRlZmF1bHRWYWx1ZT86IGFueSxcbiAgICAgICAgcmVhZG9ubHkgb25HZXRJbml0aWFsVmFsdWU/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IGFueSkge1xuICAgICAgICAgICAgdGhpcy5zZXF1ZW50aWFsTnVtYmVyID0gUHJvcGVydHlEZWZpbml0aW9uLl9zZXF1ZW50aWFsTnVtYmVyO1xuXG4gICAgICAgICAgICBQcm9wZXJ0eURlZmluaXRpb24uX3NlcXVlbnRpYWxOdW1iZXIrKztcbiAgICAgICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RyaW5nUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcGFyc2VkVmFsdWUgPSBVdGlscy5wYXJzZVN0cmluZyhzb3VyY2VbdGhpcy5uYW1lXSwgdGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICBsZXQgaXNVbmRlZmluZWQgPSBwYXJzZWRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IChwYXJzZWRWYWx1ZSA9PT0gXCJcIiAmJiB0aGlzLnRyZWF0RW1wdHlBc1VuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZCAmJiB0aGlzLnJlZ0V4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBtYXRjaGVzID0gdGhpcy5yZWdFeC5leGVjKDxzdHJpbmc+cGFyc2VkVmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnZhbGlkUHJvcGVydHlWYWx1ZShwYXJzZWRWYWx1ZSwgdGhpcy5uYW1lKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcnNlZFZhbHVlO1xuICAgIH1cblxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUoXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICB2YWx1ZSA9PT0gXCJcIiAmJiB0aGlzLnRyZWF0RW1wdHlBc1VuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHZhbHVlLFxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IHRyZWF0RW1wdHlBc1VuZGVmaW5lZDogYm9vbGVhbiA9IHRydWUsXG4gICAgICAgIHJlYWRvbmx5IHJlZ0V4PzogUmVnRXhwLFxuICAgICAgICByZWFkb25seSBkZWZhdWx0VmFsdWU/OiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IG9uR2V0SW5pdGlhbFZhbHVlPzogKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgZGVmYXVsdFZhbHVlLCBvbkdldEluaXRpYWxWYWx1ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQm9vbFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiBVdGlscy5wYXJzZUJvb2woc291cmNlW3RoaXMubmFtZV0sIHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICB9XG5cbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogb2JqZWN0LCB2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplVmFsdWUoXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBOdW1Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5RGVmaW5pdGlvbiB7XG4gICAgcGFyc2Uoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiBVdGlscy5wYXJzZU51bWJlcihzb3VyY2VbdGhpcy5uYW1lXSwgdGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc2VyaWFsaXplTnVtYmVyKFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGl4ZWxTaXplUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0OiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB2YWx1ZSA9IHNvdXJjZVt0aGlzLm5hbWVdO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGxldCBpc1ZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSBTaXplQW5kVW5pdC5wYXJzZSh2YWx1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2l6ZS51bml0ID09IEVudW1zLlNpemVVbml0LlBpeGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNpemUucGh5c2ljYWxTaXplO1xuXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLiBBIHBhcnNlIGVycm9yIGlzIGVtaXR0ZWQgYmVsb3dcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuaW52YWxpZFByb3BlcnR5VmFsdWUoc291cmNlW3RoaXMubmFtZV0sIFwibWluSGVpZ2h0XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zZXJpYWxpemVWYWx1ZShcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4odmFsdWUpID8gdmFsdWUgKyBcInB4XCIgOiB1bmRlZmluZWQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVmVyc2lvbmVkVmFsdWU8VFZhbHVlPiB7XG4gICAgdmFsdWU6IFRWYWx1ZTtcbiAgICB0YXJnZXRWZXJzaW9uPzogVmVyc2lvbjtcbn1cblxuZXhwb3J0IGNsYXNzIFZhbHVlU2V0UHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcblxuICAgICAgICBpZiAoc291cmNlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgdmVyc2lvbmVkVmFsdWUgb2YgdGhpcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gdmVyc2lvbmVkVmFsdWUudmFsdWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0VmVyc2lvbiA9IHZlcnNpb25lZFZhbHVlLnRhcmdldFZlcnNpb24gPyB2ZXJzaW9uZWRWYWx1ZS50YXJnZXRWZXJzaW9uIDogdGhpcy50YXJnZXRWZXJzaW9uO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uZWRWYWx1ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nUGFyc2VFdmVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLnByb3BlcnR5VmFsdWVOb3RTdXBwb3J0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFZlcnNpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC50YXJnZXRWZXJzaW9uLnRvU3RyaW5nKCkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgc2VuZGVyLFxuICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvbkV2ZW50LkludmFsaWRQcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMuaW52YWxpZFByb3BlcnR5VmFsdWUoc291cmNlVmFsdWUsIHRoaXMubmFtZSkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBsZXQgdmFsdWVGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IHZlcnNpb25lZFZhbHVlIG9mIHRoaXMudmFsdWVzKSB7XG4gICAgICAgICAgICBpZiAodmVyc2lvbmVkVmFsdWUudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldFZlcnNpb24gPSB2ZXJzaW9uZWRWYWx1ZS50YXJnZXRWZXJzaW9uID8gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA6IHRoaXMudGFyZ2V0VmVyc2lvbjtcblxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyhjb250ZXh0LnRhcmdldFZlcnNpb24pIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ0V2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgRW51bXMuVmFsaWRhdGlvblBoYXNlLlRvSlNPTixcbiAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ3MuZXJyb3JzLnByb3BlcnR5VmFsdWVOb3RTdXBwb3J0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFZlcnNpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnRhcmdldFZlcnNpb24udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZUZvdW5kKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZVZhbHVlKFxuICAgICAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgdmFsdWVzOiBJVmVyc2lvbmVkVmFsdWU8c3RyaW5nPltdLFxuICAgICAgICByZWFkb25seSBkZWZhdWx0VmFsdWU/OiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IG9uR2V0SW5pdGlhbFZhbHVlPzogKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgZGVmYXVsdFZhbHVlLCBvbkdldEluaXRpYWxWYWx1ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW51bVByb3BlcnR5PFRFbnVtIGV4dGVuZHMgeyBbczogbnVtYmVyXTogc3RyaW5nIH0+IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcbiAgICBwcml2YXRlIF92YWx1ZXM6IElWZXJzaW9uZWRWYWx1ZTxudW1iZXI+W10gPSBbXTtcblxuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcblxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW51bVZhbHVlID0gVXRpbHMuZ2V0RW51bVZhbHVlQnlOYW1lKHRoaXMuZW51bVR5cGUsIHNvdXJjZVZhbHVlKTtcblxuICAgICAgICBpZiAoZW51bVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHZlcnNpb25lZFZhbHVlIG9mIHRoaXMudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZlcnNpb25lZFZhbHVlLnZhbHVlID09PSBlbnVtVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFZlcnNpb24gPSB2ZXJzaW9uZWRWYWx1ZS50YXJnZXRWZXJzaW9uID8gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA6IHRoaXMudGFyZ2V0VmVyc2lvbjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VmVyc2lvbi5jb21wYXJlVG8oY29udGV4dC50YXJnZXRWZXJzaW9uKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW51bVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2dQYXJzZUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5ncy5lcnJvcnMucHJvcGVydHlWYWx1ZU5vdFN1cHBvcnRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VmVyc2lvbi50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnRhcmdldFZlcnNpb24udG9TdHJpbmcoKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uRXZlbnQuSW52YWxpZFByb3BlcnR5VmFsdWUsXG4gICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnZhbGlkUHJvcGVydHlWYWx1ZShzb3VyY2VWYWx1ZSwgdGhpcy5uYW1lKSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHRvSlNPTihzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB2ZXJzaW9uZWRWYWx1ZSBvZiB0aGlzLnZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uZWRWYWx1ZS52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFZlcnNpb24gPSB2ZXJzaW9uZWRWYWx1ZS50YXJnZXRWZXJzaW9uID8gdmVyc2lvbmVkVmFsdWUudGFyZ2V0VmVyc2lvbiA6IHRoaXMudGFyZ2V0VmVyc2lvbjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VmVyc2lvbi5jb21wYXJlVG8oY29udGV4dC50YXJnZXRWZXJzaW9uKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvdW5kID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ0V2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbnVtcy5WYWxpZGF0aW9uUGhhc2UuVG9KU09OLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5pbnZhbGlkUHJvcGVydHlWYWx1ZSh2YWx1ZSwgdGhpcy5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZUZvdW5kKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXJpYWxpemVFbnVtKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVudW1UeXBlLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBWZXJzaW9uLFxuICAgICAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGVudW1UeXBlOiBURW51bSxcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogbnVtYmVyLFxuICAgICAgICB2YWx1ZXM/OiBJVmVyc2lvbmVkVmFsdWU8bnVtYmVyPltdLFxuICAgICAgICByZWFkb25seSBvbkdldEluaXRpYWxWYWx1ZT86IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4gbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIG5hbWUsIGRlZmF1bHRWYWx1ZSwgb25HZXRJbml0aWFsVmFsdWUpO1xuXG4gICAgICAgIGlmICghdmFsdWVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZW51bVR5cGUpIHtcbiAgICAgICAgICAgICAgICBsZXQga2V5QXNOdW1iZXIgPSBwYXJzZUludChrZXksIDEwKTtcblxuICAgICAgICAgICAgICAgIGlmIChrZXlBc051bWJlciA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKCB7IHZhbHVlOiBrZXlBc051bWJlciB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgdmFsdWVzKCk6IElWZXJzaW9uZWRWYWx1ZTxudW1iZXI+W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xuICAgIH1cbn1cblxuZXhwb3J0IHR5cGUgU2VyaWFsaXphYmxlT2JqZWN0VHlwZSA9IHsgbmV3KCk6IFNlcmlhbGl6YWJsZU9iamVjdCB9O1xuXG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlT2JqZWN0UHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBTZXJpYWxpemFibGVPYmplY3QgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgc291cmNlVmFsdWUgPSBzb3VyY2VbdGhpcy5uYW1lXTtcblxuICAgICAgICBpZiAoc291cmNlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25HZXRJbml0aWFsVmFsdWUgPyB0aGlzLm9uR2V0SW5pdGlhbFZhbHVlKHNlbmRlcikgOiB0aGlzLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgdGhpcy5vYmplY3RUeXBlKCk7XG4gICAgICAgIHJlc3VsdC5wYXJzZShzb3VyY2VWYWx1ZSwgY29udGV4dCk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICB0b0pTT04oc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHRhcmdldDogUHJvcGVydHlCYWcsIHZhbHVlOiBTZXJpYWxpemFibGVPYmplY3QgfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBsZXQgc2VyaWFsaXplZFZhbHVlID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlLnRvSlNPTihjb250ZXh0KSA6IHZhbHVlO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VyaWFsaXplZFZhbHVlID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHNlcmlhbGl6ZWRWYWx1ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci50b0pTT04oc2VuZGVyLCB0YXJnZXQsIHNlcmlhbGl6ZWRWYWx1ZSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgb2JqZWN0VHlwZTogU2VyaWFsaXphYmxlT2JqZWN0VHlwZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlPzogU2VyaWFsaXphYmxlT2JqZWN0KSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgdGFyZ2V0VmVyc2lvbixcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IHsgcmV0dXJuIG5ldyB0aGlzLm9iamVjdFR5cGUoKTsgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlT2JqZWN0Q29sbGVjdGlvblByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHlEZWZpbml0aW9uIHtcbiAgICBwYXJzZShzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KTogU2VyaWFsaXphYmxlT2JqZWN0W10gfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0OiBTZXJpYWxpemFibGVPYmplY3RbXSB8IHVuZGVmaW5lZCA9IFtdO1xuXG4gICAgICAgIGxldCBzb3VyY2VDb2xsZWN0aW9uID0gc291cmNlW3RoaXMubmFtZV07XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlQ29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHNvdXJjZUl0ZW0gb2Ygc291cmNlQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbmV3IHRoaXMub2JqZWN0VHlwZSgpO1xuICAgICAgICAgICAgICAgIGl0ZW0ucGFyc2Uoc291cmNlSXRlbSwgY29udGV4dCk7XG5cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uSXRlbUFkZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25JdGVtQWRkZWQoc2VuZGVyLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHQgOiAodGhpcy5vbkdldEluaXRpYWxWYWx1ZSA/IHRoaXMub25HZXRJbml0aWFsVmFsdWUoc2VuZGVyKSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogU2VyaWFsaXphYmxlT2JqZWN0W10gfCB1bmRlZmluZWQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNlcmlhbGl6ZUFycmF5KHRhcmdldCwgdGhpcy5uYW1lLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFZlcnNpb24sXG4gICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgb2JqZWN0VHlwZTogU2VyaWFsaXphYmxlT2JqZWN0VHlwZSxcbiAgICAgICAgcmVhZG9ubHkgb25JdGVtQWRkZWQ/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIGl0ZW06IFNlcmlhbGl6YWJsZU9iamVjdCkgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIHRhcmdldFZlcnNpb24sXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0KSA9PiB7IHJldHVybiBbXTsgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ3VzdG9tUHJvcGVydHk8VD4gZXh0ZW5kcyBQcm9wZXJ0eURlZmluaXRpb24ge1xuICAgIHBhcnNlKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCBzb3VyY2U6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25QYXJzZShzZW5kZXIsIHRoaXMsIHNvdXJjZSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgdG9KU09OKHNlbmRlcjogU2VyaWFsaXphYmxlT2JqZWN0LCB0YXJnZXQ6IFByb3BlcnR5QmFnLCB2YWx1ZTogVCwgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHRoaXMub25Ub0pTT04oc2VuZGVyLCB0aGlzLCB0YXJnZXQsIHZhbHVlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbixcbiAgICAgICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxuICAgICAgICByZWFkb25seSBvblBhcnNlOiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QsIHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24sIHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4gVCxcbiAgICAgICAgcmVhZG9ubHkgb25Ub0pTT046IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgcHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdGFyZ2V0OiBQcm9wZXJ0eUJhZywgdmFsdWU6IFQsIGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCkgPT4gdm9pZCxcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogVCxcbiAgICAgICAgcmVhZG9ubHkgb25HZXRJbml0aWFsVmFsdWU/OiAoc2VuZGVyOiBTZXJpYWxpemFibGVPYmplY3QpID0+IFQpIHtcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgbmFtZSwgZGVmYXVsdFZhbHVlLCBvbkdldEluaXRpYWxWYWx1ZSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLm9uUGFyc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbVByb3BlcnR5RGVmaW5pdGlvbiBpbnN0YW5jZXMgbXVzdCBoYXZlIGFuIG9uUGFyc2UgaGFuZGxlci5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub25Ub0pTT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbVByb3BlcnR5RGVmaW5pdGlvbiBpbnN0YW5jZXMgbXVzdCBoYXZlIGFuIG9uVG9KU09OIGhhbmRsZXIuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlT2JqZWN0U2NoZW1hIHtcbiAgICBwcml2YXRlIF9wcm9wZXJ0aWVzOiBQcm9wZXJ0eURlZmluaXRpb25bXSA9IFtdO1xuXG4gICAgaW5kZXhPZihwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uKTogbnVtYmVyIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvcGVydGllc1tpXSA9PT0gcHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBhZGQoLi4ucHJvcGVydGllczogUHJvcGVydHlEZWZpbml0aW9uW10pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleE9mKHByb3BlcnRpZXNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0aWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZSguLi5wcm9wZXJ0aWVzOiBQcm9wZXJ0eURlZmluaXRpb25bXSkge1xuICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuaW5kZXhPZihwcm9wZXJ0eSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRJdGVtQXQoaW5kZXg6IG51bWJlcik6IFByb3BlcnR5RGVmaW5pdGlvbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzW2luZGV4XTtcbiAgICB9XG5cbiAgICBnZXRDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5sZW5ndGg7XG4gICAgfVxufVxuXG4vLyBUaGlzIGlzIGEgZGVjb3JhdG9yIGZ1bmN0aW9uLCB1c2VkIHRvIG1hcCBTZXJpYWxpemFibGVPYmplY3QgZGVzY2VuZGFudCBjbGFzcyBtZW1iZXJzIHRvXG4vLyBzY2hlbWEgcHJvcGVydGllc1xuZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5KHByb3BlcnR5OiBQcm9wZXJ0eURlZmluaXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpIHx8IHt9O1xuXG4gICAgICAgIGlmICghZGVzY3JpcHRvci5nZXQgJiYgIWRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLmdldCA9IGZ1bmN0aW9uKHRoaXM6IFNlcmlhbGl6YWJsZU9iamVjdCkgeyByZXR1cm4gdGhpcy5nZXRWYWx1ZShwcm9wZXJ0eSk7IH07XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9IGZ1bmN0aW9uKHRoaXM6IFNlcmlhbGl6YWJsZU9iamVjdCwgdmFsdWU6IGFueSkgeyB0aGlzLnNldFZhbHVlKHByb3BlcnR5LCB2YWx1ZSk7IH07XG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgdHlwZSBQcm9wZXJ0eUJhZyA9IHsgW3Byb3BlcnR5TmFtZTogc3RyaW5nXTogYW55IH07XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTZXJpYWxpemFibGVPYmplY3Qge1xuICAgIHN0YXRpYyBvblJlZ2lzdGVyQ3VzdG9tUHJvcGVydGllcz86IChzZW5kZXI6IFNlcmlhbGl6YWJsZU9iamVjdCwgc2NoZW1hOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEpID0+IHZvaWQ7XG5cbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfc2NoZW1hQ2FjaGU6IHsgW3R5cGVOYW1lOiBzdHJpbmddOiBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEgfSA9IHt9O1xuXG4gICAgcHJpdmF0ZSBfcHJvcGVydHlCYWc6IFByb3BlcnR5QmFnID0ge307XG4gICAgcHJpdmF0ZSBfcmF3UHJvcGVydGllczogUHJvcGVydHlCYWcgPSB7fTtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRTY2hlbWFLZXkoKTogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIHBvcHVsYXRlU2NoZW1hKHNjaGVtYTogU2VyaWFsaXphYmxlT2JqZWN0U2NoZW1hKSB7XG4gICAgICAgIGxldCBjdG9yID0gPGFueT50aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBsZXQgcHJvcGVydGllczogUHJvcGVydHlEZWZpbml0aW9uW10gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eU5hbWUgaW4gY3Rvcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcGVydHlWYWx1ZSA9IGN0b3JbcHJvcGVydHlOYW1lXTtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eVZhbHVlIGluc3RhbmNlb2YgUHJvcGVydHlEZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBwcm9wZXJ0eSBoYXBwZW5zIHRvIGhhdmUgYSBnZXR0ZXIgZnVuY3Rpb24gYW5kXG4gICAgICAgICAgICAgICAgLy8gaXQgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgd2UgbmVlZCB0byBjYXRjaCBpdCBoZXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvcGVydGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgc29ydGVkUHJvcGVydGllcyA9IHByb3BlcnRpZXMuc29ydCgocDE6IFByb3BlcnR5RGVmaW5pdGlvbiwgcDI6IFByb3BlcnR5RGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwMS5zZXF1ZW50aWFsTnVtYmVyID4gcDIuc2VxdWVudGlhbE51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocDEuc2VxdWVudGlhbE51bWJlciA8IHAyLnNlcXVlbnRpYWxOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNjaGVtYS5hZGQoLi4uc29ydGVkUHJvcGVydGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoU2VyaWFsaXphYmxlT2JqZWN0Lm9uUmVnaXN0ZXJDdXN0b21Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBTZXJpYWxpemFibGVPYmplY3Qub25SZWdpc3RlckN1c3RvbVByb3BlcnRpZXModGhpcywgc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRWYWx1ZShwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnR5QmFnLmhhc093blByb3BlcnR5KHByb3BlcnR5LmdldEludGVybmFsTmFtZSgpKSA/IHRoaXMuX3Byb3BlcnR5QmFnW3Byb3BlcnR5LmdldEludGVybmFsTmFtZSgpXSA6IHByb3BlcnR5LmRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0VmFsdWUocHJvcGVydHk6IFByb3BlcnR5RGVmaW5pdGlvbiwgdmFsdWU6IGFueSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3Byb3BlcnR5QmFnW3Byb3BlcnR5LmdldEludGVybmFsTmFtZSgpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnR5QmFnW3Byb3BlcnR5LmdldEludGVybmFsTmFtZSgpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGludGVybmFsUGFyc2Uoc291cmNlOiBQcm9wZXJ0eUJhZywgY29udGV4dDogQmFzZVNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHRoaXMuX3Byb3BlcnR5QmFnID0ge307XG4gICAgICAgIHRoaXMuX3Jhd1Byb3BlcnRpZXMgPSBHbG9iYWxTZXR0aW5ncy5lbmFibGVGdWxsSnNvblJvdW5kVHJpcCA/IChzb3VyY2UgPyBzb3VyY2UgOiB7fSkgOiB7fTtcblxuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0U2NoZW1hKCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5nZXRDb3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcGVydHkgPSBzLmdldEl0ZW1BdChpKTtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5pc1NlcmlhbGl6YXRpb25FbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0eVZhbHVlID0gcHJvcGVydHkub25HZXRJbml0aWFsVmFsdWUgPyBwcm9wZXJ0eS5vbkdldEluaXRpYWxWYWx1ZSh0aGlzKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KHByb3BlcnR5Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkudGFyZ2V0VmVyc2lvbi5jb21wYXJlVG8oY29udGV4dC50YXJnZXRWZXJzaW9uKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IHByb3BlcnR5LnBhcnNlKHRoaXMsIHNvdXJjZSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ1BhcnNlRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudW1zLlZhbGlkYXRpb25FdmVudC5VbnN1cHBvcnRlZFByb3BlcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmdzLmVycm9ycy5wcm9wZXJ0eU5vdFN1cHBvcnRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS50YXJnZXRWZXJzaW9uLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnRhcmdldFZlcnNpb24udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNldERlZmF1bHRWYWx1ZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFRvSlNPTih0YXJnZXQ6IFByb3BlcnR5QmFnLCBjb250ZXh0OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLmdldFNjaGVtYSgpO1xuICAgICAgICBsZXQgc2VyaWFsaXplZFByb3BlcnRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmdldENvdW50KCk7IGkrKykge1xuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gcy5nZXRJdGVtQXQoaSk7XG5cbiAgICAgICAgICAgIC8vIEF2b2lkIHNlcmlhbGl6aW5nIHRoZSBzYW1lIHByb3BlcnR5IG11bHRpcGxlIHRpbWVzLiBUaGlzIGlzIG5lY2Vzc2FyeVxuICAgICAgICAgICAgLy8gYmVjYXVzZSBzb21lIHByb3BlcnR5IGRlZmluaXRpb25zIG1hcCB0byB0aGUgc2FtZSB1bmRlcmx5aW5nIHNjaGVtYVxuICAgICAgICAgICAgLy8gcHJvcGVydHlcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5pc1NlcmlhbGl6YXRpb25FbmFibGVkICYmIHByb3BlcnR5LnRhcmdldFZlcnNpb24uY29tcGFyZVRvKGNvbnRleHQudGFyZ2V0VmVyc2lvbikgPD0gMCAmJiBzZXJpYWxpemVkUHJvcGVydGllcy5pbmRleE9mKHByb3BlcnR5Lm5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5LnRvSlNPTih0aGlzLCB0YXJnZXQsIHRoaXMuZ2V0VmFsdWUocHJvcGVydHkpLCBjb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRQcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2hvdWxkU2VyaWFsaXplKGNvbnRleHQ6IEJhc2VTZXJpYWxpemF0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXhWZXJzaW9uOiBWZXJzaW9uID0gVmVyc2lvbnMudjFfMztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0U2NoZW1hKCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmdldENvdW50KCk7IGkrKykge1xuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gcy5nZXRJdGVtQXQoaSk7XG5cbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5vbkdldEluaXRpYWxWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUocHJvcGVydHksIHByb3BlcnR5Lm9uR2V0SW5pdGlhbFZhbHVlKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlKHNvdXJjZTogUHJvcGVydHlCYWcsIGNvbnRleHQ/OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbFBhcnNlKHNvdXJjZSwgY29udGV4dCA/IGNvbnRleHQgOiBuZXcgU2ltcGxlU2VyaWFsaXphdGlvbkNvbnRleHQoKSk7XG4gICAgfVxuXG4gICAgdG9KU09OKGNvbnRleHQ/OiBCYXNlU2VyaWFsaXphdGlvbkNvbnRleHQpOiBQcm9wZXJ0eUJhZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBlZmZlY3RpdmVDb250ZXh0ID0gY29udGV4dCA/IGNvbnRleHQgOiBuZXcgU2ltcGxlU2VyaWFsaXphdGlvbkNvbnRleHQoKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRTZXJpYWxpemUoZWZmZWN0aXZlQ29udGV4dCkpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IFByb3BlcnR5QmFnO1xuXG4gICAgICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXAgJiYgdGhpcy5fcmF3UHJvcGVydGllcyAmJiB0eXBlb2YgdGhpcy5fcmF3UHJvcGVydGllcyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Jhd1Byb3BlcnRpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFRvSlNPTihyZXN1bHQsIGVmZmVjdGl2ZUNvbnRleHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhc0RlZmF1bHRWYWx1ZShwcm9wZXJ0eTogUHJvcGVydHlEZWZpbml0aW9uKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKHByb3BlcnR5KSA9PT0gcHJvcGVydHkuZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIGhhc0FsbERlZmF1bHRWYWx1ZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBzID0gdGhpcy5nZXRTY2hlbWEoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuZ2V0Q291bnQoKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcHJvcGVydHkgPSBzLmdldEl0ZW1BdChpKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0RlZmF1bHRWYWx1ZShwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXNldERlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5nZXRTY2hlbWEoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuZ2V0Q291bnQoKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcHJvcGVydHkgPSBzLmdldEl0ZW1BdChpKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShwcm9wZXJ0eSwgcHJvcGVydHkuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEN1c3RvbVByb3BlcnR5KG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgICAgICBsZXQgc2hvdWxkRGVsZXRlUHJvcGVydHkgPSAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmICF2YWx1ZSkgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbDtcblxuICAgICAgICBpZiAoc2hvdWxkRGVsZXRlUHJvcGVydHkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9yYXdQcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmF3UHJvcGVydGllc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q3VzdG9tUHJvcGVydHkobmFtZTogc3RyaW5nKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1Byb3BlcnRpZXNbbmFtZV07XG4gICAgfVxuXG4gICAgZ2V0U2NoZW1hKCk6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSB7XG4gICAgICAgIGxldCBzY2hlbWE6IFNlcmlhbGl6YWJsZU9iamVjdFNjaGVtYSA9IFNlcmlhbGl6YWJsZU9iamVjdC5fc2NoZW1hQ2FjaGVbdGhpcy5nZXRTY2hlbWFLZXkoKV07XG5cbiAgICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgICAgIHNjaGVtYSA9IG5ldyBTZXJpYWxpemFibGVPYmplY3RTY2hlbWEoKTtcblxuICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVNjaGVtYShzY2hlbWEpO1xuXG4gICAgICAgICAgICBTZXJpYWxpemFibGVPYmplY3QuX3NjaGVtYUNhY2hlW3RoaXMuZ2V0U2NoZW1hS2V5KCldID0gc2NoZW1hO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCAqIGFzIEVudW1zIGZyb20gXCIuL2VudW1zXCI7XG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxTZXR0aW5ncyB7XG4gICAgc3RhdGljIHVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbjogYm9vbGVhbiA9IHRydWU7XG4gICAgc3RhdGljIHVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzdGF0aWMgdXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3g6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHN0YXRpYyBhbGxvd01hcmtGb3JUZXh0SGlnaGxpZ2h0aW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgc3RhdGljIGFsd2F5c0JsZWVkU2VwYXJhdG9yczogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHN0YXRpYyBlbmFibGVGdWxsSnNvblJvdW5kVHJpcDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHN0YXRpYyBkaXNwbGF5SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzdGF0aWMgYWxsb3dQcmVQcm9jZXNzaW5nUHJvcGVydHlWYWx1ZXM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzdGF0aWMgc2V0VGFiSW5kZXhBdENhcmRSb290OiBib29sZWFuID0gdHJ1ZTtcbiAgICBzdGF0aWMgZW5hYmxlRmFsbGJhY2s6IGJvb2xlYW4gPSB0cnVlO1xufVxuXG5leHBvcnQgY29uc3QgQ29udGVudFR5cGVzID0ge1xuICAgIGFwcGxpY2F0aW9uSnNvbjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQ6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2VwYXJhdGlvbkRlZmluaXRpb24ge1xuICAgIHNwYWNpbmc6IG51bWJlcixcbiAgICBsaW5lVGhpY2tuZXNzPzogbnVtYmVyLFxuICAgIGxpbmVDb2xvcj86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElJbnB1dCB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgdmFsaWRhdGVWYWx1ZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBEaWN0aW9uYXJ5PFQ+ID0geyBba2V5OiBzdHJpbmddOiBUIH07XG5cbmV4cG9ydCBjbGFzcyBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucyB7XG4gICAgcHJpdmF0ZSBfaXNQcm9jZXNzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9vcmlnaW5hbD86IHN0cmluZztcbiAgICBwcml2YXRlIF9wcm9jZXNzZWQ/OiBzdHJpbmc7XG5cbiAgICBnZXRSZWZlcmVuY2VkSW5wdXRzKGlucHV0czogSUlucHV0W10sIHJlZmVyZW5jZWRJbnB1dHM6IERpY3Rpb25hcnk8SUlucHV0Pikge1xuICAgICAgICBpZiAoIXJlZmVyZW5jZWRJbnB1dHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSByZWZlcmVuY2VkSW5wdXRzIHBhcmFtZXRlciBjYW5ub3QgYmUgbnVsbC5cIilcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSBuZXcgUmVnRXhwKFwiXFxcXHt7Mn0oXCIgKyBpbnB1dC5pZCArIFwiKS52YWx1ZVxcXFx9ezJ9XCIsIFwiZ2lcIikuZXhlYyg8c3RyaW5nPnRoaXMuX29yaWdpbmFsKTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoZXMgIT0gbnVsbCAmJiBpbnB1dC5pZCkge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZWRJbnB1dHNbaW5wdXQuaWRdID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdWJzdGl0dXRlSW5wdXRWYWx1ZXMoaW5wdXRzOiBEaWN0aW9uYXJ5PElJbnB1dD4sIGNvbnRlbnRUeXBlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2VkID0gdGhpcy5fb3JpZ2luYWw7XG5cbiAgICAgICAgaWYgKHRoaXMuX29yaWdpbmFsKSB7XG4gICAgICAgICAgICBsZXQgcmVnRXggPSAvXFx7ezJ9KFthLXowLTlfJEBdKykudmFsdWVcXH17Mn0vZ2k7XG4gICAgICAgICAgICBsZXQgbWF0Y2hlcztcblxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaGVzID0gcmVnRXguZXhlYyg8c3RyaW5nPnRoaXMuX29yaWdpbmFsKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXRzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT0gbWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZElucHV0ID0gaW5wdXRzW2tleV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZUZvclJlcGxhY2UgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZElucHV0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3JSZXBsYWNlID0gbWF0Y2hlZElucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFR5cGUgPT09IENvbnRlbnRUeXBlcy5hcHBsaWNhdGlvbkpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvclJlcGxhY2UgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZUZvclJlcGxhY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlRm9yUmVwbGFjZSA9IHZhbHVlRm9yUmVwbGFjZS5zbGljZSgxLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250ZW50VHlwZSA9PT0gQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3JSZXBsYWNlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlRm9yUmVwbGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NlZCA9ICg8c3RyaW5nPnRoaXMuX3Byb2Nlc3NlZCkucmVwbGFjZShtYXRjaGVzWzBdLCB2YWx1ZUZvclJlcGxhY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2lzUHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRPcmlnaW5hbCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3JpZ2luYWw7XG4gICAgfVxuXG4gICAgZ2V0KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghdGhpcy5faXNQcm9jZXNzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcmlnaW5hbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vcmlnaW5hbCA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNwYWNpbmdEZWZpbml0aW9uIHtcbiAgICBsZWZ0OiBudW1iZXIgPSAwO1xuICAgIHRvcDogbnVtYmVyID0gMDtcbiAgICByaWdodDogbnVtYmVyID0gMDtcbiAgICBib3R0b206IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3Rvcih0b3A6IG51bWJlciA9IDAsXG4gICAgICAgIHJpZ2h0OiBudW1iZXIgPSAwLFxuICAgICAgICBib3R0b206IG51bWJlciA9IDAsXG4gICAgICAgIGxlZnQ6IG51bWJlciA9IDApIHtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgdGhpcy5ib3R0b20gPSBib3R0b207XG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGFkZGluZ0RlZmluaXRpb24ge1xuICAgIHRvcDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcbiAgICByaWdodDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcbiAgICBib3R0b206IEVudW1zLlNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XG4gICAgbGVmdDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZTtcblxuICAgIGNvbnN0cnVjdG9yKHRvcDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZSxcbiAgICAgICAgcmlnaHQ6IEVudW1zLlNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmUsXG4gICAgICAgIGJvdHRvbTogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZSxcbiAgICAgICAgbGVmdDogRW51bXMuU3BhY2luZyA9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xuICAgICAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaXplQW5kVW5pdCB7XG4gICAgcGh5c2ljYWxTaXplOiBudW1iZXI7XG4gICAgdW5pdDogRW51bXMuU2l6ZVVuaXQ7XG5cbiAgICBzdGF0aWMgcGFyc2UoaW5wdXQ6IHN0cmluZywgcmVxdWlyZVVuaXRTcGVjaWZpZXI6IGJvb2xlYW4gPSBmYWxzZSk6IFNpemVBbmRVbml0IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTaXplQW5kVW5pdCgwLCBFbnVtcy5TaXplVW5pdC5XZWlnaHQpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdC5waHlzaWNhbFNpemUgPSBpbnB1dDtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGxldCByZWdFeHAgPSAvXihbMC05XSspKHB4fFxcKik/JC9nO1xuICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSByZWdFeHAuZXhlYyhpbnB1dCk7XG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWRNYXRjaENvdW50ID0gcmVxdWlyZVVuaXRTcGVjaWZpZXIgPyAzIDogMjtcblxuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPj0gZXhwZWN0ZWRNYXRjaENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnBoeXNpY2FsU2l6ZSA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNbMl0gPT0gXCJweFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudW5pdCA9IEVudW1zLlNpemVVbml0LlBpeGVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2l6ZTogXCIgKyBpbnB1dCk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocGh5c2ljYWxTaXplOiBudW1iZXIsIHVuaXQ6IEVudW1zLlNpemVVbml0KSB7XG4gICAgICAgIHRoaXMucGh5c2ljYWxTaXplID0gcGh5c2ljYWxTaXplO1xuICAgICAgICB0aGlzLnVuaXQgPSB1bml0O1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VJbmZvcm1hdGlvbiB7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgbWltZVR5cGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBGYXN0IFVVSUQgZ2VuZXJhdG9yLCBSRkM0MTIyIHZlcnNpb24gNCBjb21wbGlhbnQuXG4gKiBAYXV0aG9yIEplZmYgV2FyZCAoamN3YXJkLmNvbSkuXG4gKiBAbGljZW5zZSBNSVQgbGljZW5zZVxuICogQGxpbmsgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxOTYzMTM2IzIxOTYzMTM2XG4gKiovXG5leHBvcnQgY2xhc3MgVVVJRCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgbHV0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgc3RhdGljIGdlbmVyYXRlKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBkMCA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcbiAgICAgICAgbGV0IGQxID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuICAgICAgICBsZXQgZDIgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XG4gICAgICAgIGxldCBkMyA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcblxuICAgICAgICByZXR1cm4gVVVJRC5sdXRbZDAgJiAweGZmXSArIFVVSUQubHV0W2QwID4+IDggJiAweGZmXSArIFVVSUQubHV0W2QwID4+IDE2ICYgMHhmZl0gKyBVVUlELmx1dFtkMCA+PiAyNCAmIDB4ZmZdICsgJy0nICtcbiAgICAgICAgICAgIFVVSUQubHV0W2QxICYgMHhmZl0gKyBVVUlELmx1dFtkMSA+PiA4ICYgMHhmZl0gKyAnLScgKyBVVUlELmx1dFtkMSA+PiAxNiAmIDB4MGYgfCAweDQwXSArIFVVSUQubHV0W2QxID4+IDI0ICYgMHhmZl0gKyAnLScgK1xuICAgICAgICAgICAgVVVJRC5sdXRbZDIgJiAweDNmIHwgMHg4MF0gKyBVVUlELmx1dFtkMiA+PiA4ICYgMHhmZl0gKyAnLScgKyBVVUlELmx1dFtkMiA+PiAxNiAmIDB4ZmZdICsgVVVJRC5sdXRbZDIgPj4gMjQgJiAweGZmXSArXG4gICAgICAgICAgICBVVUlELmx1dFtkMyAmIDB4ZmZdICsgVVVJRC5sdXRbZDMgPj4gOCAmIDB4ZmZdICsgVVVJRC5sdXRbZDMgPj4gMTYgJiAweGZmXSArIFVVSUQubHV0W2QzID4+IDI0ICYgMHhmZl07XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXRpYWxpemUoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIFVVSUQubHV0W2ldID0gKGkgPCAxNiA/ICcwJyA6ICcnKSArIGkudG9TdHJpbmcoMTYpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5VVUlELmluaXRpYWxpemUoKTtcbiIsImV4cG9ydCBjbGFzcyBTdHJpbmdzIHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgZXJyb3JzID0ge1xuICAgICAgICB1bmtub3duRWxlbWVudFR5cGU6ICh0eXBlTmFtZTogc3RyaW5nKSA9PiBgVW5rbm93biBlbGVtZW50IHR5cGUgXCIke3R5cGVOYW1lfVwiLiBGYWxsYmFjayB3aWxsIGJlIHVzZWQgaWYgcHJlc2VudC5gLFxuICAgICAgICB1bmtub3duQWN0aW9uVHlwZTogKHR5cGVOYW1lOiBzdHJpbmcpID0+IGBVbmtub3duIGFjdGlvbiB0eXBlIFwiJHt0eXBlTmFtZX1cIi4gRmFsbGJhY2sgd2lsbCBiZSB1c2VkIGlmIHByZXNlbnQuYCxcbiAgICAgICAgZWxlbWVudFR5cGVOb3RBbGxvd2VkOiAodHlwZU5hbWU6IHN0cmluZykgPT4gYEVsZW1lbnQgdHlwZSBcIiR7dHlwZU5hbWV9XCIgaXMgbm90IGFsbG93ZWQgaW4gdGhpcyBjb250ZXh0LmAsXG4gICAgICAgIGFjdGlvblR5cGVOb3RBbGxvd2VkOiAodHlwZU5hbWU6IHN0cmluZykgPT4gYEFjdGlvbiB0eXBlIFwiJHt0eXBlTmFtZX1cIiBpcyBub3QgYWxsb3dlZCBpbiB0aGlzIGNvbnRleHQuYCxcbiAgICAgICAgaW52YWxpZFByb3BlcnR5VmFsdWU6ICh2YWx1ZTogYW55LCBwcm9wZXJ0eU5hbWU6IHN0cmluZykgPT4gYEludmFsaWQgdmFsdWUgXCIke3ZhbHVlfVwiIGZvciBwcm9wZXJ0eSBcIiR7cHJvcGVydHlOYW1lfVwiLmAsXG4gICAgICAgIHNob3dDYXJkTXVzdEhhdmVDYXJkOiAoKSA9PiBgXCJBbiBBY3Rpb24uU2hvd0NhcmQgbXVzdCBoYXZlIGl0cyBcImNhcmRcIiBwcm9wZXJ0eSBzZXQgdG8gYSB2YWxpZCBBZGFwdGl2ZUNhcmQgb2JqZWN0LmAsXG4gICAgICAgIGludmFsaWRDb2x1bW5XaWR0aDogKGludmFsaWRXaWR0aDogc3RyaW5nKSA9PiBgSW52YWxpZCBjb2x1bW4gd2lkdGggXCIke2ludmFsaWRXaWR0aH1cIiAtIGRlZmF1bHRpbmcgdG8gXCJhdXRvXCIuYCxcbiAgICAgICAgaW52YWxpZENhcmRWZXJzaW9uOiAoZGVmYXVsdGluZ1RvVmVyc2lvbjogc3RyaW5nKSA9PiBgSW52YWxpZCBjYXJkIHZlcnNpb24uIERlZmF1bHRpbmcgdG8gXCIke2RlZmF1bHRpbmdUb1ZlcnNpb259XCIuYCxcbiAgICAgICAgaW52YWxpZFZlcnNpb25TdHJpbmc6ICh2ZXJzaW9uU3RyaW5nOiBzdHJpbmcpID0+IGBJbnZhbGlkIHZlcnNpb24gc3RyaW5nIFwiJHt2ZXJzaW9uU3RyaW5nfVwiLmAsXG4gICAgICAgIHByb3BlcnR5VmFsdWVOb3RTdXBwb3J0ZWQ6ICh2YWx1ZTogYW55LCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgc3VwcG9ydGVkSW5WZXJzaW9uOiBzdHJpbmcsIHZlcnNpb25Vc2VkOiBzdHJpbmcpID0+IGBWYWx1ZSBcIiR7dmFsdWV9XCIgZm9yIHByb3BlcnR5IFwiJHtwcm9wZXJ0eU5hbWV9XCIgaXMgc3VwcG9ydGVkIGluIHZlcnNpb24gJHtzdXBwb3J0ZWRJblZlcnNpb259LCBidXQgeW91IGFyZSB1c2luZyB2ZXJzaW9uICR7dmVyc2lvblVzZWR9LmAsXG4gICAgICAgIHByb3BlcnR5Tm90U3VwcG9ydGVkOiAocHJvcGVydHlOYW1lOiBzdHJpbmcsIHN1cHBvcnRlZEluVmVyc2lvbjogc3RyaW5nLCB2ZXJzaW9uVXNlZDogc3RyaW5nKSA9PiBgUHJvcGVydHkgXCIke3Byb3BlcnR5TmFtZX1cIiBpcyBzdXBwb3J0ZWQgaW4gdmVyc2lvbiAke3N1cHBvcnRlZEluVmVyc2lvbn0sIGJ1dCB5b3UgYXJlIHVzaW5nIHZlcnNpb24gJHt2ZXJzaW9uVXNlZH0uYCxcbiAgICAgICAgaW5kZXhPdXRPZlJhbmdlOiAoaW5kZXg6IG51bWJlcikgPT4gYEluZGV4IG91dCBvZiByYW5nZSAoJHtpbmRleH0pLmAsXG4gICAgICAgIGVsZW1lbnRDYW5ub3RCZVVzZWRBc0lubGluZTogKCkgPT4gXCJSaWNoVGV4dEJsb2NrLmFkZElubGluZTogdGhlIHNwZWNpZmllZCBjYXJkIGVsZW1lbnQgY2Fubm90IGJlIHVzZWQgYXMgYSBSaWNoVGV4dEJsb2NrIGlubGluZS5cIixcbiAgICAgICAgaW5saW5lQWxyZWFkeVBhcmVudGVkOiAoKSA9PiBcIlJpY2hUZXh0QmxvY2suYWRkSW5saW5lOiB0aGUgc3BlY2lmaWVkIGlubGluZSBhbHJlYWR5IGJlbG9uZ3MgdG8gYW5vdGhlciBSaWNoVGV4dEJsb2NrLlwiLFxuICAgICAgICBpbnRlcmFjdGl2aXR5Tm90QWxsb3dlZDogKCkgPT4gXCJJbnRlcmFjdGl2aXR5IGlzIG5vdCBhbGxvd2VkLlwiLFxuICAgICAgICBpbnB1dHNNdXN0SGF2ZVVuaXF1ZUlkOiAoKSA9PiBcIkFsbCBpbnB1dHMgbXVzdCBoYXZlIGEgdW5pcXVlIElkLlwiLFxuICAgICAgICBjaG9pY2VTZXRNdXN0SGF2ZUF0TGVhc3RPbmVDaG9pY2U6ICgpID0+IFwiQW4gSW5wdXQuQ2hvaWNlU2V0IG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgY2hvaWNlIGRlZmluZWQuXCIsXG4gICAgICAgIGNob2ljZVNldENob2ljZXNNdXN0SGF2ZVRpdGxlQW5kVmFsdWU6ICgpID0+IFwiQWxsIGNob2ljZXMgaW4gYW4gSW5wdXQuQ2hvaWNlU2V0IG11c3QgaGF2ZSB0aGVpciB0aXRsZSBhbmQgdmFsdWUgcHJvcGVydGllcyBzZXQuXCIsXG4gICAgICAgIHByb3BlcnR5TXVzdEJlU2V0OiAocHJvcGVydHlOYW1lOiBzdHJpbmcpID0+IGBQcm9wZXJ0eSBcIiR7cHJvcGVydHlOYW1lfVwiIG11c3QgYmUgc2V0LmAsXG4gICAgICAgIGFjdGlvbkh0dHBIZWFkZXJzTXVzdEhhdmVOYW1lQW5kVmFsdWU6ICgpID0+IFwiQWxsIGhlYWRlcnMgb2YgYW4gQWN0aW9uLkh0dHAgbXVzdCBoYXZlIHRoZWlyIG5hbWUgYW5kIHZhbHVlIHByb3BlcnRpZXMgc2V0LlwiLFxuICAgICAgICB0b29NYW55QWN0aW9uczogKG1heGltdW1BY3Rpb25zOiBudW1iZXIpID0+IGBNYXhpbXVtIG51bWJlciBvZiBhY3Rpb25zIGV4Y2VlZGVkICgke21heGltdW1BY3Rpb25zfSkuYCxcbiAgICAgICAgY29sdW1uQWxyZWFkeUJlbG9uZ3NUb0Fub3RoZXJTZXQ6ICgpID0+IFwiVGhpcyBjb2x1bW4gYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgQ29sdW1uU2V0LlwiLFxuICAgICAgICBpbnZhbGlkQ2FyZFR5cGU6ICgpID0+IGBJbnZhbGlkIG9yIG1pc3NpbmcgY2FyZCB0eXBlLiBNYWtlIHN1cmUgdGhlIGNhcmQncyB0eXBlIHByb3BlcnR5IGlzIHNldCB0byBcIkFkYXB0aXZlQ2FyZFwiLmAsXG4gICAgICAgIHVuc3VwcG9ydGVkQ2FyZFZlcnNpb246ICh2ZXJzaW9uOiBzdHJpbmcsIG1heFN1cHBvcnRlZFZlcnNpb246IHN0cmluZykgPT4gYFRoZSBzcGVjaWZpZWQgY2FyZCB2ZXJzaW9uICgke3ZlcnNpb259KSBpcyBub3Qgc3VwcG9ydGVkLiBUaGUgbWF4aW11bSBzdXBwb3J0ZWQgY2FyZCB2ZXJzaW9uIGlzICR7bWF4U3VwcG9ydGVkVmVyc2lvbn0uYCxcbiAgICAgICAgZHVwbGljYXRlSWQ6IChpZDogc3RyaW5nKSA9PiBgRHVwbGljYXRlIElkIFwiJHtpZH1cIi5gLFxuICAgICAgICBtYXJrZG93blByb2Nlc3NpbmdOb3RFbmFibGVkOiAoKSA9PiBcIk1hcmtkb3duIHByb2Nlc3NpbmcgaXNuJ3QgZW5hYmxlZC4gUGxlYXNlIHNlZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9hZGFwdGl2ZWNhcmRzI3N1cHBvcnRpbmctbWFya2Rvd25cIixcbiAgICAgICAgcHJvY2Vzc01hcmtkb3duRXZlbnRSZW1vdmVkOiAoKSA9PiBcIlRoZSBwcm9jZXNzTWFya2Rvd24gZXZlbnQgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUgYW5kIHNldCBvblByb2Nlc3NNYXJrZG93biBpbnN0ZWFkLlwiLFxuICAgICAgICBlbGVtZW50QWxyZWFkeVBhcmVudGVkOiAoKSA9PiBcIlRoZSBlbGVtZW50IGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIGNvbnRhaW5lci5cIixcbiAgICAgICAgYWN0aW9uQWxyZWFkeVBhcmVudGVkOiAoKSA9PiBcIlRoZSBhY3Rpb24gYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgZWxlbWVudC5cIixcbiAgICAgICAgZWxlbWVudFR5cGVOb3RTdGFuZGFsb25lOiAodHlwZU5hbWU6IHN0cmluZykgPT4gYEVsZW1lbnRzIG9mIHR5cGUgJHt0eXBlTmFtZX0gY2Fubm90IGJlIHVzZWQgYXMgc3RhbmRhbG9uZSBlbGVtZW50cy5gXG4gICAgfTtcbiAgICBzdGF0aWMgcmVhZG9ubHkgaGludHMgPSB7XG4gICAgICAgIGRvbnRVc2VXZWlnaHRlZEFuZFN0cmVjdGhlZENvbHVtbnNJblNhbWVTZXQ6ICgpID0+IFwiSXQgaXMgbm90IHJlY29tbWVuZGVkIHRvIHVzZSB3ZWlnaHRlZCBhbmQgc3RyZXRjaGVkIGNvbHVtbnMgaW4gdGhlIHNhbWUgQ29sdW1uU2V0LCBiZWNhdXNlIGluIHN1Y2ggYSBzaXR1YXRpb24gc3RyZXRjaGVkIGNvbHVtbnMgd2lsbCBhbHdheXMgZ2V0IHRoZSBtaW5pbXVtIGFtb3VudCBvZiBzcGFjZS5cIlxuICAgIH1cbn1cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUZXh0Rm9ybWF0dGVyIHtcbiAgICBwcml2YXRlIF9yZWd1bGFyRXhwcmVzc2lvbjogUmVnRXhwO1xuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGludGVybmFsRm9ybWF0KGxhbmc6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0Y2hlczogUmVnRXhwRXhlY0FycmF5KTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocmVndWxhckV4cHJlc3Npb246IFJlZ0V4cCkge1xuICAgICAgICB0aGlzLl9yZWd1bGFyRXhwcmVzc2lvbiA9IHJlZ3VsYXJFeHByZXNzaW9uO1xuICAgIH1cblxuICAgIGZvcm1hdChsYW5nOiBzdHJpbmcgfCB1bmRlZmluZWQsIGlucHV0OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgbWF0Y2hlcztcblxuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBpbnB1dDtcblxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaGVzID0gdGhpcy5fcmVndWxhckV4cHJlc3Npb24uZXhlYyhpbnB1dCkpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShtYXRjaGVzWzBdLCB0aGlzLmludGVybmFsRm9ybWF0KGxhbmcsIG1hdGNoZXMpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIERhdGVGb3JtYXR0ZXIgZXh0ZW5kcyBBYnN0cmFjdFRleHRGb3JtYXR0ZXIge1xuICAgIHByb3RlY3RlZCBpbnRlcm5hbEZvcm1hdChsYW5nOiBzdHJpbmcgfCB1bmRlZmluZWQsIG1hdGNoZXM6IFJlZ0V4cEV4ZWNBcnJheSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShtYXRjaGVzWzFdKSk7XG4gICAgICAgIGxldCBmb3JtYXQgPSBtYXRjaGVzWzJdICE9IHVuZGVmaW5lZCA/IG1hdGNoZXNbMl0udG9Mb3dlckNhc2UoKSA6IFwiY29tcGFjdFwiO1xuXG4gICAgICAgIGlmIChmb3JtYXQgIT0gXCJjb21wYWN0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhsYW5nLCB7IGRheTogXCJudW1lcmljXCIsIHdlZWtkYXk6IGZvcm1hdCwgbW9udGg6IGZvcm1hdCwgeWVhcjogXCJudW1lcmljXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgVGltZUZvcm1hdHRlciBleHRlbmRzIEFic3RyYWN0VGV4dEZvcm1hdHRlciB7XG4gICAgcHJvdGVjdGVkIGludGVybmFsRm9ybWF0KGxhbmc6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0Y2hlczogUmVnRXhwRXhlY0FycmF5KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKG1hdGNoZXNbMV0pKTtcblxuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcobGFuZywgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRleHQobGFuZzogc3RyaW5nIHwgdW5kZWZpbmVkLCB0ZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGZvcm1hdHRlcnM6IEFic3RyYWN0VGV4dEZvcm1hdHRlcltdID0gW1xuICAgICAgICBuZXcgRGF0ZUZvcm1hdHRlcigvXFx7ezJ9REFURVxcKChcXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfSg/Olp8KD86KD86LXxcXCspXFxkezJ9OlxcZHsyfSkpKSg/OiwgPyhDT01QQUNUfExPTkd8U0hPUlQpKT9cXClcXH17Mn0vZyksXG4gICAgICAgIG5ldyBUaW1lRm9ybWF0dGVyKC9cXHt7Mn1USU1FXFwoKFxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9KD86WnwoPzooPzotfFxcKylcXGR7Mn06XFxkezJ9KSkpXFwpXFx9ezJ9L2cpXG4gICAgXTtcblxuICAgIGxldCByZXN1bHQgPSB0ZXh0O1xuXG4gICAgZm9yIChsZXQgZm9ybWF0dGVyIG9mIGZvcm1hdHRlcnMpIHtcbiAgICAgICAgcmVzdWx0ID0gZm9ybWF0dGVyLmZvcm1hdChsYW5nLCByZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCAqIGFzIEVudW1zIGZyb20gXCIuL2VudW1zXCI7XG5pbXBvcnQgKiBhcyBTaGFyZWQgZnJvbSBcIi4vc2hhcmVkXCI7XG5pbXBvcnQgeyBIb3N0Q29uZmlnIH0gZnJvbSBcIi4vaG9zdC1jb25maWdcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlT1MoKTogYm9vbGVhbiB7XG4gICAgbGV0IHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gICAgcmV0dXJuICEhdXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpIHx8ICEhdXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpIHx8ICEhdXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBVVUlEIHByZXBlbmRlZCB3aXRoIFwiX19hYy1cIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIl9fYWMtXCIgKyBTaGFyZWQuVVVJRC5nZW5lcmF0ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kQ2hpbGQobm9kZTogTm9kZSwgY2hpbGQ6IE5vZGUgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmcob2JqOiBhbnksIGRlZmF1bHRWYWx1ZT86IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCIgPyBvYmogOiBkZWZhdWx0VmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlcihvYmo6IGFueSwgZGVmYXVsdFZhbHVlPzogbnVtYmVyKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIiA/IG9iaiA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbCh2YWx1ZTogYW55LCBkZWZhdWx0VmFsdWU/OiBib29sZWFuKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgc3dpdGNoICh2YWx1ZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwidHJ1ZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSBcImZhbHNlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZUJ5TmFtZShlbnVtVHlwZTogeyBbczogbnVtYmVyXTogc3RyaW5nIH0sIG5hbWU6IHN0cmluZykgOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGZvciAobGV0IGtleSBpbiBlbnVtVHlwZSkge1xuICAgICAgICBsZXQga2V5QXNOdW1iZXIgPSBwYXJzZUludChrZXksIDEwKTtcblxuICAgICAgICBpZiAoa2V5QXNOdW1iZXIgPj0gMCkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gZW51bVR5cGVba2V5XTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5QXNOdW1iZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VFbnVtKGVudW1UeXBlOiB7IFtzOiBudW1iZXJdOiBzdHJpbmcgfSwgbmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBudW1iZXIpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIGxldCBlbnVtVmFsdWUgPSBnZXRFbnVtVmFsdWVCeU5hbWUoZW51bVR5cGUsIG5hbWUpO1xuXG4gICAgcmV0dXJuIGVudW1WYWx1ZSAhPT0gdW5kZWZpbmVkID8gZW51bVZhbHVlIDogZGVmYXVsdFZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2VwYXJhdGlvbihob3N0Q29uZmlnOiBIb3N0Q29uZmlnLCBzZXBhcmF0aW9uRGVmaW5pdGlvbjogU2hhcmVkLklTZXBhcmF0aW9uRGVmaW5pdGlvbiwgb3JpZW50YXRpb246IEVudW1zLk9yaWVudGF0aW9uKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgIGlmIChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nID4gMCB8fCAoc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZVRoaWNrbmVzcyAmJiBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzID4gMCkpIHtcbiAgICAgICAgbGV0IHNlcGFyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNlcGFyYXRvci5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1cIiArIChvcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIpICsgXCItc2VwYXJhdG9yXCIpO1xuXG4gICAgICAgIGxldCBjb2xvciA9IHNlcGFyYXRpb25EZWZpbml0aW9uLmxpbmVDb2xvciA/IHN0cmluZ1RvQ3NzQ29sb3Ioc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZUNvbG9yKSA6IFwiXCI7XG5cbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcbiAgICAgICAgICAgIGlmIChzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzKSB7XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLnBhZGRpbmdUb3AgPSAoc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyAvIDIpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAoc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyAvIDIpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5ib3JkZXJCb3R0b20gPSBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzICsgXCJweCBzb2xpZCBcIiArIGNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmhlaWdodCA9IHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZVRoaWNrbmVzcykge1xuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5wYWRkaW5nTGVmdCA9IChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nIC8gMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLm1hcmdpblJpZ2h0ID0gKHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUuYm9yZGVyUmlnaHQgPSBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzICsgXCJweCBzb2xpZCBcIiArIGNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLndpZHRoID0gc2VwYXJhdGlvbkRlZmluaXRpb24uc3BhY2luZyArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xuXG4gICAgICAgIHJldHVybiBzZXBhcmF0b3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQ3NzQ29sb3IoY29sb3I6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGxldCByZWdFeCA9IC8jKFswLTlBLUZdezJ9KShbMC05QS1GXXsyfSkoWzAtOUEtRl17Mn0pKFswLTlBLUZdezJ9KT8vZ2k7XG4gICAgICAgIGxldCBtYXRjaGVzID0gcmVnRXguZXhlYyhjb2xvcik7XG5cbiAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlc1s0XSkge1xuICAgICAgICAgICAgbGV0IGEgPSBwYXJzZUludChtYXRjaGVzWzFdLCAxNikgLyAyNTU7XG4gICAgICAgICAgICBsZXQgciA9IHBhcnNlSW50KG1hdGNoZXNbMl0sIDE2KTtcbiAgICAgICAgICAgIGxldCBnID0gcGFyc2VJbnQobWF0Y2hlc1szXSwgMTYpO1xuICAgICAgICAgICAgbGV0IGIgPSBwYXJzZUludChtYXRjaGVzWzRdLCAxNik7XG5cbiAgICAgICAgICAgIHJldHVybiBcInJnYmEoXCIgKyByICsgXCIsXCIgKyBnICsgXCIsXCIgKyBiICsgXCIsXCIgKyBhICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29sb3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cnVuY2F0ZShlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBtYXhIZWlnaHQ6IG51bWJlcixcbiAgICBsaW5lSGVpZ2h0PzogbnVtYmVyKSB7XG4gICAgbGV0IGZpdHMgPSAoKSA9PiB7XG4gICAgICAgIC8vIEFsbG93IGEgb25lIHBpeGVsIG92ZXJmbG93IHRvIGFjY291bnQgZm9yIHJvdW5kaW5nIGRpZmZlcmVuY2VzXG4gICAgICAgIC8vIGJldHdlZW4gYnJvd3NlcnNcbiAgICAgICAgcmV0dXJuIG1heEhlaWdodCAtIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID49IC0xLjA7XG4gICAgfTtcblxuICAgIGlmIChmaXRzKCkpIHJldHVybjtcblxuICAgIGxldCBmdWxsVGV4dCA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIGxldCB0cnVuY2F0ZUF0ID0gKGlkeDogYW55KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZnVsbFRleHQuc3Vic3RyaW5nKDAsIGlkeCkgKyAnLi4uJztcbiAgICB9XG5cbiAgICBsZXQgYnJlYWthYmxlSW5kaWNlcyA9IGZpbmRCcmVha2FibGVJbmRpY2VzKGZ1bGxUZXh0KTtcbiAgICBsZXQgbG8gPSAwO1xuICAgIGxldCBoaSA9IGJyZWFrYWJsZUluZGljZXMubGVuZ3RoO1xuICAgIGxldCBiZXN0QnJlYWtJZHggPSAwO1xuXG4gICAgLy8gRG8gYSBiaW5hcnkgc2VhcmNoIGZvciB0aGUgbG9uZ2VzdCBzdHJpbmcgdGhhdCBmaXRzXG4gICAgd2hpbGUgKGxvIDwgaGkpIHtcbiAgICAgICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoKGxvICsgaGkpIC8gMik7XG4gICAgICAgIHRydW5jYXRlQXQoYnJlYWthYmxlSW5kaWNlc1ttaWRdKTtcblxuICAgICAgICBpZiAoZml0cygpKSB7XG4gICAgICAgICAgICBiZXN0QnJlYWtJZHggPSBicmVha2FibGVJbmRpY2VzW21pZF07XG4gICAgICAgICAgICBsbyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaSA9IG1pZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRydW5jYXRlQXQoYmVzdEJyZWFrSWR4KTtcblxuICAgIC8vIElmIHdlIGhhdmUgZXh0cmEgcm9vbSwgdHJ5IHRvIGV4cGFuZCB0aGUgc3RyaW5nIGxldHRlciBieSBsZXR0ZXJcbiAgICAvLyAoY292ZXJzIHRoZSBjYXNlIHdoZXJlIHdlIGhhdmUgdG8gYnJlYWsgaW4gdGhlIG1pZGRsZSBvZiBhIGxvbmcgd29yZClcbiAgICBpZiAobGluZUhlaWdodCAmJiBtYXhIZWlnaHQgLSBlbGVtZW50LnNjcm9sbEhlaWdodCA+PSBsaW5lSGVpZ2h0IC0gMS4wKSB7XG4gICAgICAgIGxldCBpZHggPSBmaW5kTmV4dENoYXJhY3RlcihmdWxsVGV4dCwgYmVzdEJyZWFrSWR4KTtcblxuICAgICAgICB3aGlsZSAoaWR4IDwgZnVsbFRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnVuY2F0ZUF0KGlkeCk7XG5cbiAgICAgICAgICAgIGlmIChmaXRzKCkpIHtcbiAgICAgICAgICAgICAgICBiZXN0QnJlYWtJZHggPSBpZHg7XG4gICAgICAgICAgICAgICAgaWR4ID0gZmluZE5leHRDaGFyYWN0ZXIoZnVsbFRleHQsIGlkeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRydW5jYXRlQXQoYmVzdEJyZWFrSWR4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRCcmVha2FibGVJbmRpY2VzKGh0bWw6IHN0cmluZyk6IG51bWJlcltdIHtcbiAgICBsZXQgcmVzdWx0czogbnVtYmVyW10gPSBbXTtcbiAgICBsZXQgaWR4ID0gZmluZE5leHRDaGFyYWN0ZXIoaHRtbCwgLTEpO1xuXG4gICAgd2hpbGUgKGlkeCA8IGh0bWwubGVuZ3RoKSB7XG4gICAgICAgIGlmIChodG1sW2lkeF0gPT0gJyAnKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goaWR4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlkeCA9IGZpbmROZXh0Q2hhcmFjdGVyKGh0bWwsIGlkeCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGZpbmROZXh0Q2hhcmFjdGVyKGh0bWw6IHN0cmluZywgY3VycklkeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjdXJySWR4ICs9IDE7XG5cbiAgICAvLyBJZiB3ZSBmb3VuZCB0aGUgc3RhcnQgb2YgYW4gSFRNTCB0YWcsIGtlZXAgYWR2YW5jaW5nIHVudGlsIHdlIGdldFxuICAgIC8vIHBhc3QgaXQsIHNvIHdlIGRvbid0IGVuZCB1cCB0cnVuY2F0aW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHRhZ1xuICAgIHdoaWxlIChjdXJySWR4IDwgaHRtbC5sZW5ndGggJiYgaHRtbFtjdXJySWR4XSA9PSAnPCcpIHtcbiAgICAgICAgd2hpbGUgKGN1cnJJZHggPCBodG1sLmxlbmd0aCAmJiBodG1sW2N1cnJJZHgrK10gIT0gJz4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3VycklkeDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpdFN0YXR1cyhlbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGFpbmVyRW5kOiBudW1iZXIpOiBFbnVtcy5Db250YWluZXJGaXRTdGF0dXMge1xuICAgIGxldCBzdGFydCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xuICAgIGxldCBlbmQgPSBzdGFydCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgaWYgKGVuZCA8PSBjb250YWluZXJFbmQpIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseUluQ29udGFpbmVyO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGFydCA8IGNvbnRhaW5lckVuZCkge1xuICAgICAgICByZXR1cm4gRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLk92ZXJmbG93aW5nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseU91dE9mQ29udGFpbmVyO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=